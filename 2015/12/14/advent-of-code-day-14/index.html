<!doctype html><html><head><title>Advent of Code: Day 14 â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_17422284542669262002.min.834c1e2313951f0c25b90152fe8b62250eab4a2e8cbd2560fa1a1cdc91c71733.js integrity="sha256-g0weIxOVHwwluQFS/otiJQ6rSi6MvSVg+hoc3JHHFzM=" defer></script><script src=/jquery.fancybox_16245765822111608191.min.ef050764ff69f3287c89ff655825479dd8304dcd9bc653d1ddd4772a701ad445.js integrity="sha256-7wUHZP9p8yh8if9lWCVHndgwTc2bxlPR3dR3KnAa1EU=" defer></script><script src=/katex_17296078054267651618.min.deed0e78a77391517d530a00324ce7b760ac204134992ef22d36f583615ae498.js integrity="sha256-3u0OeKdzkVF9UwoAMkznt2CsIEE0mS7yLTb1g2Fa5Jg=" defer></script><script src=/auto-render_14944144240389301023.min.e694d9d5eae2917984179683ead27b998784a81398e8836c369373d2c67fc32a.js integrity="sha256-5pTZ1erikXmEF5aD6tJ7mYeEqBOY6INsNpNz0sZ/wyo=" defer></script><script src=/bigfoot_28293813221957978.min.af671f08986f0a2267c5a0cb2748b005489e47fa25f55479b200e2a563d23022.js integrity="sha256-r2cfCJhvCiJnxaDLJ0iwBUieR/ol9VR5sgDipWPSMCI=" defer></script><script src=/mermaid_9520146763733687737.min.bfe50b47c0387e3c3bf97ec5f338bba94f7ccb02f962a4aec8cf0b4d68c8434d.js integrity="sha256-v+ULR8A4fjw7+X7F8zi7qU98ywL5YqSuyM8LTWjIQ00=" defer></script><script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script><link rel=stylesheet href=/katex_13658330645258633971.min.64e42891d651aee0b8cd02ec9227ff271d37bcf06dae985d1acf0eba1623e850.css integrity="sha256-ZOQokdZRruC4zQLskif/Jx03vPBtrphdGs8OuhYj6FA="><link rel=stylesheet href=/bigfoot-default_8781527669040159104.min.0d2b289fa3451447692959fcee5676b846532fe7ab50ddc4660824c42d4adcd7.css integrity="sha256-DSson6NFFEdpKVn87lZ2uEZTL+erUN3EZggkxC1K3Nc="><link rel=stylesheet href=/jquery.fancybox_5330465509389191777.min.67505d77381ebd82623ab9296c1989c44ec828d867c00296e80e52ef860cac37.css integrity="sha256-Z1BddzgevYJiOrkpbBmJxE7IKNhnwAKW6A5S74YMrDc="><link rel=stylesheet href=/css_1846377409604050217.min.fffe842bc000dd1fe8661ac6427a392a08faa95e8edab1ea7fb98c5f8dac6a6f.css integrity="sha256-//6EK8AA3R/oZhrGQno5Kgj6qV6O2rHqf7mMX42sam8="><link rel=stylesheet href=/main.min.34a34d86b8aae11b989d80a1626629c053029d012419a1993cfb6c12ea175737.css integrity="sha256-NKNNhriq4RuYnYChYmYpwFMCnQEkGaGZPPtsEuoXVzc="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/home-automation/>Home Automation</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>Advent of Code: Day 14</h1><div class=entry-meta><span class=entry-date>2015-12-14</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2015/12/13/advent-of-code-day-13/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/python>Python</a><a href=https://blog.jverkamp.com/2015/12/15/advent-of-code-day-15/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2015/12/13/advent-of-code-day-13/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/advent-of-code>Advent of Code</a><a href=https://blog.jverkamp.com/2015/12/15/advent-of-code-day-15/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/series/>Series</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2015/12/13/advent-of-code-day-13/ class=previous-link></a><a class=taxonomy-value href=/series/advent-of-code-2015>Advent of Code 2015</a><a href=https://blog.jverkamp.com/2015/12/15/advent-of-code-day-15/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2015/12/13/advent-of-code-day-13/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2015/12/15/advent-of-code-day-15/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2015/12/13/advent-of-code-day-13/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2015/12/15/advent-of-code-day-15/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p><a href=http://adventofcode.com/2015/day/14>Source</a></p><p><strong>Part 1:</strong> Given a list of running patterns of the form <code>Comet can fly 14 km/s for 10 seconds, but then must rest for 127 seconds.</code>, determine who will be in the lead after <code>2503</code> seconds.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>simulation_time <span style=color:#f92672>=</span> int(sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> sys<span style=color:#f92672>.</span>stdin:
</span></span><span style=display:flex><span>    name, speed, time, rest <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span><span style=color:#66d9ef>match</span>(
</span></span><span style=display:flex><span>        <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;(\w+) can fly (\d+) km/s for (\d+) seconds, but then must rest for (\d+) seconds.&#39;</span>,
</span></span><span style=display:flex><span>        line
</span></span><span style=display:flex><span>    )<span style=color:#f92672>.</span>groups()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    data[name] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;speed&#39;</span>: int(speed),
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;running_time&#39;</span>: int(time),
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;resting_time&#39;</span>: int(rest),
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;distance&#39;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;resting&#39;</span>: <span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;timer&#39;</span>: int(time),
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> tick <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>, simulation_time <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> key <span style=color:#f92672>in</span> data:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> data[key][<span style=color:#e6db74>&#39;timer&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>            data[key][<span style=color:#e6db74>&#39;resting&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#f92672>not</span> data[key][<span style=color:#e6db74>&#39;resting&#39;</span>]
</span></span><span style=display:flex><span>            data[key][<span style=color:#e6db74>&#39;timer&#39;</span>] <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>                data[key][<span style=color:#e6db74>&#39;resting_time&#39;</span>]
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> data[key][<span style=color:#e6db74>&#39;resting&#39;</span>]
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span> data[key][<span style=color:#e6db74>&#39;running_time&#39;</span>]
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> data[key][<span style=color:#e6db74>&#39;resting&#39;</span>]:
</span></span><span style=display:flex><span>            data[key][<span style=color:#e6db74>&#39;distance&#39;</span>] <span style=color:#f92672>+=</span> data[key][<span style=color:#e6db74>&#39;speed&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        data[key][<span style=color:#e6db74>&#39;timer&#39;</span>] <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(max(
</span></span><span style=display:flex><span>    (data[key][<span style=color:#e6db74>&#39;distance&#39;</span>], key)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> key <span style=color:#f92672>in</span> data
</span></span><span style=display:flex><span>))
</span></span></code></pre></div><p>Originally, I was going to use a <a href=https://en.wikipedia.org/wiki/priority%20queue>priority queue</a> for this one. That would have let me put each next event (switching from running to resting or vice versa) in the queue and always pull off the next one to happen. Unfortunately, that made the code path right around stopping a bit complicated, since if one was running at the moment the race ends, they only update partially.</p><p>Instead, we just have a simulation that once per second will update the state (when <code>data[key]['timer'] == 0</code>), the distance (when )<code>not data[key]['resting']</code>), and the <code>timer</code>. Relatively straight forward. The one remaining amusing part is the ordering of the two <code>if</code> statements. If they&rsquo;re in the other order, you have an off-by-one problem where you should be running but have already changed state to <code>resting</code>.</p><p><strong>Part 2:</strong> Run the same simulation, but after each round award one point to whoever is in first place (one to each in the case of ties). Determine who has the highest score.</p><p>For the most part, the code doesn&rsquo;t change. Basically, we&rsquo;re going to add one more field to each entry in <code>data</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>data[name] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;score&#39;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><p>Then we can use the same code that we had earlier to find the highest distance. Unfortunately, we cannot just increment that one because of ties; instead we have to loop:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>for</span> tick <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>, simulation_time <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>  <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  max_distance, max_name <span style=color:#f92672>=</span> max((data[key][<span style=color:#e6db74>&#39;distance&#39;</span>], key) <span style=color:#66d9ef>for</span> key <span style=color:#f92672>in</span> data)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> key <span style=color:#f92672>in</span> data:
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> data[key][<span style=color:#e6db74>&#39;distance&#39;</span>] <span style=color:#f92672>==</span> max_distance:
</span></span><span style=display:flex><span>          data[key][<span style=color:#e6db74>&#39;score&#39;</span>] <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>Then at the end, we print out the maximum <code>score</code> rather than <code>distance</code>.</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>