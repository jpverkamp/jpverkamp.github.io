<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>jverkamp.com</title><link href="//blog.jverkamp.com" /><link rel="self" href="//blog.jverkamp.com/feed/" /><updated>2016-04-19T00:00:00Z</updated><author><name>JP Verkamp</name></author><id>urn:uuid:b26bbc31-d1d1-3557-055d-3c47073ed3bd</id><entry><title>Ensuring docker-machine is running</title><link href="//blog.jverkamp.com/2016/04/19/ensuring-docker-machine-is-running" /><id>urn:uuid:0e62eb30-f56c-7441-a014-2f509ef5d9d5</id><updated>2016-04-19T00:00:00Z</updated><summary type="html"><![CDATA[<p>When developing using <a href="https://www.docker.com/">docker</a> on OS X, you'll currently<span class="footnote"><sup><a href="#footnote-1">[1]</a></sup></span> have to use <a href="https://docs.docker.com/machine/">docker-machine</a> to spin up a virtual machine that is actually running the docker containers. Running a virtual machine takes up a bit more in the way of resources than just the docker containers, so if you're not actually developing at the moment, it's helpful to be able to start up the virtual machine only when you need it.</p>
<p>The current way I have to do that:</p>
<pre class="bash"><code>$ docker-machine start default
$ eval $(docker-machine env default)</code></pre>
<p>What's worse, the latter command has to be run for every shell that you start up. It's by no means a hard pair of commands and you could easily wrap them in an alias or put them in your <code>.profile</code> equivalent (which is what I used to do). But unfortunately, I found a completely unrelated bug in <a href="https://github.com/tony/tmuxp"><code>tmuxp</code></a>: if the shell takes too long to start up, <code>tmuxp</code> essentially won't work. The above <code>eval</code> command took long enough to hit this limit.</p>
]]></summary><content type="html"><![CDATA[<p>When developing using <a href="https://www.docker.com/">docker</a> on OS X, you'll currently<span class="footnote"><sup><a href="#footnote-1">[1]</a></sup></span> have to use <a href="https://docs.docker.com/machine/">docker-machine</a> to spin up a virtual machine that is actually running the docker containers. Running a virtual machine takes up a bit more in the way of resources than just the docker containers, so if you're not actually developing at the moment, it's helpful to be able to start up the virtual machine only when you need it.</p>
<p>The current way I have to do that:</p>
<pre class="bash"><code>$ docker-machine start default
$ eval $(docker-machine env default)</code></pre>
<p>What's worse, the latter command has to be run for every shell that you start up. It's by no means a hard pair of commands and you could easily wrap them in an alias or put them in your <code>.profile</code> equivalent (which is what I used to do). But unfortunately, I found a completely unrelated bug in <a href="https://github.com/tony/tmuxp"><code>tmuxp</code></a>: if the shell takes too long to start up, <code>tmuxp</code> essentially won't work. The above <code>eval</code> command took long enough to hit this limit.</p>
<!--more-->
<p>So how do we fix it? Essentially (using <a href="http://www.zsh.org/">zsh</a>, my current shell of choice, although others should be similar):</p>
<pre class="zsh"><code>assert-docker() {
    command docker ps 2&gt; /dev/null &gt; /dev/null
    if [ $? -ne 0 ]; then
        echo "Starting docker..."
        docker-machine start default
        eval $(docker-machine env default)
        echo
    fi
}

docker () { assert-docker && command docker $@ }
docker-compose () { assert-docker && command docker-compose $@ }</code></pre>
<p>The basic idea is that <code>assert-docker</code> first checks if <code>docker</code> is running by trying to run <code>docker ps</code>. <code>$?</code> contains the status code, which will be non-zero if <code>docker ps</code> failed, so check that. If that's the case, assume <code>docker ps</code> failed because <code>docker-machine</code> wasn't running, so start it up. This will run <code>docker-machine start default</code> more often than needed, but it turns out it's a <code><a href="https://en.wikipedia.org/wiki/NOP">NOP</a></code> if it's already running.</p>
<p>The only interesting part here is the use of the keyword <code>command</code> that prefixes <code>docker</code> or <code>docker-machine</code> within the functions. Basically, this tells ZSH to use the system version of <code>docker</code> or <code>docker-compose</code> rather than the one that I defined, thus preventing an infinite loop. Whee!</p>
<p>How's it work?</p>
<pre class="bash"><code>$ docker ps

Starting docker...
(dev) OUT | Starting VM...
Started machines may have new IP addresses. You may need to re-run the &lt;code&gt;docker-machine env&lt;/code&gt; command.

CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

$ docker ps

CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</code></pre>
<p>Switching to another terminal:</p>
<pre class="bash"><code>$ docker ps

Starting docker...
Machine "default" is already running.

CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

$ docker ps

CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</code></pre>
<p>Neat. That should <a href="https://xkcd.com/1205/">eventually save me a fraction of the time</a> it took to get it right. :)</p>]]></content></entry><entry><title>Raindrops Etc</title><link href="//blog.jverkamp.com/2016/04/10/raindrops-etc" /><id>urn:uuid:adae5824-6f08-ecd4-8091-e8a1bf311896</id><updated>2016-04-10T00:00:00Z</updated><summary type="html"><![CDATA[<p>Another rainy day. I love taking pictures on such days.</p>
<div><div class="flickr-gallery" data-set-id="72157664723193864" data-per-page="30"></div><p><a href="https://flickr.com/photos/jpverkamp/sets/72157664723193864">View on Flickr</a></p></div>]]></summary><content type="html"><![CDATA[<p>Another rainy day. I love taking pictures on such days.</p>
<div><div class="flickr-gallery" data-set-id="72157664723193864" data-per-page="30"></div><p><a href="https://flickr.com/photos/jpverkamp/sets/72157664723193864">View on Flickr</a></p></div>]]></content></entry><entry><title>Mission Basilica San Diego de Alcalá</title><link href="//blog.jverkamp.com/2016/04/04/mission-basilica-san-diego-de-alcala" /><id>urn:uuid:9c28e0c4-8ebf-6e26-0cd8-7af52c3fb763</id><updated>2016-04-04T00:05:00Z</updated><summary type="html"><![CDATA[<p>California's first mission. Quite the history. Very pretty.</p>
<div><div class="flickr-gallery" data-set-id="72157666293836000" data-per-page="30"></div><p><a href="https://flickr.com/photos/jpverkamp/sets/72157666293836000">View on Flickr</a></p></div>]]></summary><content type="html"><![CDATA[<p>California's first mission. Quite the history. Very pretty.</p>
<div><div class="flickr-gallery" data-set-id="72157666293836000" data-per-page="30"></div><p><a href="https://flickr.com/photos/jpverkamp/sets/72157666293836000">View on Flickr</a></p></div>]]></content></entry><entry><title>Kingkiller Chronicle</title><link href="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle" /><id>urn:uuid:e93146d9-8751-a44d-7d93-01ceae5c15c7</id><updated>2016-03-10T00:00:00Z</updated><summary type="html"><![CDATA[<p><a href="https://www.goodreads.com/book/show/186074.The_Name_of_the_Wind"><img src="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle/1-name-of-the-wind.jpg" /></a> <a href="https://www.goodreads.com/book/show/1215032.The_Wise_Man_s_Fear"><img src="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle/2-wise-mans-fear.jpg" /></a> <a href="https://www.goodreads.com/book/show/21535271-the-slow-regard-of-silent-things"><img src="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle/2.5-slow-regard-of-silent-things.jpg" /></a></p>
<p>Next up: <a href="https://www.goodreads.com/series/45262-the-kingkiller-chronicle">The Kingkiller Chronicle</a> by <a href="https://www.goodreads.com/author/show/108424.Patrick_Rothfuss">Patrick Rothfuss</a>. It comes extremely highly recommended by a lot of people, so I figure that I was going to have to read it at some point.</p>
<p>Honestly, my response to it is conflicted. On one hand, it's an interesting fantasy world with a lot of rich world building and very solid writing (mechanically). On the other hand, the first book is huge, the second is time and a half as large... And it feels at times like nothing overarchiving happens. Plenty of small things happen, but they each feel like several small novels (if not short stories) stuck together end to end. I'm still not sure what I think about that.</p>
]]></summary><content type="html"><![CDATA[<p><a href="https://www.goodreads.com/book/show/186074.The_Name_of_the_Wind"><img src="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle/1-name-of-the-wind.jpg" /></a> <a href="https://www.goodreads.com/book/show/1215032.The_Wise_Man_s_Fear"><img src="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle/2-wise-mans-fear.jpg" /></a> <a href="https://www.goodreads.com/book/show/21535271-the-slow-regard-of-silent-things"><img src="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle/2.5-slow-regard-of-silent-things.jpg" /></a></p>
<p>Next up: <a href="https://www.goodreads.com/series/45262-the-kingkiller-chronicle">The Kingkiller Chronicle</a> by <a href="https://www.goodreads.com/author/show/108424.Patrick_Rothfuss">Patrick Rothfuss</a>. It comes extremely highly recommended by a lot of people, so I figure that I was going to have to read it at some point.</p>
<p>Honestly, my response to it is conflicted. On one hand, it's an interesting fantasy world with a lot of rich world building and very solid writing (mechanically). On the other hand, the first book is huge, the second is time and a half as large... And it feels at times like nothing overarchiving happens. Plenty of small things happen, but they each feel like several small novels (if not short stories) stuck together end to end. I'm still not sure what I think about that.</p>
<!--more-->
<hr />
<p><a href="https://www.goodreads.com/book/show/186074.The_Name_of_the_Wind"><img src="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle/1-name-of-the-wind.jpg" /></a></p>
<p>I've heard rather good things about this book, so figured I had to read it.</p>
<p>On the good end, it's an interesting fantasy world with something of its own take on worldbuilding, magic, and critters (near enough to various sources, but it still fresh to me). I particularly like how magic works. There are parts of it which are well understood by those who study such things and work more or less like technology. Then there are the truly fantastical bits, used by few and understood by fewer--but still with a hint of structure under it. I like it.</p>
<p>Another positive was how the story kept pulling you along. I wanted to know more about how the world worked and how Kvothe would get himself out of whatever trouble he had gotten into next. I wanted to know how a particular story actually happened, before it changed hands a thousand times or more.</p>
<p>The negative half of that though? Cliffhangers. I swear half the chapters in this book ended in the middle of a thought, only to either be resolved at the very beginning of the next chapter or put off until after an interlude. So far as I'm concerned, it's a way to keep me reading, but an annoying one.</p>
<p>And then there's Kvothe. Sigh. He's too good at just about everything that he puts his mind to. Youngest to do this, best at that, perfect this, etc. Even if it gets him into trouble more often than not, it's still annoying to try to read about.</p>
<p>After that, there wasn't much depth to any of the other characters. I can only really tell apart two of the masters (Elodin and the one in charge of the Archives) and of his friends and acquaintances? ¯\_(ツ)_/¯ D*nn* is supposed to be the best ever, but we never learn enough about her to care. Fela had hints of personality, but of course Kvothe doesn't care about that. Heck, Ambrose has the most personality of most of them and that's just to say he's anti-Kvothe.</p>
<p>Last but not least, the plot.</p>
<p>There wasn't one.</p>
<p>When things that could tangentially be described as plot finally started happening, I was surprised to find myself already 3/4 of the way through the book. And they never really went anywhere. I'm sure we'll eventually get some answers in a sequel... But if even a thousand page story cannot stand by itself...</p>
<p>All that said, I enjoyed it. I'll even read the sequel.</p>
<p>I'm hoping to get some answers... but I wouldn't bet on it.</p>
<hr />
<p><a href="https://www.goodreads.com/book/show/1215032.The_Wise_Man_s_Fear"><img src="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle/2-wise-mans-fear.jpg" /></a></p>
<p>And here I thought The Name of the Wind was a long book.</p>
<p>For the most part, everything that I wrote in <a href="https://www.goodreads.com/review/show/1411402558">my review of Name of the Wind</a> still holds true here. The worldbuilding is really cool (sygaldry in particular) and the writing itself just keeps pulling you along. I always wanted to know more.</p>
<p>On the other hand, The Wise Man's Fear is even worse about feeling like Rothfuss basically wrote several novels and basically stuck them together. You have Kvothe at the University, Kvothe and the Maer, Kvothe Hunts Bandits, Kvothe and the Fae, and Kvothe with the Adem. Each would have been a solid book by itself, and each actually has something of a traditional plot to it (with more solid conclusions than book as a whole had). But put them together and it just starts to feel like something of a slog.</p>
<p>I still don't overly care for Kvothe as a character. He's just too good at absolutely everything to be overly believable while at the same time being remarkably stupid a good part of the time. Each time he does something like that, I have to remind myself that he's only supposed to be a teenager and that actually makes sense... Which would be better if he acted like it the rest of the time. For a while there, I was hopeful that D*n* would realize she could do so much better... Alas.</p>
<p>So it goes.</p>
<p>I still enjoyed it and I'm still glad I read it. I've already started The Slow Regard of Silent Things and I'll certainly read Kingkiller #3 whenever it comes out.</p>
<hr />
<p><a href="https://www.goodreads.com/book/show/21535271-the-slow-regard-of-silent-things"><img src="//blog.jverkamp.com/2016/03/10/kingkiller-chronicle/2.5-slow-regard-of-silent-things.jpg" /></a></p>
<p><strong>Author's Foreward</strong>:</p>
<p><em>You might not want to buy this book.</em> ...</p>
<p>Yeah... I thought we were going to get a little more insight into the world of the Kingkiller Chronicles. A little more about the University. A little more about Auri.</p>
<p>I guess one out of three ain't bad?</p>
<p>Basically, it's Auri being strange and re-arranging junk. Also there's a riveting scene of Auri making soap.</p>
<p>On the more positive side, there is some rather beautiful wordplay here. That's one thing that Rothfuss can do particularly well: wrote evocative descriptions.</p>
<p>Honestly, I found the Endnote the most interesting. A star just for that. It's always interesting to see into the mind of a writer. I didn't find the story itself <em>"disconcerting, off-putting, or confusing"</em> but rather odd and boring. So it goes. It <em>probably just wasn't for [me]</em>.</p>
<p><strong>Author's Endnote</strong>:</p>
<p>... <em>If you're one of the peopel who found this story disconcerting, off-putting, or confusing, I apologize. The truth is, it probably just wasn't for you. The good news is that there are many other stories out there that are written for you. Stories that you will enjoy much more.</em></p>
<p><em>This story is for all the slightly broken people out there.</em></p>
<p><em>I am one of you. You are not alone. You are all beautiful to me.</em></p>
<hr />
<p>Next up, I'm going to be reading the unpublished novel White Sands by Brandon Sanderson (if you want to read it, it never hurts to ask...<span class="footnote"><sup><a href="#footnote-1">[1]</a></sup></span>). Since it's unpublished, I probably won't post a review of it. After that will be the <a href="https://www.goodreads.com/series/86731-nexus">Nexus</a> series by <a href="https://www.goodreads.com/author/show/160069.Ramez_Naam">Ramez Naam</a>.</p>]]></content></entry><entry><title>The Iron Druid Chronicles: Staked</title><link href="//blog.jverkamp.com/2016/03/05/the-iron-druid-chronicles-staked" /><id>urn:uuid:0b511ddf-60a8-c308-8e9e-15d2b31a4163</id><updated>2016-03-05T00:10:00Z</updated><summary type="html"><![CDATA[<p><a href="https://www.goodreads.com/book/show/16280689-staked"><img src="//blog.jverkamp.com/2016/03/05/the-iron-druid-chronicles-staked/staked.jpg" /></a></p>
<p>Well, this is something new. I read and reviewed the first seven books of <a href="//blog.jverkamp.com/2015/02/20/the-iron-druid-chronicles">The Iron Druid Chronicles</a> last year, but now there's a whole new book out. Since I wasn't yet doing individual reviews then, I'll go ahead and put up a new post for this one.</p>
]]></summary><content type="html"><![CDATA[<p><a href="https://www.goodreads.com/book/show/16280689-staked"><img src="//blog.jverkamp.com/2016/03/05/the-iron-druid-chronicles-staked/staked.jpg" /></a></p>
<p>Well, this is something new. I read and reviewed the first seven books of <a href="//blog.jverkamp.com/2015/02/20/the-iron-druid-chronicles">The Iron Druid Chronicles</a> last year, but now there's a whole new book out. Since I wasn't yet doing individual reviews then, I'll go ahead and put up a new post for this one.</p>
<!--more-->
<p>On the downside, Staked has pretty much the same issues I've had with each of the previous novels. I don't really care for the shifting points of view, either the style or the additional viewpoint characters themselves. I think the talking dogs are vastly overdone. The worldbuilding (although neat in a lot of places) is badly kitchen sinky, with literally everything thrown into the same world. And Atticus is just too strong. He's always been too strong from the first book and never felt like he had/has to work at anything.</p>
<p>On the upside, Staked has a lot of the same strengths as the previous Iron Druid novels. There's a heck of a lot of world building, taking on a lot of mythology I'm otherwise not that familiar with (Irish and Slavic mythology in particular). There's also a lot of really fun lines in these books. I've highlighted more sections from a Iron Druid novel than most other series all together... And that's enough to bring this right back up to four stars by itself. Here:</p>
<p><em>I had to suppress a shudder, because semi-sentient facial hair is viscerally disturbing.</em> (As an aside, those guys are among the coolest characters I've seen in urban fantasy.)</p>
<p><em>I had to skedaddle, which I think is the best possible word for getting the hell out when a poltergeist thinks you’ve jilted her.</em></p>
<p><em>"Defend the honor of your arse-munching couch.”</em></p>
<p><em>Normally I wouldn’t bother punching a stone. Your fingers would break long before the stone would, and rock doesn’t make any noises to let you know it’s hurt.</em></p>
<p><em>Purposefully seeking out a poltergeist might be one of the dumbest things I’ve ever done. Well, that and growing muttonchops.</em></p>
<p><em>The truth is, your smarts are better hidden than a pair of snake nuts.”</em></p>
<p><em>My skin stung all over with the raw thrill of exfoliation.</em></p>
<p><em>... and a shepherd with a small flock of sheep. ‹Fluffy meat,› Orlaith comments.</em></p>
<p><em>“Fecking stew me bollocks in the queen’s own cup o’ tea,</em></p>
<p><em>I had no problem disassembling vampires in plain view but didn’t want to truly terrify anyone with my full frontal nudity.</em></p>
<p><em>‹Hey, did that guy just call me gross?› Oberon asked. Yes, but that means big in French, as it does in German.</em></p>
<p><em>The saucier got saucy with me and demanded that I leave.</em></p>
<p><em>“Of course not. As the famous Vulcan said on more than one occasion, I wish for you to enjoy extreme old age and economic bounty.”</em></p>
<p><em>There’s harmony there to be found, and I’ll fight for it, and damn the paradox of fighting for peace.</em></p>
<p><em>“Yeah, I just asked where the weird was happening in the world, and she pointed me here. And look! You’re right next to it!”</em></p>
<p><em>Or, to be more specific, an unholy horde of Guilt Ferrets. They’re bastards.</em></p>
<p><em>“Since I’ve become a Druid, I’ve seen some pretty weird shit, Atticus,” Granuaile said, “but Beardy Baggins there squaring off against Squid Head McGee in the snow might be the weirdest.”</em></p>
<p><em>‹Yeah, finally! I’ve been wanting to tell you that I think you’re an amazing hound. I knew from the moment I first sniffed your ass that we would get along!›</em></p>
<p>So yeah. I'll keep on reading them if only for that. :)</p>
<p>Plus, I think there's only supposed to be one more? I want to see how it all ends. A lot of the plot lines were tied up rather happily by the end of Staked, but that only leaves the proverbial shit to really hit the fan when armageddon rolls around...</p>
<hr />
<p>Next up: <a href="https://www.goodreads.com/book/show/89187.Revelation_Space">Revelation Space</a> by <a href="https://www.goodreads.com/author/show/51204.Alastair_Reynolds">Alastair Reynolds</a>.</p>]]></content></entry><entry><title>Rainy Day Flowers</title><link href="//blog.jverkamp.com/2016/03/05/rainy-day-flowers" /><id>urn:uuid:9e0e307a-3726-2bec-5541-5451497af03c</id><updated>2016-03-05T00:05:00Z</updated><summary type="html"><![CDATA[<p>Rainy day. Flowers. What more to say?</p>
<div><div class="flickr-gallery" data-set-id="72157663180238583" data-per-page="30"></div><p><a href="https://flickr.com/photos/jpverkamp/sets/72157663180238583">View on Flickr</a></p></div>]]></summary><content type="html"><![CDATA[<p>Rainy day. Flowers. What more to say?</p>
<div><div class="flickr-gallery" data-set-id="72157663180238583" data-per-page="30"></div><p><a href="https://flickr.com/photos/jpverkamp/sets/72157663180238583">View on Flickr</a></p></div>]]></content></entry><entry><title>Audiobooks to Podcasts</title><link href="//blog.jverkamp.com/2016/02/26/audiobooks-to-podcasts" /><id>urn:uuid:cfe78150-139b-aa1d-01bd-c73e7e91fd17</id><updated>2016-02-26T00:05:00Z</updated><summary type="html"><![CDATA[<p>I've recently started to listen to audiobooks again (<a href="//blog.jverkamp.com/2016/02/10/the-aeronauts-windlass">The Aeronaut's Windlass</a>). If you buy books through Audible or some other setup that has their own app, it's a straight forward enough process. On the other hand, if you have them on CD and want to play them on a mobile device... It's a little more interesting.</p>
<p>I tried a few different apps that purport to do exactly what I wanted: import an audiobook as a folder full of MP3s and play them, but none that quite meet what I wanted. Since I also listen to a lot of podcasts and have more than one podcast app that I really like (I've used and liked both <a href="http://www.downcastapp.com/">Downcast</a> and <a href="http://www.shiftyjelly.com/pocketcasts">Pocket Casts</a>), I decided to see if I couldn't use one of those as an audiobook player.</p>
]]></summary><content type="html"><![CDATA[<p>I've recently started to listen to audiobooks again (<a href="//blog.jverkamp.com/2016/02/10/the-aeronauts-windlass">The Aeronaut's Windlass</a>). If you buy books through Audible or some other setup that has their own app, it's a straight forward enough process. On the other hand, if you have them on CD and want to play them on a mobile device... It's a little more interesting.</p>
<p>I tried a few different apps that purport to do exactly what I wanted: import an audiobook as a folder full of MP3s and play them, but none that quite meet what I wanted. Since I also listen to a lot of podcasts and have more than one podcast app that I really like (I've used and liked both <a href="http://www.downcastapp.com/">Downcast</a> and <a href="http://www.shiftyjelly.com/pocketcasts">Pocket Casts</a>), I decided to see if I couldn't use one of those as an audiobook player.</p>
<!--more-->
<p>My basic set up is one that I've used before. I'll use <a href="https://docs.docker.com/compose/">docker-compose</a> to run a web server running <a href="http://flask.pocoo.org/">flask</a> behind an <a href="https://www.nginx.com/resources/wiki/">nginx reverse proxy</a> (for performance reasons and to serve static files).</p>
<p>Basically, I want a server that when I hit it will give a list of all books in a folder. If I click any of those, it will generate an RSS feed that I can then give to my podcasting application. That in turn can make requests for any of the MP3 files that make up the book, which should be served back to the app. Simple as pie, no? Well, mostly.</p>
<p>Creating a list of books is easy:</p>
<pre class="python"><code>@app.route('/')
def index():
    result = '&lt;ul&gt;'

    for path in sorted(os.listdir('books')):
        config_path = os.path.join('books', path, 'book.yml')
        print(config_path)

        if not os.path.exists(config_path):
            continue

        with open(config_path, 'r') as fin:
            config = yaml.load(fin)

        result += '&lt;li&gt;&lt;a href="feed/{path}.xml"&gt;{title} by {author}&lt;/a&gt;&lt;/li&gt;'.format(
            path = path,
            title = config['title'],
            author = config['author']
        )

    result += '&lt;/ul&gt;'
    return result</code></pre>
<p>Note: Each book is a subdirectory of the folder <code>books</code>. Each book must also contain at least one file named <code>book.yml</code> which defines the <code>title</code> and <code>author</code> of the book, along with any number of MP3 files (we'll see that in a moment).</p>
<p>All this script does is generate an HTML unordered list (<code>ul</code>) of links to individual RSS feeds. We generate those in turn with:</p>
<pre class="python"><code>@app.route('/feed/&lt;feed&gt;.xml')
def get_feed(feed):
    config_path = os.path.join('books', feed, 'book.yml')

    with open(config_path, 'r') as fin:
        config = yaml.load(fin)

    fg = feedgen.feed.FeedGenerator()
    fg.load_extension('podcast')

    host_url = flask.request.scheme + '://' + flask.request.host

    feed_link = host_url + '/feed/{feed}.xml'.format(feed = feed)

    fg.id = feed_link
    fg.title(config['title'])
    fg.description('{title} by {author}'.format(title = config['title'], author = config['author']))
    fg.author(name = config['author'])
    fg.link(href = feed_link, rel = 'alternate')

    fg.podcast.itunes_category('Arts')

    for file in sorted(os.listdir(os.path.join('books', feed))):
        if not file.endswith('.mp3'):
            continue

        name = file.rsplit('.', 1)[0]

        feed_entry_link = host_url + '/feed/{feed}/{file}'.format(feed = feed, file = file)

        fe = fg.add_entry()

        fe.id(feed_entry_link)
        fe.title(name)
        fe.description('{title} by {author} - {chapter}'.format(
            title = config['title'],
            author = config['author'],
            chapter = name,
        ))
        fe.enclosure(feed_entry_link, 0, 'audio/mpeg')

    return fg.rss_str(pretty = True)</code></pre>
<p>Here, I basically just read in the <code>book.yml</code> file and any MP3s in the directory and generate a feed. As I did previously in my post on <a href="//blog.jverkamp.com/2015/05/11/generating-youtube-user-rss-feeds">Generating YouTube user RSS feeds</a>, I'm using the <a href="https://lkiesow.github.io/python-feedgen/">feedgen</a> package to generate the RSS feeds. This time I'm using their built in <code>podcast</code> extension. Nice.</p>
<p>After that, we just need to serve the MP3s. Originally I was going to serve this with flask as well, but since I'm already going to use nginx as a performance / caching layer, we can use that to serve static files. Something like this for an nginx configuration:</p>
<pre class="nginx"><code>server {
    root /var/www/;

    location / {
        try_files $uri @server;
    }

    location @server {
        proxy_set_header Host $host;
        proxy_pass http://server:5000;
    }
}</code></pre>
<p>Essentially, it will <code>try_files</code> to see if there's a static file at the path requested first. If that fails, it will fall back to the <code>@server</code> reverse proxy, which just feeds traffic to the flask server.</p>
<p>To get everything working together, we'll use docker-compose:</p>
<pre class="yaml"><code>server:
    build: server
    # environment: {DEBUG: True}
    ports:
        - 5000
    volumes:
        - ./books:/app/books

nginx:
    image: nginx
    links:
        - server
    ports:
        - 80:80
    volumes:
        - ./books:/var/www/feed/
        - ./nginx:/etc/nginx/conf.d/</code></pre>
<p>Since I'm mounting the <code>./books</code> directory as a volume into both containers, the <code>nginx</code> container can use it to server static files while the <code>server</code> container can use it to list files.</p>
<p>And that's about it. I have mine running with <a href="http://nginx.org/en/docs/http/ngx_http_auth_basic_module.html">nginx HTTP authentication </a>, which means that I have to use <a href="http://www.downcastapp.com/">Downcast</a> (it's the only one I've used that seems to support it), but other than that it works great. It does require that you have your own server running to initially get the files onto the podcast app, but if you download them, almost all of the apps will let you turn off the server.</p>
<p>The combination of flask and docker is nice. Flask let's you quickly and easily write simple web applications. Docker makes deployment and dependency management a snap.</p>
<p>If you'd like to see the entire codebase, it's on GitHub: <a href="https://github.com/jpverkamp/podbook">podbook</a>. There are a few bits that I didn't include in the writeup above.</p>
<p>Any questions? Let me know below.</p>]]></content></entry><entry><title>Revelation Space</title><link href="//blog.jverkamp.com/2016/02/26/revelation-space" /><id>urn:uuid:34c5562d-c723-55d5-c4bd-518966d2bcfb</id><updated>2016-02-26T00:00:00Z</updated><summary type="html"><![CDATA[<p><a href="https://www.goodreads.com/book/show/89187.Revelation_Space"><img src="//blog.jverkamp.com/2016/02/26/revelation-space/1-revelation-space.jpg" /></a> <a href="https://www.goodreads.com/book/show/89185.Chasm_City"><img src="//blog.jverkamp.com/2016/02/26/revelation-space/2-chasm-city.jpg" /></a></p>
<p><a href="https://www.goodreads.com/book/show/89187.Revelation_Space">Revelation Space</a> by <a href="https://www.goodreads.com/author/show/51204.Alastair_Reynolds">Alastair Reynolds</a>.</p>
<p>I'm a bit conflicted on this one. As you'll see in the individual reviews below, I enjoyed Revelation Space (the first book in the trilogy) and Chasm City (the same universe but only a tangentially related storyline), but I just couldn't get into the second of the trilogy: <a href="https://www.goodreads.com/book/show/89190.Redemption_Ark">Redemption Ark</a>. After reading about half of it over the course of a month (which is <em>far</em> longer than it normally takes me to read a book), I'm about ready to try something else. Perhaps I'll give it another try one day.</p>
]]></summary><content type="html"><![CDATA[<p><a href="https://www.goodreads.com/book/show/89187.Revelation_Space"><img src="//blog.jverkamp.com/2016/02/26/revelation-space/1-revelation-space.jpg" /></a> <a href="https://www.goodreads.com/book/show/89185.Chasm_City"><img src="//blog.jverkamp.com/2016/02/26/revelation-space/2-chasm-city.jpg" /></a></p>
<p><a href="https://www.goodreads.com/book/show/89187.Revelation_Space">Revelation Space</a> by <a href="https://www.goodreads.com/author/show/51204.Alastair_Reynolds">Alastair Reynolds</a>.</p>
<p>I'm a bit conflicted on this one. As you'll see in the individual reviews below, I enjoyed Revelation Space (the first book in the trilogy) and Chasm City (the same universe but only a tangentially related storyline), but I just couldn't get into the second of the trilogy: <a href="https://www.goodreads.com/book/show/89190.Redemption_Ark">Redemption Ark</a>. After reading about half of it over the course of a month (which is <em>far</em> longer than it normally takes me to read a book), I'm about ready to try something else. Perhaps I'll give it another try one day.</p>
<!--more-->
<hr />
<p><a href="https://www.goodreads.com/book/show/89187.Revelation_Space"><img src="//blog.jverkamp.com/2016/02/26/revelation-space/1-revelation-space.jpg" /></a></p>
<p>Nice bit of science fiction to kick off the new year.</p>
<p>Where Revelation Space really shines is showing a future that humanity might just see if we take several of the trends in current technology and thoughts that futurists hold about how the world might entail and dial them up even further.</p>
<p>We don't have a way to go faster than that the speed of light... But that's okay, since we've figured out a combination of long periods asleep and genetic/cybornetic alterations so that spacefarers don't seem to mind. This leads to some interesting thoughts on how two worlds might only get snippets of history between one another and then only when the few relativistic starships pass through, with crews that may not even count as human any more. The AIs are especially interesting, even if they're only tangential to the story, bringing up the problems that having a person-turned-copyable-computer-program might just cause.</p>
<p>There's also an interesting (spoiler laden) solution to the Fermi Paradox in there, although it took a while for everything to come together. Of everything that most makes me want to read the sequels to see if Reynolds builds on that any.</p>
<p>The plot was decent enough, although there were a few 'gotcha' moments towards the end that I wasn't entirely sure the story deserved. I like a mystery as much as the next person, but I like it best when the reader has a chance ahead of time to figure out what is going on.</p>
<p>The characters didn't feel entirely complete at times--although some of that might come from the unhuman nature of a good number of them.</p>
<p>All together, I liked it. It took far longer to read than most books I've read over the past year, but I think a large part of that wasn't due to the book. We'll give the sequel a try and see if it goes a bit quicker.</p>
<hr />
<p><a href="https://www.goodreads.com/book/show/89185.Chasm_City"><img src="//blog.jverkamp.com/2016/02/26/revelation-space/2-chasm-city.jpg" /></a></p>
<p>Chasm City takes a bit of a step sideways from Revelation Space, which on more reading makes perfect sense. It's not a sequel but rather a novel set in the same universe, a bit earlier in the timeline.</p>
<p>From the worldbuilding perspective, this extends and deepens what came earlier in Revelation Space, in particularly giving us a few insights into how early colonies could have been created in a universe without faster than light travel, the origins of the Melding Plague, and more backstory about Chasm City. All around, a very interesting world. It's a relatively grim possible future, but a well imagined one.</p>
<p>So far as plot goes, the story is relatively complicated, with at least timelines mixing together: a fleet of generation ships from Earth crossing between the stars, a hunting party on the war torn world they eventually settled on, and a quarry chased into the strange, plague ravaged world of Chasm City. Especially towards the end, it starts to get a little blurry exactly what is going on, but that's part of the draw of the story's climax. It's an <i>unreliable narrator</i> taken to an interesting extreme.</p>
<p>Overall, I enjoyed it. I'm not sure if I should have read Redemption Ark next or if it's not particularly relevant, but either way I liked the extra depth that Chasm City brings to its universe.</p>
<hr />
<p><a href="https://www.goodreads.com/book/show/89190.Redemption_Ark"><img src="//blog.jverkamp.com/2016/02/26/revelation-space/3-redemption-ark.jpg" /></a></p>
<p>As mentioned above, I haven't actually finished this book yet.</p>
<p>What we have thus far is interesting, getting more into the encroaching threat that first came about through the latter half of Revelation Space. We also get tiebacks to the starship <em>Nostalgia for Infinity</em> and finally get to learn exactly why they have such a terrifying array of weapons... or at least where they came from.</p>
<p>Also, a lot of this story talks about a war spanning large swatches of humanity--which is fascinating when you take into account how long it takes to do anything on an interstellar scale without faster than light travel. One side of the conflict--the Conjoiners, or spiders as they are colloquially known--are particularly interesting. With cybernetic implants and early hints of a hive mind... There is a lot of interesting space to explore there.</p>
<p>I'm not entirely sure what's preventing me from finishing the book. It could be pacing; it could be characters; but nothing in particular is jumping to mind. It could just not be the book I'm looking for right now. As I mentioned before, perhaps I'll come back to it some day.</p>
<hr />
<p>Next up on the physical book front, I'm reading book 8 of the <a href="//blog.jverkamp.com/2015/02/20/the-iron-druid-chronicles">The Iron Druid Chronicles</a>: <a href="https://www.goodreads.com/book/show/25337294-staked">Staked</a>. This will be a first for me, reading a new book in a series I've already reviewed. I'm not sure if I'll put up a new post or just update what I've done before. I guess we'll see when I've finished it. <img alt="smile" class="emoji" src="/emoji/smile.svg" /></p>]]></content></entry><entry><title>The Aeronaut's Windlass</title><link href="//blog.jverkamp.com/2016/02/10/the-aeronauts-windlass" /><id>urn:uuid:bb38596f-d1da-7b69-344a-f3e6d25eaae1</id><updated>2016-02-10T00:00:00Z</updated><summary type="html"><![CDATA[<p><a href="https://www.goodreads.com/book/show/24876258-the-aeronaut-s-windlass"><img src="//blog.jverkamp.com/2016/02/10/the-aeronauts-windlass/the-aeronauts-windlass.jpg" /></a></p>
<p>Well. <a href="https://www.goodreads.com/author/show/10746.Jim_Butcher">Jim Butcher</a> did it again.</p>
<p>I love the <a href="https://www.goodreads.com/series/40346-the-dresden-files">Dresden Files</a>. I love <a href="https://www.goodreads.com/series/45545-codex-alera">Codex Alera</a>. I love <a href="https://www.goodreads.com/book/show/24876258-the-aeronaut-s-windlass">The Aeronaut's Windlass</a>.</p>
]]></summary><content type="html"><![CDATA[<p><a href="https://www.goodreads.com/book/show/24876258-the-aeronaut-s-windlass"><img src="//blog.jverkamp.com/2016/02/10/the-aeronauts-windlass/the-aeronauts-windlass.jpg" /></a></p>
<p>Well. <a href="https://www.goodreads.com/author/show/10746.Jim_Butcher">Jim Butcher</a> did it again.</p>
<p>I love the <a href="https://www.goodreads.com/series/40346-the-dresden-files">Dresden Files</a>. I love <a href="https://www.goodreads.com/series/45545-codex-alera">Codex Alera</a>. I love <a href="https://www.goodreads.com/book/show/24876258-the-aeronaut-s-windlass">The Aeronaut's Windlass</a>.</p>
<!--more-->
<p>The world is just cool, with crystal power systems, airships, and sentient, speaking cats. Everything feels like it fits together in a believable enough world while at the same time leaves me wanting to know more! Why were the spires built? What's the rest of the world like? What's with the Etherialists? Etc.</p>
<p>The characters are a lot of fun. Bridget and Gwen are great examples of what kickass women can be, both in different ways. At first I thought the cats would be overplayed and cheesy, but they really do grow on you. They actually feel like I imagine cats would be if they could speak. Grim is a solid captain and I was glad to see everything work out as well as it did for him. I'm curious where that will go next. The Etherialists are a fun sort of detached from reality.</p>
<p>Writing wise, I think the coolest parts of this book were the airship battles. It's a completely different sort of battle than you see, with maneuvers in a full three dimensions and energy weapons and shields. The last battle was a bit strange since we got a lot of details (via audience surrogate at the time Gwen) that I would have expected to see earlier rather than at the climax, but they still showed that Butcher thought through how a lot of the battles would work.</p>
<p>Overall, the plot was fairly straight forward, with obvious good guys and bad guys (and a mysterious shadowy figure behind the scenes). It was easy enough to see where it was going, but that doesn't really weaken it. It works well both as a standalone novel but also as the start of a series.</p>
<p>Aside: I listened to the audiobook. <a href="https://www.goodreads.com/author/show/169487.James_Marsters">James Marsters</a> (who narrates the Dresden Files) is a hard act to follow, but <a href="https://www.goodreads.com/author/show/2961721.Euan_Morton">Euan Morton</a> did a great job. I like the character's voices. Particularly Rawl's. It's interesting to listen to an audiobook of a book I haven't read before--I had to backtrack twice due to missing something.</p>
<p>Overall, it was a great book. I look forward to the sequels--only tempered by wanting to see the rest of the Dresden Files as well.</p>]]></content></entry><entry><title>Duplicating AeroSnap on OSX with Hammerspoon</title><link href="//blog.jverkamp.com/2016/02/08/duplicating-aerosnap-on-osx-with-hammerspoon" /><id>urn:uuid:09374126-32e6-69a9-1a73-8141f97dec1a</id><updated>2016-02-08T00:00:00Z</updated><summary type="html"><![CDATA[<p>Relatively recently, I switched my last Windows machine over to OSX. For the most part, it's been great. One bit of functionality that I've been missing though is AeroSnap. Specifically the ability to use a keyboard shortcut to move windows to the left/right half of a monitor.</p>
]]></summary><content type="html"><![CDATA[<p>Relatively recently, I switched my last Windows machine over to OSX. For the most part, it's been great. One bit of functionality that I've been missing though is AeroSnap. Specifically the ability to use a keyboard shortcut to move windows to the left/right half of a monitor.</p>
<!--more-->
<p>For a while, <a href="https://www.boastr.net/">BetterTouchTool</a> provided that functionality for me, among it's many (many) other options. Unfortunately (for me, it's a good move for them), the author(s) of BetterTouchTool are now moving to a paid model. Since I use only a tiny fraction of the functionality, I decided to see if there were other options.</p>
<p>The first thing that I stumbled across was <a href="https://github.com/fikovnik/ShiftIt">ShiftIt</a>. It actually has exactly the functionality that I wanted and was configurable enough that I could tweak the keybindings to what my fingers already expected them to be. If you don't particularly want to tweak the functionality and just want AeroSnapesqe functionality, this is probably a good enough option.</p>
<p>Me though? I love to tweak things.</p>
<p>With unusually precient timing, Lifehacker posted an article about <a href="http://www.hammerspoon.org/">Hammerspoon</a>: <a href="http://lifehacker.com/hammerspoon-is-powerful-free-automation-tool-for-os-x-1757351485">Hammerspoon Is Powerful, Free Automation Tool for OS X</a></p>
<p>Interesting.</p>
<p>After a bit of digging, I found that their <a href="http://www.hammerspoon.org/go/">Getting Started</a> document actually has an example that does exactly what I want to do: <a href="http://www.hammerspoon.org/go/#winresize">Window sizing</a> Shiny!</p>
<p>A bit of tweaking and this is what I ended up with:</p>
<h3><code>.hammerspoon/init.lua</code></h3>
<p>Base code, handles reloading, locking, and loading modules</p>
<pre class="lua"><code>-- Reload hammerspoon configs
hs.hotkey.bind({"cmd", "ctrl"}, "R", function()
    hs.reload()
end)
hs.alert.show("Config loaded")

-- Lock
hs.hotkey.bind({"cmd", "ctrl"}, 'L', function()
    os.execute("open '/System/Library/Frameworks/ScreenSaver.framework/Versions/A/Resources/ScreenSaverEngine.app'")
end)

require('aerosnap')</code></pre>
<p>The first is another example from their documentation of bind a keyboard shortcut to reloading the Hammerspoon documentation. The second is another keyboard shortcut I missed from Windows: the ability to lock the screen without logging out (the normal lock functionality disables networking and thus things like remote login).</p>
<h3><code>.hammerspoon/aerosnap/init.lua</code></h3>
<pre class="lua"><code>-- Aerosnap helper functions to get and set current window parameters
function aerosnap_get_parameters()
    local window = hs.window.focusedWindow()
    local frame = window:frame()
    local screen = window:screen()
    local bounds = screen:frame()

    return window, frame, bounds
end

-- Aerosnap help to move a window to a specified position
function aerosnap_move_window(x, y, w, h)
    local window, frame, bounds = aerosnap_get_parameters()

    frame.x = x
    frame.y = y
    frame.w = w
    frame.h = h

    window:setFrame(frame)
end

-- Save the current window's position so we can restore it
function aerosnap_save_window()
    local window, frame, bounds = aerosnap_get_parameters()
    saved_window_sizes = saved_window_sizes or {}
    saved_window_sizes[window:id()] = {x = frame.x, y = frame.y, w = frame.w, h = frame.h}
end

-- Aerosnap move window to the left half
hs.hotkey.bind({"cmd", "ctrl"}, "Left", function()
    local window, frame, bounds = aerosnap_get_parameters()
    aerosnap_save_window()
    aerosnap_move_window(bounds.x, bounds.y, bounds.w / 2, bounds.h)
end)

-- Aerosnap move window to the right half
hs.hotkey.bind({"cmd", "ctrl"}, "Right", function()
    local window, frame, bounds = aerosnap_get_parameters()
    aerosnap_save_window()
    aerosnap_move_window(bounds.x + bounds.w / 2, bounds.y, bounds.w / 2, bounds.h)
end)

-- Aerosnap maximize current window, saving size to restore
hs.hotkey.bind({"cmd", "ctrl"}, "Up", function()
    local window, frame, bounds = aerosnap_get_parameters()
    aerosnap_save_window()
    aerosnap_move_window(bounds.x, bounds.y, bounds.w, bounds.h)
end)

-- Restore the last saved window configuration for a window (basically, a one level undo)
hs.hotkey.bind({"cmd", "ctrl"}, "Down", function()
    local window, frame, bounds = aerosnap_get_parameters()

    old_bounds = saved_window_sizes[window:id()]
    if old_bounds ~= nil then
        aerosnap_move_window(old_bounds.x, old_bounds.y, old_bounds.w, old_bounds.h)
        saved_window_sizes[window:id()] = nil
    end
end)</code></pre>
<p>Basically, I took the same functionality that they had in the demo and factored out the functionality that gets the current window / sets the new sizes. The other interesting bit is the <code>aerosnap_save_window</code> function, which allows you to restore the size of a window you had just maximized. This does have something of a memory leak (in that it never clears up closed windows), but the amount should be small enough that it doesn't overly matter.</p>
<p>And that's it. My full configs are available in my dotfiles (if I make any further tweaks or add more functionality): <a href="https://github.com/jpverkamp/dotfiles/tree/master/hammerspoon">hammerspoon configs</a></p>
<p>I'm looking forward to seeing what else I can do with Hammerspoon. You can get fairly extensive: <a href="https://github.com/tstirrat/hammerspoon-config">example Hammerspoon config</a>.</p>
<p>Also, if you want an alternative to Hammerspoon with what looks like a more modular approach, check out <a href="https://github.com/sdegutis/mjolnir">Mjolnir</a>. It appears that Hammerspoon is a fork of Mjolnir, so their configs are rather similar.</p>]]></content></entry></feed>