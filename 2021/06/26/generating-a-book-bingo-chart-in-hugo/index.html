<!DOCTYPE html>
<html onclick >
<head>
    <title>Generating a Book Bingo Chart in Hugo â€“ jverkamp.com</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8"><link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="//blog.jverkamp.com/feed/">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css" integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" />

<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel="stylesheet">

<link rel="stylesheet" href="/custom.css" defer />

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <div id="wrapper"><header id="page-header" role="banner">
    <h1><a href="/">JP's Blog</a></h1>

    <ul id="page-header-links">
        <li>
            <a href="https://github.com/jpverkamp">GitHub</a> *
            <a href="https://www.flickr.com/photos/jpverkamp">Flickr</a> *
            <a href="/resume">Resume</a>
        </li>
        <li>
            <form action="//www.google.com/search" method="get" onsubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search" _lpchecked="1">
                <div class="form-group">
                    <input name="q" type="hidden">
                    <input name="qfront" type="text" class="form-control" placeholder="Search">
                    <button type="submit" class="btn btn-default" value="Search">Search</button>
                </div>
            </form>
        </li>
    </ul>

    <nav id="header-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation"><li><a href="https://blog.jverkamp.com/photography/">Photography</a></li><li><a href="https://blog.jverkamp.com/programming/">Programming</a></li><li><a href="https://blog.jverkamp.com/reviews/">Reviews</a></li><li><a href="https://blog.jverkamp.com/maker/">Maker</a></li><li><a href="https://blog.jverkamp.com/writing/">Writing</a></li><li><a href="https://blog.jverkamp.com/research/">Research</a></li><li class="subscription" data-subscription="rss"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </nav>
</header>
<div id="page-content-wrapper">
            <div id="page-content"><article>
	<header>
		<h1 class="entry-title">Generating a Book Bingo Chart in Hugo</h1>

        <div class="entry-meta"><span class="entry-date">2021-06-26</span>
            </div>

        <div class="entry-taxonomies"><div class="entry-tags"><ul class="taxonomy-keys"><li>
            <a class="taxonomy-key" href="/programming/languages/">Languages</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2021/01/27/a-tabbed-view-for-hugo/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/go">Go</a><a href="https://blog.jverkamp.com/2021/07/15/crosslinks-by-title-in-hugo/" class="next-link"></a></li></ul>
        </li><li>
            <a class="taxonomy-key" href="/programming/sources/">Sources</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2021/06/24/categorizing-r/fantasy-book-bingo-books/" class="previous-link"></a><a class="taxonomy-value" href="/programming/sources/apis">APIs</a><a href="https://blog.jverkamp.com/2021/06/28/ordering-board-game-geek-geeklists-by-rank/" class="next-link"></a></li><li><a class="taxonomy-value" href="/programming/sources/hugo">Hugo</a></li></ul>
        </li><li><a class="taxonomy-key" href="/programming">programming</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2021/06/25/a-generic-brute-force-backtracking-solver/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2021/06/28/ordering-board-game-geek-geeklists-by-rank/" class="next-link">Next</a></ul>
        </li><li><a class="taxonomy-key" href="/">All Posts</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2021/06/25/a-generic-brute-force-backtracking-solver/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2021/06/27/the-sopranos-season-2/" class="next-link">Next</a></ul>
        </li></ul>
</div>
</div>
    </header>

	<div class="entry-content"><p>Another <a href="https://blog.jverkamp.com/2021/04/01/2021-book-bingo/">r/Fantasy 2021 Book Bingo</a> post! How in the world am I generating this (updating) chart in Hugo?</p>
<h1>2021 Book Bingo</h1>

<table class="bingo"><tr><td>

            <p>SFF anthology or collection</p><a href="https://blog.jverkamp.com/2021/03/26/attack-on-titan-vol.-1/">
                        <figure>
                            <img src="/embeds/books/attack-on-titan-vol-1.jpg">
                            <figcaption>Attack on Titan, Vol. 1</figcaption>
                        </figure> 
                    </a></td><td>

            <p>Set in Asia (Hard: by an Asian author)</p></td><td>

            <p><a href="https://www.reddit.com/r/Fantasy/wiki/index/a-to-z-genre-guide">r/Fantasy A to Z Genre Guide</a> (Hard: by a BIPOC author)</p></td><td>

            <p>Found Family (Hard: featuring an LGBTQ+ character)</p><a href="https://blog.jverkamp.com/2021/07/18/the-house-in-the-cerulean-sea/">
                        <figure>
                            <img src="/embeds/books/the-house-in-the-cerulean-sea.jpg">
                            <figcaption>The House in the Cerulean Sea</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>First person POV (Hard: Multiple)</p></td></tr><tr><td>

            <p>r/Fantasy Book Club (Hard: with participation)</p></td><td>

            <p>New to you author (Hard: haven&rsquo;t heard much about)</p></td><td>

            <p>Gothic Fantasy (Hard: not in the <a href="https://bookriot.com/gothic-fantasy/">Book Riot article</a>)</p><a href="https://blog.jverkamp.com/2021/06/09/mexican-gothic/">
                        <figure>
                            <img src="/embeds/books/mexican-gothic.jpg">
                            <figcaption>Mexican Gothic</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>Backlist book (Hard: published before 2000)</p></td><td>

            <p>Revenge-seeking character (Hard: revenge as the major book plot)</p><a href="https://blog.jverkamp.com/2021/10/01/red-sister/">
                        <figure>
                            <img src="/embeds/books/red-sister.jpg">
                            <figcaption>Red Sister</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td></tr><tr><td>

            <p>Mystery plot (Hard: not primary world urban fantasy)</p><a href="https://blog.jverkamp.com/2021/06/19/six-wakes/">
                        <figure>
                            <img src="/embeds/books/six-wakes.jpg">
                            <figcaption>Six Wakes</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>Comfort read (Hard: that isn&rsquo;t a reread)</p><a href="https://blog.jverkamp.com/2021/04/13/wild-sign/">
                        <figure>
                            <img src="/embeds/books/wild-sign.jpg">
                            <figcaption>Wild Sign</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>Debut novel (Hard: published in 2021)</p><a href="https://blog.jverkamp.com/2021/04/26/tales-of-nezura-book-1-the-zevolra/">
                        <figure>
                            <img src="/embeds/books/tales-of-nezura-book-1-the-zevolra.jpg">
                            <figcaption>Tales of Nezura: Book 1: The Zevolra</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>Cat squasher (500+ pages; Hard: 800+ pages)</p></td><td>

            <p>SFF-related nonfiction (Hard: published in the last 5 years)</p></td></tr><tr><td>

            <p>Latinx or Latin American author (Hard: with fewer than 1000 Goodreads ratings)</p></td><td>

            <p>Self published (Hard: with fewer than 50 Goodreads ratings)</p><a href="https://blog.jverkamp.com/2021/04/26/tales-of-nezura-book-1-the-zevolra/">
                        <figure>
                            <img src="/embeds/books/tales-of-nezura-book-1-the-zevolra.jpg">
                            <figcaption>Tales of Nezura: Book 1: The Zevolra</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>Forest setting (Hard: for the entire book)</p><a href="https://blog.jverkamp.com/2021/07/01/annihilation/">
                        <figure>
                            <img src="/embeds/books/annihilation.jpg">
                            <figcaption>Annihilation</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>Genre mashup (Hard: of three or more genres)</p><a href="https://blog.jverkamp.com/2021/07/13/gideon-the-ninth/">
                        <figure>
                            <img src="/embeds/books/gideon-the-ninth.jpg">
                            <figcaption>Gideon the Ninth</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>Has chapter titles of more than one word (Hard: for every chapter)</p><a href="https://blog.jverkamp.com/2021/04/21/the-midnight-library/">
                        <figure>
                            <img src="/embeds/books/the-midnight-library.jpg">
                            <figcaption>The Midnight Library</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td></tr><tr><td>

            <p>___ of ___ (Hard: and ___)</p><a href="https://blog.jverkamp.com/2021/12/08/an-alchemy-of-masques-and-mirrors/">
                        <figure>
                            <img src="/embeds/books/an-alchemy-of-masques-and-mirrors.jpg">
                            <figcaption>An Alchemy of Masques and Mirrors</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>First contact (Hard: that doesn&rsquo;t lead to war)</p><a href="https://blog.jverkamp.com/2021/06/15/project-hail-mary/">
                        <figure>
                            <img src="/embeds/books/project-hail-mary.jpg">
                            <figcaption>Project Hail Mary</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td><td>

            <p>Trans or Nonbinary (Hard: protagonist)</p></td><td>

            <p>Debut author (Hard: with an AMA)</p></td><td>

            <p>Witches (Hard: as the main protagonist)</p><a href="https://blog.jverkamp.com/2021/04/11/a-great-and-terrible-beauty/">
                        <figure>
                            <img src="/embeds/books/a-great-and-terrible-beauty.jpg">
                            <figcaption>A Great and Terrible Beauty</figcaption>
                        </figure> 
                    </a><p>(Hard Mode)</p></td></tr></table>

<p>To start, I have a <a href="https://gohugo.io/templates/data-templates/">Data file</a> for the names of the categories:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- 
  - <span style="color:#e6db74">&#34;SFF anthology or collection&#34;</span>
  - <span style="color:#e6db74">&#34;Set in Asia (Hard: by an Asian author)&#34;</span>
  <span style="color:#ae81ff">...</span>
- 
  - <span style="color:#e6db74">&#34;r/Fantasy Book Club (Hard: with participation)&#34;</span>
  <span style="color:#ae81ff">...</span>
...
</code></pre></div><p>It&rsquo;s just markdown (for links) in a nested list. 5x5 (hard coded) at the moment, but I could probably make that flexible if I wanted.</p>
<p>Next, I have to add a bit of metadata to each post that&rsquo;s going to be included in a Book Bingo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">bingo</span>:
- <span style="color:#ae81ff">2021</span> <span style="color:#ae81ff">Book Bingo</span>
<span style="color:#f92672">bingo-data</span>:
    <span style="color:#f92672">2021 Book Bingo</span>: [<span style="color:#ae81ff">3x1+]</span>
</code></pre></div><p>It&rsquo;s a bit annoying that I have to do this. What I&rsquo;d really want is for the Taxonomy to support a hash as the data field, so I could just do:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">bingo</span>:
    <span style="color:#f92672">2021 Book Bingo</span>: [<span style="color:#ae81ff">3x1+]</span>
</code></pre></div><p>But if you do that, the post isn&rsquo;t included in the <code>bingo</code> taxonomy. So I have to include both. If I figure out a better way to do that, I&rsquo;ll update this post, but for the moment, it&rsquo;s okay. So <code>bingo</code> is a <a href="https://gohugo.io/content-management/taxonomies/">Taxonomy</a> (so I can list all pages that match it without cycling through all pages), while <code>bingo-data</code> is just a <code>$Page.Param</code> that I can access. The field is: <code>{row}x{column}{hard mode flag}</code>.</p>
<p>Finally, I actually make a shortcode that can use that information and build a table:</p>



<pre><code class="language-hugo" data-lang="hugo">{{- $title := .Get 0 -}}
{{- $slug := $title | urlize }}
{{- $data := index $.Site.Data.bingo $title -}}

&lt;h1&gt;{{ $title }}&lt;/h1&gt;

&lt;table class=&quot;bingo&quot;&gt;
    {{- range $row := seq 0 4 -}}
    &lt;tr&gt;
        {{- range $col := seq 0 4 -}}
        &lt;td&gt;
            {{- $index := (printf &quot;%dx%d&quot; (add 1 $row) (add 1 $col) )}}
            {{- $indexHard := (printf &quot;%dx%d+&quot; (add 1 $row) (add 1 $col) )}}
            {{- $title := index $data $row $col }}

            &lt;p&gt;{{ $title | markdownify }}&lt;/p&gt;
            
            {{- range $page := index $.Site.Taxonomies &quot;bingo&quot; $slug -}}
                {{- $squares := index $page.Params &quot;bingo-data&quot; (replace $slug &quot;-&quot; &quot; &quot;) -}}
                {{- if (or (in $squares $index) (in $squares $indexHard)) -}}
                    &lt;a href=&quot;{{ $page.Permalink }}&quot;&gt;
                        &lt;figure&gt;
                            {{ safeHTML (index (findRE &quot;(?m:&lt;img.*?&gt;)&quot; .Content 1) 0) }}
                            &lt;figcaption&gt;{{ .Title }}&lt;/figcaption&gt;
                        &lt;/figure&gt; 
                    &lt;/a&gt;
                    {{- if in $squares $indexHard -}}
                    &lt;p&gt;(Hard Mode)&lt;/p&gt;
                    {{- end -}}
                {{- end -}}
            {{- end -}}
        &lt;/td&gt;
        {{- end -}}
    &lt;/tr&gt;
    {{- end -}}
&lt;/table&gt;

</code></pre>
<ul>
<li><code>range</code> over the rows and columns, building an HTML table</li>
<li>In each cell:
<ul>
<li>Include the title of the cell from the data page</li>
<li>Build a <code>index</code> (and <code>indexHard</code>) for that row and column</li>
<li>Search over all pages in the matching Taxonomy, use the Page Data to see if they match this specific <code>index</code> or not</li>
<li>If so, include the cover as a link, plus the &lsquo;(Hard Mode)&rsquo; flag</li>
</ul>
</li>
</ul>
<p>I&rsquo;ll admit, it feels a bit hacky, but one of the beautiful things about a static site generator is that it only has to run when rebuilding my site. The end result is just HTML. And I only have to update the individual pages, not keep a central list. I think that&rsquo;s pretty neat.</p>
<p>Perhaps I should figure out more things I can do with Page Data. Perhaps keep track of authors as well as series? Ratings? Who knows!</p></div>
</article></div>
        </div><footer id="page-footer" role="contentinfo">
    <nav id="footer-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
            <li><a href="/archive-by-date/">All posts: By Date</a></li>
            <li><a href="/archive-by-tag/">All posts: By Tag</a></li>

            <li>
                <a href="/atom.xml">
                    RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li><li>
                <a href="/programming/atom.xml">
                    RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li></ul>
    </nav>

    <div id="page-footer-content">
        <div class="legal">
            <p>
                All posts unless otherwise mentioned are licensed under
                <a rel="license" href="//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
                    <img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png">
                </a>
            </p>

            <p>
                Any source code unless otherwise mentioned is licensed under the <a href="//directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
            </p>
        </div>
    </div>
</footer>
</div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js" integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js" integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin="anonymous"></script>

<script src="/custom.js"></script>
</body>
</html>
