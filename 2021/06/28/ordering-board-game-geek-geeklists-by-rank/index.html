<!doctype html><html><head><title>Ordering Board Game Geek GeekLists by Rank â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_5823201688106629450.min.30448892aa1f91e9c4cb5494e5c5e5abc13b7778de7786e5256cdc7d2424813a.js integrity="sha256-MESIkqofkenEy1SU5cXlq8E7d3jed4blJWzcfSQkgTo=" defer></script>
<script src=/jquery.fancybox_6181813213021922412.min.6ba037466db9f8843b66c38c32fe5a353344e7fd68ecda97efb63a84c881f828.js integrity="sha256-a6A3Rm25+IQ7ZsOMMv5aNTNE5/1o7NqX77Y6hMiB+Cg=" defer></script>
<script src=/katex_12008035502722260518.min.3cc3a080c0368785179e37b0cd0a71c6cf60c4fc5a8dce503f5a542ec0a25043.js integrity="sha256-PMOggMA2h4UXnjewzQpxxs9gxPxajc5QP1pULsCiUEM=" defer></script>
<script src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js integrity="sha256-XoC9heuuuVYHg01nd7/nAT0dFh8PAqMbhF5L12WJgxY=" defer></script>
<script src=/mermaid_12365941879912544862.min.e8f19283a632077085b9ad74aecad54abe84429c69789fd29ffa3a254d86abdd.js integrity="sha256-6PGSg6YyB3CFua10rsrVSr6EQpxpeJ/Sn/o6JU2Gq90=" defer></script>
<script src=/main.min.82ab51144325fae71ddbca46269a80c63b28bdab6be6b01aa9ec638c013748e6.js integrity="sha256-gqtRFEMl+ucd28pGJpqAxjsovatr5rAaqexjjAE3SOY=" defer></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css integrity="sha256-4otdfZ2J76y19wisMMvXaxuaD4Ft/Z2pZjHR0Jy73XY="><link rel=stylesheet href=/css_4780214198035419921.min.7cfac95bdd962d85ceec560e50fe7b04c44b58a76e5202006ef36ca8c0a7d836.css integrity="sha256-fPrJW92WLYXO7FYOUP57BMRLWKduUgIAbvNsqMCn2DY="><link rel=stylesheet href=/main.min.21cc0ec02bdbc197a68cb2e246e6db6d9df556ba2994084c55a6f8b6713e604d.css integrity="sha256-IcwOwCvbwZemjLLiRubbbZ31VroplAhMVab4tnE+YE0="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=//www.google.com/search method=get onsubmit='(function(e){e.q.value="site:blog.jverkamp.com "+e.qfront.value})(this)' class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=hidden>
<input name=qfront type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article><header><h1 class=entry-title>Ordering Board Game Geek GeekLists by Rank</h1><div class=entry-meta><span class=entry-date>2021-06-28</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2021/06/24/categorizing-r/fantasy-book-bingo-books/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/python>Python</a><a href=https://blog.jverkamp.com/2021/08/10/splitting-images/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2021/06/26/generating-a-book-bingo-chart-in-hugo/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/apis>APIs</a></li><li><a class=taxonomy-value href=/programming/sources/board-game-arena>Board Game Arena</a></li><li><a class=taxonomy-value href=/programming/sources/board-game-geek>Board Game Geek</a></li><li><a class=taxonomy-value href=/programming/sources/board-games>Board Games</a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2021/06/25/a-generic-brute-force-backtracking-solver/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/small-scripts>Small Scripts</a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2021/06/26/generating-a-book-bingo-chart-in-hugo/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2021/07/15/crosslinks-by-title-in-hugo/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2021/06/27/the-sopranos-season-2/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2021/06/28/still-life/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>A quick script.</p><p>I play a lot of board games. With the whole COVID-19 mess, I&rsquo;ve been playing a lot on <a href=https://boardgamearena.com/>Board Game Arena</a>, which is a wonderful site. But one thing that&rsquo;s a bit lacking is having ratings / metadata about games to great games I&rsquo;ve just not heard about before. Where can you get lots of that data? <a href=https://boardgamegeek.com/>Board Game Geek</a>!</p><p>The problem though, is merging the two. So, how do we do it? Well, this time around, I&rsquo;m going to start with <a href=https://boardgamegeek.com/geeklist/252354/list-games-board-game-arena>this GeekList</a> that someone else maintains of BGA games on BGG. Which has the games, but no ranks. And apparently there are no ways to rank those by BGG (for some reason). But that&rsquo;s easy when you know a bit of scripting!</p><p>Relevant BGG APIs (yes, I know there&rsquo;s a version 2):</p><ul><li><a href="https://boardgamegeek.com/wiki/page/BGG_XML_API&redirectedfrom=XML_API#toc7">/xmlapi/geeklist/:id</a> - retrieve information about a GeekList</li><li><a href="https://boardgamegeek.com/wiki/page/BGG_XML_API&redirectedfrom=XML_API#toc4">/xmlapi/boardgame/:id?stats=1</a> - without <code>stats=1</code>, you get lots of game information, but not the rankings</li></ul><p>From there, I&rsquo;m going to use some Python (it&rsquo;s what I know best), with <a href=https://docs.python-requests.org/en/master/>requests</a> for fetching from the API and <a href=https://docs.python.org/3/library/xml.etree.elementtree.html>xml.etree</a> for XML parsing. I swear there should be a more elegant way for the latter, but again, it works.</p><p>Plug everything together and:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> requests
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> xml.etree <span style=color:#f92672>import</span> ElementTree <span style=color:#66d9ef>as</span> et
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>rankings <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> list <span style=color:#f92672>in</span> sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>:]:
</span></span><span style=display:flex><span>    response <span style=color:#f92672>=</span> requests<span style=color:#f92672>.</span>get(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;https://www.boardgamegeek.com/xmlapi/geeklist/</span><span style=color:#e6db74>{</span>list<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)
</span></span><span style=display:flex><span>    xml <span style=color:#f92672>=</span> et<span style=color:#f92672>.</span>fromstring(response<span style=color:#f92672>.</span>text)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> item_el <span style=color:#f92672>in</span> xml<span style=color:#f92672>.</span>findall(<span style=color:#e6db74>&#39;item&#39;</span>):
</span></span><span style=display:flex><span>        game_id <span style=color:#f92672>=</span> item_el<span style=color:#f92672>.</span>attrib[<span style=color:#e6db74>&#39;objectid&#39;</span>]
</span></span><span style=display:flex><span>        game_name <span style=color:#f92672>=</span> item_el<span style=color:#f92672>.</span>attrib[<span style=color:#e6db74>&#39;objectname&#39;</span>]
</span></span><span style=display:flex><span>        sys<span style=color:#f92672>.</span>stderr<span style=color:#f92672>.</span>write(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;Loading </span><span style=color:#e6db74>{</span>game_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>{</span>game_id<span style=color:#e6db74>}</span><span style=color:#e6db74>)</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        game_response <span style=color:#f92672>=</span> requests<span style=color:#f92672>.</span>get(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;https://www.boardgamegeek.com/xmlapi/boardgame/</span><span style=color:#e6db74>{</span>game_id<span style=color:#e6db74>}</span><span style=color:#e6db74>?stats=1&#39;</span>)
</span></span><span style=display:flex><span>        game_xml <span style=color:#f92672>=</span> et<span style=color:#f92672>.</span>fromstring(game_response<span style=color:#f92672>.</span>text)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> rank_el <span style=color:#f92672>in</span> game_xml<span style=color:#f92672>.</span>findall(<span style=color:#e6db74>&#39;.//rank&#39;</span>):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>                rank_name <span style=color:#f92672>=</span> rank_el<span style=color:#f92672>.</span>attrib[<span style=color:#e6db74>&#39;friendlyname&#39;</span>]
</span></span><span style=display:flex><span>                rank_value <span style=color:#f92672>=</span> int(rank_el<span style=color:#f92672>.</span>attrib[<span style=color:#e6db74>&#39;value&#39;</span>])
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>ValueError</span>:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> rank_name <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> rankings:
</span></span><span style=display:flex><span>                rankings[rank_name] <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            rankings[rank_name]<span style=color:#f92672>.</span>append((rank_value, game_name))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> ranking, games <span style=color:#f92672>in</span> rankings<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;===== </span><span style=color:#e6db74>{</span>ranking<span style=color:#e6db74>}</span><span style=color:#e6db74> =====&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i, (score, game) <span style=color:#f92672>in</span> enumerate(sorted(games), <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>:</span><span style=color:#e6db74> &lt;5</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>score<span style=color:#e6db74>:</span><span style=color:#e6db74> &lt;5</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>game<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)
</span></span><span style=display:flex><span>    print()
</span></span></code></pre></div><p>In summary:</p><ul><li>Fetch the geek list</li><li>Iterate through <code>item</code> elements (these contain the items in the list)<ul><li>For each, get the <code>objectid</code> (which is a game)</li><li>Fetch that game, including <code>stats=1</code></li><li>For each list the game is on (overall, best strategy etc), store the ranking information</li></ul></li><li>Sort and print the information we collected</li></ul><p>The first column is just numbering, the second is BGG rank overall within that category (so Through The Ages: A New Story of Civilization is the 8th highest ranked game on BGG as of now), and the last is the name.</p><p>It&rsquo;s pretty nice:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>===== Board Game Rank =====
</span></span><span style=display:flex><span>1     8     Through the Ages: A New Story of Civilization
</span></span><span style=display:flex><span>2     16    Terra Mystica
</span></span><span style=display:flex><span>3     17    7 Wonders Duel
</span></span><span style=display:flex><span>4     28    Puerto Rico
</span></span><span style=display:flex><span>5     39    The Crew: The Quest for Planet Nine
</span></span><span style=display:flex><span>6     41    Tzolk&#39;in: The Mayan Calendar
</span></span><span style=display:flex><span>7     49    Clans of Caledonia
</span></span><span style=display:flex><span>8     54    Through the Ages: A Story of Civilization
</span></span><span style=display:flex><span>9     63    The Voyages of Marco Polo
</span></span><span style=display:flex><span>10    65    Race for the Galaxy
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>===== Family Game Rank =====
</span></span><span style=display:flex><span>1     3     The Crew: The Quest for Planet Nine
</span></span><span style=display:flex><span>2     4     Lost Ruins of Arnak
</span></span><span style=display:flex><span>3     9     7 Wonders
</span></span><span style=display:flex><span>4     16    Stone Age
</span></span><span style=display:flex><span>5     17    Welcome To...
</span></span><span style=display:flex><span>6     22    Jaipur
</span></span><span style=display:flex><span>7     29    Santorini
</span></span><span style=display:flex><span>8     35    Carcassonne
</span></span><span style=display:flex><span>9     39    Kingdomino
</span></span><span style=display:flex><span>10    43    Nidavellir
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>===== Strategy Game Rank =====
</span></span><span style=display:flex><span>1     8     Through the Ages: A New Story of Civilization
</span></span><span style=display:flex><span>2     15    Terra Mystica
</span></span><span style=display:flex><span>3     18    7 Wonders Duel
</span></span><span style=display:flex><span>4     27    Puerto Rico
</span></span><span style=display:flex><span>5     39    The Crew: The Quest for Planet Nine
</span></span><span style=display:flex><span>6     41    Clans of Caledonia
</span></span><span style=display:flex><span>7     42    Tzolk&#39;in: The Mayan Calendar
</span></span><span style=display:flex><span>8     47    Through the Ages: A Story of Civilization
</span></span><span style=display:flex><span>9     50    Lost Ruins of Arnak
</span></span><span style=display:flex><span>10    52    Teotihuacan: City of Gods
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>===== Abstract Game Rank =====
</span></span><span style=display:flex><span>1     11    Santorini
</span></span><span style=display:flex><span>2     13    Go
</span></span><span style=display:flex><span>3     16    Hive
</span></span><span style=display:flex><span>4     25    Taluva
</span></span><span style=display:flex><span>5     29    Dragon Castle
</span></span><span style=display:flex><span>6     35    Medina (Second Edition)
</span></span><span style=display:flex><span>7     39    Tash-Kalar: Arena of Legends
</span></span><span style=display:flex><span>8     46    Chess
</span></span><span style=display:flex><span>9     51    Cribbage
</span></span><span style=display:flex><span>10    52    Xiangqi
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>===== Party Game Rank =====
</span></span><span style=display:flex><span>1     25    Skull
</span></span><span style=display:flex><span>2     45    Coup
</span></span><span style=display:flex><span>3     52    Perudo
</span></span><span style=display:flex><span>4     56    Concept
</span></span><span style=display:flex><span>5     75    Oriflamme
</span></span><span style=display:flex><span>6     93    The Werewolves of Miller&#39;s Hollow
</span></span><span style=display:flex><span>7     117   Saboteur
</span></span><span style=display:flex><span>8     478   Scum: The Food Chain Game
</span></span><span style=display:flex><span>9     572   Fluxx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>===== Customizable Rank =====
</span></span><span style=display:flex><span>1     73    Krosmaster: Arena
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>===== Thematic Rank =====
</span></span><span style=display:flex><span>1     63    Dungeon Petz
</span></span><span style=display:flex><span>2     173   K2
</span></span><span style=display:flex><span>3     227   Rallyman: GT
</span></span><span style=display:flex><span>4     303   Room 25
</span></span><span style=display:flex><span>5     531   NOIR: Deductive Mystery Game
</span></span><span style=display:flex><span>6     576   Penny Press
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>===== War Game Rank =====
</span></span><span style=display:flex><span>1     25    Unconditional Surrender! World War 2 in Europe
</span></span><span style=display:flex><span>2     65    Polis: Fight for the Hegemony
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>===== Children&#39;s Game Rank =====
</span></span><span style=display:flex><span>1     132   Monster Factory
</span></span><span style=display:flex><span>2     811   Connect Four
</span></span><span style=display:flex><span>3     831   Battleship
</span></span></code></pre></div><p>I&rsquo;ve played quite a few of these (and most of them were great!) but there are all sorts of ones I didn&rsquo;t even know were on BGA. All the games!</p><p>Next, I want to write something to scrape BGA (they don&rsquo;t have an official API, but that&rsquo;s workaroundable) and combine both data sets into something even better. The joys of scripting things.</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>