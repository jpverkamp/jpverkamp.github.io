<!doctype html><html>
<head>
<title>AoC 2021 Day 24: Aluinator – jverkamp.com</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css integrity=sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous>
<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel=stylesheet>
<link rel=stylesheet href=/custom.css defer>
<script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script>
</head>
<body>
<div id=wrapper><header id=page-header role=banner>
<h1><a href=/>JP's Blog</a></h1>
<ul id=page-header-links>
<li>
<a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a>
</li>
<li>
<form action=//www.google.com/search method=get onsubmit="(function(a){a.q.value='site:blog.jverkamp.com '+a.qfront.value})(this)" class="navbar-form navbar-right" role=search _lpchecked=1>
<div class=form-group>
<input name=q type=hidden>
<input name=qfront type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button>
</div>
</form>
</li>
</ul>
<nav id=header-navigation role=navigation class=ribbon>
<ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li>
</ul>
</nav>
</header>
<div id=page-content-wrapper>
<div id=page-content><article>
<header>
<h1 class=entry-title>AoC 2021 Day 24: Aluinator</h1>
<div class=entry-meta><span class=entry-date>2021-12-24</span>
</div>
<div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li>
<a class=taxonomy-key href=/programming/languages/>Languages</a>
<ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2021/12/23/aoc-2021-day-23-amphipodinator/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/python>Python</a><a href=https://blog.jverkamp.com/2021/12/25/aoc-2021-day-25-cucumbinator/ class=next-link></a></li></ul>
</li><li>
<a class=taxonomy-key href=/programming/sources/>Sources</a>
<ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2021/12/23/aoc-2021-day-23-amphipodinator/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/advent-of-code>Advent of Code</a><a href=https://blog.jverkamp.com/2021/12/25/aoc-2021-day-25-cucumbinator/ class=next-link></a></li></ul>
</li><li>
<a class=taxonomy-key href=/programming/topics/>Topics</a>
<ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2021/12/22/aoc-2021-day-22-cubinator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/data-structures>Data Structures</a><a href=https://blog.jverkamp.com/2021/12/25/aoc-2021-day-25-cucumbinator/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2017/12/09/aoc-2017-day-9-garbage-gobbler/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/lexing>Lexing</a></li><li><a href=https://blog.jverkamp.com/2021/12/22/aoc-2021-day-22-cubinator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/mathematics>Mathematics</a><a href=https://blog.jverkamp.com/2021/12/25/aoc-2021-day-25-cucumbinator/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2021/12/23/aoc-2021-day-23-amphipodinator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/optimization>Optimization</a></li><li><a href=https://blog.jverkamp.com/2021/12/16/aoc-2021-day-16-depacketinator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/parsing>Parsing</a></li></ul>
</li><li>
<a class=taxonomy-key href=/series/>Series</a>
<ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2021/12/23/aoc-2021-day-23-amphipodinator/ class=previous-link></a><a class=taxonomy-value href=/series/advent-of-code-2021>Advent of Code 2021</a><a href=https://blog.jverkamp.com/2021/12/25/aoc-2021-day-25-cucumbinator/ class=next-link></a></li></ul>
</li><li><a class=taxonomy-key href=/programming>programming</a>
<ul>
<li><a href=https://blog.jverkamp.com/2021/12/23/aoc-2021-day-23-amphipodinator/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2021/12/25/aoc-2021-day-25-cucumbinator/ class=next-link>Next</a></ul>
</li><li><a class=taxonomy-key href=/>All Posts</a>
<ul>
<li><a href=https://blog.jverkamp.com/2021/12/23/aoc-2021-day-23-amphipodinator/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2021/12/25/aoc-2021-day-25-cucumbinator/ class=next-link>Next</a></ul>
</li></ul>
</div>
</div>
</header>
<div class=entry-content><h3 id=source-arithmetic-logic-unithttpsadventofcodecom2021day24>Source: <a href=https://adventofcode.com/2021/day/24>Arithmetic Logic Unit</a></h3>
<h4 id=part-1-simulate-an-alu-with-4-registers-w-x-y-and-z-and-instructions-defined-below-find-the-largest-14-digit-number-with-no-0-digits-which-result-in-z0><strong>Part 1:</strong> Simulate an ALU with 4 registers (<code>w</code>, <code>x</code>, <code>y</code>, and <code>z</code>) and instructions defined below. Find the largest 14 digit number with no 0 digits which result in <code>z=0</code>.</h4>
<blockquote>
<p>Instructions:</p>
<ul>
<li><code>inp a</code> - read the next input value into register <code>a</code></li>
<li><code>add a b</code> - set <code>a = a + b</code> (<code>b</code> can always be a register or an integer)</li>
<li><code>mul a b</code> - set <code>a = a * b</code></li>
<li><code>div a b</code> - set <code>a = a / b</code> (using integer division / discarding the remainder)</li>
<li><code>mod a b</code> - set <code>a = a % b</code> (<code>%</code> is the <a href=https://en.wikipedia.org/wiki/modulo>modulo</a> operator)</li>
<li><code>eql a b</code> - set <code>a = 1</code> if <code>a == b</code>, set <code>a = 0</code> otherwise</li>
</ul>
</blockquote>
<p>Fascinating. So there are a number of different ways you can approach this problem.</p>
<p>First, we can just implement the ALU and try to brute force it:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>OPS <span style=color:#f92672>=</span> {
    <span style=color:#e6db74>&#39;add&#39;</span>: <span style=color:#66d9ef>lambda</span> a, b: a <span style=color:#f92672>+</span> b,
    <span style=color:#e6db74>&#39;mul&#39;</span>: <span style=color:#66d9ef>lambda</span> a, b: a <span style=color:#f92672>*</span> b,
    <span style=color:#e6db74>&#39;div&#39;</span>: <span style=color:#66d9ef>lambda</span> a, b: a <span style=color:#f92672>//</span> b,
    <span style=color:#e6db74>&#39;mod&#39;</span>: <span style=color:#66d9ef>lambda</span> a, b: a <span style=color:#f92672>%</span> b,
    <span style=color:#e6db74>&#39;eql&#39;</span>: <span style=color:#66d9ef>lambda</span> a, b: <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>if</span> a <span style=color:#f92672>==</span> b <span style=color:#66d9ef>else</span> <span style=color:#ae81ff>0</span>,
    <span style=color:#e6db74>&#39;neq&#39;</span>: <span style=color:#66d9ef>lambda</span> a, b: <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>if</span> a <span style=color:#f92672>!=</span> b <span style=color:#66d9ef>else</span> <span style=color:#ae81ff>0</span>,
}


<span style=color:#a6e22e>@app</span><span style=color:#f92672>.</span>command()
<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(file: typer<span style=color:#f92672>.</span>FileText, input: str, quiet: bool <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>):
    input_digits <span style=color:#f92672>=</span> [int(c) <span style=color:#66d9ef>for</span> c <span style=color:#f92672>in</span> input]

    registers <span style=color:#f92672>=</span> {
        <span style=color:#e6db74>&#39;w&#39;</span>: <span style=color:#ae81ff>0</span>,
        <span style=color:#e6db74>&#39;x&#39;</span>: <span style=color:#ae81ff>0</span>,
        <span style=color:#e6db74>&#39;y&#39;</span>: <span style=color:#ae81ff>0</span>,
        <span style=color:#e6db74>&#39;z&#39;</span>: <span style=color:#ae81ff>0</span>,
    }

    <span style=color:#66d9ef>for</span> i, line <span style=color:#f92672>in</span> enumerate(file, <span style=color:#ae81ff>1</span>):
        line <span style=color:#f92672>=</span> line<span style=color:#f92672>.</span>strip()
        logging<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;[</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>:</span><span style=color:#e6db74>04d</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>registers<span style=color:#e6db74>=}</span><span style=color:#e6db74>] </span><span style=color:#e6db74>{</span>line<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)

        cmd, <span style=color:#f92672>*</span>args <span style=color:#f92672>=</span> line<span style=color:#f92672>.</span>split()

        <span style=color:#66d9ef>if</span> cmd <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;inp&#39;</span>:
            a <span style=color:#f92672>=</span> args[<span style=color:#ae81ff>0</span>]
            registers[a] <span style=color:#f92672>=</span> input_digits[<span style=color:#ae81ff>0</span>]
            input_digits <span style=color:#f92672>=</span> input_digits[<span style=color:#ae81ff>1</span>:]

        <span style=color:#66d9ef>else</span>:
            a <span style=color:#f92672>=</span> args[<span style=color:#ae81ff>0</span>]
            b <span style=color:#f92672>=</span> args[<span style=color:#ae81ff>1</span>]

            a_val <span style=color:#f92672>=</span> registers[a]
            b_val <span style=color:#f92672>=</span> registers[b] <span style=color:#66d9ef>if</span> b <span style=color:#f92672>in</span> registers <span style=color:#66d9ef>else</span> int(b)

            r_val <span style=color:#f92672>=</span> OPS[cmd](a_val, b_val)

            registers[a] <span style=color:#f92672>=</span> r_val

    <span style=color:#66d9ef>if</span> quiet:
        <span style=color:#66d9ef>return</span> registers[<span style=color:#e6db74>&#39;z&#39;</span>]
    <span style=color:#66d9ef>else</span>:
        print(registers[<span style=color:#e6db74>&#39;z&#39;</span>])
    
<span style=color:#a6e22e>@app</span><span style=color:#f92672>.</span>command()
<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part1</span>(file: typer<span style=color:#f92672>.</span>FileText):
    
    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>99999999999999</span>, <span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>):
        input <span style=color:#f92672>=</span> str(i)
        <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>in</span> input:
            <span style=color:#66d9ef>continue</span>

        file<span style=color:#f92672>.</span>seek(<span style=color:#ae81ff>0</span>)

        result <span style=color:#f92672>=</span> run(file, input, <span style=color:#66d9ef>True</span>)
        <span style=color:#66d9ef>if</span> result <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
            <span style=color:#66d9ef>break</span>

        <span style=color:#66d9ef>if</span> input<span style=color:#f92672>.</span>endswith(<span style=color:#e6db74>&#39;9999&#39;</span>):
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>input<span style=color:#e6db74>}</span><span style=color:#e6db74> -&gt; </span><span style=color:#e6db74>{</span>result<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)


    print(input)
</code></pre></div><p>Very short/clean code. Will take&mldr; forever to run. It can crank through roughly 10,000 values in 2-3 seconds. Given that we have 1 quadrillion to check (ignoring the 0 condition for now), that&rsquo;s&mldr; 6000 years to check them all. Even assuming the first two digits are 9, that&rsquo;s still 63 years.</p>
<p>Yeah, no.</p>
<p>Disclaimer, this was <em>not</em> actually my first solution to the problem. I actually wrote it up so that I could verify solutions obtained other ways, so let&rsquo;s back up and try a few other approaches.</p>
<h5 id=version-1-state-with-input-paths>Version 1: State with input paths</h5>
<p>For my first real attempt, I didn&rsquo;t look at the input code (which would really have helped). Instead, I jumped straight in to a state map sort of like this:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>
state <span style=color:#f92672>=</span> {
    <span style=color:#e6db74>&#39;w&#39;</span>: {<span style=color:#ae81ff>0</span>: {}},
    <span style=color:#e6db74>&#39;x&#39;</span>: {<span style=color:#ae81ff>0</span>: {}},
    <span style=color:#e6db74>&#39;y&#39;</span>: {<span style=color:#ae81ff>0</span>: {}},
    <span style=color:#e6db74>&#39;z&#39;</span>: {<span style=color:#ae81ff>0</span>: {}},
}

input_counter <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
<span style=color:#66d9ef>for</span> i, (cmd, a, b) <span style=color:#f92672>in</span> enumerate(code, <span style=color:#ae81ff>1</span>):
    logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;[</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>:</span><span style=color:#e6db74>04d</span><span style=color:#e6db74>}</span><span style=color:#e6db74>] </span><span style=color:#e6db74>{</span>cmd<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>a<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>b<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)

    <span style=color:#75715e># Take the current input value and add that to the state to get here</span>
    <span style=color:#66d9ef>if</span> cmd <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;inp&#39;</span>:
        state[a] <span style=color:#f92672>=</span> {
            digit: {input_counter: {digit}}
            <span style=color:#66d9ef>for</span> digit <span style=color:#f92672>in</span> ALL_INPUTS
        }
        input_counter <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>

    <span style=color:#75715e># Otherwise, try to apply the given operation</span>
    <span style=color:#75715e># But only on input states that match</span>
    <span style=color:#66d9ef>else</span>:
        op <span style=color:#f92672>=</span> OPS[cmd]

        <span style=color:#75715e># If we have a constant, just apply it (path hasn&#39;t changed)</span>
        <span style=color:#66d9ef>if</span> isinstance(b, int):
            state[a] <span style=color:#f92672>=</span> {
                op(key, b): key_path
                <span style=color:#66d9ef>for</span> key, key_path <span style=color:#f92672>in</span> state[a]<span style=color:#f92672>.</span>items()
            }

        <span style=color:#75715e># Otherwise, apply all changes if the paths are the same</span>
        <span style=color:#66d9ef>else</span>:
            new_output <span style=color:#f92672>=</span> defaultdict(<span style=color:#66d9ef>lambda</span>: defaultdict(set))

            <span style=color:#66d9ef>for</span> key, key_path <span style=color:#f92672>in</span> state[a]<span style=color:#f92672>.</span>items():
                logging<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74>- </span><span style=color:#e6db74>{</span>key<span style=color:#e6db74>=}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>key_path<span style=color:#e6db74>=}</span><span style=color:#e6db74>&#39;</span>)

                <span style=color:#66d9ef>for</span> value, value_path <span style=color:#f92672>in</span> state[b]<span style=color:#f92672>.</span>items():
                    result <span style=color:#f92672>=</span> op(key, value)
                    logging<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74>-- </span><span style=color:#e6db74>{</span>value<span style=color:#e6db74>=}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>value_path<span style=color:#e6db74>=}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>result<span style=color:#e6db74>=}</span><span style=color:#e6db74>&#39;</span>)

                    all_indexes <span style=color:#f92672>=</span> key_path<span style=color:#f92672>.</span>keys() <span style=color:#f92672>|</span> value_path<span style=color:#f92672>.</span>keys()

                    <span style=color:#75715e># There are no restrictions on inputs at all</span>
                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> key_path <span style=color:#f92672>and</span> <span style=color:#f92672>not</span> value_path:
                        logging<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74>--- No restrictions&#39;</span>)
                        <span style=color:#66d9ef>if</span> result <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> new_output:
                            new_output[result] <span style=color:#f92672>=</span> defaultdict(set)

                    <span style=color:#75715e># Key path is known but not value path</span>
                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> value_path:
                        logging<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74>--- No restriction on value&#39;</span>)
                        <span style=color:#66d9ef>for</span> i, inputs <span style=color:#f92672>in</span> key_path<span style=color:#f92672>.</span>items():
                            new_output[result][i] <span style=color:#f92672>|=</span> inputs

                    <span style=color:#75715e># Value path is known, but not key</span>
                    <span style=color:#66d9ef>elif</span> <span style=color:#f92672>not</span> key_path:
                        logging<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74>--- No restriction on key&#39;</span>)
                        <span style=color:#66d9ef>for</span> i, inputs <span style=color:#f92672>in</span> value_path<span style=color:#f92672>.</span>items():
                            new_output[result][i] <span style=color:#f92672>|=</span> inputs

                    <span style=color:#75715e># There are no overlapping indexes, include both</span>
                    <span style=color:#75715e>#elif not any(</span>
                    <span style=color:#75715e>#    index in key_path and index in value_path</span>
                    <span style=color:#75715e>#    for index in all_indexes</span>
                    <span style=color:#75715e>#):</span>
                    <span style=color:#75715e>#    logging.debug(f&#39;{PRE}--- No overlapping indexes, combine&#39;)</span>
                    <span style=color:#75715e>#    for index in all_indexes:</span>
                    <span style=color:#75715e>#        new_output[result][index] = key_path.get(index) or value_path.get(index)</span>

                    <span style=color:#75715e># The indexes are compatible</span>
                    <span style=color:#66d9ef>elif</span> any(
                        index <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> key_path <span style=color:#f92672>or</span> index <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> value_path <span style=color:#f92672>or</span> key_path[index] <span style=color:#f92672>==</span> value_path[index]
                        <span style=color:#66d9ef>for</span> index <span style=color:#f92672>in</span> all_indexes
                    ):
                        logging<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74>--- Compatible indexes, combine&#39;</span>)
                        <span style=color:#66d9ef>for</span> index <span style=color:#f92672>in</span> all_indexes:
                            new_output[result][index] <span style=color:#f92672>=</span> key_path<span style=color:#f92672>.</span>get(index) <span style=color:#f92672>or</span> value_path<span style=color:#f92672>.</span>get(index)

                    <span style=color:#66d9ef>else</span>:
                        <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>NotImplementedError</span>

            new_output <span style=color:#f92672>=</span> {
                k1: {
                    k2: s
                    <span style=color:#66d9ef>for</span> k2, s <span style=color:#f92672>in</span> new_output[k1]<span style=color:#f92672>.</span>items()
                    <span style=color:#66d9ef>if</span> s <span style=color:#f92672>!=</span> ALL_INPUTS
                }
                <span style=color:#66d9ef>for</span> k1 <span style=color:#f92672>in</span> new_output
            }
            logging<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}{</span>new_output<span style=color:#e6db74>=}</span><span style=color:#e6db74>&#39;</span>)
            state[a] <span style=color:#f92672>=</span> new_output

    <span style=color:#75715e>#logging.info(f&#39;\n{pformat(state)}&#39;)</span>

    <span style=color:#75715e># DEBUG</span>
    <span style=color:#75715e>#if i &gt; 25:</span>
    <span style=color:#75715e>#    break</span>

print()
<span style=color:#75715e>#pprint(state)</span>

pprint(state[<span style=color:#e6db74>&#39;z&#39;</span>])
</code></pre></div><p>It&rsquo;s&mldr; quite a mess. The basic idea is we have this nutty data structure where each state (of the 4 registers) stores all of the ways we could get to it. That&rsquo;s a dictionary of <code>{register: {input_key: set(input_value)}}</code>. This ignores the fact that <code>w</code> is the only register written to, it&rsquo;s always written to in input order (which we do know from the problem statement), and was a royal pain to write. So&mldr; let&rsquo;s try again.</p>
<h5 id=version-2-parsing-into-an-abstract-syntax-tree>Version 2: Parsing into an Abstract Syntax Tree</h5>
<p>For attempt 2, I&rsquo;m still going to try to solve for &lsquo;all values&rsquo;, but this time I&rsquo;m going to do it by parsing out the eventual <a href=https://en.wikipedia.org/wiki/abstract%20syntax%20tree>abstract syntax tree</a> for all values. As another way of saying it, if we have this program:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>inp w
mul x 0
add x z
mod x 26
</code></pre></div><p>You will get this sequence of trees:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text># inp w
I(0)

# mul x 0
mul
├ I(0)
└ 0

# add x z
add
├ mul
│ ├ I(0)
│ └ 0
└ R(z) # whatever Z previously was

# mod x 26
mod x 26
├ add
│ ├ mul
│ │ ├ I(0)
│ │ └ 0
│ └ R(z) # whatever Z previously was
└ 26
</code></pre></div><p>Pretty neat. And the code&rsquo;s not bad either:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#a6e22e>@dataclass</span>(frozen<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Node</span>:
    <span style=color:#66d9ef>pass</span>


<span style=color:#a6e22e>@dataclass</span>(frozen<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Literal</span>(Node):
    value: int

    <span style=color:#66d9ef>def</span> __call__(self, input: str, depth: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>) <span style=color:#f92672>-&gt;</span> int:
        <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>value


<span style=color:#a6e22e>@dataclass</span>(frozen<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Input</span>(Node):
    index: int

    <span style=color:#66d9ef>def</span> __call__(self, input: str, depth: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>) <span style=color:#f92672>-&gt;</span> int:
        <span style=color:#66d9ef>return</span> int(input[self<span style=color:#f92672>.</span>index])


<span style=color:#a6e22e>@dataclass</span>(frozen<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Operator</span>(Node):
    function: str
    left: Node
    right: Node

    <span style=color:#66d9ef>def</span> __call__(self, input: str, depth: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>) <span style=color:#f92672>-&gt;</span> int:
        l_value <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>left(input, depth <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
        r_value <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>right(input, depth <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
        <span style=color:#66d9ef>return</span> OPS[self<span style=color:#f92672>.</span>function](l_value, r_value)
</code></pre></div><p>And a parser:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>parse</span>(file: TextIO) <span style=color:#f92672>-&gt;</span> Node:
    <span style=color:#e6db74>&#39;&#39;&#39;Read input into a list of instructions.&#39;&#39;&#39;</span>

    registers <span style=color:#f92672>=</span> {
        <span style=color:#e6db74>&#39;w&#39;</span>: Literal(<span style=color:#ae81ff>0</span>),
        <span style=color:#e6db74>&#39;x&#39;</span>: Literal(<span style=color:#ae81ff>0</span>),
        <span style=color:#e6db74>&#39;y&#39;</span>: Literal(<span style=color:#ae81ff>0</span>),
        <span style=color:#e6db74>&#39;z&#39;</span>: Literal(<span style=color:#ae81ff>0</span>),
    }

    next_input_index <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>

    <span style=color:#66d9ef>for</span> i, line <span style=color:#f92672>in</span> enumerate(file, <span style=color:#ae81ff>1</span>):
        line <span style=color:#f92672>=</span> line<span style=color:#f92672>.</span>strip()
        logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;[</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>:</span><span style=color:#e6db74>04d</span><span style=color:#e6db74>}</span><span style=color:#e6db74>] Parsing </span><span style=color:#e6db74>{</span>line<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)

        cmd, <span style=color:#f92672>*</span>args <span style=color:#f92672>=</span> line<span style=color:#f92672>.</span>strip()<span style=color:#f92672>.</span>split()
        a <span style=color:#f92672>=</span> args[<span style=color:#ae81ff>0</span>]

        <span style=color:#66d9ef>if</span> cmd <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;inp&#39;</span>:
            registers[a] <span style=color:#f92672>=</span> Input(next_input_index)
            next_input_index <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
            <span style=color:#66d9ef>continue</span>

        b <span style=color:#f92672>=</span> args[<span style=color:#ae81ff>1</span>]
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> b<span style=color:#f92672>.</span>isalpha():
            right <span style=color:#f92672>=</span> Literal(int(b))
        <span style=color:#66d9ef>else</span>:
            right <span style=color:#f92672>=</span> registers[b]

        registers[a] <span style=color:#f92672>=</span> Operator(cmd, registers[a], right)

    <span style=color:#66d9ef>return</span> registers[<span style=color:#e6db74>&#39;z&#39;</span>]
</code></pre></div><p>That will return a callable/function that you can call on every value to get what the result of <code>z</code> is. Problem is&mldr; these trees are <em>gigantic</em>. So I played a neat optimization trick where I can do <code>partial evaluation</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#a6e22e>@dataclass</span>(frozen<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Node</span>:
    <span style=color:#66d9ef>pass</span>

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>partial_eval</span>(self) <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#39;Node&#39;</span>:
        <span style=color:#66d9ef>return</span> self

<span style=color:#a6e22e>@dataclass</span>(frozen<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Operator</span>(Node):
    function: str
    left: Node
    right: Node

    <span style=color:#a6e22e>@disableable_cache</span>
    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>partial_eval</span>(self) <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#39;Node&#39;</span>:
        l_value <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>left<span style=color:#f92672>.</span>partial_eval()
        r_value <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>right<span style=color:#f92672>.</span>partial_eval()

        <span style=color:#75715e># Literal evals can be directly simplified</span>
        <span style=color:#66d9ef>if</span> isinstance(l_value, Literal) <span style=color:#f92672>and</span> isinstance(r_value, Literal):
            <span style=color:#66d9ef>try</span>:
                result <span style=color:#f92672>=</span> Literal(OPS[self<span style=color:#f92672>.</span>function](l_value<span style=color:#f92672>.</span>value, r_value<span style=color:#f92672>.</span>value))
            <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>ZeroDivisionError</span>:
                result <span style=color:#f92672>=</span> Literal(<span style=color:#ae81ff>0</span>)

            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Simplifying </span><span style=color:#e6db74>{</span>self<span style=color:#e6db74>}</span><span style=color:#e6db74> -&gt; </span><span style=color:#e6db74>{</span>result<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)
            <span style=color:#66d9ef>return</span> result

        <span style=color:#75715e># additive identity</span>
        <span style=color:#66d9ef>elif</span> self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;add&#39;</span> <span style=color:#f92672>and</span> isinstance(l_value, Literal) <span style=color:#f92672>and</span> l_value<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Applying 0+a=a&#39;</span>)
            <span style=color:#66d9ef>return</span> r_value

        <span style=color:#66d9ef>elif</span> self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;add&#39;</span> <span style=color:#f92672>and</span> isinstance(r_value, Literal) <span style=color:#f92672>and</span> r_value<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Applying a+0=a&#39;</span>)
            <span style=color:#66d9ef>return</span> l_value

        <span style=color:#75715e># multiplicative identity</span>
        <span style=color:#66d9ef>elif</span> self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;mul&#39;</span> <span style=color:#f92672>and</span> isinstance(l_value, Literal) <span style=color:#f92672>and</span> l_value<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Applying 1*a=a&#39;</span>)
            <span style=color:#66d9ef>return</span> r_value

        <span style=color:#66d9ef>elif</span> self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;mul&#39;</span> <span style=color:#f92672>and</span> isinstance(r_value, Literal) <span style=color:#f92672>and</span> r_value<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Applying a*1=a&#39;</span>)
            <span style=color:#66d9ef>return</span> l_value

        <span style=color:#66d9ef>elif</span> self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;mul&#39;</span> <span style=color:#f92672>and</span> isinstance(l_value, Literal) <span style=color:#f92672>and</span> l_value<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Applying 0*a=a&#39;</span>)
            <span style=color:#66d9ef>return</span> Literal(<span style=color:#ae81ff>0</span>)

        <span style=color:#66d9ef>elif</span> self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;mul&#39;</span> <span style=color:#f92672>and</span> isinstance(r_value, Literal) <span style=color:#f92672>and</span> r_value<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Applying a*0=a&#39;</span>)
            <span style=color:#66d9ef>return</span> Literal(<span style=color:#ae81ff>0</span>)

        <span style=color:#75715e># division identities</span>
        <span style=color:#66d9ef>elif</span> self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;div&#39;</span> <span style=color:#f92672>and</span> isinstance(r_value, Literal) <span style=color:#f92672>and</span> r_value<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Applying a/1=a&#39;</span>)
            <span style=color:#66d9ef>return</span> l_value

        <span style=color:#66d9ef>elif</span> self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;div&#39;</span> <span style=color:#f92672>and</span> l_value <span style=color:#f92672>==</span> r_value:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Applying a/a=1&#39;</span>)
            <span style=color:#66d9ef>return</span> Literal(<span style=color:#ae81ff>1</span>)

        <span style=color:#75715e># equality identities</span>
        <span style=color:#66d9ef>elif</span> self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;eql&#39;</span> <span style=color:#f92672>and</span> l_value <span style=color:#f92672>==</span> r_value:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Applying a == a -&gt; 1&#39;</span>)
            <span style=color:#66d9ef>return</span> Literal(<span style=color:#ae81ff>1</span>)

        <span style=color:#66d9ef>elif</span> (
            self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;eql&#39;</span>
            <span style=color:#f92672>and</span> isinstance(l_value, Operator)
            <span style=color:#f92672>and</span> l_value<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;eql&#39;</span>
            <span style=color:#f92672>and</span> isinstance(r_value, Literal)
            <span style=color:#f92672>and</span> r_value<span style=color:#f92672>.</span>value <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>
        ):
            result <span style=color:#f92672>=</span> Operator(<span style=color:#e6db74>&#39;neq&#39;</span>, l_value<span style=color:#f92672>.</span>left, l_value<span style=color:#f92672>.</span>right)
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Converting eq to neq&#39;</span>)
            <span style=color:#66d9ef>return</span> result

        <span style=color:#75715e># If we&#39;re doing EQL any input to a value not [0, 9], that&#39;s always 0</span>
        <span style=color:#66d9ef>elif</span> (
            self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;eql&#39;</span>
            <span style=color:#f92672>and</span> isinstance(l_value, Literal)
            <span style=color:#f92672>and</span> (l_value<span style=color:#f92672>.</span>value <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>or</span> l_value<span style=color:#f92672>.</span>value <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>9</span>)
            <span style=color:#f92672>and</span> isinstance(r_value, Input)
        ):
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Simplifying impossible </span><span style=color:#e6db74>{</span>self<span style=color:#e6db74>}</span><span style=color:#e6db74> -&gt; 0&#39;</span>)
            <span style=color:#66d9ef>return</span> Literal(<span style=color:#ae81ff>0</span>)

        <span style=color:#66d9ef>elif</span> (
            self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;eql&#39;</span>
            <span style=color:#f92672>and</span> isinstance(r_value, Literal)
            <span style=color:#f92672>and</span> (r_value<span style=color:#f92672>.</span>value <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>or</span> r_value<span style=color:#f92672>.</span>value <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>9</span>)
            <span style=color:#f92672>and</span> isinstance(l_value, Input)
        ):
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Simplifying impossible </span><span style=color:#e6db74>{</span>self<span style=color:#e6db74>}</span><span style=color:#e6db74> -&gt; 0&#39;</span>)
            <span style=color:#66d9ef>return</span> Literal(<span style=color:#ae81ff>0</span>)

        <span style=color:#66d9ef>elif</span> (
            self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;neq&#39;</span>
            <span style=color:#f92672>and</span> isinstance(l_value, Literal)
            <span style=color:#f92672>and</span> (l_value<span style=color:#f92672>.</span>value <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>or</span> l_value<span style=color:#f92672>.</span>value <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>9</span>)
            <span style=color:#f92672>and</span> isinstance(r_value, Input)
        ):
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Simplifying impossible </span><span style=color:#e6db74>{</span>self<span style=color:#e6db74>}</span><span style=color:#e6db74> -&gt; 0&#39;</span>)
            <span style=color:#66d9ef>return</span> Literal(<span style=color:#ae81ff>1</span>)

        <span style=color:#66d9ef>elif</span> (
            self<span style=color:#f92672>.</span>function <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;neq&#39;</span>
            <span style=color:#f92672>and</span> isinstance(r_value, Literal)
            <span style=color:#f92672>and</span> (r_value<span style=color:#f92672>.</span>value <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>or</span> r_value<span style=color:#f92672>.</span>value <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>9</span>)
            <span style=color:#f92672>and</span> isinstance(r_value, Input)
        ):
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>PRE<span style=color:#e6db74>}</span><span style=color:#e6db74> Simplifying impossible </span><span style=color:#e6db74>{</span>self<span style=color:#e6db74>}</span><span style=color:#e6db74> -&gt; 0&#39;</span>)
            <span style=color:#66d9ef>return</span> Literal(<span style=color:#ae81ff>1</span>)

        <span style=color:#75715e># Base case</span>
        <span style=color:#66d9ef>else</span>:
            <span style=color:#66d9ef>return</span> self
</code></pre></div><p>As noted, there are a lot of mathematical operations (like <code>a*0=0</code>) that we can apply to cut out huge swatches of the AST. Especially since these are <em>actually used</em> in our input to zero out variables, for example.</p>
<p>And that really does work, it makes the trees quite a bit smaller. But&mldr; it&rsquo;s still gigantic and takes much longer than just directly evaluating the answers (in version 0). So&mldr; I abandoned this one as well, cool as it was.</p>
<h5 id=version-3-state-tree-redux--golang>Version 3: State tree redux + golang</h5>
<p>Okay, version 3. This time I was going to more cleanly do the state map that I tried in version 1. This time, the map is <code>{registers: input string}</code>. Since I know I&rsquo;m looking for the largest string, I only have to keep that.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#a6e22e>@dataclass</span>(frozen<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>State</span>:
    w: int
    x: int
    y: int
    z: int

    <span style=color:#66d9ef>def</span> __getitem__(self, key: Union[str, int]) <span style=color:#f92672>-&gt;</span> int:
        <span style=color:#66d9ef>if</span> key <span style=color:#f92672>in</span> <span style=color:#e6db74>&#39;wxyz&#39;</span>:
            <span style=color:#66d9ef>return</span> getattr(self, key)

        <span style=color:#66d9ef>return</span> int(key)

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>set</span>(self, key: str, value: int) <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#39;State&#39;</span>:
        <span style=color:#66d9ef>return</span> State(
            value <span style=color:#66d9ef>if</span> key <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;w&#39;</span> <span style=color:#66d9ef>else</span> self<span style=color:#f92672>.</span>w,
            value <span style=color:#66d9ef>if</span> key <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;x&#39;</span> <span style=color:#66d9ef>else</span> self<span style=color:#f92672>.</span>x,
            value <span style=color:#66d9ef>if</span> key <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;y&#39;</span> <span style=color:#66d9ef>else</span> self<span style=color:#f92672>.</span>y,
            value <span style=color:#66d9ef>if</span> key <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;z&#39;</span> <span style=color:#66d9ef>else</span> self<span style=color:#f92672>.</span>z,
        )

    <span style=color:#66d9ef>def</span> __repr__(self):
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>{{</span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>w<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>x<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>y<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>z<span style=color:#e6db74>}</span><span style=color:#ae81ff>}}</span><span style=color:#e6db74>&#39;</span>
</code></pre></div><p>And the actual state map:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>read</span>(file: TextIO):
    start <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>perf_counter()
    states <span style=color:#f92672>=</span> {State(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>): <span style=color:#e6db74>&#39;&#39;</span>}

    input_length <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
    <span style=color:#66d9ef>for</span> i, line <span style=color:#f92672>in</span> enumerate(file, <span style=color:#ae81ff>1</span>):
        line <span style=color:#f92672>=</span> line<span style=color:#f92672>.</span>strip()
        logging<span style=color:#f92672>.</span>info(
            <span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;[line=</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>:</span><span style=color:#e6db74>04d</span><span style=color:#e6db74>}</span><span style=color:#e6db74> len=</span><span style=color:#e6db74>{</span>input_length<span style=color:#e6db74>}</span><span style=color:#e6db74> states=</span><span style=color:#e6db74>{</span>len(states)<span style=color:#e6db74>}</span><span style=color:#e6db74> time=</span><span style=color:#e6db74>{</span>time<span style=color:#f92672>.</span>perf_counter() <span style=color:#f92672>-</span> start<span style=color:#e6db74>:</span><span style=color:#e6db74>02f</span><span style=color:#e6db74>}</span><span style=color:#e6db74>s] </span><span style=color:#e6db74>{</span>line<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)

        cmd, <span style=color:#f92672>*</span>args <span style=color:#f92672>=</span> line<span style=color:#f92672>.</span>split()

        <span style=color:#66d9ef>if</span> cmd <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;inp&#39;</span>:
            <span style=color:#75715e># Now expand again with the new inputs</span>
            a <span style=color:#f92672>=</span> args[<span style=color:#ae81ff>0</span>]
            new_states <span style=color:#f92672>=</span> {}
            input_length <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>

            <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> ALL_INPUTS:
                <span style=color:#66d9ef>for</span> state, input <span style=color:#f92672>in</span> states<span style=color:#f92672>.</span>items():
                    new_state <span style=color:#f92672>=</span> state<span style=color:#f92672>.</span>set(a, i)
                    new_input <span style=color:#f92672>=</span> input <span style=color:#f92672>+</span> str(i)

                    <span style=color:#66d9ef>if</span> new_state <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> new_states:
                        new_states[new_state] <span style=color:#f92672>=</span> new_input

                    new_states[new_state] <span style=color:#f92672>=</span> max(new_states[new_state], new_input)

            states <span style=color:#f92672>=</span> new_states

        <span style=color:#66d9ef>else</span>:
            <span style=color:#75715e># Otherwise apply the function to all current states</span>
            a, b <span style=color:#f92672>=</span> args
            states <span style=color:#f92672>=</span> {
                state<span style=color:#f92672>.</span>set(a, OPS[cmd](state[a], state[b])): input
                <span style=color:#66d9ef>for</span> state, input <span style=color:#f92672>in</span> states<span style=color:#f92672>.</span>items()
            }

    result <span style=color:#f92672>=</span> <span style=color:#66d9ef>None</span>

    logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#39;Scanning for final solution&#39;</span>)
    <span style=color:#66d9ef>for</span> state, input <span style=color:#f92672>in</span> states<span style=color:#f92672>.</span>items():
        <span style=color:#66d9ef>if</span> state<span style=color:#f92672>.</span>z <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>:<span style=color:#e6db74>&#34;&#34;&#34;  &#34;&#34;&#34;</span>
            <span style=color:#66d9ef>continue</span>

        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> result <span style=color:#f92672>or</span> input <span style=color:#f92672>&gt;</span> result:
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;New maximum found: </span><span style=color:#e6db74>{</span>input<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)
            result <span style=color:#f92672>=</span> input

    <span style=color:#66d9ef>return</span> result
</code></pre></div><p>Let&rsquo;s see it with debug mode on:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#960050;background-color:#1e0010>$</span> python3 aluinator<span style=color:#f92672>-</span>v3<span style=color:#f92672>.</span>py <span style=color:#f92672>--</span>debug part1 input<span style=color:#f92672>.</span>txt

<span style=color:#75715e># It runs pretty fast at first!</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>21</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0001</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.000013</span>s] inp w
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>21</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0002</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>9</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.000126</span>s] mul x <span style=color:#ae81ff>0</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>21</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0003</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>9</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.000165</span>s] add x z
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>21</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0004</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>9</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.000194</span>s] mod x <span style=color:#ae81ff>26</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>21</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0005</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>9</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.000222</span>s] div z <span style=color:#ae81ff>1</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>21</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0006</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>9</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.000250</span>s] add x <span style=color:#ae81ff>10</span>
<span style=color:#f92672>...</span>
<span style=color:#75715e># But every time there&#39;s an inp, we multiple states by 9...</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>22</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0090</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>7290</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.268895</span>s] add z y
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>22</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0091</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>7290</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.276940</span>s] inp w
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>22</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0092</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>65610</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.392064</span>s] mul x <span style=color:#ae81ff>0</span>
<span style=color:#f92672>...</span>
<span style=color:#75715e># We do sometimes simplify a bunch of states (with things like mul y 0, which is basically y = 0)</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>22</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0098</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>65610</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>0.945848</span>s] eql x <span style=color:#ae81ff>0</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>22</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0099</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>65610</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>1.051166</span>s] mul y <span style=color:#ae81ff>0</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>22</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0100</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>11340</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>1.136822</span>s] add y <span style=color:#ae81ff>25</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>22</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0101</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>11340</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>1.149788</span>s] mul y x
<span style=color:#f92672>...</span>
<span style=color:#75715e># And even by the 8th input, we&#39;re already taking about a second per command</span>
<span style=color:#75715e># And we&#39;re only around halfway through the program and have 6 more 9x of state counts...</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>29</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0131</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>8</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>649539</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>7.659318</span>s] div z <span style=color:#ae81ff>26</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>24</span>:<span style=color:#ae81ff>30</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0132</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>8</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>649539</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>8.575231</span>s] add x <span style=color:#f92672>-</span><span style=color:#ae81ff>12</span>
<span style=color:#f92672>...</span>
<span style=color:#75715e># Yeah, 20 seconds per iteration isn&#39;t great (we&#39;re just about to inp again)</span>
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>31</span>:<span style=color:#ae81ff>08</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0179</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>5970510</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>406.829251</span>s] mul y x
<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>31</span>:<span style=color:#ae81ff>29</span> INFO [line<span style=color:#f92672>=</span><span style=color:#ae81ff>0180</span> len<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span> states<span style=color:#f92672>=</span><span style=color:#ae81ff>5970510</span> time<span style=color:#f92672>=</span><span style=color:#ae81ff>427.306535</span>s] add z y
<span style=color:#f92672>...</span>
</code></pre></div><p>And what&rsquo;s worse, by the time I got to here, I was eating up 32GB of RAM and getting into swap space. So&mldr; that didn&rsquo;t help runtime. In any case, I didn&rsquo;t let this run out. I did try to rewrite it in golang though!</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;bufio&#34;</span>
	<span style=color:#e6db74>&#34;fmt&#34;</span>
	<span style=color:#e6db74>&#34;log&#34;</span>
	<span style=color:#e6db74>&#34;os&#34;</span>
	<span style=color:#e6db74>&#34;strconv&#34;</span>
	<span style=color:#e6db74>&#34;strings&#34;</span>
)

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>state</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>w</span> <span style=color:#66d9ef>int</span>
	<span style=color:#a6e22e>x</span> <span style=color:#66d9ef>int</span>
	<span style=color:#a6e22e>y</span> <span style=color:#66d9ef>int</span>
	<span style=color:#a6e22e>z</span> <span style=color:#66d9ef>int</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#a6e22e>state</span>) <span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>r</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>int</span> {
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;w&#34;</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>w</span>
	} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;x&#34;</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>w</span>
	} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;y&#34;</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>y</span>
	} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;z&#34;</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>z</span>
	} <span style=color:#66d9ef>else</span> {
		<span style=color:#a6e22e>result</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>Atoi</span>(<span style=color:#a6e22e>r</span>)
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
			<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Panic</span>(<span style=color:#a6e22e>err</span>)
		}
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>
	}
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#a6e22e>state</span>) <span style=color:#a6e22e>set</span>(<span style=color:#a6e22e>r</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>v</span> <span style=color:#66d9ef>int</span>) <span style=color:#a6e22e>state</span> {
	<span style=color:#a6e22e>result</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>s</span>
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;w&#34;</span> {
		<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>w</span> = <span style=color:#a6e22e>v</span>
	} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;x&#34;</span> {
		<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>x</span> = <span style=color:#a6e22e>v</span>
	} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;y&#34;</span> {
		<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>y</span> = <span style=color:#a6e22e>v</span>
	} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;z&#34;</span> {
		<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>z</span> = <span style=color:#a6e22e>v</span>
	}
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>input</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>min</span> <span style=color:#66d9ef>string</span>
	<span style=color:#a6e22e>max</span> <span style=color:#66d9ef>string</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>minput</span>(<span style=color:#a6e22e>i1</span> <span style=color:#a6e22e>input</span>, <span style=color:#a6e22e>i2</span> <span style=color:#a6e22e>input</span>) <span style=color:#a6e22e>input</span> {
	<span style=color:#a6e22e>result</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>input</span>{<span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>}

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>i1</span>.<span style=color:#a6e22e>min</span> &lt; <span style=color:#a6e22e>i2</span>.<span style=color:#a6e22e>min</span> { 
		<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>min</span> = <span style=color:#a6e22e>i1</span>.<span style=color:#a6e22e>min</span>
	} <span style=color:#66d9ef>else</span> {
		<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>min</span> = <span style=color:#a6e22e>i2</span>.<span style=color:#a6e22e>min</span>
	}

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>i1</span>.<span style=color:#a6e22e>max</span> &gt; <span style=color:#a6e22e>i2</span>.<span style=color:#a6e22e>max</span> { 
		<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>max</span> = <span style=color:#a6e22e>i1</span>.<span style=color:#a6e22e>max</span>
	} <span style=color:#66d9ef>else</span> {
		<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>max</span> = <span style=color:#a6e22e>i2</span>.<span style=color:#a6e22e>max</span>
	}

	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Op</span> <span style=color:#66d9ef>func</span>(<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span>

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>is_reg</span>(<span style=color:#a6e22e>s</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>bool</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>s</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;w&#34;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>s</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;x&#34;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>s</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;y&#34;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>s</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;z&#34;</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#75715e>// Store a list of operators
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>operators</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#a6e22e>Op</span>)
	<span style=color:#a6e22e>operators</span>[<span style=color:#e6db74>&#34;add&#34;</span>] = <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span> }
	<span style=color:#a6e22e>operators</span>[<span style=color:#e6db74>&#34;mul&#34;</span>] = <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>b</span> }
	<span style=color:#a6e22e>operators</span>[<span style=color:#e6db74>&#34;div&#34;</span>] = <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> { <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span> } <span style=color:#66d9ef>else</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>b</span> } }
	<span style=color:#a6e22e>operators</span>[<span style=color:#e6db74>&#34;mod&#34;</span>] = <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> { <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span> } <span style=color:#66d9ef>else</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>%</span> <span style=color:#a6e22e>b</span> } }
	<span style=color:#a6e22e>operators</span>[<span style=color:#e6db74>&#34;eql&#34;</span>] = <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> { <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>b</span> { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span> } <span style=color:#66d9ef>else</span> { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span> } }

	<span style=color:#75715e>// Open the input file
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>file</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Open</span>(<span style=color:#e6db74>&#34;input.txt&#34;</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
	}
	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>Close</span>()

	<span style=color:#75715e>// Initialize the register states
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>states</span> <span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>state</span>]<span style=color:#a6e22e>input</span>
	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>new_states</span> <span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>state</span>]<span style=color:#a6e22e>input</span>

	<span style=color:#a6e22e>states</span> = make(<span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>state</span>]<span style=color:#a6e22e>input</span>)
	<span style=color:#a6e22e>states</span>[<span style=color:#a6e22e>state</span>{<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>}] = <span style=color:#a6e22e>input</span>{<span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>}

	<span style=color:#75715e>// Start scanning through the file line by line
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>scanner</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>bufio</span>.<span style=color:#a6e22e>NewScanner</span>(<span style=color:#a6e22e>file</span>)
	<span style=color:#a6e22e>input_length</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
	<span style=color:#a6e22e>line_number</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>scanner</span>.<span style=color:#a6e22e>Scan</span>() {
		<span style=color:#a6e22e>line_number</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
		<span style=color:#a6e22e>line</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>scanner</span>.<span style=color:#a6e22e>Text</span>()
		<span style=color:#a6e22e>fields</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Fields</span>(<span style=color:#a6e22e>line</span>)
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;[%d len=%d states=%d] %s&#34;</span>, <span style=color:#a6e22e>line_number</span>, <span style=color:#a6e22e>input_length</span>, len(<span style=color:#a6e22e>states</span>), <span style=color:#a6e22e>line</span>)

		<span style=color:#75715e>// Build a new set of states from the current set
</span><span style=color:#75715e></span>		<span style=color:#a6e22e>new_states</span> = make(<span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>state</span>]<span style=color:#a6e22e>input</span>)
		
		<span style=color:#75715e>// An input value adds 9 new states for each old state, each possible non-zero input
</span><span style=color:#75715e></span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>fields</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;inp&#34;</span> {
			<span style=color:#a6e22e>a</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fields</span>[<span style=color:#ae81ff>1</span>]
			<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>9</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
				<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>old_state</span>, <span style=color:#a6e22e>old_input</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>states</span> {
					<span style=color:#75715e>// Update the proper variable in the input string
</span><span style=color:#75715e></span>					<span style=color:#a6e22e>new_state</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>old_state</span>.<span style=color:#a6e22e>set</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>i</span>)
					
					<span style=color:#75715e>// Calculate the new minimum/maximum input string
</span><span style=color:#75715e></span>					<span style=color:#a6e22e>new_input</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>input</span>{<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprint</span>(<span style=color:#a6e22e>old_input</span>.<span style=color:#a6e22e>min</span>, <span style=color:#a6e22e>i</span>), <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprint</span>(<span style=color:#a6e22e>old_input</span>.<span style=color:#a6e22e>max</span>, <span style=color:#a6e22e>i</span>)}
						
					<span style=color:#75715e>// Check if we&#39;ve already stored that in our new_state, if so keep the min/max
</span><span style=color:#75715e></span>					<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>prev_new_input</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>new_states</span>[<span style=color:#a6e22e>new_state</span>]; <span style=color:#a6e22e>ok</span> {
						<span style=color:#a6e22e>new_states</span>[<span style=color:#a6e22e>new_state</span>] = <span style=color:#a6e22e>minput</span>(<span style=color:#a6e22e>prev_new_input</span>, <span style=color:#a6e22e>new_input</span>)
					} <span style=color:#66d9ef>else</span> {
						<span style=color:#a6e22e>new_states</span>[<span style=color:#a6e22e>new_state</span>] = <span style=color:#a6e22e>new_input</span>
					}
				}
			}

			
		} <span style=color:#66d9ef>else</span> {
			<span style=color:#75715e>// Fetch the proper operator function
</span><span style=color:#75715e></span>			<span style=color:#a6e22e>f</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>operators</span>[<span style=color:#a6e22e>fields</span>[<span style=color:#ae81ff>0</span>]]
			<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>ok</span> {
				<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#e6db74>&#34;Unknown operator&#34;</span>, <span style=color:#a6e22e>fields</span>[<span style=color:#ae81ff>1</span>])
			}
			<span style=color:#a6e22e>a</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fields</span>[<span style=color:#ae81ff>1</span>]

			<span style=color:#75715e>// Update all old states
</span><span style=color:#75715e></span>			<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>old_state</span>, <span style=color:#a6e22e>old_input</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>states</span> {
				<span style=color:#a6e22e>b</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fields</span>[<span style=color:#ae81ff>2</span>]

				<span style=color:#a6e22e>a_val</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>old_state</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>a</span>)
				<span style=color:#a6e22e>b_val</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>old_state</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>b</span>)
				<span style=color:#a6e22e>r_val</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>f</span>(<span style=color:#a6e22e>a_val</span>, <span style=color:#a6e22e>b_val</span>)

				<span style=color:#a6e22e>new_state</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>old_state</span>.<span style=color:#a6e22e>set</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>r_val</span>)

				<span style=color:#75715e>// Check if we&#39;ve already stored that in our new_state, if so keep the min/max
</span><span style=color:#75715e></span>				<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>prev_new_input</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>new_states</span>[<span style=color:#a6e22e>new_state</span>]; <span style=color:#a6e22e>ok</span> {
					<span style=color:#a6e22e>new_states</span>[<span style=color:#a6e22e>new_state</span>] = <span style=color:#a6e22e>minput</span>(<span style=color:#a6e22e>prev_new_input</span>, <span style=color:#a6e22e>old_input</span>)
				} <span style=color:#66d9ef>else</span> {
					<span style=color:#a6e22e>new_states</span>[<span style=color:#a6e22e>new_state</span>] = <span style=color:#a6e22e>old_input</span>
				}
			}
		}

		<span style=color:#75715e>// Finally, swap new_state to state
</span><span style=color:#75715e></span>		<span style=color:#a6e22e>states</span> = <span style=color:#a6e22e>new_states</span>
	}

	<span style=color:#a6e22e>result</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>input</span>{<span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>}
	<span style=color:#a6e22e>result_set</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>false</span>

	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>input</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>states</span> {
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>z</span> <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> {
			<span style=color:#66d9ef>continue</span>
		}

		<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>result_set</span> {
			<span style=color:#a6e22e>result</span> = <span style=color:#a6e22e>input</span>
			<span style=color:#a6e22e>result_set</span> = <span style=color:#66d9ef>true</span>
			<span style=color:#66d9ef>continue</span>
		}

		<span style=color:#a6e22e>result</span> = <span style=color:#a6e22e>minput</span>(<span style=color:#a6e22e>result</span>, <span style=color:#a6e22e>input</span>)
	}

	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>result</span>)
}
</code></pre></div><p>That&rsquo;s not actually that bad! I should write more go. And while it did work faster at first&mldr; it had a lot <em>more</em> issues with RAM (might be how I wrote it and a lack of successful GC?). When I came back in the morning, my computer had actually rebooted, so&mldr; that wasn&rsquo;t great.</p>
<p>Fun to write though?</p>
<h5 id=version-4-lets-just-do-it-by-hand>Version 4: Let&rsquo;s just do it by hand</h5>
<p>So&mldr; let&rsquo;s try something completely different. One you I noticed (finally) was that the input was 14 almost identical blocks that looked like this:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>inp w
mul x 0
add x z
mod x 26
div z 1  # zdiv, this can be 1 or 26
add x 10 # cx
eql x w
eql x 0
mul y 0
add y 25
mul y x
add y 1
mul z y
mul y 0
add y w
add y 10 # cy
mul y x
add z y
</code></pre></div><p>There are 3 constants that change, which I&rsquo;ve named <code>zdiv</code>, <code>cx</code>, and <code>cy</code>.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>zdiv cx      cy
1    10      10      
1    13      5       
1    15      12      
26   -12     12      
1    14      6       
26   -2      6       
1    13      15      
26   -12     15      
1    15      7       
1    11      11      
26   -3      11      
26   -13     7       
26   -12     5       
26   -13     10      
</code></pre></div><p>All of the rest of the code is the same. We can actually de-compile it if we want:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f</span>(z, i, zdiv, cx, cy):
    <span style=color:#e6db74>&#39;&#39;&#39;Take the previous z, the input value, and two constants.&#39;&#39;&#39;</span>

    <span style=color:#75715e># mul x 0</span>
    <span style=color:#75715e># add x z</span>
    <span style=color:#75715e># mod x 26</span>
    <span style=color:#75715e># div z 1 -- zdiv (either 1 or 26)</span>
    <span style=color:#75715e># add x 10 -- cx</span>
    <span style=color:#75715e># &gt;&gt; x = (z // zdiv) % 26 + cx</span>

    <span style=color:#75715e># eql x w</span>
    <span style=color:#75715e># eql x 0</span>
    <span style=color:#75715e># &gt;&gt; x is 1 if x != i</span>
    x_flag <span style=color:#f92672>=</span> (i <span style=color:#f92672>==</span> (z <span style=color:#f92672>//</span> zdiv) <span style=color:#f92672>%</span> <span style=color:#ae81ff>26</span> <span style=color:#f92672>+</span> cx)

    <span style=color:#75715e># mul y 0</span>
    <span style=color:#75715e># add y 25</span>
    <span style=color:#75715e># mul y x</span>
    <span style=color:#75715e># &gt;&gt; because x is 0 or 1 if i == z % 26 + cx</span>
    <span style=color:#75715e># &gt;&gt; y == 0 or 25 if i == z % 26 + cx</span>

    <span style=color:#75715e># add y 1</span>
    <span style=color:#75715e># mul z y</span>
    <span style=color:#75715e># &gt;&gt; y == 1 or 26 if i == z % 26 + cx</span>

    <span style=color:#75715e># so:</span>
    <span style=color:#75715e># &gt;&gt; z *= 26 if i == z % 26 + cx</span>
    <span style=color:#75715e># &gt;&gt; z *= 1 (nop) if i != z % 26 + cx</span>
    <span style=color:#66d9ef>if</span> x_flag:
        z <span style=color:#f92672>*=</span> <span style=color:#ae81ff>26</span>

    <span style=color:#75715e># mul y 0</span>
    <span style=color:#75715e># add y w</span>
    <span style=color:#75715e># add y 10 -- cy</span>
    <span style=color:#75715e># mul y x</span>
    <span style=color:#75715e># add z y</span>
    <span style=color:#66d9ef>if</span> x_flag:
        z <span style=color:#f92672>+=</span> i <span style=color:#f92672>+</span> cy
</code></pre></div><p>Which ends up with this very compact block:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f</span>(z, i, zdiv, cx, cy):
    <span style=color:#66d9ef>if</span> (i <span style=color:#f92672>==</span> (z <span style=color:#f92672>//</span> zdiv) <span style=color:#f92672>%</span> <span style=color:#ae81ff>26</span> <span style=color:#f92672>+</span> cx):
        <span style=color:#66d9ef>return</span> z <span style=color:#f92672>*</span> <span style=color:#ae81ff>26</span> <span style=color:#f92672>+</span> i <span style=color:#f92672>+</span> cy
</code></pre></div><p>So&mldr; what&rsquo;s interesting about that? Well, we&rsquo;re always either multiplying, dividing, or modding <code>z</code> by 26. That makes me think of a base 26 number (or a letter)? And that last bit, <code>zdiv</code>&mldr; that&rsquo;s either <code>1</code> (which dividing by 1 is a no-op) or <code>26</code>, removing a character from the base26 number.</p>
<p>Hmm&mldr;</p>
<p>Okay. Let&rsquo;s think of <code>z</code> as a stack of base-26 numbers (I know, crazy right?). Each successful iteration, we&rsquo;re going to advance the stack (multiplying by 26) and push <code>i + cy</code> onto the stack. <em>But</em> if we have a <code>z / 26</code> step, that means we&rsquo;re essentially going to pop <em>off</em> the stack, checking the value against <code>+ cx</code>&mldr; which makes an equality between two different input values!</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>zd  cx  cy  stack / equations
1	10	10  i1+10
1	13	5   i1+10, i2+5
1	15	12  i1+10, i2+5, i3+12
26	-12	12  i4 = i3 + 12 - 12 = i3
1	14	6   i1+10, i2+5, i5+6
26	-2	4   i6 = i5 + 6 - 2 = i5 + 4
1	13	15  i1+10, i2+5, i7+15
26	-12	3   i8 = i7 + 15 - 12 = i7 + 3
1	15	7   i1+10, i2+5, i9+7
1	11	11  i1+10, i2+5, i9+7, i10+11
26	-3	2   i11 = i10 + 11 - 3 = i10 + 8
26	-13	12  i12 = i9 + 7 - 13 = i9 - 6
26	-12	4   i13 = i2 + 5 - 12 = i2 - 7
26	-13	11  i14 = i1 + 10 - 13 = i1 - 3
</code></pre></div><p>So each time <code>zd=1</code>, add <code>i#+cy</code> to the stack, so we add <code>i1+10</code>, then <code>i2+5</code>, then <code>i3+12</code>. Then we get our first <code>zd=26</code>, so we&rsquo;ll pop the <code>i3+12</code> off the stack and combine it with <code>i4</code> and the current <code>cx</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>i4 = i3 + 12 - 12 
i4 = i3
</code></pre></div><p>Interesting. We continue as above, eventually creating a system of 7 equations that relate all 14 variables. That should be enough to generate all possible output values!</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>i4 = i3
i6 = i5 + 4
i8 = i7 + 3
i11 = i10 + 8
i12 = i9 - 6
i13 = i2 - 7
i14 = i1 - 3
</code></pre></div><p>But what&rsquo;s more, we know we&rsquo;re looking for the largest. So for each pair, we&rsquo;ll always set (at least) one 9 (the larger value) and then use the question to set the smaller. So <code>i4 = i3 = 9</code>, but if <code>i6 = 9</code>, then <code>9 = i5 + 4</code> so <code>i5 = 5</code>. And so on:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>---------</span><span style=color:#ae81ff>11111</span>
<span style=color:#ae81ff>12345678901234</span>
<span style=color:#f92672>.</span><span style=color:#ae81ff>.99</span><span style=color:#f92672>..........</span>
<span style=color:#f92672>.</span><span style=color:#ae81ff>.9959</span><span style=color:#f92672>........</span>
<span style=color:#f92672>.</span><span style=color:#ae81ff>.995969</span><span style=color:#f92672>......</span>
<span style=color:#f92672>.</span><span style=color:#ae81ff>.995969.19</span><span style=color:#f92672>...</span>
<span style=color:#f92672>.</span><span style=color:#ae81ff>.9959699193</span><span style=color:#f92672>..</span>
<span style=color:#ae81ff>.999596991932</span><span style=color:#f92672>.</span>
<span style=color:#ae81ff>99995969919326</span>
</code></pre></div><p>Trying that against our simulator/version 0:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ python3 aluinator.py run input.txt <span style=color:#ae81ff>99995969919326</span>

<span style=color:#ae81ff>0</span>
</code></pre></div><p>BAM! And the first 4 digits were all 9, so it wouldn&rsquo;t have taken 63 years&mldr; just 30 weeks. Yay 2022 I suppose?</p>
<p>That is very cool. It&rsquo;s not nearly as &lsquo;code&rsquo; as many of the other solutions, but it&rsquo;s still pretty awesome IMO.</p>
<h4 id=part-2-find-the-smallest-such-14-digit-number-with-no-0-digits-such-that-z0><strong>Part 2:</strong> Find the smallest such 14 digit number with no 0 digits such that <code>z=0</code>.</h4>
<p>Nothing changes, we already have the equations! We just need to the earlier value to <code>1</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>---------11111
12345678901234
..11..........
..1115........
..111514......
..111514.19...
..1115147191..
.811151471911.
48111514719111
</code></pre></div><p>Verify:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#960050;background-color:#1e0010>$</span> python3 aluinator<span style=color:#f92672>.</span>py run input<span style=color:#f92672>.</span>txt <span style=color:#ae81ff>48111514719111</span>

<span style=color:#ae81ff>0</span>
</code></pre></div><p>BAM!</p>
<h4 id=generating-solutions>Generating solutions</h4>
<p>Okay, now that I see how to solve the problem, I want to actually write a bit more code. Let&rsquo;s write something that can pull out those constants and do the same equations:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#a6e22e>@app</span><span style=color:#f92672>.</span>command()
<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>solve</span>(file: typer<span style=color:#f92672>.</span>FileText):

    blocks <span style=color:#f92672>=</span> []
    zdiv, cx, cy <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>

    logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#39;Finding block parameters&#39;</span>)
    <span style=color:#66d9ef>for</span> i, line <span style=color:#f92672>in</span> enumerate(file, <span style=color:#ae81ff>1</span>):
        line <span style=color:#f92672>=</span> line<span style=color:#f92672>.</span>strip()
        last <span style=color:#f92672>=</span> line<span style=color:#f92672>.</span>split()[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]
        logging<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;[</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>:</span><span style=color:#e6db74>04d</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>zdiv<span style=color:#e6db74>=}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>cx<span style=color:#e6db74>=}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>cy<span style=color:#e6db74>=}</span><span style=color:#e6db74>] </span><span style=color:#e6db74>{</span>line<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)

        <span style=color:#66d9ef>if</span> line<span style=color:#f92672>.</span>startswith(<span style=color:#e6db74>&#39;inp&#39;</span>):
            <span style=color:#66d9ef>if</span> zdiv:
                logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;Block found: </span><span style=color:#e6db74>{</span>zdiv<span style=color:#e6db74>=}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>cx<span style=color:#e6db74>=}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>cy<span style=color:#e6db74>=}</span><span style=color:#e6db74>&#39;</span>)
                blocks<span style=color:#f92672>.</span>append((zdiv, cx, cy))

        <span style=color:#66d9ef>elif</span> line<span style=color:#f92672>.</span>startswith(<span style=color:#e6db74>&#39;div z &#39;</span>) <span style=color:#f92672>and</span> last <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> <span style=color:#e6db74>&#39;wxyz&#39;</span>:
            zdiv <span style=color:#f92672>=</span> int(line<span style=color:#f92672>.</span>split()[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])

        <span style=color:#66d9ef>elif</span> line<span style=color:#f92672>.</span>startswith(<span style=color:#e6db74>&#39;add x &#39;</span>) <span style=color:#f92672>and</span> last <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> <span style=color:#e6db74>&#39;wxyz&#39;</span>:
            cx <span style=color:#f92672>=</span> int(line<span style=color:#f92672>.</span>split()[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])

        <span style=color:#66d9ef>elif</span> line<span style=color:#f92672>.</span>startswith(<span style=color:#e6db74>&#39;add y &#39;</span>) <span style=color:#f92672>and</span> last <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> <span style=color:#e6db74>&#39;wxyz&#39;</span>:
            cy <span style=color:#f92672>=</span> int(line<span style=color:#f92672>.</span>split()[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])

    logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;Block found: </span><span style=color:#e6db74>{</span>zdiv<span style=color:#e6db74>=}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>cx<span style=color:#e6db74>=}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{</span>cy<span style=color:#e6db74>=}</span><span style=color:#e6db74>&#39;</span>)
    blocks<span style=color:#f92672>.</span>append((zdiv, cx, cy))


    logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#39;----- ----- -----&#39;</span>)
    logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#39;Generating equations&#39;</span>)
    stack <span style=color:#f92672>=</span> []
    equations <span style=color:#f92672>=</span> []

    <span style=color:#66d9ef>for</span> i, (zdiv, cx, cy) <span style=color:#f92672>in</span> enumerate(blocks):
        <span style=color:#66d9ef>if</span> zdiv <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>:
            stack<span style=color:#f92672>.</span>append((i, cy))
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>zdiv<span style=color:#e6db74>:</span><span style=color:#e6db74>&lt;4d</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>cx<span style=color:#e6db74>:</span><span style=color:#e6db74>&lt;4d</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>cy<span style=color:#e6db74>:</span><span style=color:#e6db74>&lt;4d</span><span style=color:#e6db74>}</span><span style=color:#e6db74>  </span><span style=color:#e6db74>{</span>stack<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)
        <span style=color:#66d9ef>else</span>:
            j, cy <span style=color:#f92672>=</span> stack<span style=color:#f92672>.</span>pop()
            equations<span style=color:#f92672>.</span>append((i, j, cx <span style=color:#f92672>+</span> cy))
            logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>zdiv<span style=color:#e6db74>:</span><span style=color:#e6db74>&lt;4d</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>cx<span style=color:#e6db74>:</span><span style=color:#e6db74>&lt;4d</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>cy<span style=color:#e6db74>:</span><span style=color:#e6db74>&lt;4d</span><span style=color:#e6db74>}</span><span style=color:#e6db74>  i</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>}</span><span style=color:#e6db74> = i</span><span style=color:#e6db74>{</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74> + </span><span style=color:#e6db74>{</span>cx<span style=color:#e6db74>}</span><span style=color:#e6db74> + </span><span style=color:#e6db74>{</span>cy<span style=color:#e6db74>}</span><span style=color:#e6db74> = i</span><span style=color:#e6db74>{</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74> + </span><span style=color:#e6db74>{</span>cx<span style=color:#f92672>+</span>cy<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)

    logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#39;----- ----- -----&#39;</span>)
    logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#39;Solving for minimum/maximum&#39;</span>)

    part1 <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;?&#39;</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>14</span>
    part2 <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;?&#39;</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>14</span>

    <span style=color:#66d9ef>for</span> i, j, delta <span style=color:#f92672>in</span> equations:
        i, j <span style=color:#f92672>=</span> min(i, j), max(i, j)

        <span style=color:#66d9ef>if</span> delta <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>:
            part1[i], part1[j] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;9&#39;</span>, str(<span style=color:#ae81ff>9</span> <span style=color:#f92672>+</span> delta)
            part2[i], part2[j] <span style=color:#f92672>=</span> str(<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> abs(delta)), <span style=color:#e6db74>&#39;1&#39;</span>

        <span style=color:#66d9ef>else</span>:
            part1[i], part1[j] <span style=color:#f92672>=</span> str(<span style=color:#ae81ff>9</span> <span style=color:#f92672>-</span> delta), <span style=color:#e6db74>&#39;9&#39;</span>
            part2[i], part2[j] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;1&#39;</span>, str(<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> delta)

        equation <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;i</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>}</span><span style=color:#e6db74> = i</span><span style=color:#e6db74>{</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74> + </span><span style=color:#e6db74>{</span>delta<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>
        logging<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>equation<span style=color:#e6db74>:</span><span style=color:#e6db74>&lt;15s</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>.</span>join(part1)<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>.</span>join(part2)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)

    print(<span style=color:#e6db74>&#39;part1:&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>join(part1))
    print(<span style=color:#e6db74>&#39;part2:&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>join(part2))
</code></pre></div><p>It&rsquo;s the same idea, but with nice logging output:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ python3 aluinator.py --debug solve input.txt

Finding block parameters
Block found: zdiv<span style=color:#f92672>=</span>1, cx<span style=color:#f92672>=</span>10, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
Block found: zdiv<span style=color:#f92672>=</span>1, cx<span style=color:#f92672>=</span>13, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>
Block found: zdiv<span style=color:#f92672>=</span>1, cx<span style=color:#f92672>=</span>15, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span>
Block found: zdiv<span style=color:#f92672>=</span>26, cx<span style=color:#f92672>=</span>-12, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span>
Block found: zdiv<span style=color:#f92672>=</span>1, cx<span style=color:#f92672>=</span>14, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span>
Block found: zdiv<span style=color:#f92672>=</span>26, cx<span style=color:#f92672>=</span>-2, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>
Block found: zdiv<span style=color:#f92672>=</span>1, cx<span style=color:#f92672>=</span>13, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>15</span>
Block found: zdiv<span style=color:#f92672>=</span>26, cx<span style=color:#f92672>=</span>-12, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
Block found: zdiv<span style=color:#f92672>=</span>1, cx<span style=color:#f92672>=</span>15, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>7</span>
Block found: zdiv<span style=color:#f92672>=</span>1, cx<span style=color:#f92672>=</span>11, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>11</span>
Block found: zdiv<span style=color:#f92672>=</span>26, cx<span style=color:#f92672>=</span>-3, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>
Block found: zdiv<span style=color:#f92672>=</span>26, cx<span style=color:#f92672>=</span>-13, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span>
Block found: zdiv<span style=color:#f92672>=</span>26, cx<span style=color:#f92672>=</span>-12, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>
Block found: zdiv<span style=color:#f92672>=</span>26, cx<span style=color:#f92672>=</span>-13, cy<span style=color:#f92672>=</span><span style=color:#ae81ff>11</span>
----- ----- -----
Generating equations
<span style=color:#ae81ff>1</span>    <span style=color:#ae81ff>10</span>   <span style=color:#ae81ff>10</span>    <span style=color:#f92672>[(</span>0, 10<span style=color:#f92672>)]</span>
<span style=color:#ae81ff>1</span>    <span style=color:#ae81ff>13</span>   <span style=color:#ae81ff>5</span>     <span style=color:#f92672>[(</span>0, 10<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>1, 5<span style=color:#f92672>)]</span>
<span style=color:#ae81ff>1</span>    <span style=color:#ae81ff>15</span>   <span style=color:#ae81ff>12</span>    <span style=color:#f92672>[(</span>0, 10<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>1, 5<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>2, 12<span style=color:#f92672>)]</span>
<span style=color:#ae81ff>26</span>   -12  <span style=color:#ae81ff>12</span>    i3 <span style=color:#f92672>=</span> i2 + -12 + 12 <span style=color:#f92672>=</span> i2 + <span style=color:#ae81ff>0</span>
<span style=color:#ae81ff>1</span>    <span style=color:#ae81ff>14</span>   <span style=color:#ae81ff>6</span>     <span style=color:#f92672>[(</span>0, 10<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>1, 5<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>4, 6<span style=color:#f92672>)]</span>
<span style=color:#ae81ff>26</span>   -2   <span style=color:#ae81ff>6</span>     i5 <span style=color:#f92672>=</span> i4 + -2 + 6 <span style=color:#f92672>=</span> i4 + <span style=color:#ae81ff>4</span>
<span style=color:#ae81ff>1</span>    <span style=color:#ae81ff>13</span>   <span style=color:#ae81ff>15</span>    <span style=color:#f92672>[(</span>0, 10<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>1, 5<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>6, 15<span style=color:#f92672>)]</span>
<span style=color:#ae81ff>26</span>   -12  <span style=color:#ae81ff>15</span>    i7 <span style=color:#f92672>=</span> i6 + -12 + 15 <span style=color:#f92672>=</span> i6 + <span style=color:#ae81ff>3</span>
<span style=color:#ae81ff>1</span>    <span style=color:#ae81ff>15</span>   <span style=color:#ae81ff>7</span>     <span style=color:#f92672>[(</span>0, 10<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>1, 5<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>8, 7<span style=color:#f92672>)]</span>
<span style=color:#ae81ff>1</span>    <span style=color:#ae81ff>11</span>   <span style=color:#ae81ff>11</span>    <span style=color:#f92672>[(</span>0, 10<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>1, 5<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>8, 7<span style=color:#f92672>)</span>, <span style=color:#f92672>(</span>9, 11<span style=color:#f92672>)]</span>
<span style=color:#ae81ff>26</span>   -3   <span style=color:#ae81ff>11</span>    i10 <span style=color:#f92672>=</span> i9 + -3 + 11 <span style=color:#f92672>=</span> i9 + <span style=color:#ae81ff>8</span>
<span style=color:#ae81ff>26</span>   -13  <span style=color:#ae81ff>7</span>     i11 <span style=color:#f92672>=</span> i8 + -13 + 7 <span style=color:#f92672>=</span> i8 + -6
<span style=color:#ae81ff>26</span>   -12  <span style=color:#ae81ff>5</span>     i12 <span style=color:#f92672>=</span> i1 + -12 + 5 <span style=color:#f92672>=</span> i1 + -7
<span style=color:#ae81ff>26</span>   -13  <span style=color:#ae81ff>10</span>    i13 <span style=color:#f92672>=</span> i0 + -13 + 10 <span style=color:#f92672>=</span> i0 + -3
----- ----- -----
Solving <span style=color:#66d9ef>for</span> minimum/maximum
i2 <span style=color:#f92672>=</span> i3 + <span style=color:#ae81ff>0</span>     ??99?????????? ??11??????????
i4 <span style=color:#f92672>=</span> i5 + <span style=color:#ae81ff>4</span>     ??9959???????? ??1115????????
i6 <span style=color:#f92672>=</span> i7 + <span style=color:#ae81ff>3</span>     ??995969?????? ??111514??????
i9 <span style=color:#f92672>=</span> i10 + <span style=color:#ae81ff>8</span>    ??995969?19??? ??111514?19???
i8 <span style=color:#f92672>=</span> i11 + -6   ??9959699193?? ??1115147191??
i1 <span style=color:#f92672>=</span> i12 + -7   ?999596991932? ?811151471911?
i0 <span style=color:#f92672>=</span> i13 + -3   <span style=color:#ae81ff>99995969919326</span> <span style=color:#ae81ff>48111514719111</span>

part1: <span style=color:#ae81ff>99995969919326</span>
part2: <span style=color:#ae81ff>48111514719111</span>
</code></pre></div><p>Fast too! (As it should be):</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>--- Day 24: Arithmetic Logic Uni ---

$ python3 aluinator.py solve input.txt
part1: <span style=color:#ae81ff>99995969919326</span>
part2: <span style=color:#ae81ff>48111514719111</span>
<span style=color:#75715e># time 50759375ns / 0.05s</span>
</code></pre></div><p>A bit better than 30 weeks. :D</p>
<p>Anyways. That was weird and fun. A neat change of pace. Onward and lastward!</p></div>
</article></div>
</div><footer id=page-footer role=contentinfo>
<nav id=footer-navigation role=navigation class=ribbon>
<ul class=main-navigation>
<li><a href=/archive-by-date/>All posts: By Date</a></li>
<li><a href=/archive-by-tag/>All posts: By Tag</a></li>
<li>
<a href=/atom.xml>
RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg>
</sup>
</a>
</li><li>
<a href=/programming/atom.xml>
RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg>
</sup>
</a>
</li></ul>
</nav>
<div id=page-footer-content>
<div class=legal>
<p>
All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US>
<img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png>
</a>
</p>
<p>
Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a>
</p>
</div>
</div>
</footer>
</div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js integrity=sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin=anonymous></script>
<script src=/custom.js></script>
</body>
</html>