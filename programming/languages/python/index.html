<!DOCTYPE html>
<html onclick >
<head>
    <title>jverkamp.com</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8"><link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="//blog.jverkamp.com/feed/">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css" integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" />

<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel="stylesheet">

<link rel="stylesheet" href="/custom.css" defer />

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <div id="wrapper"><header id="page-header" role="banner">
    <h1><a href="/">JP's Blog</a></h1>

    <ul id="page-header-links">
        <li>
            <a href="https://github.com/jpverkamp">GitHub</a> *
            <a href="https://www.flickr.com/photos/jpverkamp">Flickr</a> *
            <a href="/resume">Resume</a>
        </li>
        <li>
            <form action="//www.google.com/search" method="get" onsubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search" _lpchecked="1">
                <div class="form-group">
                    <input name="q" type="hidden">
                    <input name="qfront" type="text" class="form-control" placeholder="Search">
                    <button type="submit" class="btn btn-default" value="Search">Search</button>
                </div>
            </form>
        </li>
    </ul>

    <nav id="header-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation"><li><a href="https://blog.jverkamp.com/reviews/">Reviews</a></li><li><a href="https://blog.jverkamp.com/photography/">Photography</a></li><li><a href="https://blog.jverkamp.com/programming/">Programming</a></li><li><a href="https://blog.jverkamp.com/maker/">Maker</a></li><li><a href="https://blog.jverkamp.com/writing/">Writing</a></li><li><a href="https://blog.jverkamp.com/research/">Research</a></li><li class="subscription" data-subscription="rss"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </nav>
</header>
<div id="page-content-wrapper">
            <div id="page-content">
    <div class="entry-content"></div>

    <article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2021/01/27/a-tabbed-view-for-hugo/" class="clearfix">A Tabbed View for Hugo</a></h1>

    		<div class="entry-meta"><span class="entry-date">2021-01-27</span>
                </div>
    	</header>
    	<div class="entry-content">One thing I&rsquo;ve been using for a lot of my recent posts (such as Backtracking Worms) is a tabbed view of code that can show arbitrarily tabs full of code or other content and render them wonderfully! For example, we can turn:
{{&lt; tabs &gt;}} {{&lt; sourcetab ruby &quot;examples/art-station.rune&quot; &gt;}} {{&lt; tab &quot;art-station.svg&quot; &gt;}} {{&lt; include &quot;output/art-station.svg&quot; &gt;}} {{&lt; /tab &gt;}} {{&lt; sourcetab ruby &quot;examples/astrology-and-moons.rune&quot; &gt;}} {{&lt; tab &quot;astrology-and-moons.svg&quot; &gt;}} {{&lt; include &quot;output/astrology-and-moons.<p><a href="/2021/01/27/a-tabbed-view-for-hugo/">read more...</a></p></div>

        <hr /></article><article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2021/01/05/yt-cast-generating-podcasts-from-youtube-urls/" class="clearfix">yt-cast: Generating podcasts from YouTube URLs</a></h1>

    		<div class="entry-meta"><span class="entry-date">2021-01-05</span>
                </div>
    	</header>
    	<div class="entry-content"><p>Today&rsquo;s goal: Turn a collection of YouTube links into a podcast.</p>
<p>Start with a <code>config.json</code> like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;brandon-sanderson&#34;</span>: [
    <span style="color:#e6db74">&#34;https://www.youtube.com/watch?v=H4lWbkERlxo&amp;list=PLSH_xM-KC3ZuOZayK68JAAjj5W9ShnFVC&#34;</span>,
    <span style="color:#e6db74">&#34;https://www.youtube.com/watch?v=YyaC7NmPsc0&amp;list=PLSH_xM-KC3ZtjKTR2z8rPWxv1pP6bOVzZ&#34;</span>,
    <span style="color:#e6db74">&#34;https://www.youtube.com/watch?v=o3V0Zok_kT0&amp;list=PLSH_xM-KC3ZuteHw3G1ZrCDWQrAVgO0ER&#34;</span>
  ]
}
</code></pre></div><p>And it will automatically download all referenced YouTube videos, convert them to MP3 (both using <a href="https://ytdl-org.github.io/youtube-dl/index.html">youtube-dl</a>), and serve an RSS feed that&rsquo;s compatible with most podcast programs.</p>
<p>Tested URLs include:</p>
<ul>
<li>Playlist URLs (like the above)</li>
<li>Single video URLs</li>
<li>Channel URLs</li>
</ul>
<p>Most youtube URLs should work though.</p><p><a href="/2021/01/05/yt-cast-generating-podcasts-from-youtube-urls/">read more...</a></p></div>

        <hr /></article><article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2020/08/11/extending-my-ec2-script/" class="clearfix">Extending my EC2 script</a></h1>

    		<div class="entry-meta"><span class="entry-date">2020-08-11</span>
                </div>
    	</header>
    	<div class="entry-content"><p>Another quick post.</p>
<p>What feels like a lifetime ago, I <a href="https://blog.jverkamp.com/2015/10/30/finding-ec2-instances-by-tag/">wrote a post</a> about finding <code>ec2</code> instances by name. I honestly use that script just about every day, mostly for automatically finding instances to SSH to (a la <a href="https://blog.jverkamp.com/2017/12/18/ssh-config-proxycommand-tricks/">SSH config tricks</a>). But there are a few other quick things I&rsquo;ve done with it:</p>
<ul>
<li><code>ec2-script</code> - Run a script on all instances of a given name</li>
<li><code>ec2-disk</code> - A specialization of <code>ec2-script</code> to check main disk usage</li>
<li><code>terminate</code> - A script that I use with <code>ec2</code> to terminate instances from the command line</li>
<li><code>ec2-cycle</code> - Slow cycle a given set of <code>ec2</code> instances by terminating so many per minute</li>
</ul>
<p>All of which are included in my <a href="https://github.com/jpverkamp/dotfiles/tree/master/bin">dotfiles</a>.</p><p><a href="/2020/08/11/extending-my-ec2-script/">read more...</a></p></div>

        <hr /></article><article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2020/07/16/an-spf-dns-server/" class="clearfix">An SPF DNS Server</a></h1>

    		<div class="entry-meta"><span class="entry-date">2020-07-16</span>
                </div>
    	</header>
    	<div class="entry-content"><p>The <a href="https://en.wikipedia.org/wiki/Sender%20Policy%20Framework">Sender Policy Framework</a> is one of those things that&rsquo;s really powerful and useful to help prevent phishing and email spam, but can be a royal pain to work with. Specifically, SPF is a series of DNS TXT records<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> with a specific format that can be looked up by any email service to verify that an email was sent by a server that should be authorized to send email on your behalf. For example</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#e6db74">&#34;v=spf1 ip4:192.0.2.0/24 ip4:198.51.100.123 a -all&#34;</span>
</code></pre></div><ul>
<li><code>v=spf1</code> - tells the client this is an SPF record and should always start the record</li>
<li><code>{key}[:{value}]?</code> - one of many different key/value pairs that can define the record
<ul>
<li>in the case above a <code>ip4</code> key species an <a href="https://en.wikipedia.org/wiki/IPv4">IPv4</a> address range that can send emails on your behalf (the value can be optional)</li>
<li>the <code>a</code> above is another special case where if the sender domain (<code>jp@example.com</code> would be <code>example.com</code>) resolves via a <code>DNS A</code> record to the server that sent the email, it&rsquo;s allows</li>
</ul>
</li>
<li><code>-all</code> is a fallthrough case meaning &lsquo;fail all that didn&rsquo;t match a previous case</li>
</ul>
<p>There are a number of other cases, but we&rsquo;ll get to the other interesting ones in a bit.</p><p><a href="/2020/07/16/an-spf-dns-server/">read more...</a></p></div>

        <hr /></article><article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2020/07/14/directly-monitoring-sidekiq-in-redis/" class="clearfix">Directly monitoring Sidekiq in Redis</a></h1>

    		<div class="entry-meta"><span class="entry-date">2020-07-14</span>
                </div>
    	</header>
    	<div class="entry-content"><p>Another thing that came up recently: we have many (many) <a href="https://github.com/mperham/sidekiq">sidekiq</a> queues. Each has their own admin interface, but sometimes you just want all of the information in one place. Of course, you could bookmark all of the pages. Or make a single page with a lot of frames (remember <a href="https://en.wikipedia.org/wiki/HTML%20frames">HTML frames</a>?). Or use their API. But where&rsquo;s the fun in that? Instead, let&rsquo;s dig straight into the redis backend and see what we can see!</p><p><a href="/2020/07/14/directly-monitoring-sidekiq-in-redis/">read more...</a></p></div>

        <hr /></article><article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2020/07/07/a-smart-mysql-wrapper/" class="clearfix">A Smart MySQL Wrapper</a></h1>

    		<div class="entry-meta"><span class="entry-date">2020-07-07</span>
                </div>
    	</header>
    	<div class="entry-content"><p>One thing that I often need to do is deal with a large collection of database servers in different clusters and in different environments. On top of that, sometimes, I want a UI, sometime I want a CLI to script. And sometimes I&rsquo;m on a VPN and sometimes I&rsquo;m not. All together, it&rsquo;s a rather complicated number of saved connections and CLI switches and everything else. All together, I want:</p>
<ul>
<li>Specify the cluster, environment, and mode (read/write/adhoc)</li>
<li>Specify if I want to run via CLI or via UI</li>
<li>Specify an optional user with safely stored and used passwords</li>
<li>Automatically connected via SSH tunnel if I&rsquo;m not on VPN, but not if I am (for CLI or VPN)</li>
</ul>
<p>Let&rsquo;s do it!</p><p><a href="/2020/07/07/a-smart-mysql-wrapper/">read more...</a></p></div>

        <hr /></article><article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2020/06/10/observation-server/" class="clearfix">Observation Server</a></h1>

    		<div class="entry-meta"><span class="entry-date">2020-06-10</span>
                </div>
    	</header>
    	<div class="entry-content"><p>For a number of years now, I&rsquo;ve been writing down my &lsquo;observations&rsquo;. Essentially, it&rsquo;s a semi-structured set of text files that I keep in Dropbox. One for each day, in a folder by month. I record interesting people I see, things I did worth doing, and things my children did which were adorable.</p>
<p>After a while, I started wanting to look back, so first, I wrote a relatively simple script that would go back through my archives and send me everything I did 1/2/3/4/etc years ago. That worked well enough, but it ended up generating a lot of emails to go through some days. So the second generation is a server that can format those pages and display them as a nice webpage.</p>
<p>The most interesting part perhaps was dealing with the tarballs that I keep the archives in (they&rsquo;re plain text, so they compress very well). I wanted to keep them compressed, so I had to decompress them in memory on the fly.</p><p><a href="/2020/06/10/observation-server/">read more...</a></p></div>

        <hr /></article><article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2019/05/02/prevent-javascript-links-by-parsing-urls/" class="clearfix">Prevent JavaScript links by parsing URLs</a></h1>

    		<div class="entry-meta"><span class="entry-date">2019-05-02</span>
                </div>
    	</header>
    	<div class="entry-content"><p>If you have a website that allows users to submit URLs, one of the (many many) things people will try to do to break your site is to submit URLs that use the <code>javascript:</code> protocol (rather than the more expected <code>http:</code> or <code>https:</code>). This is almost never something that you want, since it allows users to submit essentially arbitrary code that other users will run on click in the context of your domain (<a href="https://en.wikipedia.org/wiki/same%20origin%20policy">same origin policy</a>).</p>
<p>So how do you fix it?</p>
<p>First thought would be to try to check the protocol:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">safe_url</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">url</span>) =&gt; <span style="color:#f92672">!</span><span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">match</span>(<span style="color:#e6db74">/^javascript:/</span>)
[Function<span style="color:#f92672">:</span> <span style="color:#a6e22e">safe_url</span>]

<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">safe_url</span>(<span style="color:#e6db74">&#39;http://www.example.com&#39;</span>)
<span style="color:#66d9ef">true</span>

<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">safe_url</span>(<span style="color:#e6db74">&#39;javascript:alert(1)&#39;</span>)
<span style="color:#66d9ef">false</span>
</code></pre></div><p><a href="/2019/05/02/prevent-javascript-links-by-parsing-urls/">read more...</a></p></div>

        <hr /></article><article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2019/04/27/tiny-helper-scripts-for-command-line-mysql/" class="clearfix">Tiny Helper Scripts for Command Line MySQL</a></h1>

    		<div class="entry-meta"><span class="entry-date">2019-04-27</span>
                </div>
    	</header>
    	<div class="entry-content"><p>Quite often, I&rsquo;ll find myself wanting to query and manipulate MySQL data entirely on the command line. I could be building up a pipeline or working on a task that I&rsquo;m going to eventually automate but haven&rsquo;t quite gotten to yet. Whenver I have to do something like that, I have a small pile of scripts I&rsquo;ve written over time that help out:</p>
<ul>
<li><code>skiphead</code>: Skip the first line of output, used to skip over headers in a query response</li>
<li><code>skipuntil</code>: Skip all lines until we see one matching a pattern, used to resume partial tasks</li>
<li><code>commaify</code>: Take a list of single values on the command line and turn them into a comma separated list (for use in <code>IN</code> clauses)</li>
<li><code>csv2json</code>: a <a href="https://blog.jverkamp.com/2015/12/11/csv-to-json/">previously posted</a> script for converting csv/tab delimited output to json</li>
<li><code>jq</code>: not my script, but used to take the output of csv2json and query it further in ways that would be complicated to do with SQL</li>
</ul>
<p>Admitedly, the first two of those are one liners and I could easily remember them, but the advantage of a single command that does it is tab completion. <code>sk&lt;tab&gt;</code>, arrow to select which one I want, and off we go. I could put them as an alias, but I don&rsquo;t always use the same shell (mostly <a href="https://fishshell.com/">fish</a>, but sometimes Bash or Zsh).</p><p><a href="/2019/04/27/tiny-helper-scripts-for-command-line-mysql/">read more...</a></p></div>

        <hr /></article><article class="li">
    	<header>
    		<h1 class="entry-title">
                <a href="https://blog.jverkamp.com/2019/01/04/listing-and-downloading-s3-versions/" class="clearfix">Listing and Downloading S3 Versions</a></h1>

    		<div class="entry-meta"><span class="entry-date">2019-01-04</span>
                </div>
    	</header>
    	<div class="entry-content"><p>Today I found the need to look through all old versions of a file in S3 that had versioning turned on. You can do it through the AWS Console, but I prefer command line tools. You can do it with <a href="https://aws.amazon.com/cli/">awscli</a>, but the flags are long and I can never quite remember them. So let&rsquo;s write up a quick script using <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html">boto3</a> (and as a bonus, try out <a href="https://click.palletsprojects.com/en/7.x/">click</a>)!</p><p><a href="/2019/01/04/listing-and-downloading-s3-versions/">read more...</a></p></div>

        <hr /></article><nav id="pagination-navigation" role="navigation">
<ul class="pagination">
  <li class="page-item">
    <a href="/programming/languages/python/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
  </li>
  <li class="page-item disabled">
    <a  class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
  </li>
  <li class="page-item active">
    <a class="page-link" href="/programming/languages/python/">1</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="/programming/languages/python/page/2/">2</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="/programming/languages/python/page/3/">3</a>
  </li>
  <li class="page-item disabled">
    <span aria-hidden="true">&nbsp;&hellip;&nbsp;</span>
  </li>
  <li class="page-item">
    <a class="page-link" href="/programming/languages/python/page/15/">15</a>
  </li>
  <li class="page-item">
    <a href="/programming/languages/python/page/2/" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
  </li>
  <li class="page-item">
    <a href="/programming/languages/python/page/15/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
  </li>
</ul>

</nav></div>
        </div><footer id="page-footer" role="contentinfo">
    <nav id="footer-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
            <li><a href="/archive-by-date/">All posts: By Date</a></li>
            <li><a href="/archive-by-tag/">All posts: By Tag</a></li>

            <li>
                <a href="/atom.xml">
                    RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li><li>
                <a href="/programming/languages/atom.xml">
                    RSS: programming/languages<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li></ul>
    </nav>

    <div id="page-footer-content">
        <div class="legal">
            <p>
                All posts unless otherwise mentioned are licensed under
                <a rel="license" href="//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
                    <img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png">
                </a>
            </p>

            <p>
                Any source code unless otherwise mentioned is licensed under the <a href="//directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
            </p>
        </div>
    </div>
</footer>
</div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js" integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js" integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin="anonymous"></script>

<script src="/custom.js"></script>
</body>
</html>
