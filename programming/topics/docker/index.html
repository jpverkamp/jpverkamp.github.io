<!doctype html><html><head><title>Programming, Topic:
Docker - jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_17422284542669262002.min.834c1e2313951f0c25b90152fe8b62250eab4a2e8cbd2560fa1a1cdc91c71733.js integrity="sha256-g0weIxOVHwwluQFS/otiJQ6rSi6MvSVg+hoc3JHHFzM=" defer></script><script src=/jquery.fancybox_16245765822111608191.min.a8e11addf4349ee2ca5045f7f3cbf1febbf2c3a2840be2143ea69539c10f8c7f.js integrity="sha256-qOEa3fQ0nuLKUEX388vx/rvyw6KEC+IUPqaVOcEPjH8=" defer></script><script src=/katex_17296078054267651618.min.4a06464d8d6f8358d8896de62b53b5a89205d335dfd8c5b6b27edd7c039ae9d8.js integrity="sha256-SgZGTY1vg1jYiW3mK1O1qJIF0zXf2MW2sn7dfAOa6dg=" defer></script><script src=/auto-render_14944144240389301023.min.e694d9d5eae2917984179683ead27b998784a81398e8836c369373d2c67fc32a.js integrity="sha256-5pTZ1erikXmEF5aD6tJ7mYeEqBOY6INsNpNz0sZ/wyo=" defer></script><script src=/bigfoot_28293813221957978.min.af671f08986f0a2267c5a0cb2748b005489e47fa25f55479b200e2a563d23022.js integrity="sha256-r2cfCJhvCiJnxaDLJ0iwBUieR/ol9VR5sgDipWPSMCI=" defer></script><script src=/mermaid_9520146763733687737.min.a17078917a4403310cd19178939257b706fb5e1da76167c9f4a6d2123c9d59c4.js integrity="sha256-oXB4kXpEAzEM0ZF4k5JXtwb7Xh2nYWfJ9KbSEjydWcQ=" defer></script><script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script><link rel=stylesheet href=/katex_13658330645258633971.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_8781527669040159104.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_5330465509389191777.min.7420a1602c62a85d4b50881c1d8ce42f72c049dc2b097d440696425d6e54bb1e.css integrity="sha256-dCChYCxiqF1LUIgcHYzkL3LASdwrCX1EBpZCXW5Uux4="><link rel=stylesheet href=/css_1846377409604050217.min.fffe842bc000dd1fe8661ac6427a392a08faa95e8edab1ea7fb98c5f8dac6a6f.css integrity="sha256-//6EK8AA3R/oZhrGQno5Kgj6qV6O2rHqf7mMX42sam8="><link rel=stylesheet href=/main.min.5ff4b87c40715a96119d8b5f34d971604fc65ab18f4870fd8da6ede9fd1e6188.css integrity="sha256-X/S4fEBxWpYRnYtfNNlxYE/GWrGPSHD9jabt6f0eYYg="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/home-automation/>Automation</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><h1 class=entry-title data-pagefind-meta=title>Programming, Topic:
Docker</h1><div class=entry-content></div><h2>Recent posts</h2><div class=post-list><article class=post-card><div class=post-card-content><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2020/08/01/docker-magic-arbitrary-docker-runtimes-in-place/ class=clearfix>Docker Magic - Arbitrary docker runtimes in place</a></h1><div class=entry-meta><span class=entry-date>2020-08-01</span><span class=entry-category> in <a href=/programming/>Programming</a></span></div></header><div class=entry-content><p>A quick post today.</p><p>I find myself working with a surprising number of different languages/environments day to day. In the last week, I&rsquo;ve worked with PHP, Python, Go, Ruby, and Javascript. And different versions of several of those. While I could install something like <a href=https://virtualenv.pypa.io/en/latest/ target=_blank rel=noopener>virtualenv</a> for Python / <a href=https://github.com/rbenv/rbenv target=_blank rel=noopener>rbenv</a> for Ruby / etc, I already have a tool exactly designed for this sort of thing: Docker!</p><p><a href=/2020/08/01/docker-magic-arbitrary-docker-runtimes-in-place/>read more...</a></p></div></div></article><article class=post-card><div class=post-card-image><a href=https://blog.jverkamp.com/2018/04/01/deep-dreams-with-fish-and-docker/><img src=/embeds/2018/dream-sorcery.gif alt="Deep Dreams with Fish and Docker" loading=lazy></a></div><div class=post-card-content><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2018/04/01/deep-dreams-with-fish-and-docker/ class=clearfix>Deep Dreams with Fish and Docker</a></h1><div class=entry-meta><span class=entry-date>2018-04-01</span><span class=entry-category> in <a href=/programming/>Programming</a></span></div></header><div class=entry-content><p><a href=https://github.com/google/deepdream target=_blank rel=noopener>DeepDream</a> is a <a href=https://research.googleblog.com/2015/06/inceptionism-going-deeper-into-neural.html target=_blank rel=noopener>research project</a> originally from Google that gives you a look into how <a href=https://en.wikipedia.org/wiki/neural%20networks>neural networks</a> see the world. They&rsquo;re fascinating, bizarre, and a lot of fun to play with. A bit of work getting them to work on your own machine though.</p><p>Luckily, GitHub user <a href=https://github.com/saturnism/deepdream-cli-docker target=_blank rel=noopener>saturnism</a> has put together a lovely Docker-based tool that will do just that for us: <a href=https://github.com/saturnism/deepdream-cli-docker target=_blank rel=noopener>deepdream-cli-docker</a>. Unfortunately, the commands are still a bit long. Let&rsquo;s clean it up a bit and add the ability to dream about non-JPGs (animated GIFs especially!).</p><figure><img src=/embeds/2018/dream-sorcery.gif></figure><p><a href=/2018/04/01/deep-dreams-with-fish-and-docker/>read more...</a></p></div></div></article><article class=post-card><div class=post-card-image><a href=https://blog.jverkamp.com/2018/02/15/automatic-self-signed-https-for-local-development/><img src=/embeds/2018/connection-not-private.png alt="Automatic self-signed HTTPS for local development" loading=lazy></a></div><div class=post-card-content><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2018/02/15/automatic-self-signed-https-for-local-development/ class=clearfix>Automatic self-signed HTTPS for local development</a></h1><div class=entry-meta><span class=entry-date>2018-02-15</span><span class=entry-category> in <a href=/programming/>Programming</a></span></div></header><div class=entry-content><p>From time to time when doing web development, you need to test something related to HTTPS. In some cases, the application you&rsquo;re writing already supports HTTPS natively and that&rsquo;s no problem. But more often (and probably better, in my opinion) is the case when you have another service (be it an AWS ELB or an nginx layer) that will terminate the HTTPS connection for you so your application doesn&rsquo;t have to know how to speak HTTPS.</p><p>In those cases, how can you test functionality that specifically interacts with HTTPS?</p><p>Today I will show you <code>autohttps</code>, a thin nginx proxy using Docker and a <a href=https://en.wikipedia.org/wiki/self%20signed%20certificate>self signed certificate</a> to automatically create an HTTPS proxy in front of your application.</p><p><a href=/2018/02/15/automatic-self-signed-https-for-local-development/>read more...</a></p></div></div></article><article class=post-card><div class=post-card-image><a href=https://blog.jverkamp.com/2018/01/23/running-local-proxies/><img src=/embeds/2018/proxy-switchyomega-ssh.png alt="Running local proxies" loading=lazy></a></div><div class=post-card-content><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2018/01/23/running-local-proxies/ class=clearfix>Running local proxies</a></h1><div class=entry-meta><span class=entry-date>2018-01-23</span><span class=entry-category> in <a href=/other/>Other</a></span></div></header><div class=entry-content><p>As I&rsquo;ve mentioned a couple of times recently<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>, I have set a handful of different things on my local machines to make remote development a bit easier. This time around, I have two more to add to that list:</p><ul><li>Setting up a local SOCKS proxy with SSH</li><li>Setting up a local TOR proxy for testing / more anonymous browsing</li><li>Configuring your browser to use these proxies for some/all traffic</li></ul><p>In both cases, I have these running on an always-on server that I use for various projects just like this. It could just as easily be set up to run on a <a href=https://www.raspberrypi.org/ target=_blank rel=noopener>Raspberry Pi</a> or on your local machine.</p><p><a href=/2018/01/23/running-local-proxies/>read more...</a></p></div></div></article><article class=post-card><div class=post-card-content><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2017/11/15/clock-drift-in-docker-containers/ class=clearfix>Clock drift in Docker containers</a></h1><div class=entry-meta><span class=entry-date>2017-11-15</span><span class=entry-category> in <a href=/programming/>Programming</a></span></div></header><div class=entry-content><p>I was working on a docker container which uses the aws cli to mess around with some autoscaling groups when I got a somewhat strange error:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>A client error <span style=color:#f92672>(</span>SignatureDoesNotMatch<span style=color:#f92672>)</span> occurred when calling the DescribeAutoScalingGroups operation: Signature not yet current: 20171115T012426Z is still later than 20171115T012420Z <span style=color:#f92672>(</span>20171115T011920Z + <span style=color:#ae81ff>5</span> min.<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>Hmm.</p><p>Are the clocks off?</p><p><a href=/2017/11/15/clock-drift-in-docker-containers/>read more...</a></p></div></div></article><article class=post-card><div class=post-card-content><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2016/04/19/ensuring-docker-machine-is-running/ class=clearfix>Ensuring docker-machine is running</a></h1><div class=entry-meta><span class=entry-date>2016-04-19</span><span class=entry-category> in <a href=/programming/>Programming</a></span></div></header><div class=entry-content><p>When developing using <a href=https://www.docker.com/>docker</a> on OS X, you&rsquo;ll currently<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> have to use <a href=https://docs.docker.com/machine/>docker-machine</a> to spin up a virtual machine that is actually running the docker containers. Running a virtual machine takes up a bit more in the way of resources than just the docker containers, so if you&rsquo;re not actually developing at the moment, it&rsquo;s helpful to be able to start up the virtual machine only when you need it.</p><p>The current way I have to do that:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-machine start default
</span></span><span style=display:flex><span>$ eval <span style=color:#66d9ef>$(</span>docker-machine env default<span style=color:#66d9ef>)</span>
</span></span></code></pre></div><p>What&rsquo;s worse, the latter command has to be run for every shell that you start up. It&rsquo;s by no means a hard pair of commands and you could easily wrap them in an alias or put them in your <code>.profile</code> equivalent (which is what I used to do). But unfortunately, I found a completely unrelated bug in <a href=https://github.com/tony/tmuxp><code>tmuxp</code></a>: if the shell takes too long to start up, <code>tmuxp</code> essentially won&rsquo;t work. The above <code>eval</code> command took long enough to hit this limit.</p><p><a href=/2016/04/19/ensuring-docker-machine-is-running/>read more...</a></p></div></div></article><article class=post-card><div class=post-card-image><a href=https://blog.jverkamp.com/2015/07/20/configuring-websockets-behind-an-aws-elb/><img src=/embeds/2015/configure-elb.png alt="Configuring Websockets behind an AWS ELB" loading=lazy></a></div><div class=post-card-content><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2015/07/20/configuring-websockets-behind-an-aws-elb/ class=clearfix>Configuring Websockets behind an AWS ELB</a></h1><div class=entry-meta><span class=entry-date>2015-07-20</span><span class=entry-category> in <a href=/programming/>Programming</a></span></div></header><div class=entry-content><p>Recently at work, we were trying to get an application that uses <a href=https://en.wikipedia.org/wiki/websockets>websockets</a> working on an <a href=https://aws.amazon.com/>AWS</a> instance behind an <a href=https://aws.amazon.com/elasticloadbalancing/>ELB (load balancer)</a> and <a href=http://nginx.org/>nginx</a> on the instance.</p><p>If you&rsquo;re either not using a secure connection or handling the cryptography on the instance (either in nginx or Flask), it works right out of the box. But if you want the ELB to handle TLS termination it doesn&rsquo;t work nearly as well&mldr; Luckily, after a bit of fiddling, I got it working.</p><p><strong>Update 2018-05-31:</strong> A much easier solution, <a href=https://aws.amazon.com/blogs/aws/new-aws-application-load-balancer/ target=_blank rel=noopener>just use an ALB</a>:</p><blockquote><p><strong>WebSocket</strong> allows you to set up long-standing TCP connections between your client and your server. This is a more efficient alternative to the old-school method which involved HTTP connections that were held open with a “heartbeat” for very long periods of time. WebSocket is great for mobile devices and can be used to deliver stock quotes, sports scores, and other dynamic data while minimizing power consumption. ALB provides native support for WebSocket via the <code>ws://</code> and <code>wss://</code> protocols.</p></blockquote><p><a href=/2015/07/20/configuring-websockets-behind-an-aws-elb/>read more...</a></p></div></div></article><article class=post-card><div class=post-card-image><a href=https://blog.jverkamp.com/2015/04/03/performance-problems-with-flask-and-docker/><img src=/embeds/2015/health-check.png alt="Performance problems with Flask and Docker" loading=lazy></a></div><div class=post-card-content><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2015/04/03/performance-problems-with-flask-and-docker/ class=clearfix>Performance problems with Flask and Docker</a></h1><div class=entry-meta><span class=entry-date>2015-04-03</span><span class=entry-category> in <a href=/programming/>Programming</a></span></div></header><div class=entry-content><p>I had an interesting problem recently on a project I was working on. It&rsquo;s a simple <a href=http://flask.pocoo.org/>Flask</a>-based webapp, designed to be deployed to <a href=https://aws.amazon.com/>AWS</a> using <a href=https://www.docker.com/>Docker</a>. The application worked just fine when I was running it locally, but as soon as I pushed the docker container&mldr;</p><p>Latency spikes. Bad enough that the application was failing AWS&rsquo;s healthy host checks, cycling in and out of existence<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>:</p><figure><img src=/embeds/2015/health-check.png></figure><p><a href=/2015/04/03/performance-problems-with-flask-and-docker/>read more...</a></p></div></div></article><article class=post-card><div class=post-card-content><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2015/02/04/docker-bash-and-docker-stop-all/ class=clearfix>docker-bash and docker-stop-all</a></h1><div class=entry-meta><span class=entry-date>2015-02-04</span><span class=entry-category> in <a href=/programming/>Programming</a></span></div></header><div class=entry-content><p>I&rsquo;ve been using <a href=https://www.docker.com/>Docker</a> a fair bit at work, so I&rsquo;ve added a few quick aliases to my dotfiles make that a little bit easier:</p><ul><li><code>docker-bash</code> - attach a <code>bash</code> shell to the first available docker instance</li><li><code>docker-stop-all</code> - stop all running docker instances</li></ul><p><a href=/2015/02/04/docker-bash-and-docker-stop-all/>read more...</a></p></div></div></article></div><nav id=pagination-navigation role=navigation></nav><hr><h2>All posts</h2><ul><li><span class=entry-date>2020-08-01</span>:
<a href=https://blog.jverkamp.com/2020/08/01/docker-magic-arbitrary-docker-runtimes-in-place/>Docker Magic - Arbitrary docker runtimes in place</a></li><li><span class=entry-date>2018-04-01</span>:
<a href=https://blog.jverkamp.com/2018/04/01/deep-dreams-with-fish-and-docker/>Deep Dreams with Fish and Docker</a></li><li><span class=entry-date>2018-02-15</span>:
<a href=https://blog.jverkamp.com/2018/02/15/automatic-self-signed-https-for-local-development/>Automatic self-signed HTTPS for local development</a></li><li><span class=entry-date>2018-01-23</span>:
<a href=https://blog.jverkamp.com/2018/01/23/running-local-proxies/>Running local proxies</a></li><li><span class=entry-date>2017-11-15</span>:
<a href=https://blog.jverkamp.com/2017/11/15/clock-drift-in-docker-containers/>Clock drift in Docker containers</a></li><li><span class=entry-date>2016-04-19</span>:
<a href=https://blog.jverkamp.com/2016/04/19/ensuring-docker-machine-is-running/>Ensuring docker-machine is running</a></li><li><span class=entry-date>2015-07-20</span>:
<a href=https://blog.jverkamp.com/2015/07/20/configuring-websockets-behind-an-aws-elb/>Configuring Websockets behind an AWS ELB</a></li><li><span class=entry-date>2015-04-03</span>:
<a href=https://blog.jverkamp.com/2015/04/03/performance-problems-with-flask-and-docker/>Performance problems with Flask and Docker</a></li><li><span class=entry-date>2015-02-04</span>:
<a href=https://blog.jverkamp.com/2015/02/04/docker-bash-and-docker-stop-all/>docker-bash and docker-stop-all</a></li></ul></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>