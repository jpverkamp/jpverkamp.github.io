<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>VPN on jverkamp.com</title><link>https://blog.jverkamp.com/programming/topics/vpn/</link><description>Recent content in VPN on jverkamp.com</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Sun, 28 Dec 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.jverkamp.com/programming/topics/vpn/atom.xml" rel="self" type="application/rss+xml"/><item><title>DNS/Wireguard Tunnel Weirdness on iOS</title><link>https://blog.jverkamp.com/2025/12/28/dns/wireguard-tunnel-weirdness-on-ios/</link><pubDate>Sun, 28 Dec 2025 00:00:00 +0000</pubDate><guid>https://blog.jverkamp.com/2025/12/28/dns/wireguard-tunnel-weirdness-on-ios/</guid><description>&lt;p&gt;A note so that if anyone ever haves this same bit of weirdness, hopefully they might stumble across this. I had a heck of a time searching for this&amp;hellip;&lt;/p&gt;
&lt;p&gt;So, I have Wireguard set up on my home server along with various services that are designed to only be accessible locally.&lt;/p&gt;
&lt;p&gt;If I want to use my home connection/Wireguard from my phone (iOS), this is easy enough to deal with:&lt;/p&gt;
&lt;p&gt;&lt;img src="home.png" alt="My wireguard setup"&gt;&lt;/p&gt;
&lt;p&gt;Everything works just fine.&lt;/p&gt;
&lt;p&gt;However, I found that this connection was sometimes not working, especially if I was on a cellular connection or switching connections. The connection would just hang until I either switched to the full tunnel or turned it off entirely (and made it home).&lt;/p&gt;
&lt;p&gt;I tried all manner of switching around the &lt;code&gt;Allowed IPs&lt;/code&gt;, adding 10. ranges (for the Wireguard IPs), other private ranges, leaving off specific IPs, all of it.&lt;/p&gt;
&lt;p&gt;But what did it take in the end?&lt;/p&gt;
&lt;p&gt;&lt;img src="home-minimal.png" alt="My on-demand wireguard setup"&gt;&lt;/p&gt;
&lt;p&gt;Note the difference?&lt;/p&gt;
&lt;p&gt;I had to tunnel the DNS.&lt;/p&gt;
&lt;p&gt;I believe that this is an iOS specific security behavior&amp;ndash;I have public DNS addresses that &lt;em&gt;resolve to a private IP range&lt;/em&gt;. It works fine for me and won&amp;rsquo;t work for anyone else&amp;ndash;they&amp;rsquo;ll go to whatever their local private network is. But iOS (rightfully) thinks that might be a security hole and wouldn&amp;rsquo;t let the DNS resolve for me&amp;ndash;unless I also tunnelled the DNS server (for now I&amp;rsquo;m using 1.1.1.1 for that; I&amp;rsquo;m hoping to self host that as well some day).&lt;/p&gt;
&lt;p&gt;So if you have: an on-demand wireguard tunnel on iOS with a limited Allowed IPs range &lt;em&gt;and&lt;/em&gt; a custom DNS set up, you may just need to tunnel the DNS.&lt;/p&gt;
&lt;p&gt;Oy that was a fun one.&lt;/p&gt;
&lt;p&gt;But it&amp;rsquo;s been working absolutely fine for a month now, so all is well. Onward!&lt;/p&gt;</description></item></channel></rss>