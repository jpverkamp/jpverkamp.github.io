<!doctype html><html><head><title>AoC 2022 Day 11: Monkeyinator – jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css integrity=sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel=stylesheet><link rel=stylesheet href=/custom.css defer><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=//www.google.com/search method=get onsubmit='(function(e){e.q.value="site:blog.jverkamp.com "+e.qfront.value})(this)' class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=hidden>
<input name=qfront type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article><header><h1 class=entry-title>AoC 2022 Day 11: Monkeyinator</h1><div class=entry-meta><span class=entry-date>2022-12-11</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2022/12/10/aoc-2022-day-10-interpretator/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/rust>Rust</a><a href=https://blog.jverkamp.com/2022/12/12/aoc-2022-day-12-climbiantor/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2022/12/10/aoc-2022-day-10-interpretator/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/advent-of-code>Advent of Code</a><a href=https://blog.jverkamp.com/2022/12/12/aoc-2022-day-12-climbiantor/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/series/>Series</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2022/12/10/aoc-2022-day-10-interpretator/ class=previous-link></a><a class=taxonomy-value href=/series/advent-of-code-2022>Advent of Code 2022</a><a href=https://blog.jverkamp.com/2022/12/12/aoc-2022-day-12-climbiantor/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2022/12/10/aoc-2022-day-10-interpretator/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2022/12/12/aoc-2022-day-12-climbiantor/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2022/12/10/aoc-2022-day-10-interpretator/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2022/12/12/aoc-2022-day-12-climbiantor/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><h2 id=source-monkey-in-the-middlehttpsadventofcodecom2022day11>Source: <a href=https://adventofcode.com/2022/day/11>Monkey in the Middle</a></h2><h2 id=part-1>Part 1</h2><blockquote><p>Simulate a collection of &lsquo;monkeys&rsquo;. Each monkey will have a number of items which it will then apply a mathematical operation to, then always divide by 3, then test divisibility to pass to one of two other monkeys. Return as answer the product of the two highest number of times a monkey applies it&rsquo;s main function to individual items after 20 steps.</p></blockquote><p>Note: Monkeys will always be evaluated in order (so monkey 1 will evaluate any items passed by monkey 0 again in the same round).</p><p>That note certainly caused me some issues. :D</p><p>As always, let&rsquo;s start by creating a <code>Monkey</code> struct and parsing the input:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>BinOp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>fn</span>(<span style=color:#66d9ef>isize</span>, <span style=color:#66d9ef>isize</span>) -&gt; <span style=color:#66d9ef>isize</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ----- A single monkey with a brain that can hold, throw, and catch items ----- */</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#[derive(Debug)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Monkey</span> {
</span></span><span style=display:flex><span>    held: Vec<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>isize</span><span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>    operation: (BinOp, Option<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>isize</span><span style=color:#f92672>&gt;</span>),
</span></span><span style=display:flex><span>    test_divisor: <span style=color:#66d9ef>isize</span>,
</span></span><span style=display:flex><span>    true_friend: <span style=color:#66d9ef>usize</span>,
</span></span><span style=display:flex><span>    false_friend: <span style=color:#66d9ef>usize</span>,
</span></span><span style=display:flex><span>    inspection_count: <span style=color:#66d9ef>usize</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span><span style=color:#f92672>&lt;</span>I<span style=color:#f92672>&gt;</span> From<span style=color:#f92672>&lt;&amp;</span><span style=color:#66d9ef>mut</span> I<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>for</span> Monkey
</span></span><span style=display:flex><span><span style=color:#66d9ef>where</span>
</span></span><span style=display:flex><span>    I: Iterator<span style=color:#f92672>&lt;</span>Item <span style=color:#f92672>=</span> String<span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>from</span>(iter: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> I) -&gt; <span style=color:#a6e22e>Self</span> {
</span></span><span style=display:flex><span>        iter.next()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;skip name line, assume monkeys are ordered&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Read starting items
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> line <span style=color:#f92672>=</span> iter.next().expect(<span style=color:#e6db74>&#34;must have starting items&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> parts <span style=color:#f92672>=</span> line.split_ascii_whitespace().skip(<span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> held <span style=color:#f92672>=</span> Vec::new();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> value <span style=color:#66d9ef>in</span> parts {
</span></span><span style=display:flex><span>            held.push(
</span></span><span style=display:flex><span>                value
</span></span><span style=display:flex><span>                    .strip_suffix(<span style=color:#e6db74>&#34;,&#34;</span>)
</span></span><span style=display:flex><span>                    .or(Some(value))
</span></span><span style=display:flex><span>                    .expect(<span style=color:#e6db74>&#34;strip/or success&#34;</span>)
</span></span><span style=display:flex><span>                    .parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>isize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .expect(<span style=color:#e6db74>&#34;held items must be numbers&#34;</span>),
</span></span><span style=display:flex><span>            );
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Read operator
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        line <span style=color:#f92672>=</span> iter.next().expect(<span style=color:#e6db74>&#34;must have an operation&#34;</span>);
</span></span><span style=display:flex><span>        parts <span style=color:#f92672>=</span> line.split_ascii_whitespace().skip(<span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> op: <span style=color:#a6e22e>fn</span>(<span style=color:#66d9ef>isize</span>, <span style=color:#66d9ef>isize</span>) -&gt; <span style=color:#66d9ef>isize</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>match</span> parts.next().expect(<span style=color:#e6db74>&#34;must have an operator&#34;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;*&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>|</span>a, b<span style=color:#f92672>|</span> a <span style=color:#f92672>*</span> b,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;+&#34;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>|</span>a, b<span style=color:#f92672>|</span> a <span style=color:#f92672>+</span> b,
</span></span><span style=display:flex><span>            _ <span style=color:#f92672>=&gt;</span> panic!(<span style=color:#e6db74>&#34;unknown operator in {:?}&#34;</span>, line),
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> value <span style=color:#f92672>=</span> parts
</span></span><span style=display:flex><span>            .next()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;operation must have a value&#34;</span>)
</span></span><span style=display:flex><span>            .parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>isize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>            .ok();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> operation <span style=color:#f92672>=</span> (op, value);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Read test
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> test_divisor <span style=color:#f92672>=</span> iter
</span></span><span style=display:flex><span>            .next()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;must have a test line&#34;</span>)
</span></span><span style=display:flex><span>            .split_ascii_whitespace()
</span></span><span style=display:flex><span>            .last()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;test must have at least one elmeent&#34;</span>)
</span></span><span style=display:flex><span>            .parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>isize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;divisor must be a number&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Read friends
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> true_friend <span style=color:#f92672>=</span> iter
</span></span><span style=display:flex><span>            .next()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;must have true friend&#34;</span>)
</span></span><span style=display:flex><span>            .split_ascii_whitespace()
</span></span><span style=display:flex><span>            .last()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;true friend must have at least one element&#34;</span>)
</span></span><span style=display:flex><span>            .parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;true friend must be an index&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> false_friend <span style=color:#f92672>=</span> iter
</span></span><span style=display:flex><span>            .next()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;must have false friend&#34;</span>)
</span></span><span style=display:flex><span>            .split_ascii_whitespace()
</span></span><span style=display:flex><span>            .last()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;false friend must have at least one element&#34;</span>)
</span></span><span style=display:flex><span>            .parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>            .expect(<span style=color:#e6db74>&#34;false friend must be an index&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Monkey {
</span></span><span style=display:flex><span>            held,
</span></span><span style=display:flex><span>            operation,
</span></span><span style=display:flex><span>            test_divisor,
</span></span><span style=display:flex><span>            true_friend,
</span></span><span style=display:flex><span>            false_friend,
</span></span><span style=display:flex><span>            inspection_count: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>So those are certainly some crazy parsing statements, but I think it works pretty well. Really, it takes in the line iterator and then for each, reads and splits that line, skips the unneeded text, and parses out numbers/functions/whatever we need.</p><p>Next up, the core of the algorithm, the <code>toss</code> function.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>impl</span> Monkey {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>toss</span>(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> self) -&gt; Vec<span style=color:#f92672>&lt;</span>(<span style=color:#66d9ef>usize</span>, <span style=color:#66d9ef>isize</span>)<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> items_in_the_air <span style=color:#f92672>=</span> Vec::new();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// For each currently held item
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> old_item <span style=color:#66d9ef>in</span> self.held.iter() {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Count inspected items
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            self.inspection_count <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Calculate the new value, None means op is op(old, old)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> (op, value) <span style=color:#f92672>=</span> self.operation;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> new_item <span style=color:#f92672>=</span> op(<span style=color:#f92672>*</span>old_item, value.or(Some(<span style=color:#f92672>*</span>old_item)).unwrap());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Divide worry by three after each toss
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            new_item <span style=color:#f92672>/=</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Use the test_divisor to determine which friend we&#39;re passing to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> target <span style=color:#f92672>=</span> <span style=color:#66d9ef>if</span> new_item <span style=color:#f92672>%</span> self.test_divisor <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>                self.true_friend
</span></span><span style=display:flex><span>            } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                self.false_friend
</span></span><span style=display:flex><span>            };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Put that in the correct &#39;in the air&#39; bucket
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            items_in_the_air.push((target, new_item));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Clear my held items since we just threw them all
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        self.held.clear();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        items_in_the_air
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>catch</span>(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> self, item: <span style=color:#66d9ef>isize</span>) {
</span></span><span style=display:flex><span>        self.held.push(item);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>I think that&rsquo;s a pretty direct interpretation. The main interesting bit is that it will send back a <code>Vec</code> of tuples where each tuple has the <code>(target monkey, new value)</code>. <code>catch</code> is a wrapper just to push items back into held, we&rsquo;ll handle that next.</p><p>Next up, we want to generalize a whole pile of monkeys all at once. A <code>MonkeyPile</code> as it were. First, the <code>struct</code> and a parser than can handle parsing monkeys and skipping whitespace until the end of the input stream:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>/* ----- A collection of monkeys passing things around ----- */</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#[derive(Debug)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>MonkeyPile</span> {
</span></span><span style=display:flex><span>    monkeys: Vec<span style=color:#f92672>&lt;</span>Monkey<span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span><span style=color:#f92672>&lt;</span>I<span style=color:#f92672>&gt;</span> From<span style=color:#f92672>&lt;&amp;</span><span style=color:#66d9ef>mut</span> I<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>for</span> MonkeyPile
</span></span><span style=display:flex><span><span style=color:#66d9ef>where</span>
</span></span><span style=display:flex><span>    I: Iterator<span style=color:#f92672>&lt;</span>Item <span style=color:#f92672>=</span> String<span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>from</span>(iter: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> I) -&gt; <span style=color:#a6e22e>Self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> iter <span style=color:#f92672>=</span> iter.peekable();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> monkeys <span style=color:#f92672>=</span> Vec::new();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span><span style=color:#a6e22e>monkeys</span>: <span style=color:#a6e22e>loop</span> {
</span></span><span style=display:flex><span>            monkeys.push(Monkey::from(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> iter));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#39;</span><span style=color:#a6e22e>whitespace</span>: <span style=color:#a6e22e>loop</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>match</span> iter.peek() {
</span></span><span style=display:flex><span>                    Some(line) <span style=color:#66d9ef>if</span> line.is_empty() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                        iter.next();
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    None <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>break</span> &#39;monkeys;
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    _ <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>break</span> &#39;whitespace;
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        MonkeyPile { monkeys: <span style=color:#a6e22e>monkeys</span> }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>I do think named <code>break</code>/<code>continue</code> is something more languages should have. In this case, we do also make use of <code>.peekable()</code> to look ahead and see if the next line is an empty line (or <code>None</code>) without actually consuming it.</p><p>Now, the rest of the algorithm, <code>step</code>ping through each <code>Monkey</code> in the <code>MonkeyPile</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>impl</span> MonkeyPile {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>step</span>(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> self, worry_fix: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>MonOp</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Toss all of the items into the air
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> index <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>self.monkeys.len() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> items_in_the_air <span style=color:#f92672>=</span> self.monkeys.get_mut(index).unwrap().toss(worry_fix);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (index, item) <span style=color:#66d9ef>in</span> items_in_the_air.into_iter() {
</span></span><span style=display:flex><span>                self.monkeys
</span></span><span style=display:flex><span>                    .get_mut(index)
</span></span><span style=display:flex><span>                    .expect(<span style=color:#e6db74>&#34;monkey at index must exist to catch items&#34;</span>)
</span></span><span style=display:flex><span>                    .catch(item);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This one I couldn&rsquo;t quite get right at first, since I really wanted to be able to do <code>for monkey in self.monkeys</code>. But I also needed that to be mutable in two different places. Rust (rightfully) doesn&rsquo;t trust that. It actually came to me on a walk (as these things do): iterate over the indexes.</p><p>And it worked!</p><p>So now you can <code>get_mut</code> once to toss and then Rust knows that that mutable reference goes out of scope (since I don&rsquo;t assign it to a variable) so it&rsquo;s safe to <code>get_mut</code> and <code>catch</code>.</p><p>I feel like I&rsquo;m really getting the hang of this thing. I expect I&rsquo;ll be prove wrong in a day or three.</p><p>And that&rsquo;s it! So let&rsquo;s actually solve the problem:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part1</span>(filename: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Path</span>) -&gt; String {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> iter <span style=color:#f92672>=</span> iter_lines(filename);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> monkey_pile <span style=color:#f92672>=</span> MonkeyPile::from(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> iter);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> _i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>20</span> {
</span></span><span style=display:flex><span>        monkey_pile.step();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> sorted_monkeys <span style=color:#f92672>=</span> monkey_pile.monkeys.iter().collect::<span style=color:#f92672>&lt;</span>Vec<span style=color:#f92672>&lt;</span>_<span style=color:#f92672>&gt;&gt;</span>();
</span></span><span style=display:flex><span>    sorted_monkeys.sort_by(<span style=color:#f92672>|</span>m1, m2<span style=color:#f92672>|</span> m1.inspection_count.cmp(<span style=color:#f92672>&amp;</span>m2.inspection_count));
</span></span><span style=display:flex><span>    sorted_monkeys.reverse();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> monkey_business_score <span style=color:#f92672>=</span> sorted_monkeys[<span style=color:#ae81ff>0</span>].inspection_count <span style=color:#f92672>*</span> sorted_monkeys[<span style=color:#ae81ff>1</span>].inspection_count;
</span></span><span style=display:flex><span>    monkey_business_score.to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Making a copy to <code>sort_by</code> is a bit weird, but it works.</p><p>Onward!</p><h2 id=part-2>Part 2</h2><blockquote><p>Remove the &lsquo;divide by 3&rsquo; requirement and run the simulation for 10,000 steps.</p></blockquote><blockquote><p>Unfortunately, that relief was all that was keeping your worry levels from reaching ridiculous levels. You&rsquo;ll need to find another way to keep your worry levels manageable.</p></blockquote><p>Heh. If I were working in Python I would definitely consider just letting it go. It will end up overflowing even <code>i128</code> (biiiig numbers). But we can do better.</p><p>Looking through, all of the tests are divisibility. That&rsquo;s the clue to how to solve this problem, since divisibility doesn&rsquo;t change for any number <code>n</code> such that <code>x % n == 0</code>. We just need that to be true for all possible divisibility values.</p><p>And there is a function exactly for that: <a href=https://en.wikipedia.org/wiki/least%20common%20multiple>least common multiple</a>!</p><p>Unfortunately, although that appears to be (or have been) a function in Rust at one point (<a href=https://docs.rs/num/0.1.32/num/integer/fn.lcm.html><code>lcm</code></a>), it isn&rsquo;t in the version I&rsquo;m using. But &mldr; we don&rsquo;t actually need the <em>least</em> common multiple. Any multiple will work.</p><p>So:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part2</span>(filename: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Path</span>) -&gt; String {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> iter <span style=color:#f92672>=</span> iter_lines(filename);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> monkey_pile <span style=color:#f92672>=</span> MonkeyPile::from(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> iter);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// All tests are divisibility tests, so we only need to word mod(lcm(...))
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// I don&#39;t see an LCM function in the stdlib, so this will work (just less efficient)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> worry_value <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> monkey <span style=color:#66d9ef>in</span> monkey_pile.monkeys.iter() {
</span></span><span style=display:flex><span>        worry_value <span style=color:#f92672>*=</span> monkey.test_divisor;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> worry_fix <span style=color:#f92672>=</span> <span style=color:#66d9ef>move</span> <span style=color:#f92672>|</span>v<span style=color:#f92672>|</span> v <span style=color:#f92672>%</span> worry_value;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> _i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>10000</span> {
</span></span><span style=display:flex><span>        monkey_pile.step(<span style=color:#f92672>&amp;</span>worry_fix);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> sorted_monkeys <span style=color:#f92672>=</span> monkey_pile.monkeys.iter().collect::<span style=color:#f92672>&lt;</span>Vec<span style=color:#f92672>&lt;</span>_<span style=color:#f92672>&gt;&gt;</span>();
</span></span><span style=display:flex><span>    sorted_monkeys.sort_by(<span style=color:#f92672>|</span>m1, m2<span style=color:#f92672>|</span> m1.inspection_count.cmp(<span style=color:#f92672>&amp;</span>m2.inspection_count));
</span></span><span style=display:flex><span>    sorted_monkeys.reverse();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> monkey_business_score <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>        sorted_monkeys[<span style=color:#ae81ff>0</span>].inspection_count <span style=color:#f92672>*</span> sorted_monkeys[<span style=color:#ae81ff>1</span>].inspection_count;
</span></span><span style=display:flex><span>    monkey_business_score.to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>:D</p><p>It works!</p><p>I did have to modify the original <code>step</code> and <code>toss</code> functions though:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>MonOp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>dyn</span> Fn(<span style=color:#66d9ef>isize</span>) -&gt; <span style=color:#66d9ef>isize</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> Monkey {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>toss</span>(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> self, worry_fix: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>MonOp</span>) -&gt; Vec<span style=color:#f92672>&lt;</span>(<span style=color:#66d9ef>usize</span>, <span style=color:#66d9ef>isize</span>)<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> items_in_the_air <span style=color:#f92672>=</span> Vec::new();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// For each currently held item
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> old_item <span style=color:#66d9ef>in</span> self.held.iter() {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Count inspected items
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            self.inspection_count <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Calculate the new value, None means op is op(old, old)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> (op, value) <span style=color:#f92672>=</span> self.operation;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> new_item <span style=color:#f92672>=</span> op(<span style=color:#f92672>*</span>old_item, value.or(Some(<span style=color:#f92672>*</span>old_item)).unwrap());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Apply a function to update worry
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            new_item <span style=color:#f92672>=</span> worry_fix(new_item);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Use the test_divisor to determine which friend we&#39;re passing to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> target <span style=color:#f92672>=</span> <span style=color:#66d9ef>if</span> new_item <span style=color:#f92672>%</span> self.test_divisor <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>                self.true_friend
</span></span><span style=display:flex><span>            } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                self.false_friend
</span></span><span style=display:flex><span>            };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Put that in the correct &#39;in the air&#39; bucket
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            items_in_the_air.push((target, new_item));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Clear my held items since we just threw them all
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        self.held.clear();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        items_in_the_air
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>catch</span>(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> self, item: <span style=color:#66d9ef>isize</span>) {
</span></span><span style=display:flex><span>        self.held.push(item);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> MonkeyPile {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>step</span>(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> self, worry_fix: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>MonOp</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Toss all of the items into the air
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> index <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>self.monkeys.len() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> items_in_the_air <span style=color:#f92672>=</span> self.monkeys.get_mut(index).unwrap().toss(worry_fix);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (index, item) <span style=color:#66d9ef>in</span> items_in_the_air.into_iter() {
</span></span><span style=display:flex><span>                self.monkeys
</span></span><span style=display:flex><span>                    .get_mut(index)
</span></span><span style=display:flex><span>                    .expect(<span style=color:#e6db74>&#34;monkey at index must exist to catch items&#34;</span>)
</span></span><span style=display:flex><span>                    .catch(item);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And then for <code>part1</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>let</span> worry_fix <span style=color:#f92672>=</span> <span style=color:#f92672>|</span>v<span style=color:#f92672>|</span> v <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> _i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>20</span> {
</span></span><span style=display:flex><span>    monkey_pile.step(<span style=color:#f92672>&amp;</span>worry_fix);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>There is one interesting bit:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>MonOp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>dyn</span> Fn(<span style=color:#66d9ef>isize</span>) -&gt; <span style=color:#66d9ef>isize</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>BinOp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>fn</span>(<span style=color:#66d9ef>isize</span>, <span style=color:#66d9ef>isize</span>) -&gt; <span style=color:#66d9ef>isize</span>;
</span></span></code></pre></div><p>Why are those different?</p><p>In a nutshell, <code>fn</code> is the type of functions (<em>not</em> closure) and <code>Fn</code> is a trait (thus <code>dyn</code>, it can be any type that matches that trait) that matches functions <em>and</em> closures. We can&rsquo;t directly use <code>type MonOp = fn(isize) -> isize</code>, since the actual <code>worry_fix</code> is a closure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// All tests are divisibility tests, so we only need to word mod(lcm(...))
</span></span></span><span style=display:flex><span><span style=color:#75715e>// I don&#39;t see an LCM function in the stdlib, so this will work (just less efficient)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> worry_value <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> monkey <span style=color:#66d9ef>in</span> monkey_pile.monkeys.iter() {
</span></span><span style=display:flex><span>    worry_value <span style=color:#f92672>*=</span> monkey.test_divisor;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> worry_fix <span style=color:#f92672>=</span> <span style=color:#66d9ef>move</span> <span style=color:#f92672>|</span>v<span style=color:#f92672>|</span> v <span style=color:#f92672>%</span> worry_value;
</span></span></code></pre></div><p>We capture <code>worry_value</code>. I can&rsquo;t really see any way about that. Macros perhaps? But we still wouldn&rsquo;t have the value at compile time, so that wouldn&rsquo;t work.</p><p>In any case, changing to <code>Fn</code> and allowing closures works great.</p><p>An interesting finding.</p><h2 id=performance>Performance</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ./target/release/11-monkeyator <span style=color:#ae81ff>1</span> data/11.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>99840</span>
</span></span><span style=display:flex><span>took 133.541µs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ ./target/release/11-monkeyator <span style=color:#ae81ff>2</span> data/11.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>20683044837</span>
</span></span><span style=display:flex><span>took 11.15325ms
</span></span></code></pre></div><p>Well, running 10,000 cycles certainly does take a bit longer. Got a solution quickly enough though and learned a few new things, so all is well. And we&rsquo;re still in a fraction of a second though, so&mldr; onward!</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div><script defer src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin=anonymous></script>
<script defer src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin=anonymous></script>
<script defer src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js integrity=sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h crossorigin=anonymous></script>
<script defer src=https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script>
<script defer src=/custom.js></script></body></html>