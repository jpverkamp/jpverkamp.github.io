<!doctype html><html><head><title>AoC 2022 Day 12: Climbiantor – jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css integrity=sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel=stylesheet><link rel=stylesheet href=/custom.css defer><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=//www.google.com/search method=get onsubmit='(function(e){e.q.value="site:blog.jverkamp.com "+e.qfront.value})(this)' class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=hidden>
<input name=qfront type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article><header><h1 class=entry-title>AoC 2022 Day 12: Climbiantor</h1><div class=entry-meta><span class=entry-date>2022-12-12</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2022/12/11/aoc-2022-day-11-monkeyinator/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/rust>Rust</a><a href=https://blog.jverkamp.com/2022/12/13/aoc-2022-day-13-list-parsinator/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2022/12/11/aoc-2022-day-11-monkeyinator/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/advent-of-code>Advent of Code</a><a href=https://blog.jverkamp.com/2022/12/13/aoc-2022-day-13-list-parsinator/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/series/>Series</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2022/12/11/aoc-2022-day-11-monkeyinator/ class=previous-link></a><a class=taxonomy-value href=/series/advent-of-code-2022>Advent of Code 2022</a><a href=https://blog.jverkamp.com/2022/12/13/aoc-2022-day-13-list-parsinator/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2022/12/11/aoc-2022-day-11-monkeyinator/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2022/12/13/aoc-2022-day-13-list-parsinator/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2022/12/11/aoc-2022-day-11-monkeyinator/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2022/12/13/aoc-2022-day-13-list-parsinator/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><h2 id=source-hill-climbing-algorithmhttpsadventofcodecom2022day12>Source: <a href=https://adventofcode.com/2022/day/12>Hill Climbing Algorithm</a></h2><h2 id=part-1>Part 1</h2><blockquote><p>Given a height map, find the shortest path between two points such that the path can descend any distance but can only climb by a maximum of 1.</p></blockquote><p>Ooh, that&rsquo;s fun. Just glancing at it, I already know I want to solve this backwards. Don&rsquo;t find the path from start to finish, instead start at the end and recursively fill the map with the distance to each known point flooding outwards until we find the start.</p><p>But that&rsquo;s getting ahead of myself, first let&rsquo;s parse it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[derive(Debug)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>HeightMap</span> {
</span></span><span style=display:flex><span>    data: <span style=color:#a6e22e>Matrix</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u8</span><span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>    src: <span style=color:#a6e22e>Point</span>,
</span></span><span style=display:flex><span>    dst: <span style=color:#a6e22e>Point</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> From<span style=color:#f92672>&lt;</span>Vec<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;&gt;</span> <span style=color:#66d9ef>for</span> HeightMap {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>from</span>(lines: Vec<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span>) -&gt; <span style=color:#a6e22e>Self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> width <span style=color:#f92672>=</span> lines.get(<span style=color:#ae81ff>0</span>).expect(<span style=color:#e6db74>&#34;must have at least one line&#34;</span>).len();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> height <span style=color:#f92672>=</span> lines.len();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> data <span style=color:#f92672>=</span> Matrix::new(width, height);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> src <span style=color:#f92672>=</span> Point::ORIGIN;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> dst <span style=color:#f92672>=</span> Point::ORIGIN;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (y, line) <span style=color:#66d9ef>in</span> lines.iter().enumerate() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (x, c) <span style=color:#66d9ef>in</span> line.chars().enumerate() {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>match</span> c {
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;S&#39;</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                        data[[x, y]] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                        src <span style=color:#f92672>=</span> Point {
</span></span><span style=display:flex><span>                            x: <span style=color:#a6e22e>x</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>isize</span>,
</span></span><span style=display:flex><span>                            y: <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>isize</span>,
</span></span><span style=display:flex><span>                        };
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;E&#39;</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                        data[[x, y]] <span style=color:#f92672>=</span> <span style=color:#ae81ff>26</span>;
</span></span><span style=display:flex><span>                        dst <span style=color:#f92672>=</span> Point {
</span></span><span style=display:flex><span>                            x: <span style=color:#a6e22e>x</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>isize</span>,
</span></span><span style=display:flex><span>                            y: <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>isize</span>,
</span></span><span style=display:flex><span>                        };
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    _ <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                        data[[x, y]] <span style=color:#f92672>=</span> (c <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u8</span>) <span style=color:#f92672>-</span> (<span style=color:#e6db74>&#39;a&#39;</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u8</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        HeightMap { data, src, dst }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Sweet.</p><p>Next, calculate <code>DistanceMap</code> from that <code>HeightMap</code>. We don&rsquo;t need them (yet?) but I&rsquo;m going to go ahead and store the actual path as well, as a second <code>Matrix</code> of directions showing which way to go next. It&rsquo;s a single time computation, so I&rsquo;m actually going to put the entire functionality into the <code>from(&HeightMap)</code> function.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[derive(Debug)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>DistanceMap</span> {
</span></span><span style=display:flex><span>    distances: <span style=color:#a6e22e>Matrix</span><span style=color:#f92672>&lt;</span>Option<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;&gt;</span>,
</span></span><span style=display:flex><span>    directions: <span style=color:#a6e22e>Matrix</span><span style=color:#f92672>&lt;</span>Point<span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> From<span style=color:#f92672>&lt;&amp;</span>HeightMap<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>for</span> DistanceMap {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>from</span>(heights: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>HeightMap</span>) -&gt; <span style=color:#a6e22e>Self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> width <span style=color:#f92672>=</span> heights.data.width();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> height <span style=color:#f92672>=</span> heights.data.height();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> distances <span style=color:#f92672>=</span> Matrix::<span style=color:#f92672>&lt;</span>Option<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;&gt;</span>::new(width, height);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> directions <span style=color:#f92672>=</span> Matrix::<span style=color:#f92672>&lt;</span>Point<span style=color:#f92672>&gt;</span>::new(width, height);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        distances[[heights.dst.x <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>, heights.dst.y <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>]] <span style=color:#f92672>=</span> Some(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> q <span style=color:#f92672>=</span> VecDeque::new();
</span></span><span style=display:flex><span>        q.push_back(heights.dst);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> <span style=color:#f92672>!</span>q.is_empty() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> p_dst <span style=color:#f92672>=</span> q.pop_front().unwrap();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> h_dst <span style=color:#f92672>=</span> heights.data.at(<span style=color:#f92672>&amp;</span>p_dst);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// d_dst will always be set if there are no bugs
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> d_dst_p <span style=color:#f92672>=</span> distances.at(<span style=color:#f92672>&amp;</span>p_dst);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> d_dst <span style=color:#f92672>=</span> d_dst_p.unwrap();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> m <span style=color:#66d9ef>in</span> MOVES.into_iter() {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>let</span> p_src <span style=color:#f92672>=</span> p_dst <span style=color:#f92672>+</span> m;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>!</span>distances.in_bounds(p_src.x <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>, p_src.y <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>let</span> h_src <span style=color:#f92672>=</span> heights.data.at(<span style=color:#f92672>&amp;</span>p_src);
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>let</span> d_src <span style=color:#f92672>=</span> distances.at(<span style=color:#f92672>&amp;</span>p_src);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// If the jump is too high, can&#39;t go this way
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>*</span>h_dst <span style=color:#f92672>&gt;</span> h_src <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// If we already have a better path, don&#39;t go this way
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> d_src.is_some() <span style=color:#f92672>&amp;&amp;</span> d_src.unwrap() <span style=color:#f92672>&lt;</span> d_dst <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// If we make it this far, we found a new (valid) better path
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Store the new distance and direction
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                distances[[p_src.x <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>, p_src.y <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>]] <span style=color:#f92672>=</span> Some(d_dst <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>                directions[[p_src.x <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>, p_src.y <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>]] <span style=color:#f92672>=</span> m;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Add this point to the queue of points to expand further
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>!</span>q.contains(<span style=color:#f92672>&amp;</span>p_src) {
</span></span><span style=display:flex><span>                    q.push_back(p_src);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        DistanceMap {
</span></span><span style=display:flex><span>            distances,
</span></span><span style=display:flex><span>            directions,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>That&rsquo;s a fun algorithm. The basic idea is:</p><ul><li>Initialize a queue with the target point</li><li>While that queue is not finished, pop the next point (<code>dst</code>):<ul><li>This point will always have a distance</li><li>Try each neighboring point (<code>src</code>):<ul><li>If <code>src</code> cannot move to <code>dst</code> (a height skip of more than +1), skip this</li><li>If we already have a better path to <code>dst</code>, skip this</li><li>Otherwise, we found a new path:<ul><li>Update the <code>distances</code> and <code>directions</code> maps</li><li>Add the new point to the queue since we might have a new better route to it now</li></ul></li></ul></li></ul></li></ul><p>And that&rsquo;s it. It turns out this makes the final problem <em>really</em> short:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part1</span>(filename: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Path</span>) -&gt; String {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> lines <span style=color:#f92672>=</span> read_lines(filename);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> height_map <span style=color:#f92672>=</span> HeightMap::from(lines);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> distance_map <span style=color:#f92672>=</span> DistanceMap::from(<span style=color:#f92672>&amp;</span>height_map);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    distance_map.distances[[height_map.src.x <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>, height_map.src.y <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>]]
</span></span><span style=display:flex><span>        .expect(<span style=color:#e6db74>&#34;must have a solution&#34;</span>)
</span></span><span style=display:flex><span>        .to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>That&rsquo;s it.</p><p>I did make some fun test print functions though while working through it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part1</span>(filename: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Path</span>) -&gt; String {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> lines <span style=color:#f92672>=</span> read_lines(filename);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> height_map <span style=color:#f92672>=</span> HeightMap::from(lines);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> distance_map <span style=color:#f92672>=</span> DistanceMap::from(<span style=color:#f92672>&amp;</span>height_map);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> cfg!(debug_assertions) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> y <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>height_map.data.height() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>height_map.data.width() {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>match</span> distance_map.distances[[x, y]] {
</span></span><span style=display:flex><span>                    Some(d) <span style=color:#f92672>=&gt;</span> { 
</span></span><span style=display:flex><span>                        print!(<span style=color:#e6db74>&#34;{:4}&#34;</span>, d);
</span></span><span style=display:flex><span>                    },
</span></span><span style=display:flex><span>                    None <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                        print!(<span style=color:#e6db74>&#34;{:4}&#34;</span>, <span style=color:#e6db74>&#39;.&#39;</span>);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            println!();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        println!();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> y <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>height_map.data.height() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>height_map.data.width() {
</span></span><span style=display:flex><span>                print!(
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#34;{}&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>match</span> distance_map.directions[[x, y]] {
</span></span><span style=display:flex><span>                        Point { x: <span style=color:#ae81ff>0</span>, y: <span style=color:#ae81ff>1</span> } <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;^&#39;</span>,
</span></span><span style=display:flex><span>                        Point { x: <span style=color:#ae81ff>0</span>, y: <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> } <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;v&#39;</span>,
</span></span><span style=display:flex><span>                        Point { x: <span style=color:#ae81ff>1</span>, y: <span style=color:#ae81ff>0</span> } <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;&lt;&#39;</span>,
</span></span><span style=display:flex><span>                        Point { x: <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, y: <span style=color:#ae81ff>0</span> } <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;&gt;&#39;</span>,
</span></span><span style=display:flex><span>                        _ <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;.&#39;</span>,
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                );
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            println!();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    distance_map.distances[[height_map.src.x <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>, height_map.src.y <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span>]]
</span></span><span style=display:flex><span>        .expect(<span style=color:#e6db74>&#34;must have a solution&#34;</span>)
</span></span><span style=display:flex><span>        .to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>For the small test case:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat data/12-test.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Sabqponm
</span></span><span style=display:flex><span>abcryxxl
</span></span><span style=display:flex><span>accszExk
</span></span><span style=display:flex><span>acctuvwj
</span></span><span style=display:flex><span>abdefghi
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ ./target/debug/12-climbinator <span style=color:#ae81ff>1</span> data/12-test.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>31</span>  <span style=color:#ae81ff>30</span>  <span style=color:#ae81ff>29</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>30</span>  <span style=color:#ae81ff>29</span>  <span style=color:#ae81ff>28</span>  <span style=color:#ae81ff>11</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>  <span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>31</span>  <span style=color:#ae81ff>28</span>  <span style=color:#ae81ff>27</span>  <span style=color:#ae81ff>10</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>0</span>   <span style=color:#ae81ff>5</span>  <span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>30</span>  <span style=color:#ae81ff>27</span>  <span style=color:#ae81ff>26</span>   <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>6</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>29</span>  <span style=color:#ae81ff>28</span>  <span style=color:#ae81ff>25</span>  <span style=color:#ae81ff>24</span>  <span style=color:#ae81ff>23</span>  <span style=color:#ae81ff>22</span>  <span style=color:#ae81ff>21</span>  <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vvvv<span style=color:#f92672>&lt;&lt;&lt;</span>&lt;
</span></span><span style=display:flex><span>&gt;vvvv&lt;&lt;^
</span></span><span style=display:flex><span>vvvv&gt;.^^
</span></span><span style=display:flex><span>v&gt;v&gt;&gt;&gt;^^
</span></span><span style=display:flex><span>&gt;^&gt;&gt;&gt;&gt;&gt;^
</span></span><span style=display:flex><span><span style=color:#ae81ff>31</span>
</span></span><span style=display:flex><span>took 312.958µs
</span></span></code></pre></div><p>And even cooler for my full test data:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span> 403 402 403 404 405 406 407 398  .   .   .   .  399 400 401 402 403 404 405 406 407  .   .   .   .   .   .  326 325 324 323 322 321 320 319 318 317 316 315 314 313 312 311 310 309 308 307 306 305 304 303 302 301 300 299 300 301 302 301 300 299  .   .   .   .   .   . 
</span></span><span style=display:flex><span> 402 401 402 403 404 405 406 397  .   .   .   .  398 399 400 401  .   .   .   .   .   .   .   .   .   .  326 325 324 323 322 321 320 319 318 317 316 315 314 313 312 311 310 309 308 307 306 305 304 303 302 301 300 299 298 299 300 301 300 299 298  .   .   .   .   .   . 
</span></span><span style=display:flex><span> 401 400 401 402 403 396 395 396  .   .   .   .  397 398 399 400  .   .   .   .   .   .   .   .   .   .   .  326 325 324  .   .  321 320 319 318 317 316 315 314 313 312 311  .   .  306 305 304 303 302 301 300 299 298 297 298 299 300 299 298 297 296  .   .   .   .   . 
</span></span><span style=display:flex><span> 400 399 400 401 402 403 394 395 396  .   .  395 396 397 398 399  .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .  321 320 319 318 317 316 315 314 313 312 313  .  305 304 303 302 301 300 299 298 297 296 297 298 299 298 297 296 295 294 293  .   .   . 
</span></span><span style=display:flex><span> 399 398 399 396 403 404 393 394 395 396 395 394 395 396 397 398 399  .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .  322 321 320 319 318 317 316 315 314 313  .   .  304 303 302 301 300 299 298 297 296 295 296 297 298 297 296 295 294 293 292  .   .   . 
</span></span><span style=display:flex><span> 398 397 396 395 394 405 392 393 394 395 394 393 394 395 396 397 398  .   .   .   .   .   .   .  334 333  .   .   .   .   .   .   .  323 322 321 320 319 318 317 316 315 314 315 196 195 194 301 300 299 298 297  .  295 294 295 296 297 296 295 294 293 292 291  .   .  294
</span></span><span style=display:flex><span> 397 396 395 394 393 392 391 392 393 394 393 392 393 394 395 396 397 398  .   .   .   .   .  334 333 332 331 330 329 328 327 326 325 324 323 322 321 320 319 318 317 316 197 196 195 194 193 192 191 298 297 296 295 294 293 294 295 296 295 294 293 292 291 290 291 292 293
</span></span><span style=display:flex><span> 396 395 396 397 398 391 390 391 392 393 392 391 392 393 394 395 396 397  .   .   .   .   .  335 334 333 332 331 330 329 328 327 326 325 324 323 322 321 320  .   .  197 196 195 194 193 192 191 190 189 296 295 294 293 292 293 294 295 296  .   .  291 290 289 290 291 292
</span></span><span style=display:flex><span> 395 394 395 396 397 390 389 390 391 392 391 390 391 392 393 394  .  398 399 400  .   .   .  336 335 334 333 332 331 330 329 328 327 326 325 324 323 322 321  .  199 198 197 196 107 106 105 190 189 188 187 294 293 292 291  .   .   .  297  .   .  290 289 288 289 290 291
</span></span><span style=display:flex><span> 394 393 394 395 396 389 388 389  .   .   .  389 390 391 392 393  .   .  400  .   .   .  338 337 336 335 334 333 332 331 330 329 328 327 326 325 324 323 322 201 200 199 198 107 106 105 104 103 188 187 186 185 292 291 290 289 288  .   .   .   .  289 288 287 288 289 290
</span></span><span style=display:flex><span> 393 392 393 394 389 388 387  .   .   .   .  388 389 390 391 392  .   .   .   .   .  340 339 338 337 336 335 334 333 332 331 330 329 328 327 326 325 324 203 202 201 200 107 106 105 104 103 102 101 186 185 184 183 290 289 288 287 286 285  .   .   .   .  286 287 288 289
</span></span><span style=display:flex><span> 392 391 392 393 394 387 386  .   .   .   .  387 388 389 390 391 392  .   .   .   .   .   .  339  .   .   .  335 334 333 332 331 330 329 328 327 326 205 204 203 202 109 108 107  40  39  38 101 100  99 184 183 182 181 180 287 286 285 284 283  .   .   .  285 286 287 288
</span></span><span style=display:flex><span> 391 390 391 392 393 386 385 384  .   .   .  386 387 388 389  .   .   .   .   .   .   .   .  340  .   .   .   .  335 334 333 332 331 330 329 208 207 206 205 204 111 110 109  40  39  38  37  36  99  98  97 182 181 180 179 178 177 284 283 282 281 282  .  284 285 286 287
</span></span><span style=display:flex><span> 390 389 388 387 386 385 384 383 382 383 384 385 386 387 388  .   .   .   .   .   .   .   .  341  .   .   .   .  336 335 334 333 332 211 210 209 208 207 206 113 112 111 110  39  38  37  36  35  34  97  96  95 180 179 178 177 176 175 176 281 280 281 282 283 284 285 286
</span></span><span style=display:flex><span> 389 388 387 386 385 384 383 382 381 382 383 384 385 386 387 388 389 390  .   .  345 344 343 342  .   .   .  338 337 336 335 214 213 212 211 210 117 116 115 114 113 112  41  40  39  10  35  34  33  96  95  94  93  92  91 176 175 174 175 176 279 280 281 284 285 286 287
</span></span><span style=display:flex><span> 388 387 388 387 390 391 382 381 380 381 382 383 384 385 386 387 388 389  .   .  346 345 344 343 342 341 340 339 338 337 336 215 214 213 212 119 118 117 116 115 114  43  42  41  10   9   8  33  32  31  94  93  92  91  90  89  90 173 174 175 278 279 280 285 286 287 288
</span></span><span style=display:flex><span> 387 386 387 388 389 390 381 380 379 380 381 382 383  .  387 388 389  .  349 348 347 346 345 344 343 342 341 340 339 338 217 216 215 214 121 120 119  48  47  46  45  44  43  42   9   8   7   8  31  30  29  28  27  90  89  88  89 172 173 174 277 278 279 286 287 288 289
</span></span><span style=display:flex><span> 386 385 386 387 388 389 390 379 378 379 380 381  .   .   .  389  .   .   .  349 348 347 346 345 344 343 342 341 340 339 218 217 216 123 122 121 120  49  48  47  46  45  44  43   8   7   6   7  30  29  28  27  26  27  28  87  88 171 172 173 276 277 278 287 288 289 290
</span></span><span style=display:flex><span> 385 384 385 386 387 388 389 378 377  .   .   .   .   .   .   .   .   .   .  350 349 348 347 346 345 344 343  .  341 340 219 218 217 124 123 122  51  50  49  48   9   8   7   8   7   6   5   6   7   8   9  10  25  26  27  86  87 170 171 172 275 276 277 288 289 290 291
</span></span><span style=display:flex><span> 384 383 384 385 386 379 378 377 376  .   .   .   .   .   .   .   .   .   .  351 350 349 348 347 346 345  .   .  342 341 220 219 218 125 124 123  52  51  50   9   8   7   6   7   6   5   4   5   6   7   8   9  24  25  84  85  86 169 170 171 274 275 276 289 290 291 292
</span></span><span style=display:flex><span> 383 382 381 386 387 378 377 376 375  .   .   .   .   .   .   .   .   .   .  352 351 350 349  .   .   .   .   .  343  .  221 220 219 126 125 124  53  52  51   8   7   6   5   0   1   2   3   4   5   6   7  22  23  24  83  84  85 168 169 170 273 274 291 290 291 292 293
</span></span><span style=display:flex><span> 382 381 380 379 378 377 376 375 374  .   .   .   .   .   .   .   .   .   .   .  352 351 350  .   .   .   .   .   .   .   .  221 220 221 126 125 126  53  52  53   6   5   4   3   2   3   4   5   6  21  20  21  22  81  82  83 166 167 168 271 272 273 292 291 292 293 294
</span></span><span style=display:flex><span> 381 380 379 378 377 376 375 374 373  .   .   .   .   .   .   .   .   .   .   .  353 352 351 352 353  .   .   .   .  362 361 222 221 222 127 126 127 128  53  54  55  56   5   4   3   4   5   6   7  20  19  20  79  80  81 164 165 166 269 270 271 294 293 292 293 294 295
</span></span><span style=display:flex><span> 380 379 378 377 376 375 374 373 372 371 370  .   .   .   .   .   .  359 358  .  354 353 352 353  .   .   .   .   .  361 360 359 222 223 224 127 128 129 130  55  56   7   6   5   4   5   6   7   8   9  18  19  78  79 164 163 164 165 268 269 270 295 294 293 294 295 296
</span></span><span style=display:flex><span> 379 378 377 376 375 374 373 372 371 370 369 368 367 366  .   .   .  358 357 356 355 354 353 354  .   .  361  .   .   .  359 358 357 224 225 226 129 130 131  56  57   8   7   6   5  12  13   8   9  10  17  18  77  78 163 162 163 266 267 268 297 296 295 294 295 296 297
</span></span><span style=display:flex><span> 378 377 376 375 374 373 372 371 370 369 368 367 366 365  .   .   .  359 358 357 356 355 354 355  .  359 360  .   .   .  358 357 356 225 226 227 130 131 132  57  58   9   8   9  10  11  12  13  14  15  16  17  76  77  78 161 162 265 266 267 298 297 296 295 296 297 298
</span></span><span style=display:flex><span> 377 376 375 374 373 372 371 370 369 368 367 366 365 364 363 362 361 360 359 358 357 356 355 356 357 358 359 360 359 358 357 356 355 226 227 228 131 132 133  58  59  10   9  10  11  68  69  14  15  16  17  18  75  76  77 160 161 264 265 266 299 298 297 296 297 298 299
</span></span><span style=display:flex><span> 378 377 378 379 380 373 372 391 392 369 368 367 366 365 364 363 362 361 360 359 358 357 356 357 358 359 360 359 358 357 356 355 354 353 228 229 132 133 134  59  60  61  10  11  12  67  68  69  16  17  18  19  74  75  76 159 160 263 264 265  .  299 298 297 298 299 300
</span></span><span style=display:flex><span> 379 378 379 380 375 374 391 390 391 392 393 394 367 366 365 364 363 362 361 360 359 358 357 358 359 360 359 358 357  .   .   .  353 352 229 230 133 134 135  60  61  62  63  64  65  66  67  68  69  70  71  72  73  74 157 158 159 262 263 264  .  300 299 298 299 300 301
</span></span><span style=display:flex><span> 380 379 380 377 376 375 376 389 390 391 392 393 368 367 366 365 364 363 362  .   .   .  358 359 360 359 358 357 356  .   .   .   .  351 230 231 134 135 136  61  62  63  64  65  66 147 148  69  70  71  72  73  74  75 156 157 158 261 262 263  .  301 300 299 300 301 302
</span></span><span style=display:flex><span> 381 380 381 382 377 386 387 388 389 390 391 392 369 368 367 366 365 364 363  .   .   .   .  360 359 358 357 356 355  .   .   .   .  350 231 232 233 136 137 138 139  64  65 144 145 146 147 148 149 150  73  74 153 154 155 156 157 260 261  .   .   .   .  300 301 302 303
</span></span><span style=display:flex><span> 382 381 382 383 384 385 386 387 388 389 390 391 392 369 368 367 366 365 364  .   .   .   .  359 358 357 356 355 354  .   .   .  350 349 232 233 234 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 258 259 260  .   .   .   .  301 302 303 304
</span></span><span style=display:flex><span> 383 382 383 384 385 386 387 388 389 390 391 392 393 370 369 368 367 366 365  .   .   .   .  358 357 356 355 354 353 352 351 350 349 348 347 234 235 236 139 140 141 142 143 144 145 246 247 248 149 150 151 152 153 154 155 256 257 258 259  .   .   .  303 302 303 304 305
</span></span><span style=display:flex><span> 384 383 384 385 386 387 388 389 390 391 376 393 372 371 370 369 368 367 366 367  .   .  358 357 356 355 354 353 352 351 350 349 348 347 346 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257  .   .   .  305 304 303 304 305 306
</span></span><span style=display:flex><span> 385 384 385 386 387 388 389 390 391 376 375 374 373 372 371 370 369 368 367 368  .   .   .  356 355 354 353 352 351 350 349 348 347 346 345 344 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 312  .   .   .  306 305 304 305 306 307
</span></span><span style=display:flex><span> 386 385 386 387 388 389 390 391 392  .  376 375 374 373 372 371 370 369 368 369  .   .   .   .  356 355 354  .   .  349 348 347 346 345 344 343 342 239 240 241 242 243 244 245  .   .   .   .   .  251 252 253 254 255 256 313 312 311 310 309 308 307 306 305 306 307 308
</span></span><span style=display:flex><span> 387 386 387 388 389 390 391 392 393  .   .   .  375  .   .   .  371 370 369 370  .   .   .   .  357  .   .   .   .  348 347 346 345 344 343 342 341 340 339 338 337 336 335 334  .   .   .   .  321 320 319 318 317 316 315 314 313 312 311 310 309 308 307  .   .   .  309
</span></span><span style=display:flex><span> 388 387 388 389 390 391 392 393 394  .   .   .   .   .   .   .  372 371 370 371  .   .   .   .   .   .   .   .   .  347 346 345 344 343 342 341 340 339 338 337 336 335 334 333  .   .   .  323 322 321 320 319 318 317 316 315 314 313 312 311 310 309 308 309  .   .   . 
</span></span><span style=display:flex><span> 389 388 389 390 391 392 393 394 395  .   .   .   .   .   .  374 373 372 371  .   .   .   .   .   .   .   .  348 347 346 345 344 343 342 341 340 339 338 337 336 335 334 333 332 333  .   .  324 323 322 321 320 319 318 317 316 315 314 313 312 311 310 309 310  .   .   . 
</span></span><span style=display:flex><span> 390 389 390 391 392 393 394 395  .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .  347 346 345 344 343 342 341 340 339 338 337 336 335 334 333 332 331  .   .  326 325 324 323 322 321 320 319 318 317 316 315 314 313 312 311  .   .   .   .   . 
</span></span><span style=display:flex><span> 391 390 391 392 393 394 395  .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .  345 344 343 342 341 340 339 338 337 336 335 334 333 332 331 330 329 328 327 326 325 324 323 322 321 320 319 318 317 316 315 314 313  .   .   .   .   .   . 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vvvvvvvv....vvvv&lt;&lt;&lt;&lt;&lt;......vvvvvvvvvvvvvvvvvvvvvvvvvvvvvv&gt;vvv......
</span></span><span style=display:flex><span>vvvvv&lt;&lt;v....vvvv..........&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;vvvvvvvvvvvv&gt;vvv......
</span></span><span style=display:flex><span>vvvvv&gt;vv....vvvv...........^^^..^^^^^^^^^^^..vvvvvvvvvvvv&gt;vvvv.....
</span></span><span style=display:flex><span>vvv&lt;&lt;&lt;vvv..vvvvv.................^^^^^^^^^^&lt;.vvvvvvvvvvvv&gt;vvvvvv...
</span></span><span style=display:flex><span>vv&lt;v^^vvv&gt;vvvvvvv................^^^^^^^^^^..&gt;&gt;vvvvv&gt;vvvv&gt;vvvvvv...
</span></span><span style=display:flex><span>vvvvv^vvv&gt;vvvvvvv.......vv.......^^^^^^^^^^&lt;vvv&gt;&gt;vvv.vvvv&gt;vvvvvv..v
</span></span><span style=display:flex><span>vv&gt;&gt;&gt;vvvv&gt;vvvvvvvv.....&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;^^^^^^^^^vvvvvvv&gt;vvvvvvv&gt;&gt;&gt;&gt;vvvvvv
</span></span><span style=display:flex><span>vvvvvvvvv&gt;vvvvvv&lt;&lt;.....^^^^^^^^^^^^^^^^..&gt;&gt;&gt;&gt;&gt;&gt;vvv&gt;vvvv&lt;&lt;&lt;^..vvvvvv
</span></span><span style=display:flex><span>vvvvvvvv&lt;&gt;&gt;vvvvv.^&lt;&lt;...^^^^^^^^^^^^^^^^.&gt;^^^vvv&gt;vvv&gt;vvv...^..vvvvvv
</span></span><span style=display:flex><span>vvvv&lt;vv&lt;...vvvvv..^...&gt;^^^^^^^^^^^^^^^^&gt;^^^vvvvv&gt;vvv&gt;vvvv....&gt;&gt;vvvv
</span></span><span style=display:flex><span>vvvv&gt;vv....vvvvv.....&gt;^^^^^^^^^^^^^^^^&gt;^^^&gt;&gt;&gt;&gt;&gt;vv&gt;vvv&gt;&gt;vvvv....vvvv
</span></span><span style=display:flex><span>vvvvvvv....vvvv&lt;&lt;......^...^^^^^^^^^^&gt;^^^&gt;^^vvv&gt;vv&gt;vvvv&gt;&gt;vvv...vvvv
</span></span><span style=display:flex><span>vv&lt;&lt;&lt;vvv...vvvv........^....^^^^^^^&gt;&gt;^^^&gt;^^vvvvv&gt;vv&gt;vvvvv&gt;&gt;vvv.vvvv
</span></span><span style=display:flex><span>vvvvvvvvvvvvvvv........^....^^^^^&gt;&gt;^^^^&gt;^^^&gt;&gt;&gt;vvvvvv&gt;&gt;&gt;vvvv&gt;vvv&lt;&lt;&lt;&lt;
</span></span><span style=display:flex><span>vv&gt;&gt;&gt;&gt;vvvvvvvvvvvv..&gt;&gt;&gt;^...&gt;^^^&gt;&gt;^^^&gt;&gt;&gt;^^^&gt;^^v&gt;vv&gt;vvvvv&gt;&gt;vvvvvv^^^^
</span></span><span style=display:flex><span>vvv^vvvvvvvvv&lt;&lt;&lt;&lt;&lt;..^^^^&gt;&gt;&gt;^^^^^^^^&gt;^^^^^&gt;^^vvv&gt;vv&gt;&gt;&gt;vvvvvvvvvv^^^^
</span></span><span style=display:flex><span>vvvvvv&gt;vvvvv&lt;.^^^.&gt;&gt;^^^^^^^^^^&gt;^^^&gt;^^&gt;&gt;&gt;&gt;^^^vvvvvvvvv&gt;&gt;vvvvvvvv^^^^
</span></span><span style=display:flex><span>vvvvvvvvv&lt;&lt;&lt;...^...^^^^^^^^^^^^^^&gt;^^^^^^^^^^vvvv&gt;&gt;&gt;&gt;vvvvvvvvvvv^^^^
</span></span><span style=display:flex><span>vvvvv&lt;&lt;vv..........^^^^^^^^.^^^^^^^^&gt;^^^vvv&gt;vvvvvvvvvv&lt;vvvvvvvv^^^^
</span></span><span style=display:flex><span>vv&lt;&lt;&lt;vvvv..........^^^^^^^..^^^^^^^^^^^vvvv&gt;&gt;&gt;vvvvv&lt;vvvvvvvvvv&lt;^^^^
</span></span><span style=display:flex><span>vvv^^vvvv..........^^^^.....^.^^^^^^^^^&gt;vvv.&lt;&lt;&lt;&lt;&lt;&lt;&lt;vv&lt;vv&lt;vv&lt;vv&gt;^^^^
</span></span><span style=display:flex><span>vvvvvvvvv...........^^^........^^&lt;^^&lt;^^&lt;&gt;&gt;&gt;&gt;^^^^^vvv&lt;vv&lt;vv&lt;vv&lt;^^^^^
</span></span><span style=display:flex><span>vvvvvvvvv...........^^^&lt;&lt;....vv^^^^^^&lt;^^&lt;&lt;^^^^^^^&gt;vvvv&lt;vvvvvv&gt;^^^^^
</span></span><span style=display:flex><span>vvvvvvvvvvv......vv.^^^^.....&gt;vv^^&lt;^^^&lt;^^&gt;^^^^^^^&lt;vvvvvvv&lt;vv&lt;^^^^^^
</span></span><span style=display:flex><span>vvvvvvvvvvvvvv...&gt;&gt;&gt;^^^^..v...vvv^^&lt;^^^^^^^^^vv^^^vvvv&gt;vvvvv&gt;^^^^^^
</span></span><span style=display:flex><span>vvvvvvvvvvvvvv...^^^^^^^.vv...vvv^^^^^^^^^^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;vvvvvvvv^^^^^^^
</span></span><span style=display:flex><span>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;^^^^^^^&lt;&lt;&lt;vvvvvv^^^^^^^^^^^^vv^^^^^vvvvvvvv^^^^^^^
</span></span><span style=display:flex><span>^^&lt;&lt;&lt;^^vv^^^^^^^^^^^^^^^^^vvv&gt;&gt;&gt;vv^^^^^^^&lt;^^^vvv^^^^vv&lt;vvvvv.^^^^^^
</span></span><span style=display:flex><span>^^^^&gt;^&gt;vvvvv^^^^^^^^^^^^^vvvv...&gt;v^^^^^^^^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;vvvvvv.^^^^^^
</span></span><span style=display:flex><span>^^^&gt;^^&lt;vvvvv^^^^^^^...^^vvvvv....v^^^^^^^^^^^vv^^^^^^^vvvvv&lt;.^^^^^^
</span></span><span style=display:flex><span>^^^&lt;^vvvvvvv^^^^^^^....vvvvvv....v^^&lt;^^&lt;&lt;^^vvvvvvv^^vvvv&lt;vv....^^^^
</span></span><span style=display:flex><span>^^^^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;^^^^^^....vvvvvv...vv^^^^^^^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;vvv....^^^^
</span></span><span style=display:flex><span>^^^^^^^^^^^^^^^^^^^....vvvvvvvvvvvv^^&lt;^^^^^^^vvv^^^^^^^vvv&lt;...&gt;^^^^
</span></span><span style=display:flex><span>^^^^^^^^^^v^&gt;^^^^^^&lt;..&gt;vvvvvvvvvvvv^^^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;...&gt;^^^^^
</span></span><span style=display:flex><span>^^&lt;^^^^^^&gt;&gt;&gt;^^^^^^^^...&gt;&gt;&gt;&gt;&gt;&gt;vvvvvvv^^^^^^^^^^^^^^^^^^^^^v...^^^^^^
</span></span><span style=display:flex><span>^^^&lt;&lt;^^^^.^^^^^^^^^^....^^^..vvvvvvvv^^^^^^^.....^^^^^^&gt;&gt;&gt;&gt;&gt;&gt;^^^^^^
</span></span><span style=display:flex><span>^^^^^^^^^...^...^^^^....^....vvvvvvvvvvvvvvv....&gt;&gt;&gt;&gt;&gt;&gt;&gt;^^^^^^^^...^
</span></span><span style=display:flex><span>^^^^^^^^^.......^^^^.........vvvvvvvvvvvvvvv...&gt;^^^^^^^^^^^^^^^&lt;...
</span></span><span style=display:flex><span>^^^^&lt;^^^^......&gt;^^^........vvvvvvvvvvvvvvvvv&lt;..^^^^^^^^^^^^^^^^^...
</span></span><span style=display:flex><span>^^^^^^^^...................&gt;vvvvvvvvvvvvvvvv..&gt;^^^^^^^^^^^^^^^.....
</span></span><span style=display:flex><span>^^^^^^^.....................&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;^^^^^^^^^^^^^^^......
</span></span><span style=display:flex><span>383
</span></span><span style=display:flex><span>took 5.869291ms
</span></span></code></pre></div><p>It&rsquo;s huge, but that&rsquo;s so cool to look at. I particularly like being able to see the ridges (regions of <code>.</code>) where there&rsquo;s no way to actually climb up onto them from any direction and how that makes choke points.</p><p>Very cool.</p><p>On to part 2!</p><h2 id=part-2>Part 2</h2><blockquote><p>Expand the search to any point with height 1 (not just the <code>S</code>). Find the minimum distance.</p></blockquote><p>This one delightfully didn&rsquo;t changes to the underlying code, just scanning over the <code>distance_map</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part2</span>(filename: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Path</span>) -&gt; String {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> lines <span style=color:#f92672>=</span> read_lines(filename);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> height_map <span style=color:#f92672>=</span> HeightMap::from(lines);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> distance_map <span style=color:#f92672>=</span> DistanceMap::from(<span style=color:#f92672>&amp;</span>height_map);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> best_distance <span style=color:#f92672>=</span> <span style=color:#66d9ef>usize</span>::MAX;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> y <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>height_map.data.height() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>height_map.data.width() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> height_map.data[[x, y]] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>match</span> distance_map.distances[[x, y]] {
</span></span><span style=display:flex><span>                Some(d) <span style=color:#66d9ef>if</span> d <span style=color:#f92672>&lt;</span> best_distance <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                    best_distance <span style=color:#f92672>=</span> d;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                _ <span style=color:#f92672>=&gt;</span> {}
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    best_distance.to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=performance>Performance</h2><p>Whee!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ./target/release/12-climbinator <span style=color:#ae81ff>1</span> data/12.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>383</span>
</span></span><span style=display:flex><span>took 402.208µs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ ./target/release/12-climbinator <span style=color:#ae81ff>2</span> data/12.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>377</span>
</span></span><span style=display:flex><span>took 153.75µs
</span></span></code></pre></div><p>I don&rsquo;t have a backtracking solution, but I expect this is even a bit faster than that would have been. It certainly does have the advantage of near <code>O(1)</code> memory (the queue takes a bit).</p><p>Onward once again!</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div><script defer src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin=anonymous></script>
<script defer src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin=anonymous></script>
<script defer src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js integrity=sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h crossorigin=anonymous></script>
<script defer src=https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script>
<script defer src=/custom.js></script></body></html>