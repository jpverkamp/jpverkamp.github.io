<!doctype html><html><head><title>Solving Sudoku (again) â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css integrity=sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel=stylesheet><link rel=stylesheet href=/custom.css defer><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=//www.google.com/search method=get onsubmit='(function(e){e.q.value="site:blog.jverkamp.com "+e.qfront.value})(this)' class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=hidden>
<input name=qfront type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article><header><h1 class=entry-title>Solving Sudoku (again)</h1><div class=entry-meta><span class=entry-date>2022-10-04</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2022/10/02/cleaner-lunar-arithmetic-in-rust/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/rust>Rust</a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2021/12/23/aoc-2021-day-23-amphipodinator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/algorithms>Algorithms</a></li><li><a href=https://blog.jverkamp.com/2021/08/18/solving-snakebird/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/backtracking>Backtracking</a></li><li><a href=https://blog.jverkamp.com/2021/08/18/solving-snakebird/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/generators>Generators</a></li><li><a href=https://blog.jverkamp.com/2021/08/18/solving-snakebird/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/puzzles>Puzzles</a></li><li><a href=https://blog.jverkamp.com/2021/08/17/immutable.js-solvers/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/sudoku>Sudoku</a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2022/10/02/cleaner-lunar-arithmetic-in-rust/ class=previous-link>Prev</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2022/10/02/cleaner-lunar-arithmetic-in-rust/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2022/10/05/the-unwritten-vol.-6-tommy-taylor-and-the-war-of-words/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>More <a href=programming/languages/rust/>Rust</a>! This time, I want to go back to my post on <a href=https://blog.jverkamp.com/2021/06/25/a-generic-brute-force-backtracking-solver/>A Generic Brute Force Backtracking Solver</a>. For one, because I&rsquo;m learning Rust. For two, because there is a crate specifically for <code><a href=https://docs.rs/im/latest/im/>im</a></code>
mutable data structures. And for three, because I expect it will be much faster. We shall see!</p><h2 id=representing-the-board>Representing the board</h2><p>As one does, we&rsquo;re going to start with <a href=https://en.wikipedia.org/wiki/Sudoku>Sudoku</a>. So to do that, we&rsquo;ll need to represent the board. Because it&rsquo;s just a 9x9 grid, I&rsquo;m going to use Rust arrays:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[derive(Copy, Clone, Debug)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Sudoku</span> {
</span></span><span style=display:flex><span>    board: [[<span style=color:#66d9ef>u8</span>; <span style=color:#ae81ff>9</span>]; <span style=color:#ae81ff>9</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And because I want a decent display function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>impl</span> fmt::Display <span style=color:#66d9ef>for</span> Sudoku {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>fmt</span>(<span style=color:#f92672>&amp;</span>self, f: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> fmt::Formatter) -&gt; <span style=color:#a6e22e>fmt</span>::Result {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> s: String <span style=color:#f92672>=</span> String::new();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        s <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;sudoku:\n&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>9</span> {
</span></span><span style=display:flex><span>            s <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;  &#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> y <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>9</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> self.board[x][y] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>                    s <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34; &#34;</span>;
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> { 
</span></span><span style=display:flex><span>                    <span style=color:#75715e>// This seems weird
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    s <span style=color:#f92672>=</span> format!(<span style=color:#e6db74>&#34;{}{}&#34;</span>, s, self.board[x][y]);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> y <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>||</span> y <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span> {
</span></span><span style=display:flex><span>                    s <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;|&#34;</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            s <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;\n&#34;</span>;
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> x <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>||</span> x <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span> {
</span></span><span style=display:flex><span>                s <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;  ---+---+---\n&#34;</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        write!(f, <span style=color:#e6db74>&#34;{}&#34;</span>, s)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If there&rsquo;s a better way to do that&mldr; I&rsquo;d love to here it. In particular, I couldn&rsquo;t figure out a better way to put in the <code>u8</code> to <code>String</code> bit without borrowing issues. Rust yo.</p><p>So now I can create an initial board:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>let</span> initial_state <span style=color:#f92672>=</span> Sudoku { 
</span></span><span style=display:flex><span>    board: [
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>8</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>4</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>6</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>I&rsquo;ll use <code>0</code> for the empty spaces and the numbers for everything else. Cool. So next?</p><h2 id=a-state-trait>A <code>State</code> trait</h2><p>Next, we need something to solve. The idea of defining a generic function in Rust that can operate over different sorts of problems fits perfectly into <code>trait</code>s, so let&rsquo;s make one:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>trait</span> State {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>next_states</span>(self) -&gt; Option<span style=color:#f92672>&lt;</span>Vec<span style=color:#f92672>&lt;</span>Self<span style=color:#f92672>&gt;&gt;</span> <span style=color:#66d9ef>where</span> Self: Sized <span style=color:#f92672>+</span> Copy;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>is_valid</span>(self) -&gt; <span style=color:#66d9ef>bool</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>is_solved</span>(self) -&gt; <span style=color:#66d9ef>bool</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>For something to be a <code>State</code>, it needs to have three functions defined:</p><ul><li><code>next_states</code> - takes a current state and returns <code>None</code> (if no new states can be generated) or <code>Some(Vec&lt;State>)</code> that can be generated from that state</li><li><code>is_valid</code> - tells if a current state is valid (useful for some cases where I want <code>next_states</code> to generate too many, but I don&rsquo;t use it for Sudoku)</li><li><code>is_solved</code> - checks if this state is a solution, if so, we&rsquo;re done looking</li></ul><p>So, let&rsquo;s implement those for Sudoku:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>impl</span> State <span style=color:#66d9ef>for</span> Sudoku {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>is_valid</span>(self) -&gt; <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// TODO: Because we&#39;re always generating valid `next_states`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//  this isn&#39;t necessary
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>is_solved</span>(self) -&gt; <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// TODO: Same as above, all states are `is_valid`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//  so just check for no remaining empties
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>9</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> y <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>9</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> self.board[x][y] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>next_states</span>(self) -&gt; Option<span style=color:#f92672>&lt;</span>Vec<span style=color:#f92672>&lt;</span>Sudoku<span style=color:#f92672>&gt;&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> states <span style=color:#f92672>=</span> Vec::new();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Find the next empty square
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>9</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> y <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>9</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> self.board[x][y] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>                    <span style=color:#75715e>// Try each value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#f92672>&#39;</span><span style=color:#a6e22e>duplicate</span>: <span style=color:#a6e22e>for</span> value <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>..=</span><span style=color:#ae81ff>9</span> {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>for</span> other <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>9</span> {
</span></span><span style=display:flex><span>                            <span style=color:#75715e>// Already used in this row or column, skip
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                            <span style=color:#66d9ef>if</span> self.board[x][other] <span style=color:#f92672>==</span> value {
</span></span><span style=display:flex><span>                                <span style=color:#66d9ef>continue</span> &#39;duplicate;
</span></span><span style=display:flex><span>                            }
</span></span><span style=display:flex><span>                            
</span></span><span style=display:flex><span>                            <span style=color:#66d9ef>if</span> self.board[other][y] <span style=color:#f92672>==</span> value {
</span></span><span style=display:flex><span>                                <span style=color:#66d9ef>continue</span> &#39;duplicate;
</span></span><span style=display:flex><span>                            }
</span></span><span style=display:flex><span>                            
</span></span><span style=display:flex><span>                            <span style=color:#75715e>// Already used in this 3x3 block, skip
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                            <span style=color:#66d9ef>if</span> self.board[x <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>+</span> other <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>][y <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>+</span> other <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span>] <span style=color:#f92672>==</span> value {
</span></span><span style=display:flex><span>                                <span style=color:#66d9ef>continue</span> &#39;duplicate;
</span></span><span style=display:flex><span>                            }
</span></span><span style=display:flex><span>                        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                        <span style=color:#75715e>// Valid so far, so generate a new board using that value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> next <span style=color:#f92672>=</span> self.clone();
</span></span><span style=display:flex><span>                        next.board[x][y] <span style=color:#f92672>=</span> value;
</span></span><span style=display:flex><span>                        states.push(next);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    
</span></span><span style=display:flex><span>                    <span style=color:#75715e>// Return the possible next states for this empty square
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#75715e>// If we didn&#39;t generate any states, something went wrong
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#66d9ef>if</span> states.len() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> None;
</span></span><span style=display:flex><span>                    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> Some(states);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// If we made it here, there are no empty squares, is_solved should be true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// (We shouldn&#39;t make it here)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        None
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As I mentioned, we&rsquo;re just skipping <code>is_valid</code> and always returning <code>true</code>, since our <code>next_states</code> function explicitly only returns possible states. Likewise, <code>is_solved</code> just checks if there are any <code>0</code>s left, since we&rsquo;re assuming all states are valid.</p><p>The interesting one is <code>next_states</code>. For this, we&rsquo;ll find the next open (<code>0</code>) spot on the board and try each of the 9 possible values. For each, check the row, column, and block it&rsquo;s in for any duplicates. If there are no duplicates, this will be a state we return. If there are any, skip this one and go on. If we get to the end of this check and none of the values fit into this empty square, this isn&rsquo;t a valid solution, so return <code>None</code> from <code>next_states</code>. The solver will know how to handle that.</p><p>And that&rsquo;s all we need:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> initial_state <span style=color:#f92672>=</span> Sudoku { 
</span></span><span style=display:flex><span>        board: [
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>8</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>4</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>6</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;initial {}&#34;</span>, initial_state);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> state <span style=color:#66d9ef>in</span> initial_state.next_states().unwrap() {
</span></span><span style=display:flex><span>        println!(<span style=color:#e6db74>&#34;potential {}&#34;</span>, state);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* --- OUTPUT --- */</span>
</span></span><span style=display:flex><span>initial sudoku:
</span></span><span style=display:flex><span>     <span style=color:#f92672>|</span><span style=color:#ae81ff>26</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>7</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>68</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>9</span> 
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>19</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>5</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>82</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>1</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>4</span> 
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>6</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>|</span><span style=color:#ae81ff>9</span>  
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>9</span><span style=color:#f92672>|</span><span style=color:#ae81ff>3</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>74</span>
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>4</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>18</span><span style=color:#f92672>|</span>   
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>potential sudoku:
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>3</span>  <span style=color:#f92672>|</span><span style=color:#ae81ff>26</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>7</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>68</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>9</span> 
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>19</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>5</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>82</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>1</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>4</span> 
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>6</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>|</span><span style=color:#ae81ff>9</span>  
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>9</span><span style=color:#f92672>|</span><span style=color:#ae81ff>3</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>74</span>
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>4</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>18</span><span style=color:#f92672>|</span>   
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>potential sudoku:
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>4</span>  <span style=color:#f92672>|</span><span style=color:#ae81ff>26</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>7</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>68</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>9</span> 
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>19</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>5</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>82</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>1</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>4</span> 
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>6</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>|</span><span style=color:#ae81ff>9</span>  
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>9</span><span style=color:#f92672>|</span><span style=color:#ae81ff>3</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>74</span>
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>4</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>18</span><span style=color:#f92672>|</span>   
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>potential sudoku:
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>5</span>  <span style=color:#f92672>|</span><span style=color:#ae81ff>26</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>7</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>68</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>9</span> 
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>19</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>5</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>82</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>1</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>4</span> 
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>6</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>|</span><span style=color:#ae81ff>9</span>  
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>9</span><span style=color:#f92672>|</span><span style=color:#ae81ff>3</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>74</span>
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>4</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>18</span><span style=color:#f92672>|</span>   
</span></span></code></pre></div><p>If you go through it, <code>3</code>, <code>4</code>, and <code>5</code> are the possible top left states, so those are the ones it generated. In theory, you could optimize slightly by finding the most constrained squares and doing those first, but in practice, this works fine.</p><p>Now, on to the actual solver!</p><h2 id=solving-the-problem>Solving the problem</h2><p>For what it does, the state is pretty short:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>solve</span><span style=color:#f92672>&lt;</span>S<span style=color:#f92672>&gt;</span>(initial_state: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>S</span>) -&gt; Option<span style=color:#f92672>&lt;</span>S<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>where</span> S: <span style=color:#a6e22e>State</span> <span style=color:#f92672>+</span> Copy <span style=color:#f92672>+</span> std::fmt::Debug {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> deq: <span style=color:#a6e22e>VecDeque</span><span style=color:#f92672>&lt;</span>S<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> VecDeque::from([initial_state.clone()]);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#f92672>!</span>deq.is_empty() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> current_state <span style=color:#f92672>=</span> deq.pop_back().unwrap();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> current_state.is_solved() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Some(current_state);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// If we have next states, push those onto the queue
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// If not, just drop this state (and effectively backtrack)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>match</span> current_state.next_states() {
</span></span><span style=display:flex><span>            Some(ls) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> next_state <span style=color:#66d9ef>in</span> ls {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (next_state.is_valid()) {
</span></span><span style=display:flex><span>                        deq.push_back(next_state);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            None <span style=color:#f92672>=&gt;</span> {}
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> None;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Initialize a <code><a href=https://docs.rs/deque/latest/deque/>deque</a></code>
(for the future when I want to support both depth and breadth first searches, a normal <code>Vec</code> would have worked for this) with the initial state then start iterating:</p><ul><li>For each state:<ul><li>Check if it&rsquo;s solved, if so, return that as the answer</li><li>Otherwise, generate each of the possible <code>next_states</code>:<ul><li>If that state is valid, add it to the queue</li><li>Otherwise, ignore it</li></ul></li><li>Because the state is removed, if it has no possible child states, we will automatically backtrack here</li></ul></li></ul><p>Eventually, this will search the entire search space. Because it&rsquo;s a depth first search, it will go as far down each possible solution branch as it can until it either hits a dead end or finds the solution.</p><p>Optimizations:</p><ul><li>Allow either depth or breadth first search</li><li>Keep track of the steps we took to get to a specific state (possibly returning a <code>Vec</code> of tuples of <code>(Step, State)</code>)</li><li>Keep track of how many states we evaluated to get to a specific point</li><li>Don&rsquo;t examine duplicate states (we&rsquo;ll have to implement <code>Eq</code> for that)</li></ul><p>Next time!</p><h2 id=output-time>Output time!</h2><p>And of course it works (and fast), but let&rsquo;s take a quick look:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> initial_state <span style=color:#f92672>=</span> Sudoku { 
</span></span><span style=display:flex><span>        board: [
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>8</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            [<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;initial {}&#34;</span>, initial_state);
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;solved {}&#34;</span>, solve::<span style=color:#f92672>&lt;</span>Sudoku<span style=color:#f92672>&gt;</span>(<span style=color:#f92672>&amp;</span>initial_state).unwrap());
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* --- OUTPUT --- */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>initial sudoku:
</span></span><span style=display:flex><span>     <span style=color:#f92672>|</span><span style=color:#ae81ff>26</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>7</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>68</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>9</span> 
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>19</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>5</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>82</span> <span style=color:#f92672>|</span><span style=color:#ae81ff>1</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>4</span> 
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>4</span><span style=color:#f92672>|</span><span style=color:#ae81ff>6</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>|</span><span style=color:#ae81ff>9</span>  
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>28</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>9</span><span style=color:#f92672>|</span><span style=color:#ae81ff>3</span>  <span style=color:#f92672>|</span> <span style=color:#ae81ff>74</span>
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>4</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span> <span style=color:#ae81ff>18</span><span style=color:#f92672>|</span>   
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>solved sudoku:
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>435</span><span style=color:#f92672>|</span><span style=color:#ae81ff>269</span><span style=color:#f92672>|</span><span style=color:#ae81ff>781</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>682</span><span style=color:#f92672>|</span><span style=color:#ae81ff>571</span><span style=color:#f92672>|</span><span style=color:#ae81ff>493</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>197</span><span style=color:#f92672>|</span><span style=color:#ae81ff>834</span><span style=color:#f92672>|</span><span style=color:#ae81ff>562</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>826</span><span style=color:#f92672>|</span><span style=color:#ae81ff>195</span><span style=color:#f92672>|</span><span style=color:#ae81ff>347</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>374</span><span style=color:#f92672>|</span><span style=color:#ae81ff>682</span><span style=color:#f92672>|</span><span style=color:#ae81ff>915</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>951</span><span style=color:#f92672>|</span><span style=color:#ae81ff>743</span><span style=color:#f92672>|</span><span style=color:#ae81ff>628</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>---+---+---</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>519</span><span style=color:#f92672>|</span><span style=color:#ae81ff>326</span><span style=color:#f92672>|</span><span style=color:#ae81ff>874</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>248</span><span style=color:#f92672>|</span><span style=color:#ae81ff>957</span><span style=color:#f92672>|</span><span style=color:#ae81ff>136</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>763</span><span style=color:#f92672>|</span><span style=color:#ae81ff>418</span><span style=color:#f92672>|</span><span style=color:#ae81ff>259</span>
</span></span></code></pre></div><p>Nice!</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div><script defer src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin=anonymous></script>
<script defer src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin=anonymous></script>
<script defer src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js integrity=sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h crossorigin=anonymous></script>
<script defer src=https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script>
<script defer src=/custom.js></script></body></html>