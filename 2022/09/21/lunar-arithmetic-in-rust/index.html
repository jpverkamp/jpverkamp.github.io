<!doctype html><html><head><title>Lunar Arithmetic in Rust â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script defer src=/jquery_6894410585563545744.min.cc1cade18c999752b7befe111634889dca8d89b24923775954ecebc68c54fcd3.js></script>
<script defer src=/jquery.fancybox_6181813213021922412.min.6ba037466db9f8843b66c38c32fe5a353344e7fd68ecda97efb63a84c881f828.js></script>
<script defer src=/katex_12008035502722260518.min.3cc3a080c0368785179e37b0cd0a71c6cf60c4fc5a8dce503f5a542ec0a25043.js></script>
<script defer src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js></script>
<script defer src=/mermaid_12365941879912544862.min.e8f19283a632077085b9ad74aecad54abe84429c69789fd29ffa3a254d86abdd.js></script>
<script defer src=/custom.js></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css></script><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css></script><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css></script><link rel=stylesheet href=/css_4780214198035419921.min.7cfac95bdd962d85ceec560e50fe7b04c44b58a76e5202006ef36ca8c0a7d836.css></script><link rel=stylesheet href=/custom.css><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=//www.google.com/search method=get onsubmit='(function(e){e.q.value="site:blog.jverkamp.com "+e.qfront.value})(this)' class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=hidden>
<input name=qfront type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article><header><h1 class=entry-title>Lunar Arithmetic in Rust</h1><div class=entry-meta><span class=entry-date>2022-09-21</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a class=taxonomy-value href=/programming/languages/rust>Rust</a><a href=https://blog.jverkamp.com/2022/10/02/cleaner-lunar-arithmetic-in-rust/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2021/12/25/aoc-2021-day-25-cucumbinator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/mathematics>Mathematics</a><a href=https://blog.jverkamp.com/2022/10/02/cleaner-lunar-arithmetic-in-rust/ class=next-link></a></li><li><a class=taxonomy-value href=/programming/topics/oeis>OEIS</a><a href=https://blog.jverkamp.com/2022/10/02/cleaner-lunar-arithmetic-in-rust/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2022/08/29/runelang-a-summoning-circle-generator/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2022/10/02/cleaner-lunar-arithmetic-in-rust/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2022/09/05/soul-taken/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2022/09/25/shadow-and-bone-season-1/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>I&rsquo;ve been playing with various languages / language design a lot recently (inspired by my <a href=/series/runelang-in-the-browser/>Runelang series</a>). As I tweak and change what I&rsquo;d like to implement in a language&mldr; I kept finding myself coming back to more or less exactly how Rust looks (albeit without the borrowing). So&mldr; that seems like a pretty good reason to start picking up some Rust.</p><p>In another thread of thought, I stumbled upon two OEIS (on-line encyclopedia of integer sequences) sequences: <a href=https://oeis.org/A087061>A087061: Array T(n,k) = lunar sum n+k (n >= 0, k >= 0) read by antidiagonals</a> and <a href=https://oeis.org/A087062>A087062: Array T(n,k) = lunar product n*k (n >= 1, k >= 1) read by antidiagonals</a>. Seemed like a fun bit of esoteric math to play with.</p><p>So&mldr; let&rsquo;s combine them!</p><p>(Warning: I have very little idea what I&rsquo;m doing. That&rsquo;s sort of the point. :D Happy to chat if you have better ways I could have done this!)</p><h2 id=defining-lunar-integers>Defining Lunar Integers</h2><p>So both of these sequences resolve around Lunar numbers (apparently previously called dismal numbers, but it was too depressing?). In essence, Lunar numbers are Integers, but addition and multiplication are defined differently. Specifically:</p><h3 id=addition-when-adding-a--b-for-each-digit-a-and-b-the-resulting-digit-is-maxa-b>Addition: when adding <code>A + B</code>, for each digit <code>a</code> and <code>b</code>, the resulting digit is <code>max(a, b)</code></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>  169
</span></span><span style=display:flex><span>+ 248
</span></span><span style=display:flex><span>-----
</span></span><span style=display:flex><span>  269 
</span></span></code></pre></div><h3 id=multiplication-when-multiplying-a--b-for-each-digit-b-in-b-take-mina-b-for-a-in-a-add-those-resulting-values-as-above>Multiplication: when multiplying <code>A * B</code>, for each digit <code>b</code> in <code>B</code>, take <code>min(a, b) for a in A</code>; add those resulting values as above</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>    169
</span></span><span style=display:flex><span>  x 248
</span></span><span style=display:flex><span>  -----
</span></span><span style=display:flex><span>    168
</span></span><span style=display:flex><span>   144
</span></span><span style=display:flex><span>+ 122
</span></span><span style=display:flex><span>-------
</span></span><span style=display:flex><span>  12468 
</span></span></code></pre></div><p>Weird. Probably useless. But interesting! Let&rsquo;s implement them.</p><h2 id=lunarinteger-type>LunarInteger type</h2><p>First, a new type. If we&rsquo;re going to implement the addition and multiplication operators in Rust, this is probably the best way to do it. Our <code>LunarInteger</code> struct is simple: just a single <code>u32</code> value (would signed <code>LunarInteger</code>s make sense? maybe a question for another day). We&rsquo;ll go ahead and give it <code>Debug</code>, since that makes early printing easier.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[derive(Debug)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>LunarInteger</span>(<span style=color:#66d9ef>u32</span>);
</span></span></code></pre></div><p>Easy enough:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#f92672>&gt;</span> println!(<span style=color:#e6db74>&#34;{:?}&#34;</span>, LunarInteger(<span style=color:#ae81ff>169</span>));
</span></span><span style=display:flex><span>LunarInteger(<span style=color:#ae81ff>169</span>)
</span></span></code></pre></div><p>But what if we want a slightly fancier way to print it? Well, I&rsquo;ll admit I went down something of a rabbit hole here&mldr; I knew that I needed to implement <code>Display</code>, but when I tried the basic idea I had, it didn&rsquo;t respect width:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>impl</span> fmt::Display <span style=color:#66d9ef>for</span> LunarInteger {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>fmt</span>(<span style=color:#f92672>&amp;</span>self, f: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> fmt::Formatter) -&gt; <span style=color:#a6e22e>fmt</span>::Result {
</span></span><span style=display:flex><span>        write!(f, <span style=color:#e6db74>&#34;{} ðŸŒ˜&#34;</span>, self.<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Apparently, what I need to do (or at least one way to do it) is to take the original formatter to write the number <code>and_then</code> apply the moon:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>impl</span> fmt::Display <span style=color:#66d9ef>for</span> LunarInteger {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>fmt</span>(<span style=color:#f92672>&amp;</span>self, f: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> fmt::Formatter) -&gt; <span style=color:#a6e22e>fmt</span>::Result {
</span></span><span style=display:flex><span>        self.<span style=color:#ae81ff>0.</span>fmt(f).and_then(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> write!(f, <span style=color:#e6db74>&#34;ðŸŒ˜&#34;</span>))
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Weird, but sure.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;{}&#34;</span>, LunarInteger(<span style=color:#ae81ff>169</span>));
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>169</span><span style=color:#960050;background-color:#1e0010>ðŸŒ˜</span>
</span></span></code></pre></div><p>Fun. And <em>totally</em> worth doing.</p><h2 id=splitting-to-digits>Splitting to digits</h2><p>The next thing that we&rsquo;ll need to do is some way of converting a <code>LunarInteger</code> to digits, so that we can work with those one by one. There are a couple ways to deal with this, but here&rsquo;s what I ended up with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>integer_to_digits</span>(n: <span style=color:#66d9ef>u32</span>) -&gt; Vec<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u32</span><span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    n.to_string()
</span></span><span style=display:flex><span>        .chars()
</span></span><span style=display:flex><span>        .map(<span style=color:#f92672>|</span>d<span style=color:#f92672>|</span> d.to_digit(<span style=color:#ae81ff>10</span>).unwrap())
</span></span><span style=display:flex><span>        .collect()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>digits_to_integer</span>(ls: Vec<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u32</span><span style=color:#f92672>&gt;</span>) -&gt; <span style=color:#66d9ef>u32</span> {
</span></span><span style=display:flex><span>    ls.iter()
</span></span><span style=display:flex><span>        .map(<span style=color:#f92672>|</span>d<span style=color:#f92672>|</span> d.to_string())
</span></span><span style=display:flex><span>        .collect::<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>        .parse()
</span></span><span style=display:flex><span>        .unwrap()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>It&rsquo;s not actually specific to <code>LunarInteger</code>, but that&rsquo;s fine. It works:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;{:?}&#34;</span>, integer_to_digits(<span style=color:#ae81ff>8675309</span>));
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> [<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>9</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;{:?}&#34;</span>, digits_to_integer([<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>9</span>].to_vec()));
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>8675309</span>
</span></span></code></pre></div><h2 id=defining-addition>Defining addition</h2><p>Okay, we have all the pieces we need, let&rsquo;s actually define one of our operations. We need addition for multiplication, so that&rsquo;s the place to start!</p><p>To make <code>+</code> work, &lsquo;all&rsquo; we have to do is implement <code>ops::Add</code> on <code>LunarInteger</code>. Give it an <code>Output</code> type and define the <code>add</code> function. Piece of cake?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>impl</span> ops::Add<span style=color:#f92672>&lt;</span>LunarInteger<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>for</span> LunarInteger {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Output</span> <span style=color:#f92672>=</span> Self;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>add</span>(self, rhs: <span style=color:#a6e22e>LunarInteger</span>) -&gt; <span style=color:#a6e22e>LunarInteger</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> lhs_digits <span style=color:#f92672>=</span> integer_to_digits(self.<span style=color:#ae81ff>0</span>).into_iter().rev();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> rhs_digits <span style=color:#f92672>=</span> integer_to_digits(rhs.<span style=color:#ae81ff>0</span>).into_iter().rev();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Iterate over digits of both from least to most significant
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// If we have a digit from each, return the larger
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> result_digits <span style=color:#f92672>=</span> lhs_digits.zip_longest(rhs_digits).map(<span style=color:#f92672>|</span>pair<span style=color:#f92672>|</span> <span style=color:#66d9ef>match</span> pair {
</span></span><span style=display:flex><span>            Both(l, r) <span style=color:#f92672>=&gt;</span> max(l, r),
</span></span><span style=display:flex><span>            Left(l) <span style=color:#f92672>=&gt;</span> l,
</span></span><span style=display:flex><span>            Right(r) <span style=color:#f92672>=&gt;</span> r,
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> result <span style=color:#f92672>=</span> digits_to_integer(result_digits.rev().collect());
</span></span><span style=display:flex><span>        LunarInteger(result)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This actually ended up fairly functional. Because we want to deal with the digits in reverse order (from least to most significant), we&rsquo;ll <code>into_iter</code> (still getting the difference there into my head) and then <code>rev</code> it before <code>zip</code>ing the two together. I do specifically need <code>zip_longest</code> rather than <code>zip</code> since the former will properly deal with numbers of different widths while the latter will truncate. Not at all what we want. It does need the <code>itertools</code> dependency, but that&rsquo;s fair.</p><p>So with that, we either have <code>Both</code> digits&ndash;take the <code>max</code>&ndash;or either a digit from the <code>Left</code> or <code>Right</code>&ndash;take the one we have. Apply that across the numbers and put it back together and <em>bam</em>. Addition.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>let</span> a <span style=color:#f92672>=</span> LunarInteger(<span style=color:#ae81ff>169</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> b <span style=color:#f92672>=</span> LunarInteger(<span style=color:#ae81ff>248</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> ra <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> b;
</span></span><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;{} + {} = {}&#34;</span>, a, b, ra);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> error[E0382]: <span style=color:#a6e22e>borrow</span> of moved value: <span style=color:#960050;background-color:#1e0010>`</span>a<span style=color:#960050;background-color:#1e0010>`</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#f92672>-</span>-&gt; <span style=color:#a6e22e>src</span><span style=color:#f92672>/</span>main.rs:<span style=color:#ae81ff>86</span>:<span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>83</span> <span style=color:#f92672>|</span>     <span style=color:#66d9ef>let</span> a <span style=color:#f92672>=</span> LunarInteger(<span style=color:#ae81ff>169</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#f92672>|</span>         <span style=color:#f92672>-</span> <span style=color:#66d9ef>move</span> occurs because <span style=color:#960050;background-color:#1e0010>`</span>a<span style=color:#960050;background-color:#1e0010>`</span> has <span style=color:#66d9ef>type</span> <span style=color:#960050;background-color:#1e0010>`</span>LunarInteger<span style=color:#960050;background-color:#1e0010>`</span>, which does not implement the <span style=color:#960050;background-color:#1e0010>`</span>Copy<span style=color:#960050;background-color:#1e0010>`</span> <span style=color:#66d9ef>trait</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>84</span> <span style=color:#f92672>|</span>     <span style=color:#66d9ef>let</span> b <span style=color:#f92672>=</span> LunarInteger(<span style=color:#ae81ff>248</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>85</span> <span style=color:#f92672>|</span>     <span style=color:#66d9ef>let</span> ra <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> b;
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#f92672>|</span>              <span style=color:#f92672>-----</span> <span style=color:#960050;background-color:#1e0010>`</span>a<span style=color:#960050;background-color:#1e0010>`</span> moved due to usage <span style=color:#66d9ef>in</span> operator
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>86</span> <span style=color:#f92672>|</span>     println!(<span style=color:#e6db74>&#34;{} + {} = {}&#34;</span>, a, b, ra);
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#f92672>|</span>                              <span style=color:#f92672>^</span> value borrowed here after <span style=color:#66d9ef>move</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> note: <span style=color:#a6e22e>calling</span> this operator moves the left<span style=color:#f92672>-</span>hand side
</span></span></code></pre></div><p>Hmm. That&rsquo;s not great. Luckily, the Rust compiler is really quite good at telling you how to fix things (once you get used to it). Update our struct to include <code>#[derive(Copy, Clone, Debug)]</code> and:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>let</span> a <span style=color:#f92672>=</span> LunarInteger(<span style=color:#ae81ff>169</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>let</span> b <span style=color:#f92672>=</span> LunarInteger(<span style=color:#ae81ff>248</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>let</span> ra <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> b;
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> println!(<span style=color:#e6db74>&#34;{} + {} = {}&#34;</span>, a, b, ra);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>169</span><span style=color:#960050;background-color:#1e0010>ðŸŒ˜</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>248</span><span style=color:#960050;background-color:#1e0010>ðŸŒ˜</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>269</span><span style=color:#960050;background-color:#1e0010>ðŸŒ˜</span>
</span></span></code></pre></div><p>Nice!</p><h2 id=defining-multiplication>Defining multiplication</h2><p>On to multiplication! This one I tried <em>so long</em> to get working in a functional way. But unfortunately, there seems to be a number of gotchas around the borrow checker and closures (the closure take ownership of the values it closes over, so you can&rsquo;t use them in the outer function safely any more), so I ended up implementing this one rather more traditionally:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>impl</span> ops::Mul<span style=color:#f92672>&lt;</span>LunarInteger<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>for</span> LunarInteger {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Output</span> <span style=color:#f92672>=</span> Self;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>mul</span>(self, rhs: <span style=color:#a6e22e>LunarInteger</span>) -&gt; <span style=color:#a6e22e>LunarInteger</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> lhs_digits: Vec<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u32</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> integer_to_digits(self.<span style=color:#ae81ff>0</span>).into_iter().rev().collect();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> rhs_digits: Vec<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u32</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> integer_to_digits(rhs.<span style=color:#ae81ff>0</span>).into_iter().rev().collect();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Collect the `values` of each digit * the lhs 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> values <span style=color:#f92672>=</span> Vec::new();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (i, rd) <span style=color:#66d9ef>in</span> rhs_digits.iter().enumerate() {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Multiply one digit by the entire lhs
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> digits: Vec<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u32</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> Vec::new();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> ld <span style=color:#66d9ef>in</span> lhs_digits.iter() {
</span></span><span style=display:flex><span>                digits.push(<span style=color:#f92672>*</span>min(rd, <span style=color:#f92672>&amp;</span>ld));
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Convert back to a LunarInteger, offset 1, 10, 100, etc
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> value <span style=color:#f92672>=</span> LunarInteger(
</span></span><span style=display:flex><span>                digits_to_integer(digits.into_iter().rev().collect())
</span></span><span style=display:flex><span>                <span style=color:#f92672>*</span> <span style=color:#ae81ff>10_</span><span style=color:#66d9ef>u32</span>.pow(i <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u32</span>)
</span></span><span style=display:flex><span>            );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            values.push(value);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Add the values together using the previous `Add` functionality
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> result <span style=color:#f92672>=</span> LunarInteger(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> value <span style=color:#66d9ef>in</span> values {
</span></span><span style=display:flex><span>            result <span style=color:#f92672>=</span> result <span style=color:#f92672>+</span> value;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        result
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>First, we convert to digits. Then, we create a vector of <code>values</code>. Each of these will be one of the rows of multiplied values that we have to add together later. The <code>let mut digits</code> bit does the actual multiplication (with <code>min</code>) and <code>... * 10_u32.pow(i as u32)</code> takes the result and multiplies by <code>1, 10, 100, 1000...</code> as each place value increases. Originally, I was appending a vector of an increasing number of zeroes before the <code>digits_to_integer</code> conversion. But again: borrow checker issues. I&rsquo;m &mldr; going to have to wrap my head around that. Which is sort of the point of Rust I suppose.</p><p>But having this in place&mldr; it just works(tm):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>let</span> a <span style=color:#f92672>=</span> LunarInteger(<span style=color:#ae81ff>169</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> b <span style=color:#f92672>=</span> LunarInteger(<span style=color:#ae81ff>248</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> rm <span style=color:#f92672>=</span> a <span style=color:#f92672>*</span> b;
</span></span><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;{} * {} = {}&#34;</span>, a, b, rm);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>169</span><span style=color:#960050;background-color:#1e0010>ðŸŒ˜</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>248</span><span style=color:#960050;background-color:#1e0010>ðŸŒ˜</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>12468</span><span style=color:#960050;background-color:#1e0010>ðŸŒ˜</span>
</span></span></code></pre></div><p>Not bad.</p><h2 id=results>Results</h2><p>Okay, the moment we&rsquo;ve all been waiting for! Actually printing the <a href=https://oeis.org/A087061>A087061</a> and <a href=https://oeis.org/A087062>A087062</a> sequence! Mostly, it&rsquo;s a matter of printing and formatting. And&mldr; after all that work to get <code>Display</code> fancy, the moons are just too noisy, so I&rsquo;m only printing the underlying integers after all. C&rsquo;est la vie.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;Addition table&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>20</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> j <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>20</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>let</span> li <span style=color:#f92672>=</span> LunarInteger(i);
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>let</span> lj <span style=color:#f92672>=</span> LunarInteger(j);
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>let</span> lr <span style=color:#f92672>=</span> li <span style=color:#f92672>+</span> lj;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		print!(<span style=color:#e6db74>&#34;{:4}&#34;</span>, lr.<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	println!();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>println!();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> Addition table
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>0</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>9</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;Addition sequence (A087061)&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> _ <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>100</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> li <span style=color:#f92672>=</span> LunarInteger(i);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> lj <span style=color:#f92672>=</span> LunarInteger(j);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> lr <span style=color:#f92672>=</span> li <span style=color:#f92672>+</span> lj;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	print!(<span style=color:#e6db74>&#34;{} &#34;</span>, lr.<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> j <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>		j <span style=color:#f92672>=</span> i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>		i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		j <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>		i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;\n&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> Addition sequence (A087061)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>13</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>13</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;Multiplication table&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>20</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> j <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>20</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>let</span> li <span style=color:#f92672>=</span> LunarInteger(i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>let</span> lj <span style=color:#f92672>=</span> LunarInteger(j <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>let</span> lr <span style=color:#f92672>=</span> li <span style=color:#f92672>*</span> lj;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		print!(<span style=color:#e6db74>&#34;{:4}&#34;</span>, lr.<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	println!();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>println!();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> Multiplication table
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>1</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>2</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>3</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>4</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>5</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>6</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>7</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>8</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>    <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>   <span style=color:#ae81ff>8</span>   <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span>  <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>100</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>110</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>120</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>13</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>120</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>120</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>15</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>115</span> <span style=color:#ae81ff>115</span> <span style=color:#ae81ff>115</span> <span style=color:#ae81ff>115</span> <span style=color:#ae81ff>115</span> <span style=color:#ae81ff>120</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>16</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>115</span> <span style=color:#ae81ff>116</span> <span style=color:#ae81ff>116</span> <span style=color:#ae81ff>116</span> <span style=color:#ae81ff>116</span> <span style=color:#ae81ff>120</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>17</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>115</span> <span style=color:#ae81ff>116</span> <span style=color:#ae81ff>117</span> <span style=color:#ae81ff>117</span> <span style=color:#ae81ff>117</span> <span style=color:#ae81ff>120</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>18</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>115</span> <span style=color:#ae81ff>116</span> <span style=color:#ae81ff>117</span> <span style=color:#ae81ff>118</span> <span style=color:#ae81ff>118</span> <span style=color:#ae81ff>120</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>11</span>  <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>13</span>  <span style=color:#ae81ff>14</span>  <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>16</span>  <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>18</span>  <span style=color:#ae81ff>19</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>111</span> <span style=color:#ae81ff>112</span> <span style=color:#ae81ff>113</span> <span style=color:#ae81ff>114</span> <span style=color:#ae81ff>115</span> <span style=color:#ae81ff>116</span> <span style=color:#ae81ff>117</span> <span style=color:#ae81ff>118</span> <span style=color:#ae81ff>119</span> <span style=color:#ae81ff>120</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span>   <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>20</span>  <span style=color:#ae81ff>20</span>  <span style=color:#ae81ff>20</span>  <span style=color:#ae81ff>20</span>  <span style=color:#ae81ff>20</span>  <span style=color:#ae81ff>20</span>  <span style=color:#ae81ff>20</span>  <span style=color:#ae81ff>20</span> <span style=color:#ae81ff>100</span> <span style=color:#ae81ff>110</span> <span style=color:#ae81ff>120</span> <span style=color:#ae81ff>120</span> <span style=color:#ae81ff>120</span> <span style=color:#ae81ff>120</span> <span style=color:#ae81ff>120</span> <span style=color:#ae81ff>120</span> <span style=color:#ae81ff>120</span> <span style=color:#ae81ff>120</span> <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;Multiplication sequence (A087062)&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> _ <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>100</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> li <span style=color:#f92672>=</span> LunarInteger(i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> lj <span style=color:#f92672>=</span> LunarInteger(j <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> lr <span style=color:#f92672>=</span> li <span style=color:#f92672>*</span> lj;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	print!(<span style=color:#e6db74>&#34;{} &#34;</span>, lr.<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> j <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>		j <span style=color:#f92672>=</span> i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>		i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		j <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>		i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;\n&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> Multiplication sequence (A087062)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>6</span>
</span></span></code></pre></div><p>Checking against the sequences&mldr; good to go! Awesome.</p><p>Okay, now I need to find my next Rust problem to solve :D.</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>