<!DOCTYPE html>
<html>
<head>
    <title>Wombat IDE - C211 tree and image libraries – jverkamp.com</title>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8"><link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="//blog.jverkamp.com/feed/">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css" integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" />

<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel="stylesheet">

<link rel="stylesheet" href="/custom.css" defer />

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <div id="wrapper"><header id="page-header" role="banner">
    <h1><a href="/">JP's Blog</a></h1>

    <ul id="page-header-links">
        <li>
            <a href="https://twitter.com/jpverkamp">Twitter</a> *
            <a href="https://github.com/jpverkamp">GitHub</a> *
            <a href="https://www.flickr.com/photos/jpverkamp">Flickr</a>
        </li>
        <li>
            <form action="//www.google.com/search" method="get" onsubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search" _lpchecked="1">
                <div class="form-group">
                    <input name="q" type="hidden">
                    <input name="qfront" type="text" class="form-control" placeholder="Search">
                    <button type="submit" class="btn btn-default" value="Search">Search</button>
                </div>
            </form>
        </li>

    </ul>

    <nav id="header-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation"><li><a href="https://blog.jverkamp.com/reviews/">Reviews</a></li><li><a href="https://blog.jverkamp.com/programming/">Programming</a></li><li><a href="https://blog.jverkamp.com/photography/">Photography</a></li><li><a href="https://blog.jverkamp.com/writing/">Writing</a></li><li><a href="https://blog.jverkamp.com/research/">Research</a></li><li class="subscription" data-subscription="rss"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </nav>
</header>
<div id="page-content-wrapper">
            <div id="page-content"><article>
	<header>
		<h1 class="entry-title">Wombat IDE - C211 tree and image libraries</h1>

        <div class="entry-meta"><span class="entry-date">2011-08-27</span>
            </div><div class="entry-tags"><ul class="taxonomy-keys"><li>
            <a class="taxonomy-key" href="/programming/languages/">Languages</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2011/08/26/wombat-ide-enter-the-bug-tracker/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/java">Java</a><a href="https://blog.jverkamp.com/2011/08/29/wombat-ide-formatting-issues/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2011/08/26/wombat-ide-enter-the-bug-tracker/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/scheme">Scheme</a><a href="https://blog.jverkamp.com/2011/08/29/wombat-ide-formatting-issues/" class="next-link"></a></li></ul>
        </li><li>
            <a class="taxonomy-key" href="/series/">Series</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2011/08/26/wombat-ide-enter-the-bug-tracker/" class="previous-link"></a><a class="taxonomy-value" href="/series/wombat-ide">Wombat IDE</a><a href="https://blog.jverkamp.com/2011/08/29/wombat-ide-formatting-issues/" class="next-link"></a></li></ul>
        </li><li><a class="taxonomy-key" href="/programming">programming</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2011/08/26/wombat-ide-enter-the-bug-tracker/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2011/08/29/wombat-ide-formatting-issues/" class="next-link">Next</a></ul>
        </li><li><a class="taxonomy-key" href="/">All Posts</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2011/08/26/wombat-ide-enter-the-bug-tracker/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2011/08/29/wombat-ide-formatting-issues/" class="next-link">Next</a></ul>
        </li></ul>
</div>
</header>

	<div class="entry-content"><p>To start off, I have a small list of bug fixes / minor improvements before I get to the real meat of what I&rsquo;ve got for the day:</p>

<ul>
<li>Added ability to change font size</li>
<li>Added a program icon (which doesn&rsquo;t seem to work on OSX, I should look into this)</li>
<li>Added an IconManager to deal with all of the menu icons</li>
<li>Added option to reset the Scheme environment if it gets broken for whatever reason</li>
<li>Changed prompt from &gt;&gt;&gt; to §, mostly because I just like the character (also a single character saves space)</li>
<li>Fixed display, redirecting it to the REPL. Unfortunately <code>trace</code> still doesn&rsquo;t work</li>
<li>Bound true to <code>#t</code> and false to <code>#f</code> to make input and output match</li>
<li>Fix for a problem that would prevent Wombat from closing on OS X</li>
</ul>

<p>Now, a bigger change was actually getting the C211 libraries working in Wombat. Previously, they had been written in pure Scheme code, designed to run on [Chez Scheme][chez]. Unfortunately, some of that code, such as the code to load and save images was somewhat slower than I would like so I decided to rewrite the libraries in Java. That way, I could take advantage of all of the image types that Java can read/write without having to write adaptors for each myself. See below for the APIs for the image and tree libraries.</p>

<p>Overall, this has been a pretty major bump in version, we&rsquo;re up to r154 now. Download it <a title="Wombat Download Page" href="http://www.cs.indiana.edu/cgi-pub/c211/wombat/">here</a>.</p>

<h2 id="image-library">Image library</h2>

<p>The C211 image library matches the old API while at the same time adding a few new features. Here&rsquo;s the API (Edit: The newest API can be found <a title="C211 Image API" href="http://www.cs.indiana.edu/cgi-pub/c211/wombat/docs/c211-image.htm">here</a>):</p>

<ul>
<li><code>(color r g b)</code> - creates a color with the given <code>r</code>, <code>g</code>, and <code>b</code> channels</li>
<li><code>(color? c)</code> - tests if <code>c</code> is a color</li>
<li><code>(color-equal? c1 c2)</code> - checks if two colors are the same</li>
<li><code>(color-ref c b)</code> - extracts the band <code>b</code> (one of the symbols <code>red</code>, <code>green</code>, or <code>blue</code>) from the color <code>c</code>``</li>
<li><code>(image? i)</code> - tests if <code>i</code> is an image</li>
<li><code>(image-equal? i1 i1)</code> - tests if two images are equal (the same size and all pixels are <code>color-equal?</code></li>
<li><code>(image-rows i)</code> - extract the number of rows in an image</li>
<li><code>(image-cols i)</code> - extract the number of columns in an image</li>
<li><code>(image-set! i r c c)</code> - sets the pixel at (<code>r</code>, <code>c</code>) in the image <code>i</code> to the color <code>v</code></li>
<li><code>(read-image [filename])</code> - reads an image; if <code>filename</code> is not specified, prompt the user</li>
<li><code>(write-image i [filename])</code> - writes an image <code>i</code> to a file; if <code>filename</code> is not specified, prompt the user</li>
<li><code>(draw-image i)</code> - display the given image <code>i</code> on the screen</li>
<li><code>(image-map i p)</code> - map a function <code>p</code> of the form <code>color -&gt; color</code> over the image</li>
<li><code>(make-image rs cs g)</code> - create a new image with <code>rs</code> rows and <code>cs</code> columns; if <code>g</code> is a color, use that; if <code>g</code> is a function of the form <code>r, c, rs, cs -&gt; color</code> apply it at each possible row and column value``</li>
</ul>

<p>In addition, the following colors have also been defined as constants: <code>black</code>, <code>darkgray</code>, <code>gray</code>, <code>lightgray</code>, <code>white</code>, <code>red</code>, <code>green</code>, <code>blue</code>, <code>yellow</code>, <code>cyan</code>, <code>magenta</code>, <code>orange</code>, and <code>pink</code>.</p>

<p>Mainly, the only new features that the API exposes are making the filenames to <code>read-image</code> and <code>write-image</code> optional, allowing the user to choose an image with a standard file dialog.</p>

<p>As an example of what the image library is capable of, consider this code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(draw-image
  (make-image <span style="color:#ae81ff">500</span> <span style="color:#ae81ff">500</span>
    (<span style="color:#66d9ef">lambda </span>(rs cs r c)
      (color
        (div (* r <span style="color:#ae81ff">255</span>) rs)
        (div (* c <span style="color:#ae81ff">255</span>) cs)
        <span style="color:#ae81ff">0</span>))))</code></pre></div>
<p>Save this code as <code>make-gradient.ss</code> and hit F5 to run it. Here&rsquo;s what you get:</p>

<figure>
    <img src="/embeds/2011/make-image.png"/> 
</figure>


<p>There are much more powerful things you can do with this that I&rsquo;ll probably post at some point, but for now I think you get the idea.</p>

<h2 id="tree-library">Tree library</h2>

<p>Edit: The newest C211 Tree Library API can be found <a title="C211 Tree API" href="http://www.cs.indiana.edu/cgi-pub/c211/wombat/docs/c211-tree.htm">here</a>.</p>

<ul>
<li><code>(tree v l r)</code> - creates a new tree with the given root value <code>v</code>, left subtree <code>l</code>, and right subtree <code>r</code></li>
<li><code>(tree? tr)</code> - checks if an object is a tree</li>
<li><code>(leaf v)</code> - creates a leaf; an alias of <code>(tree v (empty-tree) (empty-tree))</code></li>
<li><code>(leaf? tr)</code> - checks if a tree is a leaf</li>
<li><code>(empty-tree)</code> - creates an empty tree</li>
<li><code>(empty-tree? tr)</code> - checks if a tree is empty</li>
<li><code>(left-subtree tr)</code> - returns the left subtree of a given tree</li>
<li><code>(right-subtree tr)</code> - returns the right subtree of a given tree</li>
<li><code>(root-value tr)</code> - returns the value stored at the root value of the given tree</li>
<li><code>(draw-tree tr)</code> - draws a tree to the screen</li>
</ul>

<p>Here&rsquo;s an example of <code>draw-tree</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(draw-tree
  (tree <span style="color:#ae81ff">8</span>
  (tree <span style="color:#ae81ff">6</span>
    (leaf <span style="color:#ae81ff">7</span>)
    (empty-tree))
  (tree <span style="color:#ae81ff">5</span>
    (tree <span style="color:#ae81ff">3</span>
      (leaf <span style="color:#ae81ff">0</span>)
      (leaf <span style="color:#ae81ff">9</span>))
    (empty-tree))))</code></pre></div>
<figure>
    <img src="/embeds/2011/draw-tree.png"/> 
</figure>


<p>One feature that I think turned out particularly well is how the tree will automatically scale with its window. This way you can shrink or grow the tree when you need to show certain properties or compare multiple trees:</p>

<figure>
    <img src="/embeds/2011/draw-tree-scaled.png"/> 
</figure>


<p>The only change between the previous tree API in <a title="Scheme Widget Library" href="http://www.scheme.com/chezscheme.html">SWL</a> and the new version is that the left and right subtrees of a tree must actually be trees. Previously, they could be any value, but do to a design consideration in the Java back-end of the trees, the underlying data structure was restricted. This will actually theoretically make it harder to write incorrect tree code as you can no longer mix tree and non-tree code. We&rsquo;ll see this semester if this is actually the case.</p></div>
<div class="entry-comments">
    <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = "jverkamp";
            var disqus_title = "Wombat IDE - C211 tree and image libraries";
            var disqus_url = "https:\/\/blog.jverkamp.com\/2011\/08\/27\/wombat-ide-c211-tree-and-image-libraries\/";

             
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div></article></div>
        </div><footer id="page-footer" role="contentinfo">
    <nav id="footer-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
            <li><a href="/archive-by-date/">All posts: By Date</a></li>
            <li><a href="/archive-by-tag/">All posts: By Tag</a></li>

            <li>
                <a href="/atom.xml">
                    RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li><li>
                <a href="/programming/atom.xml">
                    RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li></ul>
    </nav>

    <div id="page-footer-content">
        <div class="legal">
            <p>
                All posts unless otherwise mentioned are licensed under
                <a rel="license" href="//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
                    <img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png">
                </a>
            </p>

            <p>
                Any source code unless otherwise mentioned is licensed under the <a href="//directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
            </p>
        </div>
    </div>
</footer>
</div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js" integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js" integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin="anonymous"></script>

<script type="text/javascript" src="/custom.js" defer></script>
</body>
</html>
