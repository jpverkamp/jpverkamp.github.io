<!doctype html><html><head><title>Gorellian sorting – jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_17422284542669262002.min.834c1e2313951f0c25b90152fe8b62250eab4a2e8cbd2560fa1a1cdc91c71733.js integrity="sha256-g0weIxOVHwwluQFS/otiJQ6rSi6MvSVg+hoc3JHHFzM=" defer></script><script src=/jquery.fancybox_16245765822111608191.min.ef050764ff69f3287c89ff655825479dd8304dcd9bc653d1ddd4772a701ad445.js integrity="sha256-7wUHZP9p8yh8if9lWCVHndgwTc2bxlPR3dR3KnAa1EU=" defer></script><script src=/katex_17296078054267651618.min.deed0e78a77391517d530a00324ce7b760ac204134992ef22d36f583615ae498.js integrity="sha256-3u0OeKdzkVF9UwoAMkznt2CsIEE0mS7yLTb1g2Fa5Jg=" defer></script><script src=/auto-render_14944144240389301023.min.e694d9d5eae2917984179683ead27b998784a81398e8836c369373d2c67fc32a.js integrity="sha256-5pTZ1erikXmEF5aD6tJ7mYeEqBOY6INsNpNz0sZ/wyo=" defer></script><script src=/bigfoot_28293813221957978.min.af671f08986f0a2267c5a0cb2748b005489e47fa25f55479b200e2a563d23022.js integrity="sha256-r2cfCJhvCiJnxaDLJ0iwBUieR/ol9VR5sgDipWPSMCI=" defer></script><script src=/mermaid_9520146763733687737.min.bfe50b47c0387e3c3bf97ec5f338bba94f7ccb02f962a4aec8cf0b4d68c8434d.js integrity="sha256-v+ULR8A4fjw7+X7F8zi7qU98ywL5YqSuyM8LTWjIQ00=" defer></script><script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script><link rel=stylesheet href=/katex_13658330645258633971.min.64e42891d651aee0b8cd02ec9227ff271d37bcf06dae985d1acf0eba1623e850.css integrity="sha256-ZOQokdZRruC4zQLskif/Jx03vPBtrphdGs8OuhYj6FA="><link rel=stylesheet href=/bigfoot-default_8781527669040159104.min.0d2b289fa3451447692959fcee5676b846532fe7ab50ddc4660824c42d4adcd7.css integrity="sha256-DSson6NFFEdpKVn87lZ2uEZTL+erUN3EZggkxC1K3Nc="><link rel=stylesheet href=/jquery.fancybox_5330465509389191777.min.67505d77381ebd82623ab9296c1989c44ec828d867c00296e80e52ef860cac37.css integrity="sha256-Z1BddzgevYJiOrkpbBmJxE7IKNhnwAKW6A5S74YMrDc="><link rel=stylesheet href=/css_1846377409604050217.min.fffe842bc000dd1fe8661ac6427a392a08faa95e8edab1ea7fb98c5f8dac6a6f.css integrity="sha256-//6EK8AA3R/oZhrGQno5Kgj6qV6O2rHqf7mMX42sam8="><link rel=stylesheet href=/main.min.b60cba31b8c292392a2d336408f8f344e261df78516eb17bcf029173b24a42b5.css integrity="sha256-tgy6MbjCkjkqLTNkCPjzROJh33hRbrF7zwKRc7JKQrU="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/home-automation/>Home Automation</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>Gorellian sorting</h1><div class=entry-meta><span class=entry-date>2014-04-01</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2014/02/07/command-line-user-agent-parsing/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/python>Python</a><a href=https://blog.jverkamp.com/2014/07/31/regex-search-and-replace/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2014/03/12/caesar-cipher/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/racket>Racket</a><a href=https://blog.jverkamp.com/2014/05/02/trigonometric-triangle-trouble/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2014/03/12/caesar-cipher/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/scheme>Scheme</a><a href=https://blog.jverkamp.com/2014/05/02/trigonometric-triangle-trouble/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2014/03/12/caesar-cipher/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2014/05/02/trigonometric-triangle-trouble/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2014/03/29/divergent/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/photography/2014/2014-04-19-yosemite/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>It&rsquo;s been a while, so I figured I should get in a quick coding post. From /r/dailyprogrammer, we have <a href=http://www.reddit.com/r/dailyprogrammer/comments/20sjif/4192014_challenge_154_intermediate_gorellian/>this challenge</a>:</p><blockquote><p>The Gorellians, at the far end of our galaxy, have discovered various samples of English text from our electronic transmissions, but they did not find the order of our alphabet. Being a very organized and orderly species, they want to have a way of ordering words, even in the strange symbols of English. Hence they must determine their own order.</p></blockquote><blockquote><p>For instance, if they agree on the alphabetical order:
UVWXYZNOPQRSTHIJKLMABCDEFG</p></blockquote><blockquote><p>Then the following words would be in sorted order based on the above alphabet order:
WHATEVER
ZONE
HOW
HOWEVER
HILL
ANY
ANTLER
COW</p></blockquote><p>To a large extent, this problem is made all the easier by the choice of host language. If I were writing in something like Python, it&rsquo;s easy enough to sort a list:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>words <span style=color:#f92672>=</span> sorted([<span style=color:#e6db74>&#39;ANTLER&#39;</span>, <span style=color:#e6db74>&#39;ANY&#39;</span>, <span style=color:#e6db74>&#39;COW&#39;</span>, <span style=color:#e6db74>&#39;HILL&#39;</span>, <span style=color:#e6db74>&#39;HOW&#39;</span>, <span style=color:#e6db74>&#39;HOWEVER&#39;</span>, <span style=color:#e6db74>&#39;WHATEVER&#39;</span>, <span style=color:#e6db74>&#39;ZONE&#39;</span>])
</span></span></code></pre></div><p>But it&rsquo;s a little more complicated to sort in a non-standard order. Essentially&ndash;you can&rsquo;t. Instead, you have to specify a <code>key</code> function in order to convert each value from what you have to something you can sort. Something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>make_gorellian</span>(alphabet):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>to_offset_list</span>(string):
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> [alphabet<span style=color:#f92672>.</span>index(c) <span style=color:#66d9ef>for</span> c <span style=color:#f92672>in</span> string]
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> to_offset_list
</span></span></code></pre></div><p>Perhaps I&rsquo;ve been writing too much Scheme recently. &#x1f604; Still, I hope it&rsquo;s clear enough. We have a function <code>make_gorellian</code> which constructs and returns a second function <code>to_offset_list</code>. This inner function takes any string and converts into a list of numbers&ndash;something Python knows how to sort.</p><p>For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> print list(sorted(
</span></span><span style=display:flex><span>	[<span style=color:#e6db74>&#39;ANTLER&#39;</span>, <span style=color:#e6db74>&#39;ANY&#39;</span>, <span style=color:#e6db74>&#39;COW&#39;</span>, <span style=color:#e6db74>&#39;HILL&#39;</span>, <span style=color:#e6db74>&#39;HOW&#39;</span>, <span style=color:#e6db74>&#39;HOWEVER&#39;</span>, <span style=color:#e6db74>&#39;WHATEVER&#39;</span>, <span style=color:#e6db74>&#39;ZONE&#39;</span>],
</span></span><span style=display:flex><span>	key <span style=color:#f92672>=</span> make_gorellian(<span style=color:#e6db74>&#39;UVWXYZNOPQRSTHIJKLMABCDEFG&#39;</span>)
</span></span><span style=display:flex><span>))
</span></span><span style=display:flex><span>[<span style=color:#e6db74>&#39;WHATEVER&#39;</span>, <span style=color:#e6db74>&#39;ZONE&#39;</span>, <span style=color:#e6db74>&#39;HOW&#39;</span>, <span style=color:#e6db74>&#39;HOWEVER&#39;</span>, <span style=color:#e6db74>&#39;HILL&#39;</span>, <span style=color:#e6db74>&#39;ANY&#39;</span>, <span style=color:#e6db74>&#39;ANTLER&#39;</span>, <span style=color:#e6db74>&#39;COW&#39;</span>]
</span></span></code></pre></div><p>There you go. Straight forward enough, although it seems odd that we have to go through an intermediary form.</p><p>So what was that I said about more natural mappings? Well, in Scheme/Racket, <code>sort</code> takes two arguments: a list to sort and a &rsquo;less than&rsquo; function. If you wanted to sort strings, you could call something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>(<span style=color:#a6e22e>sort</span> ls string&lt;?)
</span></span></code></pre></div><p>So all we need is <code>gorellian&amp;lt;?</code>. Well, how does <code>string&amp;lt;?</code> normally work? By repeatedly calling <code>char&amp;lt;?</code>. So we need a <code>gorellian-char&amp;lt;?</code>. Something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; Sort characters by a non-standard alphabet</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>make-gorellian-char&lt;?</span> alphabet)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>λ</span> (<span style=color:#a6e22e>c1</span> c2)
</span></span><span style=display:flex><span>    <span style=color:#75715e>; If we match either, we have an answer</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>; If we never match, they&#39;re = (and thus not &lt;)</span>
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>for/first</span> ([c (<span style=color:#a6e22e>in-string</span> alphabet)]
</span></span><span style=display:flex><span>                <span style=color:#f92672>#</span>:when (<span style=color:#66d9ef>or </span>(eq? c c1) (eq? c c2)))
</span></span><span style=display:flex><span>      <span style=color:#75715e>; If we matched c1 first, the c1 is smaller</span>
</span></span><span style=display:flex><span>      (eq? c c1))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; Sort strings by a non-standard alphabet</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>make-gorellian-string&lt;?</span> alphabet)
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>define </span>char&lt;? (<span style=color:#a6e22e>make-gorellian-char&lt;?</span> alphabet))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>λ</span> (<span style=color:#a6e22e>str1</span> str2)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>for/first</span> ([c1 (<span style=color:#a6e22e>in-string</span> str1)]
</span></span><span style=display:flex><span>                [c2 (<span style=color:#a6e22e>in-string</span> str2)]
</span></span><span style=display:flex><span>                <span style=color:#f92672>#</span>:unless (eq? c1 c2))
</span></span><span style=display:flex><span>      (char&lt;? c1 c2))))
</span></span></code></pre></div><p>It&rsquo;s interesting how similar the two functions are. In the first, we loop through the alphabet until we find either character. If we find the first first, it&rsquo;s &rsquo;less than&rsquo;. If we find the second first or find neither, then <code>c1</code> is not less than <code>c2</code>. So return <code>#f</code>.</p><p>For the <code>string&amp;lt;?</code>, it&rsquo;s more of the same. Loop through the strings until we find a mismatch, at which point we can use the <code>char&amp;lt;?</code> function.</p><p>And that&rsquo;s all we have for it. A few test cases:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>(<span style=color:#a6e22e>module+</span> test
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>require</span> rackunit)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>; Run test cases in the format specified here:</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>; http://www.reddit.com/r/dailyprogrammer/comments/20sjif/4192014_challenge_154_intermediate_gorellian/</span>
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>test</span> [in (<span style=color:#a6e22e>current-input-port</span>)])
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>define </span>sample-count (read in))
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>define </span>alphabet (symbol-&gt;string (read in)))
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>define </span>string&lt;? (<span style=color:#a6e22e>make-gorellian-string&lt;?</span> alphabet))
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>define </span>words
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>for/list</span> ([i (<span style=color:#a6e22e>in-range</span> sample-count)])
</span></span><span style=display:flex><span>        (symbol-&gt;string (read in))))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>sort</span> words string&lt;?))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>check-equal?</span> 
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>call-with-input-string</span> 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>8 UVWXYZNOPQRSTHIJKLMABCDEFG
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ANTLER
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ANY
</span></span></span><span style=display:flex><span><span style=color:#e6db74>COW
</span></span></span><span style=display:flex><span><span style=color:#e6db74>HILL
</span></span></span><span style=display:flex><span><span style=color:#e6db74>HOW
</span></span></span><span style=display:flex><span><span style=color:#e6db74>HOWEVER
</span></span></span><span style=display:flex><span><span style=color:#e6db74>WHATEVER
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ZONE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>   test)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;WHATEVER&#34;</span> <span style=color:#e6db74>&#34;ZONE&#34;</span> <span style=color:#e6db74>&#34;HOW&#34;</span> <span style=color:#e6db74>&#34;HOWEVER&#34;</span> <span style=color:#e6db74>&#34;HILL&#34;</span> <span style=color:#e6db74>&#34;ANY&#34;</span> <span style=color:#e6db74>&#34;ANTLER&#34;</span> <span style=color:#e6db74>&#34;COW&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>check-equal?</span>
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>call-with-input-string</span> 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>5 zZyYxXwWvVuUtTsSrRqQpPoOnNmMlLkKjJiIhHgGfFeEdDcCbBaA
</span></span></span><span style=display:flex><span><span style=color:#e6db74>go
</span></span></span><span style=display:flex><span><span style=color:#e6db74>aLL
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ACM
</span></span></span><span style=display:flex><span><span style=color:#e6db74>teamS
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Go
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    test)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;teamS&#34;</span> <span style=color:#e6db74>&#34;go&#34;</span> <span style=color:#e6db74>&#34;Go&#34;</span> <span style=color:#e6db74>&#34;aLL&#34;</span> <span style=color:#e6db74>&#34;ACM&#34;</span>)))
</span></span></code></pre></div><p>And that&rsquo;s all she wrote.</p><p>(For the keen of eye, I am changing the definition slightly. Rather than an error on missing letters, I treat all non-Gorellian letters as equal. Still, it would be easy enough to add.</p><p>Code:</p><ul><li><a href=https://github.com/jpverkamp/small-projects/blob/master/blog/gorellian-sort.py>python</a></li><li><a href=https://github.com/jpverkamp/small-projects/blob/master/blog/gorellian-sort.rkt>racket</a></li></ul><p><small>Nope. Nothing for April Fools&rsquo;. Maybe you should go &lt;a href=http://googleasiapacific.blogspot.com/2014/03/become-pokemon-master-with-google-maps.html">catch some Pokemon</a>.</small></p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>