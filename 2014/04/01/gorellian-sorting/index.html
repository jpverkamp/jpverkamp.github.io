<!DOCTYPE html>
<html>
<head>
    <title>Gorellian sorting â€“ jverkamp.com</title>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8"><link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="//blog.jverkamp.com/feed/">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css" integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" />

<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel="stylesheet">

<link rel="stylesheet" href="/custom.css" defer />

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <div id="wrapper"><header id="page-header" role="banner">
    <h1><a href="/">JP's Blog</a></h1>

    <ul id="page-header-links">
        <li>
            <a href="https://twitter.com/jpverkamp">Twitter</a> *
            <a href="https://github.com/jpverkamp">GitHub</a> *
            <a href="https://www.flickr.com/photos/jpverkamp">Flickr</a>
        </li>
        <li>
            <form action="//www.google.com/search" method="get" onsubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search" _lpchecked="1">
                <div class="form-group">
                    <input name="q" type="hidden">
                    <input name="qfront" type="text" class="form-control" placeholder="Search">
                    <button type="submit" class="btn btn-default" value="Search">Search</button>
                </div>
            </form>
        </li>

    </ul>

    <nav id="header-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation"><li><a href="https://blog.jverkamp.com/programming/">Programming</a></li><li><a href="https://blog.jverkamp.com/reviews/">Reviews</a></li><li><a href="https://blog.jverkamp.com/photography/">Photography</a></li><li><a href="https://blog.jverkamp.com/writing/">Writing</a></li><li><a href="https://blog.jverkamp.com/research/">Research</a></li><li><a href="/resume" title="My Resume">Resume</a></li>
            <li class="subscription" data-subscription="rss"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </nav>
</header>
<div id="page-content-wrapper">
            <div id="page-content"><article>
	<header>
		<h1 class="entry-title">Gorellian sorting</h1>

        <div class="entry-meta"><span class="entry-date">2014-04-01</span>
            </div><div class="entry-tags"><ul class="taxonomy-keys"><li>
            <a class="taxonomy-key" href="/programming/languages/">Languages</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2014/02/07/command-line-user-agent-parsing/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/python">Python</a><a href="https://blog.jverkamp.com/2014/07/31/regex-search-and-replace/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2014/03/12/caesar-cipher/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/racket">Racket</a><a href="https://blog.jverkamp.com/2014/05/02/trigonometric-triangle-trouble/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2014/03/12/caesar-cipher/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/scheme">Scheme</a><a href="https://blog.jverkamp.com/2014/05/02/trigonometric-triangle-trouble/" class="next-link"></a></li></ul>
        </li><li><a class="taxonomy-key" href="/programming">programming</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2014/03/12/caesar-cipher/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2014/05/02/trigonometric-triangle-trouble/" class="next-link">Next</a></ul>
        </li><li><a class="taxonomy-key" href="/">All Posts</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2014/03/29/divergent/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2014/04/05/captain-america-the-winter-soldier/" class="next-link">Next</a></ul>
        </li></ul>
</div>
</header>

	<div class="entry-content"><p>It&rsquo;s been a while, so I figured I should get in a quick coding post. From /r/dailyprogrammer, we have <a href="http://www.reddit.com/r/dailyprogrammer/comments/20sjif/4192014_challenge_154_intermediate_gorellian/">this challenge</a>:</p>

<blockquote>
<p>The Gorellians, at the far end of our galaxy, have discovered various samples of English text from our electronic transmissions, but they did not find the order of our alphabet. Being a very organized and orderly species, they want to have a way of ordering words, even in the strange symbols of English. Hence they must determine their own order.</p>

<p>For instance, if they agree on the alphabetical order:
UVWXYZNOPQRSTHIJKLMABCDEFG</p>

<p>Then the following words would be in sorted order based on the above alphabet order:
WHATEVER
ZONE
HOW
HOWEVER
HILL
ANY
ANTLER
COW</p>
</blockquote>

<p>To a large extent, this problem is made all the easier by the choice of host language. If I were writing in something like Python, it&rsquo;s easy enough to sort a list:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">words <span style="color:#f92672">=</span> sorted([<span style="color:#e6db74">&#39;ANTLER&#39;</span>, <span style="color:#e6db74">&#39;ANY&#39;</span>, <span style="color:#e6db74">&#39;COW&#39;</span>, <span style="color:#e6db74">&#39;HILL&#39;</span>, <span style="color:#e6db74">&#39;HOW&#39;</span>, <span style="color:#e6db74">&#39;HOWEVER&#39;</span>, <span style="color:#e6db74">&#39;WHATEVER&#39;</span>, <span style="color:#e6db74">&#39;ZONE&#39;</span>])</code></pre></div>
<p>But it&rsquo;s a little more complicated to sort in a non-standard order. Essentially&ndash;you can&rsquo;t. Instead, you have to specify a <code>key</code> function in order to convert each value from what you have to something you can sort. Something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">make_gorellian</span>(alphabet):
	<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">to_offset_list</span>(string):
		<span style="color:#66d9ef">return</span> [alphabet<span style="color:#f92672">.</span>index(c) <span style="color:#66d9ef">for</span> c <span style="color:#f92672">in</span> string]
	<span style="color:#66d9ef">return</span> to_offset_list</code></pre></div>
<p>Perhaps I&rsquo;ve been writing too much Scheme recently. ðŸ˜„ Still, I hope it&rsquo;s clear enough. We have a function <code>make_gorellian</code> which constructs and returns a second function <code>to_offset_list</code>. This inner function takes any string and converts into a list of numbers&ndash;something Python knows how to sort.</p>

<p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#66d9ef">print</span> list(sorted(
	[<span style="color:#e6db74">&#39;ANTLER&#39;</span>, <span style="color:#e6db74">&#39;ANY&#39;</span>, <span style="color:#e6db74">&#39;COW&#39;</span>, <span style="color:#e6db74">&#39;HILL&#39;</span>, <span style="color:#e6db74">&#39;HOW&#39;</span>, <span style="color:#e6db74">&#39;HOWEVER&#39;</span>, <span style="color:#e6db74">&#39;WHATEVER&#39;</span>, <span style="color:#e6db74">&#39;ZONE&#39;</span>],
	key <span style="color:#f92672">=</span> make_gorellian(<span style="color:#e6db74">&#39;UVWXYZNOPQRSTHIJKLMABCDEFG&#39;</span>)
))
[<span style="color:#e6db74">&#39;WHATEVER&#39;</span>, <span style="color:#e6db74">&#39;ZONE&#39;</span>, <span style="color:#e6db74">&#39;HOW&#39;</span>, <span style="color:#e6db74">&#39;HOWEVER&#39;</span>, <span style="color:#e6db74">&#39;HILL&#39;</span>, <span style="color:#e6db74">&#39;ANY&#39;</span>, <span style="color:#e6db74">&#39;ANTLER&#39;</span>, <span style="color:#e6db74">&#39;COW&#39;</span>]</code></pre></div>
<p>There you go. Straight forward enough, although it seems odd that we have to go through an intermediary form.</p>

<p>So what was that I said about more natural mappings? Well, in Scheme/Racket, <code>sort</code> takes two arguments: a list to sort and a &lsquo;less than&rsquo; function. If you wanted to sort strings, you could call something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(sort ls string&lt;?)</code></pre></div>
<p>So all we need is <code>gorellian&amp;lt;?</code>. Well, how does <code>string&amp;lt;?</code> normally work? By repeatedly calling <code>char&amp;lt;?</code>. So we need a <code>gorellian-char&amp;lt;?</code>. Something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#75715e">; Sort characters by a non-standard alphabet</span>
(<span style="color:#66d9ef">define </span>(make-gorellian-char&lt;? alphabet)
  (Î» (c1 c2)
    <span style="color:#75715e">; If we match either, we have an answer</span>
    <span style="color:#75715e">; If we never match, they&#39;re = (and thus not &lt;)</span>
    (for/first ([c (in-string alphabet)]
                <span style="color:#f92672">#</span>:when (<span style="color:#66d9ef">or </span>(eq? c c1) (eq? c c2)))
      <span style="color:#75715e">; If we matched c1 first, the c1 is smaller</span>
      (eq? c c1))))

<span style="color:#75715e">; Sort strings by a non-standard alphabet</span>
(<span style="color:#66d9ef">define </span>(make-gorellian-string&lt;? alphabet)
  (<span style="color:#66d9ef">define </span>char&lt;? (make-gorellian-char&lt;? alphabet))
  (Î» (str1 str2)
    (for/first ([c1 (in-string str1)]
                [c2 (in-string str2)]
                <span style="color:#f92672">#</span>:unless (eq? c1 c2))
      (char&lt;? c1 c2))))</code></pre></div>
<p>It&rsquo;s interesting how similar the two functions are. In the first, we loop through the alphabet until we find either character. If we find the first first, it&rsquo;s &lsquo;less than&rsquo;. If we find the second first or find neither, then <code>c1</code> is not less than <code>c2</code>. So return <code>#f</code>.</p>

<p>For the <code>string&amp;lt;?</code>, it&rsquo;s more of the same. Loop through the strings until we find a mismatch, at which point we can use the <code>char&amp;lt;?</code> function.</p>

<p>And that&rsquo;s all we have for it. A few test cases:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(module+ test
  (require rackunit)

  <span style="color:#75715e">; Run test cases in the format specified here:</span>
  <span style="color:#75715e">; http://www.reddit.com/r/dailyprogrammer/comments/20sjif/4192014_challenge_154_intermediate_gorellian/</span>
  (<span style="color:#66d9ef">define </span>(test [in (current-input-port)])
    (<span style="color:#66d9ef">define </span>sample-count (read in))
    (<span style="color:#66d9ef">define </span>alphabet (symbol-&gt;string (read in)))
    (<span style="color:#66d9ef">define </span>string&lt;? (make-gorellian-string&lt;? alphabet))
    (<span style="color:#66d9ef">define </span>words
      (for/list ([i (in-range sample-count)])
        (symbol-&gt;string (read in))))
    (sort words string&lt;?))

  (check-equal? 
   (call-with-input-string 
    <span style="color:#e6db74">&#34;
</span><span style="color:#e6db74">8 UVWXYZNOPQRSTHIJKLMABCDEFG
</span><span style="color:#e6db74">ANTLER
</span><span style="color:#e6db74">ANY
</span><span style="color:#e6db74">COW
</span><span style="color:#e6db74">HILL
</span><span style="color:#e6db74">HOW
</span><span style="color:#e6db74">HOWEVER
</span><span style="color:#e6db74">WHATEVER
</span><span style="color:#e6db74">ZONE
</span><span style="color:#e6db74">&#34;</span>
   test)
   <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;WHATEVER&#34;</span> <span style="color:#e6db74">&#34;ZONE&#34;</span> <span style="color:#e6db74">&#34;HOW&#34;</span> <span style="color:#e6db74">&#34;HOWEVER&#34;</span> <span style="color:#e6db74">&#34;HILL&#34;</span> <span style="color:#e6db74">&#34;ANY&#34;</span> <span style="color:#e6db74">&#34;ANTLER&#34;</span> <span style="color:#e6db74">&#34;COW&#34;</span>))

  (check-equal?
   (call-with-input-string 
    <span style="color:#e6db74">&#34;
</span><span style="color:#e6db74">5 zZyYxXwWvVuUtTsSrRqQpPoOnNmMlLkKjJiIhHgGfFeEdDcCbBaA
</span><span style="color:#e6db74">go
</span><span style="color:#e6db74">aLL
</span><span style="color:#e6db74">ACM
</span><span style="color:#e6db74">teamS
</span><span style="color:#e6db74">Go
</span><span style="color:#e6db74">&#34;</span>
    test)
   <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;teamS&#34;</span> <span style="color:#e6db74">&#34;go&#34;</span> <span style="color:#e6db74">&#34;Go&#34;</span> <span style="color:#e6db74">&#34;aLL&#34;</span> <span style="color:#e6db74">&#34;ACM&#34;</span>)))</code></pre></div>
<p>And that&rsquo;s all she wrote.</p>

<p>(For the keen of eye, I am changing the definition slightly. Rather than an error on missing letters, I treat all non-Gorellian letters as equal. Still, it would be easy enough to add.</p>

<p>Code:
- <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/gorellian-sort.py">python</a>
- <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/gorellian-sort.rkt">racket</a></p>

<p><small>Nope. Nothing for April Fools&rsquo;. Maybe you should go <a href=http://googleasiapacific.blogspot.com/2014/03/become-pokemon-master-with-google-maps.html">catch some Pokemon</a>.</small></p></div>
<div class="entry-comments">
    <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = "jverkamp";
            var disqus_title = "Gorellian sorting";
            var disqus_url = "https:\/\/blog.jverkamp.com\/2014\/04\/01\/gorellian-sorting\/";

             
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div></article></div>
        </div><footer id="page-footer" role="contentinfo">
    <nav id="footer-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
            <li><a href="/archive-by-date/">All posts: By Date</a></li>
            <li><a href="/archive-by-tag/">All posts: By Tag</a></li>

            <li>
                <a href="/atom.xml">
                    RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li><li>
                <a href="/programming/atom.xml">
                    RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li></ul>
    </nav>

    <div id="page-footer-content">
        <div class="legal">
            <p>
                All posts unless otherwise mentioned are licensed under
                <a rel="license" href="//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
                    <img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png">
                </a>
            </p>

            <p>
                Any source code unless otherwise mentioned is licensed under the <a href="//directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
            </p>
        </div>
    </div>
</footer>
</div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js" integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js" integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin="anonymous"></script>

<script type="text/javascript" src="/custom.js" defer></script>
</body>
</html>
