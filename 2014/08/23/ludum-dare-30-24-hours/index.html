<!doctype html><html><head><title>Ludum Dare 30: 24 hours â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_5823201688106629450.min.8c7d803d89ebdecf2416d468f4ecb981a3acf645154a7a336f2e5d0190ea8163.js integrity="sha256-jH2APYnr3s8kFtRo9Oy5gaOs9kUVSnozby5dAZDqgWM=" defer></script>
<script src=/jquery.fancybox_6181813213021922412.min.921ca906a32e718ab61ac0b4da24e0eaa6bdd41912654a33b44bd3fc2f0c2a4d.js integrity="sha256-khypBqMucYq2GsC02iTg6qa91BkSZUoztEvT/C8MKk0=" defer></script>
<script src=/katex_12008035502722260518.min.1c3dce03daaf56a7d2fe0d0ec49bf35256837226f835adaf52c09502ef9bc5d1.js integrity="sha256-HD3OA9qvVqfS/g0OxJvzUlaDcib4Na2vUsCVAu+bxdE=" defer></script>
<script src=/auto-render_2152414756166376840.min.45ae2f6b03d0c7b867df0a6cb7d43215ec78369998685a5748c5b12f502321f2.js integrity="sha256-Ra4vawPQx7hn3wpst9QyFex4NpmYaFpXSMWxL1AjIfI=" defer></script>
<script src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js integrity="sha256-XoC9heuuuVYHg01nd7/nAT0dFh8PAqMbhF5L12WJgxY=" defer></script>
<script src=/mermaid_12365941879912544862.min.973b5415b3fa1835d620c0e58236f859d5f80891f447e240cbbb9eb825251ff0.js integrity="sha256-lztUFbP6GDXWIMDlgjb4WdX4CJH0R+JAy7ueuCUlH/A=" defer></script>
<script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css integrity="sha256-4otdfZ2J76y19wisMMvXaxuaD4Ft/Z2pZjHR0Jy73XY="><link rel=stylesheet href=/css_4780214198035419921.min.246b6f8e7620eeb717bca5e7b121037906e5dfaa05805f427fcc5a09b6c99f5c.css integrity="sha256-JGtvjnYg7rcXvKXnsSEDeQbl36oFgF9Cf8xaCbbJn1w="><link rel=stylesheet href=/main.min.e0e68b86dea32185ab89b0b9cc01649107cc6b0be3290c8c7b13c716bc0dabfa.css integrity="sha256-4OaLht6jIYWribC5zAFkkQfMawvjKQyMexPHFrwNq/o="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>Ludum Dare 30: 24 hours</h1><div class=entry-meta><span class=entry-date>2014-08-23</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-hints-of-a-game/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/html>HTML</a><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-programmer-art-and-simple-ai/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-hints-of-a-game/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/javascript>JavaScript</a><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-programmer-art-and-simple-ai/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-hints-of-a-game/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/ludum-dare>Ludum Dare</a><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-programmer-art-and-simple-ai/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-hints-of-a-game/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/cellular-automata>Cellular Automata</a><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-programmer-art-and-simple-ai/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-hints-of-a-game/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/falling-sand>Falling Sand</a><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-programmer-art-and-simple-ai/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-hints-of-a-game/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/games>Games</a><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-programmer-art-and-simple-ai/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/series/>Series</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-hints-of-a-game/ class=previous-link></a><a class=taxonomy-value href=/series/ludum-dare-30>Ludum Dare 30</a><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-programmer-art-and-simple-ai/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-hints-of-a-game/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-programmer-art-and-simple-ai/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-hints-of-a-game/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2014/08/23/ludum-dare-30-programmer-art-and-simple-ai/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>Here we are, 24 hours into the competition.</p><p>A lot of the last few hours has been spent doing a fair amount of restructing. Before, I had a single &rsquo;thread&rsquo;<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> for each of the tiles, along with another thread listening for user input. Unfortunately though, that lead to all sorts of race conditions.
Specifically, whenever two tiles overlapped, it was often the case that one was doing the falling step (which copies from one internal buffer to another) while the other was in the swap step (which copies from tile to another). Then after the first finished, it would copy the second buffer over&mldr; overwriting anything that had been swapped.</p><p>Oops.</p><p>Well, it turns out that the solution wasn&rsquo;t that bad. Rather than having a bunch of threads running around, I&rsquo;ve just put the entire thing into lockstep. Now, we go through the entire sequence (sand falls, swaps happen, rendering happens, move tiles) once ever frame, in that order. It&rsquo;s a bit more expensive when it comes to performance, but really not that much, since technically JavaScript doesn&rsquo;t do more than one thing at a time anyways.</p><p>In exchange though, the game is playing great:</p><figure><img src=/embeds/2014/in-game-2.png></figure><p>Another thing that I did was to do some styling, converting the game from a big mess of an HTML page into a nice layered style that all fits within the 600x400 game area that I&rsquo;ve set aside (I doubt I&rsquo;ll make that changeable, although it shouldn&rsquo;t be hard). Specifically:</p><figure><img src=/embeds/2014/start-screen.png></figure><p>If you click options, these fade in (jQuery transitions are awesome for this):</p><figure><img src=/embeds/2014/options.png></figure><p>If you click play, all of the button and options fading out, taking you into the game:</p><figure><img src=/embeds/2014/in-game-1.png></figure><p>At the end of the game (the timer is in the bottom right, set to a static 1 minute at the moment), you get the new scoring screen. I think I worked about 2 hours on this, which sounds crazy, but I think the effect is pretty awesome:</p><figure><img src=/embeds/2014/scoring-in-progress.png></figure><p>You can&rsquo;t see it in the screenshot there, but it will go through each player one by one, scoring the region from bottom to top, counting up each kind of sand individually. That should make scoring modes much easier if/when I add more options. I can just do things like discount (or even count negative) your own sand, or only count it.</p><p>And finally, once it&rsquo;s done counting:</p><figure><img src=/embeds/2014/game-over.png></figure><p>I&rsquo;d like to have some sort of background motion going on both here and during the opening menu. Something like having the tiles bounce around using some sort of AI. Speaking of which, here is a tentative feature list that I&rsquo;d like to see in the next 24 hours (in no particular order):</p><ul><li>AI players; at the very least one that moves randomly, but optimally several different kinds</li><li>Pending the previous, a selector on the options screen that can turn each player either off, on, or to any of the current AIs</li><li>Pending the first, AI players playing in the background, periodically resetting before the game has started and between games</li><li>Music and/or sound effects; of course with options to turn those on and off</li><li>Some sort of high score menu, probably not live (although I certainly could)</li><li>Stylings around the page; probably some sort of thick border that bleeds a little in and out, looking different per player</li></ul><p>I think that&rsquo;s about it. If you have any ideas, I&rsquo;d love to hear them. There&rsquo;s not much (well, any) code this time, since nothing major has changed (other than refactoring). It&rsquo;s pretty much all tweaks. If you&rsquo;d like to see the entire source (warning: ugly, bit getting a little better), it&rsquo;s still right here: <a href=https://github.com/jpverkamp/sandbox-battle>jpverkamp/sandbox-battle</a></p><p>Demo time!</p><iframewidth="660"height="440"frameborder="no"scrolling="yes"src="/embeds/2014/demo.embed.htm"></iframe><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><code>setTimeout</code> chain, JavaScript doesn&rsquo;t have true threads&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>