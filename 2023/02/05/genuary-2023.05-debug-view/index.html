<!doctype html><html><head><title>Genuary 2023.05: Debug view â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_17422284542669262002.min.834c1e2313951f0c25b90152fe8b62250eab4a2e8cbd2560fa1a1cdc91c71733.js integrity="sha256-g0weIxOVHwwluQFS/otiJQ6rSi6MvSVg+hoc3JHHFzM=" defer></script><script src=/jquery.fancybox_16245765822111608191.min.ef050764ff69f3287c89ff655825479dd8304dcd9bc653d1ddd4772a701ad445.js integrity="sha256-7wUHZP9p8yh8if9lWCVHndgwTc2bxlPR3dR3KnAa1EU=" defer></script><script src=/katex_17296078054267651618.min.deed0e78a77391517d530a00324ce7b760ac204134992ef22d36f583615ae498.js integrity="sha256-3u0OeKdzkVF9UwoAMkznt2CsIEE0mS7yLTb1g2Fa5Jg=" defer></script><script src=/auto-render_14944144240389301023.min.e694d9d5eae2917984179683ead27b998784a81398e8836c369373d2c67fc32a.js integrity="sha256-5pTZ1erikXmEF5aD6tJ7mYeEqBOY6INsNpNz0sZ/wyo=" defer></script><script src=/bigfoot_28293813221957978.min.af671f08986f0a2267c5a0cb2748b005489e47fa25f55479b200e2a563d23022.js integrity="sha256-r2cfCJhvCiJnxaDLJ0iwBUieR/ol9VR5sgDipWPSMCI=" defer></script><script src=/mermaid_9520146763733687737.min.bfe50b47c0387e3c3bf97ec5f338bba94f7ccb02f962a4aec8cf0b4d68c8434d.js integrity="sha256-v+ULR8A4fjw7+X7F8zi7qU98ywL5YqSuyM8LTWjIQ00=" defer></script><script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script><link rel=stylesheet href=/katex_13658330645258633971.min.64e42891d651aee0b8cd02ec9227ff271d37bcf06dae985d1acf0eba1623e850.css integrity="sha256-ZOQokdZRruC4zQLskif/Jx03vPBtrphdGs8OuhYj6FA="><link rel=stylesheet href=/bigfoot-default_8781527669040159104.min.0d2b289fa3451447692959fcee5676b846532fe7ab50ddc4660824c42d4adcd7.css integrity="sha256-DSson6NFFEdpKVn87lZ2uEZTL+erUN3EZggkxC1K3Nc="><link rel=stylesheet href=/jquery.fancybox_5330465509389191777.min.67505d77381ebd82623ab9296c1989c44ec828d867c00296e80e52ef860cac37.css integrity="sha256-Z1BddzgevYJiOrkpbBmJxE7IKNhnwAKW6A5S74YMrDc="><link rel=stylesheet href=/css_1846377409604050217.min.fffe842bc000dd1fe8661ac6427a392a08faa95e8edab1ea7fb98c5f8dac6a6f.css integrity="sha256-//6EK8AA3R/oZhrGQno5Kgj6qV6O2rHqf7mMX42sam8="><link rel=stylesheet href=/main.min.34a34d86b8aae11b989d80a1626629c053029d012419a1993cfb6c12ea175737.css integrity="sha256-NKNNhriq4RuYnYChYmYpwFMCnQEkGaGZPPtsEuoXVzc="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/home-automation/>Home Automation</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>Genuary 2023.05: Debug view</h1><div class=entry-meta><span class=entry-date>2023-02-05</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2022/12/23/aoc-2022-day-23-elf-scattinator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/cellular-automata>Cellular Automata</a><a href=https://blog.jverkamp.com/2024/10/07/ludum-dareish-56-bugshine/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2023/02/04/genuary-2023.04-intersections/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/generative-art>Generative Art</a><a href=https://blog.jverkamp.com/2023/02/06/genuary-2023.06-steal-like-an-artist/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2023/02/04/genuary-2023.04-intersections/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/procedural-content>Procedural Content</a><a href=https://blog.jverkamp.com/2023/02/06/genuary-2023.06-steal-like-an-artist/ class=next-link></a></li><li><a class=taxonomy-value href=/programming/topics/procedural-content-content>Procedural Content Content</a></li></ul></li><li><a class=taxonomy-key href=/series/>Series</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2023/02/04/genuary-2023.04-intersections/ class=previous-link></a><a class=taxonomy-value href=/series/genuary-2023>Genuary 2023</a><a href=https://blog.jverkamp.com/2023/02/06/genuary-2023.06-steal-like-an-artist/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2023/02/04/redis-in-rust-an-echo-server-part-2/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2023/02/06/genuary-2023.06-steal-like-an-artist/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2023/02/04/the-rings-of-power-season-1/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2023/02/05/hawkeye-volume-6-hawkeyes/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><figure class=cover-image><img src=/embeds/2023/genuary-05.png></figure><p><a href=https://genuary.art/ target=_blank rel=noopener>Genuary</a>!</p><p>Spend a month making one beautiful thing per day, given a bunch of prompts. A month late, but as they say, &rsquo;the second best time is now'.</p><p>Let&rsquo;s do it!</p><h2 id=5-debug-view>5) Debug view</h2><p>I like <a href=https://en.wikipedia.org/wiki/Boids>Boids</a>. Here are some Boids with debug vectors drawn showing the three forces acting on them (red to stay away from one another, green to move in the same direction as their friends, blue to move towards the center of their friends).</p><p>Use the &rsquo;toggle clear&rsquo; button to clear the screen between each frames to see the simulation versus not to get some twisty spaghetti &lsquo;art&rsquo;. &#x1f604;</p><p>Also, the forces for each are randomized each time. Click &lsquo;reload&rsquo; to get new random values.</p><div class=tab><button id=iframedemo class="tablinks default" data-tabset=34b6 onclick='changeTab(event,"34b6","iframedemo")'>Demo</button>
<button id=defaultscript class=tablinks data-tabset=34b6 onclick='changeTab(event,"34b6","defaultscript")'>Script</button></div><div class=tabcontent data-tabset=34b6 id=iframedemo><iframe marginwidth=0 width=660 height=506.00000000000006 frameborder=0 srcdoc='
            
<html>
<head>
<script src="https://blog.jverkamp.com/p5_5702784718469020435.min.d3f6bb8c6703c21cdb1668431c2f12089d69a1b7fe9aa7b171c1fd68d97cd363.js" integrity="sha256-0/a7jGcDwhzbFmhDHC8SCJ1pobf+mqexccH9aNl802M=" defer></script><script src="https://blog.jverkamp.com/quicksettings_5902975354937418934.min.dbab3b4814bc1161ccdfe3780ee5adc04c40a6ecbb9c4f081c437d4cca0fe56a.js" integrity="sha256-26s7SBS8EWHM3+N4DuWtwExApuy7nE8IHEN9TMoP5Wo=" defer></script><script src="https://blog.jverkamp.com/p5.gui_266292142240667823.min.5aca091ab81f7b1e9d8c792eeff5e79f6d36cdbe86e6b7d7256271bfebbce865.js" integrity="sha256-WsoJGrgfex6djHku7/Xnn202zb6G5rfXJWJxv+u86GU=" defer></script>

    <style>canvas { border: 1px solid black; border-radius: 1em; }</style>
</head>
<body>

            <script>

            
                
let gui;
let params = {
  count: 100,
  countMin: 10,
  countMax: 1000,
  maxSpeed: 3.0,
  maxSpeedMin: 0.0,
  maxSpeedMax: 10.0,
  maxSpeedStep: 0.1,

  visionDistance: 50.0,
  visionDistanceMin: 1.0,
  visionDistanceMax: 400.0,

  noiseForce: 1.0,
  noiseForceMin: 0.0,
  noiseForceMax: 2.0,
  noiseForceStep: 0.1,
  wallAvoidanceForce: 1.0,
  wallAvoidanceForceMin: 0.0,
  wallAvoidanceForceMax: 2.0,
  wallAvoidanceForceStep: 0.1,
  separationForce: 1.0,
  separationForceMin: 0.0,
  separationForceMax: 2.0,
  separationForceStep: 0.1,
  alignmentForce: 1.0,
  alignmentForceMin: 0.0,
  alignmentForceMax: 2.0,
  alignmentForceStep: 0.1,
  cohesionForce: 1.0,
  cohesionForceMin: 0.0,
  cohesionForceMax: 2.0,
  cohesionForceStep: 0.1,

  debug: true,
  drawBackground: true,
};

let boids;

class Boid {
  constructor(p) {
    this.position =
      p ||
      createVector(
        params.visionDistance + random(width - params.visionDistance * 2),
        params.visionDistance + random(height - params.visionDistance * 2)
      );
    this.velocity = p5.Vector.random2D().mult(params.maxSpeed * random());
  }

  update() {
    // Apply noise
    this.velocity.add(p5.Vector.random2D().mult(params.noiseForce));

    // Avoid the walls
    if (this.position.x < params.visionDistance) {
      this.velocity.x += params.wallAvoidanceForce;
    }
    if (this.position.x > width - params.visionDistance) {
      this.velocity.x -= params.wallAvoidanceForce;
    }
    if (this.position.y < params.visionDistance) {
      this.velocity.y += params.wallAvoidanceForce;
    }
    if (this.position.y > height - params.visionDistance) {
      this.velocity.y -= params.wallAvoidanceForce;
    }

    // Actual BOID forces
    this.separation_force = createVector(0, 0);
    this.alignment_force = createVector(0, 0);
    this.cohesion_force = createVector(0, 0);

    // Calculate average of local neighborhood
    this.friend_count = 0;
    this.friend_position = createVector(0, 0);
    this.friend_velocity = createVector(0, 0);

    // Check all boids, ignore those not close enough
    for (let other of boids) {
      if (this == other) continue;

      let v = p5.Vector.sub(other.position, this.position).normalize();
      let d = v.mag();
      if (d > params.visionDistance) continue;

      // Add separation force
      this.separation_force.add(
        p5.Vector.mult(v, -1 * d / params.visionDistance * params.separationForce)
      );

      // Alignment and cohesion
      this.friend_count += 1;
      this.friend_position.add(other.position);
      this.friend_velocity.add(other.velocity);
    }

    this.velocity.add(p5.Vector.mult(this.separation_force, 0.1));

    if (this.friend_count > 0) {
      // Alignment force, move towards local heading
      this.friend_velocity.mult(1 / this.friend_count);
      this.alignment_force = p5.Vector.mult(
        this.friend_velocity,
        params.alignmentForce
      );
      this.velocity.add(p5.Vector.mult(this.alignment_force, 0.1));

      // Cohesion force, move towards center of local group
      this.friend_position.mult(1 / this.friend_count);
      this.cohesion_force = p5.Vector.mult(
        p5.Vector.sub(this.friend_position, this.position).normalize(),
        params.cohesionForce
      );
      this.velocity.add(p5.Vector.mult(this.cohesion_force, 0.1));
    }

    // Clamp to maximum speed
    if (this.velocity.mag() > params.maxSpeed) {
      this.velocity = this.velocity.normalize().mult(params.maxSpeed);
    }

    // Update position based on current velocity
    this.position = this.position.add(this.velocity);

    if (this.position.x < 0) {
      this.position.x = 0;
      this.velocity.x = abs(this.velocity.x);
    }

    if (this.position.x > width) {
      this.position.x = width;
      this.velocity.x = -1 * abs(this.velocity.x);
    }

    if (this.position.y < 0) {
      this.position.y = 0;
      this.velocity.y = abs(this.velocity.y);
    }

    if (this.position.y > width) {
      this.position.y = height;
      this.velocity.y = -1 * abs(this.velocity.y);
    }
  }

  draw() {
    stroke(0);
    circle(this.position.x, this.position.y, 5);

    if (params.debug) {
      stroke(255, 0, 0);
      line(
        this.position.x,
        this.position.y,
        this.position.x + 10.0 * this.separation_force.x,
        this.position.y + 10.0 * this.separation_force.y
      );

      stroke(0, 255, 0);
      line(
        this.position.x,
        this.position.y,
        this.position.x + 10.0 * this.alignment_force.x,
        this.position.y + 10.0 * this.alignment_force.y
      );

      stroke(0, 0, 255);
      line(
        this.position.x,
        this.position.y,
        this.position.x + 10.0 * this.cohesion_force.x,
        this.position.y + 10.0 * this.cohesion_force.y
      );
    }
  }
}

function oldSetup() {
  params.noiseForce = random() / 5.0;
  params.wallAvoidanceForce = random() / 5.0;
  params.separationForce = random() / 5.0;
  params.alignmentForce = random() / 5.0;
  params.cohesionForce = random() / 5.0;

  createCanvas(400, 400);

  boids = [];
  for (let i = 0; i < params.count; i++) {
    boids.push(new Boid());
  }

  gui = createGuiPanel("params");
  gui.addObject(params);
  gui.setPosition(420, 0);

  background(255);
}

function draw() {
  if (params.drawBackground) {
    background(255);
  }

  for (let boid of boids) {
    boid.update();
  }

  for (let boid of boids) {
    boid.draw();
  }
}

            

            const START_PAUSED = false;

            
function setup() {
    // Load saved settings from the browser hash fragment
    if (parent.location.hash && typeof params !== "undefined") {
        try {
            var settings = JSON.parse(atob(parent.location.hash.substring(1)));
            Object.keys(params).forEach((key) => params[key] = key in settings ? settings[key] : params[key]);
        } catch(ex) {
        }
    }

    oldSetup();
    if (START_PAUSED) {
        noLoop();
    }

    createButton("play/pause").mousePressed(() => {
        if (isLooping()) {
            noLoop();
        } else {
            loop();
        }
    });

    createButton("save").mousePressed(() => {
        saveCanvas(&#39;photo&#39;, &#39;png&#39;)
    });

    createButton("clear").mousePressed(() => {
        if (typeof reset !== &#39;undefined&#39;) {
            reset();
        } else {
            clear();
        }
    });

    createButton("reload").mousePressed(() => {
        window.location.reload();
    });

    if (typeof params !== "undefined") {
        for (var el of document.querySelectorAll(&#39;input&#39;)) {
            if (el.id && el.id.startsWith(&#39;qs_&#39;)) {
                el.addEventListener(&#39;change&#39;, () => {
                    parent.location.hash = btoa(JSON.stringify(params));
                });
            }
        }
    }
}

            </script>
            
<noscript>To display this p5.js sketch, JavaScript must be enabled.</noscript>
</body>
</html>

        '></iframe></div><div class=tabcontent data-tabset=34b6 id=defaultscript><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>gui</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>params</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>count</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>countMin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>10</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>countMax</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1000</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>maxSpeed</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>maxSpeedMin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>maxSpeedMax</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>10.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>maxSpeedStep</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.1</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>visionDistance</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>50.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>visionDistanceMin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>visionDistanceMax</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>400.0</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noiseForce</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noiseForceMin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noiseForceMax</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noiseForceStep</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.1</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>wallAvoidanceForce</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>wallAvoidanceForceMin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>wallAvoidanceForceMax</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>wallAvoidanceForceStep</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.1</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>separationForce</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>separationForceMin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>separationForceMax</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>separationForceStep</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.1</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alignmentForce</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alignmentForceMin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alignmentForceMax</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alignmentForceStep</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.1</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cohesionForce</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cohesionForceMin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cohesionForceMax</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2.0</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cohesionForceStep</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.1</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>debug</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>drawBackground</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>boids</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Boid</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>p</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>p</span> <span style=color:#f92672>||</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>createVector</span>(
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>random</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>random</span>(<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>random2D</span>().<span style=color:#a6e22e>mult</span>(<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>maxSpeed</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>random</span>());
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>update</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Apply noise
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>random2D</span>().<span style=color:#a6e22e>mult</span>(<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>noiseForce</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Avoid the walls
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>wallAvoidanceForce</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>-=</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>wallAvoidanceForce</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>wallAvoidanceForce</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>-=</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>wallAvoidanceForce</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Actual BOID forces
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>separation_force</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alignment_force</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cohesion_force</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Calculate average of local neighborhood
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_count</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_position</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_velocity</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Check all boids, ignore those not close enough
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>other</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>boids</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>other</span>) <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>v</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>sub</span>(<span style=color:#a6e22e>other</span>.<span style=color:#a6e22e>position</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>).<span style=color:#a6e22e>normalize</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>d</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>mag</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>d</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span>) <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Add separation force
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>separation_force</span>.<span style=color:#a6e22e>add</span>(
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>mult</span>(<span style=color:#a6e22e>v</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>d</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>visionDistance</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>separationForce</span>)
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Alignment and cohesion
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_count</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_position</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>other</span>.<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_velocity</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>other</span>.<span style=color:#a6e22e>velocity</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>mult</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>separation_force</span>, <span style=color:#ae81ff>0.1</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_count</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Alignment force, move towards local heading
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_velocity</span>.<span style=color:#a6e22e>mult</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_count</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alignment_force</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>mult</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_velocity</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>alignmentForce</span>
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>mult</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alignment_force</span>, <span style=color:#ae81ff>0.1</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Cohesion force, move towards center of local group
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_position</span>.<span style=color:#a6e22e>mult</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_count</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cohesion_force</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>mult</span>(
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>sub</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>friend_position</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>).<span style=color:#a6e22e>normalize</span>(),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>cohesionForce</span>
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>p5</span>.<span style=color:#a6e22e>Vector</span>.<span style=color:#a6e22e>mult</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cohesion_force</span>, <span style=color:#ae81ff>0.1</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Clamp to maximum speed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>mag</span>() <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>maxSpeed</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>normalize</span>().<span style=color:#a6e22e>mult</span>(<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>maxSpeed</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Update position based on current velocity
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>abs</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>x</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>width</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>width</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>abs</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>x</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>abs</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>width</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>height</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>abs</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>velocity</span>.<span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>circle</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span>, <span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>debug</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>line</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10.0</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>separation_force</span>.<span style=color:#a6e22e>x</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10.0</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>separation_force</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>line</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10.0</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alignment_force</span>.<span style=color:#a6e22e>x</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10.0</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alignment_force</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>line</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10.0</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cohesion_force</span>.<span style=color:#a6e22e>x</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>position</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10.0</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cohesion_force</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>noiseForce</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>5.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>wallAvoidanceForce</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>5.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>separationForce</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>5.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>alignmentForce</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>5.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>cohesionForce</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>5.0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>400</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>boids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>count</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>boids</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Boid</span>());
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gui</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGuiPanel</span>(<span style=color:#e6db74>&#34;params&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gui</span>.<span style=color:#a6e22e>addObject</span>(<span style=color:#a6e22e>params</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gui</span>.<span style=color:#a6e22e>setPosition</span>(<span style=color:#ae81ff>420</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>drawBackground</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>boid</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>boids</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>boid</span>.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>boid</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>boids</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>boid</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=ranking><h3 class=title>Posts in <a href=/series/genuary-2023/>Genuary 2023</a>:</h3><div class=content><ul></ul></div></div></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>