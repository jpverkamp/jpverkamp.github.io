<!doctype html><html><head><title>AoC 2025 Day 2: Repeat Repeat Repeatinator – jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_17422284542669262002.min.834c1e2313951f0c25b90152fe8b62250eab4a2e8cbd2560fa1a1cdc91c71733.js integrity="sha256-g0weIxOVHwwluQFS/otiJQ6rSi6MvSVg+hoc3JHHFzM=" defer></script><script src=/jquery.fancybox_16245765822111608191.min.a8e11addf4349ee2ca5045f7f3cbf1febbf2c3a2840be2143ea69539c10f8c7f.js integrity="sha256-qOEa3fQ0nuLKUEX388vx/rvyw6KEC+IUPqaVOcEPjH8=" defer></script><script src=/katex_17296078054267651618.min.4a06464d8d6f8358d8896de62b53b5a89205d335dfd8c5b6b27edd7c039ae9d8.js integrity="sha256-SgZGTY1vg1jYiW3mK1O1qJIF0zXf2MW2sn7dfAOa6dg=" defer></script><script src=/auto-render_14944144240389301023.min.e694d9d5eae2917984179683ead27b998784a81398e8836c369373d2c67fc32a.js integrity="sha256-5pTZ1erikXmEF5aD6tJ7mYeEqBOY6INsNpNz0sZ/wyo=" defer></script><script src=/bigfoot_28293813221957978.min.af671f08986f0a2267c5a0cb2748b005489e47fa25f55479b200e2a563d23022.js integrity="sha256-r2cfCJhvCiJnxaDLJ0iwBUieR/ol9VR5sgDipWPSMCI=" defer></script><script src=/mermaid_9520146763733687737.min.a17078917a4403310cd19178939257b706fb5e1da76167c9f4a6d2123c9d59c4.js integrity="sha256-oXB4kXpEAzEM0ZF4k5JXtwb7Xh2nYWfJ9KbSEjydWcQ=" defer></script><script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script><link rel=stylesheet href=/katex_13658330645258633971.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_8781527669040159104.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_5330465509389191777.min.7420a1602c62a85d4b50881c1d8ce42f72c049dc2b097d440696425d6e54bb1e.css integrity="sha256-dCChYCxiqF1LUIgcHYzkL3LASdwrCX1EBpZCXW5Uux4="><link rel=stylesheet href=/css_1846377409604050217.min.fffe842bc000dd1fe8661ac6427a392a08faa95e8edab1ea7fb98c5f8dac6a6f.css integrity="sha256-//6EK8AA3R/oZhrGQno5Kgj6qV6O2rHqf7mMX42sam8="><link rel=stylesheet href=/main.min.5ff4b87c40715a96119d8b5f34d971604fc65ab18f4870fd8da6ede9fd1e6188.css integrity="sha256-X/S4fEBxWpYRnYtfNNlxYE/GWrGPSHD9jabt6f0eYYg="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/home-automation/>Automation</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>AoC 2025 Day 2: Repeat Repeat Repeatinator</h1><div class=entry-meta><span class=entry-date>2025-12-02</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/rust>Rust</a><a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/advent-of-code>Advent of Code</a><a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/algorithms>Algorithms</a><a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/benchmarking>Benchmarking</a><a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/code-optimization>Code Optimization</a><a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/functional-programming>Functional Programming</a></li><li><a class=taxonomy-value href=/programming/topics/integer-arithmetic>Integer Arithmetic</a></li><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/iterators>Iterators</a><a href=https://blog.jverkamp.com/2025/12/05/aoc-2025-day-5-range-merginator/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2014/05/23/amicable-chains/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/number-theory>Number Theory</a></li><li><a href=https://blog.jverkamp.com/2025/05/29/parsing-pem-certificates-asn.1-in-javascript/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/parsing>Parsing</a><a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link></a></li><li><a class=taxonomy-value href=/programming/topics/pattern-matching>Pattern Matching</a></li><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/performance>Performance</a><a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2024/12/19/aoc-2024-day-19-regexinator/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/regex>Regex</a></li></ul></li><li><a class=taxonomy-key href=/series/>Series</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link></a><a class=taxonomy-value href=/series/advent-of-code-2025>Advent of Code 2025</a><a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2025/12/01/aoc-2025-day-1-turn-turn-turninator/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/maker/3d-printing/2025-12-02-undergravel-filter/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2025/12/03/aoc-2025-day-3-loopinator/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><h2 id=source-day-2-gift-shop>Source: <a href=https://adventofcode.com/2025/day/2 target=_blank rel=noopener>Day 2: Gift Shop</a></h2><p><a href=https://github.com/jpverkamp/advent-of-code/blob/master/2025/src/day2.rs target=_blank rel=noopener>Full solution</a> for today (spoilers!).</p><nav id=TableOfContents><ul><li><a href=#source-day-2-gift-shop>Source: Day 2: Gift Shop</a></li><li><a href=#part-1>Part 1</a></li><li><a href=#part-1---regex>Part 1 - Regex</a></li><li><a href=#part-2---matching-integers>Part 2 - Matching Integers</a></li><li><a href=#part-2>Part 2</a></li><li><a href=#part-2---matching-integers-1>Part 2 - Matching Integers</a></li><li><a href=#benchmarks>Benchmarks</a></li><li><a href=#edit-part-1---chatgpt>(Edit) Part 1 - ChatGPT</a></li></ul></nav><h2 id=part-1>Part 1</h2><blockquote><p>Given a list of ranges <code>a-b</code> (ie <code>11-22</code>), sum all values that are made of two repeated chunks of digits (ie <code>123123</code>)</p></blockquote><p>Let&rsquo;s just do this the direct way:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[aoc::register(day2, part1)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part1</span>(input: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>) -&gt; <span style=color:#a6e22e>impl</span> Into<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    input
</span></span><span style=display:flex><span>        .trim_end()
</span></span><span style=display:flex><span>        .split(<span style=color:#e6db74>&#34;,&#34;</span>)
</span></span><span style=display:flex><span>        .map(<span style=color:#f92672>|</span>s<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> (a, b) <span style=color:#f92672>=</span> s.split_once(<span style=color:#e6db74>&#34;-&#34;</span>).expect(<span style=color:#e6db74>&#34;Invalid range&#34;</span>);
</span></span><span style=display:flex><span>            (
</span></span><span style=display:flex><span>                a.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{a}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>                b.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{b}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .flat_map(<span style=color:#f92672>|</span>(start, end)<span style=color:#f92672>|</span> (start<span style=color:#f92672>..=</span>end))
</span></span><span style=display:flex><span>        .filter(<span style=color:#f92672>|</span>num<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> s <span style=color:#f92672>=</span> num.to_string();
</span></span><span style=display:flex><span>            s[<span style=color:#f92672>..</span>s.len() <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>==</span> s[s.len() <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>..</span>]
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .sum::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>        .to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>So that&rsquo;s a quick chain of:</p><ul><li>Split into ranges</li><li>Parse ranges into numbers</li><li><code>flat_map</code> to loop over all the numbers</li><li><code>filter</code> out numbers that are not duplicates (by literally making a string and comparing halves)</li><li>Sum them</li></ul><p>Which works well enough:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ just run <span style=color:#ae81ff>2</span> part1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>24157613387</span>
</span></span></code></pre></div><p>But can we do better?</p><h2 id=part-1---regex>Part 1 - Regex</h2><p>Well, for one, this seems like it would actually be perfect for a well tuned regex engine. The pattern they&rsquo;re describing is exactly <code>^(\d+)\1$</code> (start of string, group of digits, back reference for the same group, end of string).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[aoc::register(day2, part1_regex)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part1_regex</span>(input: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>) -&gt; <span style=color:#a6e22e>impl</span> Into<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> fancy_regex::Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;^(\d+)\1$&#34;</span>).unwrap();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    input
</span></span><span style=display:flex><span>        .trim_end()
</span></span><span style=display:flex><span>        .split(<span style=color:#e6db74>&#34;,&#34;</span>)
</span></span><span style=display:flex><span>        .map(<span style=color:#f92672>|</span>s<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> (a, b) <span style=color:#f92672>=</span> s.split_once(<span style=color:#e6db74>&#34;-&#34;</span>).expect(<span style=color:#e6db74>&#34;Invalid range&#34;</span>);
</span></span><span style=display:flex><span>            (
</span></span><span style=display:flex><span>                a.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{a}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>                b.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{b}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .flat_map(<span style=color:#f92672>|</span>(start, end)<span style=color:#f92672>|</span> (start<span style=color:#f92672>..=</span>end))
</span></span><span style=display:flex><span>        .filter(<span style=color:#f92672>|</span>num<span style=color:#f92672>|</span> re.is_match(<span style=color:#f92672>&amp;</span>num.to_string()).unwrap_or(<span style=color:#66d9ef>false</span>))
</span></span><span style=display:flex><span>        .sum::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>        .to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>I started with the <code><a href=https://docs.rs//latest//><code></code></a></code>
&mldr; but that one doesn&rsquo;t support backreferences at all. So I used <code><a href=https://docs.rs//latest//><code></code></a></code>
instead.</p><p>Which does give the right answer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ just run <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>part1: <span style=color:#ae81ff>24157613387</span>
</span></span><span style=display:flex><span>part1_regex: <span style=color:#ae81ff>24157613387</span>
</span></span></code></pre></div><p>But the problem is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ just bench <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>part1: 49.40959ms ± 490.658µs <span style=color:#f92672>[</span>min: 48.6975ms, max: 51.310625ms, median: 49.346458ms<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>part1_regex: 803.93951ms ± 10.616642ms <span style=color:#f92672>[</span>min: 791.386458ms, max: 858.2955ms, median: 802.344584ms<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>It&rsquo;s roughly ~15x slower.</p><p>Nope!</p><h2 id=part-2---matching-integers>Part 2 - Matching Integers</h2><p>Okay, what if the actual problem is making strings. We&rsquo;re allocating a ton. Let&rsquo;s use some math instead:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[aoc::register(day2, part1_intmatch)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part1_intmatch</span>(input: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>) -&gt; <span style=color:#a6e22e>impl</span> Into<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    input
</span></span><span style=display:flex><span>        .trim_end()
</span></span><span style=display:flex><span>        .split(<span style=color:#e6db74>&#34;,&#34;</span>)
</span></span><span style=display:flex><span>        .map(<span style=color:#f92672>|</span>s<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> (a, b) <span style=color:#f92672>=</span> s.split_once(<span style=color:#e6db74>&#34;-&#34;</span>).expect(<span style=color:#e6db74>&#34;Invalid range&#34;</span>);
</span></span><span style=display:flex><span>            (
</span></span><span style=display:flex><span>                a.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{a}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>                b.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{b}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .flat_map(<span style=color:#f92672>|</span>(start, end)<span style=color:#f92672>|</span> (start<span style=color:#f92672>..=</span>end))
</span></span><span style=display:flex><span>        .filter(<span style=color:#f92672>|</span>num<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> digits <span style=color:#f92672>=</span> (<span style=color:#f92672>*</span>num <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>f64</span>).log10() <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>            num <span style=color:#f92672>/</span> <span style=color:#ae81ff>10_</span><span style=color:#66d9ef>usize</span>.pow((digits <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u32</span>)
</span></span><span style=display:flex><span>                <span style=color:#f92672>==</span> num <span style=color:#f92672>%</span> <span style=color:#ae81ff>10_</span><span style=color:#66d9ef>usize</span>.pow((digits <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u32</span>)
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .sum::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>        .to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Which:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ just run <span style=color:#ae81ff>2</span> part1_intmatch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>24157613387</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ just bench <span style=color:#ae81ff>2</span> part1_intmatch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>part1_intmatch: 11.345876ms ± 110.593µs <span style=color:#f92672>[</span>min: 11.100958ms, max: 11.64625ms, median: 11.310459ms<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>Which is actually ~5x faster. So that&rsquo;s not terrible. We still have a few expensive operations there (<code>log10</code>, <code>/</code> and <code>%</code> aren&rsquo;t cheap).</p><p>You can actually do slightly faster yet:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span>        .filter(<span style=color:#f92672>|</span>num<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> digits <span style=color:#f92672>=</span> (<span style=color:#f92672>*</span>num <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>f64</span>).log10() <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> (q, r) <span style=color:#f92672>=</span> num.div_mod_floor(<span style=color:#f92672>&amp;</span><span style=color:#ae81ff>10_</span><span style=color:#66d9ef>usize</span>.pow((digits <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u32</span>));
</span></span><span style=display:flex><span>            q <span style=color:#f92672>==</span> r
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span></code></pre></div><p>This requires the <code><a href=https://docs.rs//latest//><code></code></a></code>
crate, but it does the <code>div</code> and <code>mod</code> at the same time, rather than doing all that work twice:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>$</span> just run <span style=color:#ae81ff>2</span> part1_intmatch_divrem
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>24157613387</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>$</span> just bench <span style=color:#ae81ff>2</span> part1_intmatch_divrem
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>part1_intmatch_divrem: <span style=color:#ae81ff>9.16757</span>ms <span style=color:#960050;background-color:#1e0010>±</span> <span style=color:#ae81ff>101.928</span><span style=color:#960050;background-color:#1e0010>µ</span>s [min: <span style=color:#ae81ff>9.009084</span>ms, max: <span style=color:#ae81ff>9.622834</span>ms, median: <span style=color:#ae81ff>9.138</span>ms]
</span></span></code></pre></div><h2 id=part-2>Part 2</h2><blockquote><p>Sum <em>any</em> repeats of digits (with at least 2 groups), so <code>123123123</code> will now count.</p></blockquote><p>Right. Let&rsquo;s start with the brute force (string) solution:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[aoc::register(day2, part2)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part2</span>(input: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>) -&gt; <span style=color:#a6e22e>impl</span> Into<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Test if s is made up of n repeating chunks
</span></span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>is_repeat</span>(s: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>, n: <span style=color:#66d9ef>usize</span>) -&gt; <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> len <span style=color:#f92672>=</span> s.len();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> len <span style=color:#f92672>%</span> n <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> chunk_size <span style=color:#f92672>=</span> len <span style=color:#f92672>/</span> n;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> chunk <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>s[<span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>chunk_size];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>n {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>&amp;</span>s[i <span style=color:#f92672>*</span> chunk_size<span style=color:#f92672>..</span>(i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> chunk_size] <span style=color:#f92672>!=</span> chunk {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    input
</span></span><span style=display:flex><span>        .trim_end()
</span></span><span style=display:flex><span>        .split(<span style=color:#e6db74>&#34;,&#34;</span>)
</span></span><span style=display:flex><span>        .map(<span style=color:#f92672>|</span>s<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> (a, b) <span style=color:#f92672>=</span> s.split_once(<span style=color:#e6db74>&#34;-&#34;</span>).expect(<span style=color:#e6db74>&#34;Invalid range&#34;</span>);
</span></span><span style=display:flex><span>            (
</span></span><span style=display:flex><span>                a.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{a}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>                b.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{b}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .flat_map(<span style=color:#f92672>|</span>(start, end)<span style=color:#f92672>|</span> (start<span style=color:#f92672>..=</span>end))
</span></span><span style=display:flex><span>        .filter(<span style=color:#f92672>|</span>num<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> s <span style=color:#f92672>=</span> num.to_string();
</span></span><span style=display:flex><span>            (<span style=color:#ae81ff>2</span><span style=color:#f92672>..=</span>s.len()).any(<span style=color:#f92672>|</span>chunk_size<span style=color:#f92672>|</span> is_repeat(<span style=color:#f92672>&amp;</span>s, chunk_size))
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .sum::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>        .to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Which works fine:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ just run <span style=color:#ae81ff>2</span> part2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>33832678380</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ just bench <span style=color:#ae81ff>2</span> part2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>part2: 109.286739ms ± 1.84381ms <span style=color:#f92672>[</span>min: 107.709334ms, max: 124.576541ms, median: 108.872875ms
</span></span></code></pre></div><p>It feels like <code>intmatch</code> on that one is going to be a bit weirder though.</p><h2 id=part-2---matching-integers-1>Part 2 - Matching Integers</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[aoc::register(day2, part2_intmatch)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part2_intmatch</span>(input: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>) -&gt; <span style=color:#a6e22e>impl</span> Into<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Test if s is made up of n repeating chunks
</span></span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>is_repeat</span>(num: <span style=color:#66d9ef>usize</span>, n: <span style=color:#66d9ef>usize</span>) -&gt; <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> digits <span style=color:#f92672>=</span> (num <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>f64</span>).log10() <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> digits <span style=color:#f92672>%</span> n <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> chunk_size <span style=color:#f92672>=</span> digits <span style=color:#f92672>/</span> n;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> chunk_div <span style=color:#f92672>=</span> <span style=color:#ae81ff>10_</span><span style=color:#66d9ef>usize</span>.pow(chunk_size <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u32</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> chunk <span style=color:#f92672>=</span> num <span style=color:#f92672>/</span> chunk_div.pow((n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u32</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>n {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> num <span style=color:#f92672>/</span> chunk_div.pow((n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> i) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u32</span>) <span style=color:#f92672>%</span> chunk_div <span style=color:#f92672>!=</span> chunk {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    input
</span></span><span style=display:flex><span>        .trim_end()
</span></span><span style=display:flex><span>        .split(<span style=color:#e6db74>&#34;,&#34;</span>)
</span></span><span style=display:flex><span>        .map(<span style=color:#f92672>|</span>s<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> (a, b) <span style=color:#f92672>=</span> s.split_once(<span style=color:#e6db74>&#34;-&#34;</span>).expect(<span style=color:#e6db74>&#34;Invalid range&#34;</span>);
</span></span><span style=display:flex><span>            (
</span></span><span style=display:flex><span>                a.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{a}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>                b.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{b}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .flat_map(<span style=color:#f92672>|</span>(start, end)<span style=color:#f92672>|</span> (start<span style=color:#f92672>..=</span>end))
</span></span><span style=display:flex><span>        .filter(<span style=color:#f92672>|</span>num<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> digits <span style=color:#f92672>=</span> (<span style=color:#f92672>*</span>num <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>f64</span>).log10() <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>usize</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>            (<span style=color:#ae81ff>2</span><span style=color:#f92672>..=</span>digits).any(<span style=color:#f92672>|</span>chunk_size<span style=color:#f92672>|</span> is_repeat(<span style=color:#f92672>*</span>num, chunk_size))
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .sum::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>        .to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Yup. That&rsquo;s messy. Mostly because each chunk has to do a <code>/</code> and <code>%</code>, which are both expensive.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ just run <span style=color:#ae81ff>2</span> part2_intmatch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>33832678380</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~/Projects/advent-of-code/2025 jp@venus <span style=color:#f92672>{</span>git master<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>$ just bench <span style=color:#ae81ff>2</span> part2_intmatch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>part2_intmatch: 101.440742ms ± 3.905721ms <span style=color:#f92672>[</span>min: 99.228ms, max: 123.911208ms, median: 100.531917ms<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>Given that the first one was ~109ms, that really isn&rsquo;t <em>that</em> much faster this time.</p><p>Still interesting to write out.</p><h2 id=benchmarks>Benchmarks</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ just bench <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>part1: 46.189482ms ± 467.675µs <span style=color:#f92672>[</span>min: 45.514292ms, max: 47.419833ms, median: 46.133208ms<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>part1_intmatch: 11.533401ms ± 1.266642ms <span style=color:#f92672>[</span>min: 11.046375ms, max: 23.946333ms, median: 11.35675ms<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>part1_intmatch_divrem: 9.121032ms ± 85.661µs <span style=color:#f92672>[</span>min: 8.914208ms, max: 9.437417ms, median: 9.106625ms<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>part1_regex: 838.820205ms ± 10.505208ms <span style=color:#f92672>[</span>min: 825.231ms, max: 880.588458ms, median: 835.929083ms<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>part2: 110.797727ms ± 5.697853ms <span style=color:#f92672>[</span>min: 108.717083ms, max: 164.695708ms, median: 109.671917ms<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>part2_intmatch: 100.421589ms ± 1.573153ms <span style=color:#f92672>[</span>min: 99.348708ms, max: 114.805125ms, median: 100.096ms<span style=color:#f92672>]</span>
</span></span></code></pre></div><table><thead><tr><th>Day</th><th>Part</th><th>Solution</th><th>Benchmark</th></tr></thead><tbody><tr><td>2</td><td>1</td><td><code>part1</code></td><td>46.189482ms ± 467.675µs</td></tr><tr><td>2</td><td>1</td><td><code>part1_regex</code></td><td>838.820205ms ± 10.505208ms</td></tr><tr><td>2</td><td>1</td><td><code>part1_intmatch</code></td><td>11.533401ms ± 1.266642ms</td></tr><tr><td>2</td><td>1</td><td><code>part1_intmatch_divrem</code></td><td>9.121032ms ± 85.661µs</td></tr><tr><td>2</td><td>1</td><td><code>part1_chatgpt</code></td><td>650.796µs ± 231.766µs</td></tr><tr><td>2</td><td>2</td><td><code>part2</code></td><td>110.797727ms ± 5.697853ms</td></tr><tr><td>2</td><td>2</td><td><code>part2_intmatch</code></td><td>100.421589ms ± 1.573153ms</td></tr></tbody></table><h2 id=edit-part-1---chatgpt>(Edit) Part 1 - ChatGPT</h2><p>Okay. So, I know that there&rsquo;s a faster way to solve this, but I didn&rsquo;t really want to (or have the time to) go through all of the math. So I threw ChatGPT at it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[aoc::register(day2, part1_chatgpt)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>part1_chatgpt</span>(input: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>) -&gt; <span style=color:#a6e22e>impl</span> Into<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>sum_repeated_halves</span>(a: <span style=color:#66d9ef>u64</span>, b: <span style=color:#66d9ef>u64</span>) -&gt; <span style=color:#66d9ef>u128</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> total_sum: <span style=color:#66d9ef>u128</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#66d9ef>u128</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> h <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>loop</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> low <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span><span style=color:#66d9ef>u64</span>.pow(h <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> high <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span><span style=color:#66d9ef>u64</span>.pow(h) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> power <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span><span style=color:#66d9ef>u128</span>.pow(h);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> low<span style=color:#f92672>..=</span>high {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>let</span> xx <span style=color:#f92672>=</span> x <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u128</span> <span style=color:#f92672>*</span> (power <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> xx <span style=color:#f92672>&gt;</span> b <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u128</span> {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>; <span style=color:#75715e>// all larger X will exceed b
</span></span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> xx <span style=color:#f92672>&gt;=</span> a <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u128</span> {
</span></span><span style=display:flex><span>                    total_sum <span style=color:#f92672>+=</span> xx;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// stop if the smallest XX for this h exceeds b
</span></span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> low <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u128</span> <span style=color:#f92672>*</span> (power <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>&gt;</span> b <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u128</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            h <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        total_sum
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    input
</span></span><span style=display:flex><span>        .trim_end()
</span></span><span style=display:flex><span>        .split(<span style=color:#e6db74>&#34;,&#34;</span>)
</span></span><span style=display:flex><span>        .map(<span style=color:#f92672>|</span>s<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> (a, b) <span style=color:#f92672>=</span> s.split_once(<span style=color:#e6db74>&#34;-&#34;</span>).expect(<span style=color:#e6db74>&#34;Invalid range&#34;</span>);
</span></span><span style=display:flex><span>            (
</span></span><span style=display:flex><span>                a.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{a}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>                b.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>                    .unwrap_or_else(<span style=color:#f92672>|</span>_<span style=color:#f92672>|</span> <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;failed to parse </span><span style=color:#e6db74>{b}</span><span style=color:#e6db74>&#34;</span>)),
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .map(<span style=color:#f92672>|</span>(start, end)<span style=color:#f92672>|</span> sum_repeated_halves(start <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u64</span>, end <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u64</span>))
</span></span><span style=display:flex><span>        .sum::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u128</span><span style=color:#f92672>&gt;</span>()
</span></span><span style=display:flex><span>        .to_string()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Which:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ just run <span style=color:#ae81ff>2</span> part1_chatgpt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>24157613387</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ just bench <span style=color:#ae81ff>2</span> part1_chatgpt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>part1_chatgpt: 566.21µs ± 11.597µs <span style=color:#f92672>[</span>min: 556.584µs, max: 608.375µs, median: 561.583µs<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>Whelp.</p><p>Sometimes I&rsquo;m impressed as heck that GPTs work as well as they do. Especially for smaller problems (like this one), they just solve it. This took only one fix (where it was overcounting, but I showed it the code I was wrapping it with and it fixed it) and about 5 minutes.</p><p>For larger problems? Anything where you have to actually build out a project larger goals, complex requirements, or (heaven forbid) do security right? Well, that remains to be seen.</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>