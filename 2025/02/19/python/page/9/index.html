<!doctype html><html><head><title>jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_17422284542669262002.min.834c1e2313951f0c25b90152fe8b62250eab4a2e8cbd2560fa1a1cdc91c71733.js integrity="sha256-g0weIxOVHwwluQFS/otiJQ6rSi6MvSVg+hoc3JHHFzM=" defer></script><script src=/jquery.fancybox_16245765822111608191.min.ef050764ff69f3287c89ff655825479dd8304dcd9bc653d1ddd4772a701ad445.js integrity="sha256-7wUHZP9p8yh8if9lWCVHndgwTc2bxlPR3dR3KnAa1EU=" defer></script><script src=/katex_17296078054267651618.min.deed0e78a77391517d530a00324ce7b760ac204134992ef22d36f583615ae498.js integrity="sha256-3u0OeKdzkVF9UwoAMkznt2CsIEE0mS7yLTb1g2Fa5Jg=" defer></script><script src=/auto-render_14944144240389301023.min.e694d9d5eae2917984179683ead27b998784a81398e8836c369373d2c67fc32a.js integrity="sha256-5pTZ1erikXmEF5aD6tJ7mYeEqBOY6INsNpNz0sZ/wyo=" defer></script><script src=/bigfoot_28293813221957978.min.af671f08986f0a2267c5a0cb2748b005489e47fa25f55479b200e2a563d23022.js integrity="sha256-r2cfCJhvCiJnxaDLJ0iwBUieR/ol9VR5sgDipWPSMCI=" defer></script><script src=/mermaid_9520146763733687737.min.bfe50b47c0387e3c3bf97ec5f338bba94f7ccb02f962a4aec8cf0b4d68c8434d.js integrity="sha256-v+ULR8A4fjw7+X7F8zi7qU98ywL5YqSuyM8LTWjIQ00=" defer></script><script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script><link rel=stylesheet href=/katex_13658330645258633971.min.64e42891d651aee0b8cd02ec9227ff271d37bcf06dae985d1acf0eba1623e850.css integrity="sha256-ZOQokdZRruC4zQLskif/Jx03vPBtrphdGs8OuhYj6FA="><link rel=stylesheet href=/bigfoot-default_8781527669040159104.min.0d2b289fa3451447692959fcee5676b846532fe7ab50ddc4660824c42d4adcd7.css integrity="sha256-DSson6NFFEdpKVn87lZ2uEZTL+erUN3EZggkxC1K3Nc="><link rel=stylesheet href=/jquery.fancybox_5330465509389191777.min.67505d77381ebd82623ab9296c1989c44ec828d867c00296e80e52ef860cac37.css integrity="sha256-Z1BddzgevYJiOrkpbBmJxE7IKNhnwAKW6A5S74YMrDc="><link rel=stylesheet href=/css_1846377409604050217.min.fffe842bc000dd1fe8661ac6427a392a08faa95e8edab1ea7fb98c5f8dac6a6f.css integrity="sha256-//6EK8AA3R/oZhrGQno5Kgj6qV6O2rHqf7mMX42sam8="><link rel=stylesheet href=/main.min.34a34d86b8aae11b989d80a1626629c053029d012419a1993cfb6c12ea175737.css integrity="sha256-NKNNhriq4RuYnYChYmYpwFMCnQEkGaGZPPtsEuoXVzc="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/home-automation/>Home Automation</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><div class=entry-content></div><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2017/12/07/aoc-2017-day-7-tree/ class=clearfix>AoC 2017 Day 7: Tree</a></h1><div class=entry-meta><span class=entry-date>2017-12-07</span></div></header><div class=entry-content><h3 id=source-recursive-circus>Source: <a href=http://adventofcode.com/2017/day/7 target=_blank rel=noopener>Recursive Circus</a></h3><blockquote><p><strong>Part 1:</strong> A tree is defined as such:</p></blockquote><blockquote><ul><li><code>node (weight) -> child1, child2, ...</code></li><li><code>node (weight)</code></li></ul></blockquote><blockquote><p>Where a <code>node</code> always has a weight, but may or may not have child nodes.</p></blockquote><blockquote><p>What is the name of the root <code>node</code> of the tree (the node without a parent)?</p></blockquote><p><a href=/2017/12/07/aoc-2017-day-7-tree/>read more...</a></p></div><hr></article><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2017/12/06/aoc-2017-day-6-tightrope/ class=clearfix>AoC 2017 Day 6: Tightrope</a></h1><div class=entry-meta><span class=entry-date>2017-12-06</span></div></header><div class=entry-content><h3 id=source-memory-reallocation>Source: <a href=http://adventofcode.com/2017/day/6 target=_blank rel=noopener>Memory Reallocation</a></h3><blockquote><p><strong>Part 1:</strong> Start with <code>n</code> stacks of different sizes. Take the largest block and distribute its items starting with <code>n+1</code> and looping around. How many iterations of this does it take before you see a state you&rsquo;ve seen before?</p></blockquote><p><a href=/2017/12/06/aoc-2017-day-6-tightrope/>read more...</a></p></div><hr></article><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2017/12/05/aoc-2017-day-5-21-jump-street/ class=clearfix>AoC 2017 Day 5: 21 Jump Street</a></h1><div class=entry-meta><span class=entry-date>2017-12-05</span></div></header><div class=entry-content><h3 id=source-a-maze-of-twisty-trampolines-all-alike>Source: <a href=http://adventofcode.com/2017/day/5 target=_blank rel=noopener>A Maze of Twisty Trampolines, All Alike</a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></h3><blockquote><p><strong>Part 1:</strong> Interpret a program made entirely of jump instructions: each instruction is how many steps to jump. Any time you use an instruction to jump, increase the value of that jump by 1 for next time. How many total steps does it take to escape (jump out of bounds)?</p></blockquote><p><a href=/2017/12/05/aoc-2017-day-5-21-jump-street/>read more...</a></p></div><hr></article><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2017/12/04/aoc-2017-day-4-password-validator/ class=clearfix>AoC 2017 Day 4: Password Validator</a></h1><div class=entry-meta><span class=entry-date>2017-12-04</span></div></header><div class=entry-content><h3 id=source-high-entropy-passphrases>Source: <a href=http://adventofcode.com/2017/day/4 target=_blank rel=noopener>High-Entropy Passphrases</a></h3><blockquote><p><strong>Part 1:</strong> Given a list of <a href=https://en.wikipedia.org/wiki/passphrases>passphrases</a>, count how many contain no duplicate words.</p></blockquote><p><a href=/2017/12/04/aoc-2017-day-4-password-validator/>read more...</a></p></div><hr></article><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2017/12/03/aoc-2017-day-3-spiraly/ class=clearfix>AoC 2017 Day 3: Spiraly</a></h1><div class=entry-meta><span class=entry-date>2017-12-03</span></div></header><div class=entry-content><h3 id=source-spiral-memory>Source: <a href=http://adventofcode.com/2017/day/3 target=_blank rel=noopener>Spiral Memory</a></h3><blockquote><p><strong>Part 1:</strong> Create a grid in a spiral pattern like so:</p></blockquote><blockquote><pre tabindex=0><code></code></pre></blockquote><p>17 16 15 14 13
18 5 4 3 12
19 6 1 2 11
20 7 8 9 10
21 22 23&mdash;> &mldr;</p><pre tabindex=0><code>
&gt; Given a specific index, what is the [[wiki:Manhattan Distance]]() from that point to the origin (`1`)?





This same sort of structure comes up from time to time in [Project Euler](/programming/sources/project-euler/) as well. I&#39;m going to guess we&#39;ll see this again. Seems like a fine contender for a [library function](https://blog.jverkamp.com/2017/12/01/aoc-2017-library-functions/).

Specifically, we&#39;ll create a `SpiralGrid` class that can be used to automatically generate as large of a grid as we want lazily (it won&#39;t generate more of the grid until we need it).

```python
class SpiralGrid():
    &#39;&#39;&#39;
    Generate a spiral grid that looks like this:
    17  16  15  14  13
    18   5   4   3  12
    19   6   1   2  11
    20   7   8   9  10
    21  22  23---&gt; ...

    The point (0, 0) is 1. x runs left to right, y from top to bottom. So the
    point 12 is at (2, -1).
    &#39;&#39;&#39;

    def __init__(self):
        self._indexes = {}
        self._points = {}

        def make_spiral():
            index = 1
            (x, y) = (0, 0)

            yield index, (x, y)

            # Build the layers outwards
            for layer in itertools.count(1):
                # Each layer starts by going right and down one (we&#39;ll go back up before yielding)
                x += 1
                y += 1

                # Go through the four sides, up then left then down then right
                # Repeat 2*layer times per side
                for xd, yd in [(0, -1), (-1, 0), (0, 1), (1, 0)]:
                    for step in range(2 * layer):
                        index += 1
                        x += xd
                        y += yd
                        yield index, (x, y)

        self._generator = make_spiral()

    def __getitem__(self, key):
        &#39;&#39;&#39;
        Given an index or point return the other.

        If we&#39;re given an integer, it&#39;s an index, return the point.
        If we&#39;re given a tuple, it&#39;s a point, return the index.

        Either way, generate as much data as we need and don&#39;t have.
        &#39;&#39;&#39;

        if isinstance(key, int):
            field = self._indexes
        elif isinstance(key, str):
            key = int(key)
            field = self._indexes
        elif isinstance(key, tuple) and len(key) == 2:
            field = self._points
        else:
            raise ValueError

        while key not in field:
            index, point = next(self._generator)
            self._indexes[index] = point
            self._points[point] = index

        return field[key]
</code></pre><p>The neat part here is using a <code><a href="https://docs.python.org/3/search.html?q=generator">generator</a></code>
to generate the coordinates of points. That way, we can run the generator until we find the point we&rsquo;re looking for and cache any results for later.</p><p><a href=/2017/12/03/aoc-2017-day-3-spiraly/>read more...</a></p></div><hr></article><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2017/12/02/aoc-2017-day-2-check-it/ class=clearfix>AoC 2017 Day 2: Check It</a></h1><div class=entry-meta><span class=entry-date>2017-12-02</span></div></header><div class=entry-content><h3 id=source-corruption-checksum>Source: <a href=http://adventofcode.com/2017/day/2 target=_blank rel=noopener>Corruption Checksum</a></h3><blockquote><p><strong>Part 1:</strong> The checksum of a list of numbers is the difference between the largest and smallest number in the row. What is the sum of checksums of a file containing many such lists?</p></blockquote><p><a href=/2017/12/02/aoc-2017-day-2-check-it/>read more...</a></p></div><hr></article><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2017/12/01/aoc-2017-day-1-ahctpat/ class=clearfix>AoC 2017 Day 1: Ahctpat</a></h1><div class=entry-meta><span class=entry-date>2017-12-01</span></div></header><div class=entry-content><h3 id=source-inverse-captcha>Source: <a href=http://adventofcode.com/2017/day/1 target=_blank rel=noopener>Inverse Captcha</a></h3><blockquote><p><strong>Part 1:</strong> Given a number, what is the sum of pairs of digits that match (wrapping the last digit around to the first)?</p></blockquote><p><a href=/2017/12/01/aoc-2017-day-1-ahctpat/>read more...</a></p></div><hr></article><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2017/12/01/aoc-2017-library-functions/ class=clearfix>AoC 2017: Library Functions</a></h1><div class=entry-meta><span class=entry-date>2017-12-01</span></div></header><div class=entry-content><p>As mentioned in the <a href=https://blog.jverkamp.com/2018/01/08/advent-of-code-2017/>main post</a>, I&rsquo;m structuring my solutions a bit differently this year. Rather than repeating the same relatively lengthy header in each function, we&rsquo;re going to have a few shared files that can be imported or used for every problem.</p><p><a href=/2017/12/01/aoc-2017-library-functions/>read more...</a></p></div><hr></article><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2016/12/25/aoc-2016-day-25-assembunny3/ class=clearfix>AoC 2016 Day 25: Assembunny3</a></h1><div class=entry-meta><span class=entry-date>2016-12-25</span></div></header><div class=entry-content><h3 id=source-clock-signal>Source: <a href=http://adventofcode.com/2016/day/25 target=_blank rel=noopener>Clock Signal</a></h3><blockquote><p><strong>Part 1:</strong> Take the <a href=https://blog.jverkamp.com/2016/12/12/aoc-2016-day-12-assembunny/>assembunny interpreter from day 12</a> and add one new instruction (out <code>x</code>) which transmits the value <code>x</code> (either an integer or register). Find the lowest value we can initialize <code>a</code> to so that the <code>out</code>put signals form an infinite repeating pattern of <code>0</code>, <code>1</code>, <code>0</code>, <code>1</code>, &mldr;</p></blockquote><p><a href=/2016/12/25/aoc-2016-day-25-assembunny3/>read more...</a></p></div><hr></article><article class=li><header><h1 class=entry-title><a href=https://blog.jverkamp.com/2016/12/24/aoc-2016-day-24-venti/ class=clearfix>AoC 2016 Day 24: Venti</a></h1><div class=entry-meta><span class=entry-date>2016-12-24</span></div></header><div class=entry-content><h3 id=source-air-duct-spelunking>Source: <a href=http://adventofcode.com/2016/day/24 target=_blank rel=noopener>Air Duct Spelunking</a></h3><blockquote><p><strong>Part 1:</strong> Given a map of the form:</p></blockquote><blockquote><pre tabindex=0><code></code></pre></blockquote><p>###########
#0.1&mldr;..2#
#.#######.#
#4&mldr;&mldr;.3#
###########</p><pre tabindex=0><code>
&gt; Find the shortest route to visit each of the points, starting at `0`.





First, we want to take the map that we were given and simplify it. We know that we want to visit all of the points, so lets take the original map and turn it just into a map of distances between any two named points.

```python
walls = set()
name_to_point = {}
point_to_name = {}

# Load the input file into a set of walls and the location of points of interest
for y, line in enumerate(fileinput.input(args.files)):
    for x, c in enumerate(line.strip()):
        if c.isdigit():
            name_to_point[int(c)] = (x, y)
            point_to_name[(x, y)] = int(c)

        elif c == &#39;#&#39;:
            walls.add((x, y))

# Dynamically fill a distance map to a given point
def distances_to(name):
    to_scan = queue.Queue()
    to_scan.put((name_to_point[name], 0))

    scanned = set()

    result = {}

    while not to_scan.empty():
        point, distance = to_scan.get()

        if point in point_to_name:
            name = point_to_name[point]
            if name not in result:
                result[name] = distance

        if point in scanned:
            continue
        else:
            scanned.add(point)

        x, y = point
        for xd, yd in [(-1, 0), (1, 0), (0, -1), (0, 1)]:
            neighbor = (x + xd, y + yd)
            if neighbor not in walls:
                to_scan.put((neighbor, distance + 1))

    return result

distances = {
    name: distances_to(name)
    for name in name_to_point
}
names = list(sorted(name_to_point.keys()))
</code></pre><p>The first part loads the map and the second part will flood fill out from each point. This will find the minimum distance from each named point to the given one, somewhat simplifying the problem.</p><p><a href=/2016/12/24/aoc-2016-day-24-venti/>read more...</a></p></div><hr></article><nav id=pagination-navigation role=navigation><ul class="pagination pagination-default"><li class=page-item><a href=/2025/02/19/python/ aria-label=First class=page-link role=button><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/2025/02/19/python/page/8/ aria-label=Previous class=page-link role=button><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a href=/2025/02/19/python/page/7/ aria-label="Page 7" class=page-link role=button>7</a></li><li class=page-item><a href=/2025/02/19/python/page/8/ aria-label="Page 8" class=page-link role=button>8</a></li><li class="page-item active"><a aria-current=page aria-label="Page 9" class=page-link role=button>9</a></li><li class=page-item><a href=/2025/02/19/python/page/10/ aria-label="Page 10" class=page-link role=button>10</a></li><li class=page-item><a href=/2025/02/19/python/page/11/ aria-label="Page 11" class=page-link role=button>11</a></li><li class=page-item><a href=/2025/02/19/python/page/10/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/2025/02/19/python/page/19/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></nav></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>