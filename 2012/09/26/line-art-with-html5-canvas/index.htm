<!DOCTYPE html>
<html>
<head>
        
        

        <title>Line art with an HTML5 canvas | jverkamp.com | John-Paul Verkamp</title>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css" />
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.css" />
        <script src="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.js"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.9/jquery.transit.min.js"></script>

        <!-- Highlight.js for syntax highlighting -->
        <link rel="stylesheet" href="/highlight/styles/tomorrow-night.css" />
        <script src="/highlight/highlight.pack.js"></script>

        <!-- MathJax for LaTeX support -->
        <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- nanoGallery for Flickr Galleries -->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/css/themes/light/nanogallery_light.css" />
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/jquery.nanogallery.min.js"></script>

        <!-- Any custom CSS or JS that I've written; this should be kept minimal -->
        <link rel="stylesheet" href="/custom.css" />
        <script src="/custom.js"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="http://blog.jverkamp.com/feed/" />
</head>
<body>
        <header class="container">
        <nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://blog.jverkamp.com"><span style="color: green;">jv</span>erkamp.com</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav"><li class="dropdown"><a href="http://blog.jverkamp.com/category/archives" class="dropdown-toggle">Archives<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/archives/2004">2004</a></li><li><a href="http://blog.jverkamp.com/category/archives/2005">2005</a></li><li><a href="http://blog.jverkamp.com/category/archives/2006">2006</a></li><li><a href="http://blog.jverkamp.com/category/archives/2007">2007</a></li><li><a href="http://blog.jverkamp.com/category/archives/2008">2008</a></li><li><a href="http://blog.jverkamp.com/category/archives/2009">2009</a></li><li><a href="http://blog.jverkamp.com/category/archives/2010">2010</a></li><li><a href="http://blog.jverkamp.com/category/archives/2011">2011</a></li><li><a href="http://blog.jverkamp.com/category/archives/2012">2012</a></li><li><a href="http://blog.jverkamp.com/category/archives/2013">2013</a></li><li><a href="http://blog.jverkamp.com/category/archives/2014">2014</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/other" class="dropdown-toggle">Other<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/other/board-game-reviews">Board Game Reviews</a></li><li><a href="http://blog.jverkamp.com/category/other/cooking">Cooking</a></li><li><a href="http://blog.jverkamp.com/category/other/movie-reviews">Movie Reviews</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/photography" class="dropdown-toggle">Photography<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/photography/dp-challenge">DP Challenge</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosets">Photosets</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosynth">Photosynth</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/programming" class="dropdown-toggle">Programming<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/programming/by-language">By Language</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-project">By Project</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-source">By Source</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/programming/libraries">Libraries</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/research" class="dropdown-toggle">Research<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/research/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/research/publications">Publications</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/writing" class="dropdown-toggle">Writing<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/writing/by-genre">By Genre</a></li><li><a href="http://blog.jverkamp.com/category/writing/nanowrimo">NaNoWriMo</a></li><li><a href="http://blog.jverkamp.com/category/writing/novels">Novels</a></li><li><a href="http://blog.jverkamp.com/category/writing/other">Other</a></li><li><a href="http://blog.jverkamp.com/category/writing/short-stories">Short Stories</a></li></ul></li></ul>

      <form action="http://www.google.com/search" method="get" onSubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input name="q" type="hidden" />
          <input name="qfront" type="text" class="form-control" placeholder="Search" />
          <button type="submit" class="btn btn-default" value="Search">Search</button>
        </p>
      </form>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
        </header>

        <article class="container">
                <header>
                        <h1 class="entry-title">Line art with an HTML5 canvas</h1>

                        <div class="entry-meta">
                                <span class="posted-on"><time class="entry-date" datetime="2012-09-26"><span class="year">2012</span> <span class="month">Sept</span> <span class="day">26</span></time></span>
                                <span class="tags"><ul class="tag-list list-inline"><li><a href="http://blog.jverkamp.com/category/programming/by-language/html">HTML</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/mathematics">Mathematics</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-language/javascript">JavaScript</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/web-development">Web Development</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li></ul></span>
                        </div>

                        <hr />
                </header>
                <div class="entry-content">
                        <p>Let's play with <a href="http://www.w3schools.com/html/html5_canvas.asp" title="W3 Schools: HTML5 canvas">HTML5 canvas</a> elements!</p>
<p>Basically, I want to draw some simple line diagrams. Go from top to bottom on one side while going from right to left along the top or bottom. It sounds complicated, but perhaps it's easier to explain with a drawing:</p>
<!--more-->
<canvas id="canvas0" width="200" height="200" style="border: 1px solid black;"></canvas>
<p>The code for that is actually surprisingly simple:</p>
<pre class="javascript"><code>jQuery(function($) {
  var c = $("#canvas0")[0].getContext('2d');
  var w = $("#canvas0").width();
  var h = $("#canvas0").height();

  c.lineWidth = 1;
  c.strokeStyle = col;

  c.beginPath();
  for (var i = 0; i &lt;= d; i++) {
    c.moveTo(0, i * h / d);
    c.lineTo(w - i * w / d, 0);
  }
  c.stroke();
}</code></pre>
<p>That was easy enough, but what if we want to generalize out to something more like these:</p>
<canvas id="canvas1" width="200" height="200" style="border: 1px solid black;"></canvas> <canvas id="canvas2" width="200" height="200" style="border: 1px solid black;"></canvas>
<p>What additional variables do we want? It would be nice to be able to draw how many lines we're going to use, the rectangle we're drawing in (x, y, width, height), the color of the line, and the orientation. Combine all of that and you have something like this:</p>
<pre class="javascript"><code>function drawGrid(id, x, y, w, h, d, col, which) {
  var c = $("#canvas")[0].getContext('2d');

  c.lineWidth = 1;
  c.strokeStyle = col;

  c.beginPath();
  for (var i = 0; i &lt;= d; i++) {
    if (which == "tl") {
          c.moveTo(x, y + i * h / d);
          c.lineTo(x + w - i * w / d, y);
    } else if (which == "tr") {
          c.moveTo(x + w, y + i * h / d);
          c.lineTo(x + i * w / d, y + 0);
    } else if (which == "bl") {
          c.moveTo(x, y + i * h / d);
          c.lineTo(x + i * w / d, y + h);
    } else if (which == "br") {
          c.moveTo(x + w, y + i * h / d);
          c.lineTo(x + w - i * w / d, y + h);
    }
  }
  c.stroke();
}</code></pre>
<p>Here is the source for the more complicated images:</p>
<pre class="javascript"><code>// outer border
drawGrid("#canvas1", 0, 0, 100, 100, 25, "green", "tl");
drawGrid("#canvas1", 100, 0, 100, 100, 25, "blue", "tr");
drawGrid("#canvas1", 0, 100, 100, 100, 25, "green", "bl");
drawGrid("#canvas1", 100, 100, 100, 100, 25, "blue", "br");

// inner border
drawGrid("#canvas2", 0, 0, 100, 100, 25, "red", "br");
drawGrid("#canvas2", 100, 0, 100, 100, 25, "green", "bl");
drawGrid("#canvas2", 0, 100, 100, 100, 25, "blue", "tr");
drawGrid("#canvas2", 100, 100, 100, 100, 25, "black", "tl");</code></pre>
<p>Now the fun part, you can play with the settings:</p>
<table class="table table-striped">
<tr>
  <td>left</td>
  <td><input id="drawGrid-x" name="drawGrid-x" style="width: 200px;" value="0" /></td>
  <td class="warning" id="drawGrid-x-warning"></td>
</tr>
<tr>
  <td>top</td>
  <td><input id="drawGrid-y" name="drawGrid-y" style="width: 200px;" value="0" /></td>
  <td class="warning" id="drawGrid-y-warning"></td>
</tr>
<tr>
  <td>width</td>
  <td><input id="drawGrid-width" name="drawGrid-width" style="width: 200px;" value="400" /></td>
  <td class="warning" id="drawGrid-width-warning"></td>
</tr>
<tr>
  <td>height</td>
  <td><input id="drawGrid-height" name="drawGrid-height" style="width: 200px;" value="400" /></td>
  <td class="warning" id="drawGrid-height-warning"></td>
</tr>
<tr>
  <td>lines</td>
  <td><input id="drawGrid-lines" name="drawGrid-lines" style="width: 200px;" value="10" /></td>
  <td class="warning" id="drawGrid-lines-warning"></td>
</tr>
<tr>
  <td>color</td>
  <td><input id="drawGrid-color" name="drawGrid-color" style="width: 200px;" value="black" /></td>
  <td class="warning" id="drawGrid-color-warning"></td>
</tr>
<tr>
  <td>corner</td>
  <td>
    <select id="drawGrid-which" name="drawGrid-which">
      <option value="tl">top left</option>
      <option value="tr">top right</option>
      <option value="bl">bottom left</option>
      <option value="br">bottom right</option>
    </select>
  </td>
  <td class="warning" id="drawGrid-which-warning"></td>
</tr>
</table>
<p><button id="drawGrid">Draw</button> <button id="clearGrid">Clear</button> <button id="saveGrid">Save</button></p>
<canvas id="canvas3" width="400" height="400" style="border: 1px solid black;"></canvas>
<p>If you'd like to download the source, you can do so here: <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/html5-line-art.js" title="html5-line-art source">html5-line-art</a></p>
<style>
.warning { color: red; }
</style>
<script type="text/javascript">
// id: canvas to draw on
// d: divisions
// col: the color to draw with
// which: the corner -- tl, tr, bl, br
jQuery(function($) {
  function drawGrid(id, x, y, w, h, d, col, which) {
    var c = $(id)[0].getContext('2d');

    c.lineWidth = 1;
    c.strokeStyle = col;

    c.beginPath();
    for (var i = 0; i <= d; i++) {
      if (which == "tl") {
        c.moveTo(x, y + i * h / d);
        c.lineTo(x + w - i * w / d, y);
      } else if (which == "tr") {
        c.moveTo(x + w, y + i * h / d);
        c.lineTo(x + i * w / d, y + 0);
      } else if (which == "bl") {
        c.moveTo(x, y + i * h / d);
        c.lineTo(x + i * w / d, y + h);
      } else if (which == "br") {
        c.moveTo(x + w, y + i * h / d);
        c.lineTo(x + w - i * w / d, y + h);
      }
    }
    c.stroke();
  }

  drawGrid("#canvas0", 0, 0, 200, 200, 20, "black", "tl");

  drawGrid("#canvas1", 0, 0, 100, 100, 25, "green", "tl");
  drawGrid("#canvas1", 100, 0, 100, 100, 25, "blue", "tr");
  drawGrid("#canvas1", 0, 100, 100, 100, 25, "green", "bl");
  drawGrid("#canvas1", 100, 100, 100, 100, 25, "blue", "br");

  drawGrid("#canvas2", 0, 0, 100, 100, 25, "red", "br");
  drawGrid("#canvas2", 100, 0, 100, 100, 25, "green", "bl");
  drawGrid("#canvas2", 0, 100, 100, 100, 25, "blue", "tr");
  drawGrid("#canvas2", 100, 100, 100, 100, 25, "black", "tl");

  function doDraw() {
    var failed = false;
    $(".warning").empty();

    var x = parseInt($("#drawGrid-x").val());
    if (isNaN(x) || x < 0 || x > 400) {
      $("#drawGrid-x-warning").text("Must be in the range [0, 400]");
      failed = true;
    }

    var y = parseInt($("#drawGrid-y").val());
    if (isNaN(y) || y < 0 || y > 400) {
      $("#drawGrid-y-warning").text("Must be in the range [0, 400]");
      failed = true;
    }

    var width = parseInt($("#drawGrid-width").val());
    if (isNaN(width) || width < 0 || width > 400) {
      $("#drawGrid-width-warning").text("Must be in the range [0, 400]");
      failed = true;
    }

    var height = parseInt($("#drawGrid-height").val());
    if (isNaN(height) || height < 0 || height > 400) {
      $("#drawGrid-height-warning").text("Must be in the range [0, 400]");
      failed = true;
    }

        var lines = parseInt($("#drawGrid-lines").val());
    if (isNaN(lines) || lines < 2 || lines > 100) {
      $("#drawGrid-lines-warning").text("Must be in the range [2, 100]");
      failed = true;
    }

    var color = $("#drawGrid-color").val();
    if (color == "")
          color = "black";

        var which = $("#drawGrid-which").val();
        if (!($.inArray(which, new Array("tl", "tr", "bl", "br"))))
          which = "tl";

    if (!failed) {
      drawGrid("#canvas3", x, y, width, height, lines, color, which);
    }
  }
  $("#drawGrid").click(doDraw);

  function doClear() {
    var c = $("#canvas3")[0].getContext('2d');
    var w = $("#canvas3").width();
    var h = $("#canvas3").height();
    c.clearRect(0, 0, w, h);
  }
  $("#clearGrid").click(doClear);

  function doSave() {
    window.open(jQuery("#canvas3")[0].toDataURL());
  }
  $("#saveGrid").click(doSave);
});
</script>
                </div>
                <div class="entry-footnotes">
                        <div id="footnotes"><ol></ol></div>
                </div>

                <div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = "jverkamp";
var disqus_title = "Line art with an HTML5 canvas";
var disqus_url = "http://blog.jverkamp.com/2012/09/26/line-art-with-html5-canvas/";
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </article>

        <footer class="container" role="contentinfo">
                <nav class="navbar navbar-default" role="navigation"><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2012/09/26/a-bit-of-a-mixup">← A bit of a mixup</a></li><li><a href="http://blog.jverkamp.com/category/archives">Archives</a></li><li><a href="http://blog.jverkamp.com/2012/09/27/html5-bugs">HTML5 Bugs →</a></li></ul><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2012/09/24/n-queens-in-18-lines-of-code">← n-queens in 18 lines of code</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li><li><a href="http://blog.jverkamp.com/2012/09/27/html5-bugs">HTML5 Bugs →</a></li></ul></nav>

                <div class="legal">
                        <a href="http://blog.jverkamp.com/feed/atom.xml">feed <img style="border: 0;" src="http://blog.jverkamp.com/rss.png" /></a><br />
                        All posts unless otherwise mentioned are licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" /></a><br />
                        Any source code unless otherwise mentioned is licensed under the <a href="http://directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
                </div>
        </footer>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-53688146-1', 'auto');
ga('send', 'pageview');
</script>
</body>
</html>