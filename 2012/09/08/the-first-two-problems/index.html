<!doctype html><html><head><title>The First Two Problems â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_17422284542669262002.min.834c1e2313951f0c25b90152fe8b62250eab4a2e8cbd2560fa1a1cdc91c71733.js integrity="sha256-g0weIxOVHwwluQFS/otiJQ6rSi6MvSVg+hoc3JHHFzM=" defer></script><script src=/jquery.fancybox_16245765822111608191.min.a8e11addf4349ee2ca5045f7f3cbf1febbf2c3a2840be2143ea69539c10f8c7f.js integrity="sha256-qOEa3fQ0nuLKUEX388vx/rvyw6KEC+IUPqaVOcEPjH8=" defer></script><script src=/katex_17296078054267651618.min.4a06464d8d6f8358d8896de62b53b5a89205d335dfd8c5b6b27edd7c039ae9d8.js integrity="sha256-SgZGTY1vg1jYiW3mK1O1qJIF0zXf2MW2sn7dfAOa6dg=" defer></script><script src=/auto-render_14944144240389301023.min.e694d9d5eae2917984179683ead27b998784a81398e8836c369373d2c67fc32a.js integrity="sha256-5pTZ1erikXmEF5aD6tJ7mYeEqBOY6INsNpNz0sZ/wyo=" defer></script><script src=/bigfoot_28293813221957978.min.af671f08986f0a2267c5a0cb2748b005489e47fa25f55479b200e2a563d23022.js integrity="sha256-r2cfCJhvCiJnxaDLJ0iwBUieR/ol9VR5sgDipWPSMCI=" defer></script><script src=/mermaid_9520146763733687737.min.a17078917a4403310cd19178939257b706fb5e1da76167c9f4a6d2123c9d59c4.js integrity="sha256-oXB4kXpEAzEM0ZF4k5JXtwb7Xh2nYWfJ9KbSEjydWcQ=" defer></script><script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script><link rel=stylesheet href=/katex_13658330645258633971.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_8781527669040159104.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_5330465509389191777.min.7420a1602c62a85d4b50881c1d8ce42f72c049dc2b097d440696425d6e54bb1e.css integrity="sha256-dCChYCxiqF1LUIgcHYzkL3LASdwrCX1EBpZCXW5Uux4="><link rel=stylesheet href=/css_1846377409604050217.min.fffe842bc000dd1fe8661ac6427a392a08faa95e8edab1ea7fb98c5f8dac6a6f.css integrity="sha256-//6EK8AA3R/oZhrGQno5Kgj6qV6O2rHqf7mMX42sam8="><link rel=stylesheet href=/main.min.61064b3964637440ee1c28e577377fcf238ddc5939020ef8b3c3cae543898111.css integrity="sha256-YQZLOWRjdEDuHCjldzd/zyON3Fk5Ag74s8PK5UOJgRE="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/home-automation/>Home Automation</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>The First Two Problems</h1><div class=entry-meta><span class=entry-date>2012-09-08</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2012/08/31/wombat-ide-the-return-of-screen-sharing/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/scheme>Scheme</a><a href=https://blog.jverkamp.com/2012/09/09/generating-voronoi-diagrams/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2012/08/30/random-access-lists/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/programming-praxis>Programming Praxis</a><a href=https://blog.jverkamp.com/2012/09/19/a-piece-of-the-abc-conjecture/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2012/09/06/generating-epubs/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2012/09/09/generating-voronoi-diagrams/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2012/09/07/a-sea-of-stars-ch.-4-troubleshooting/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2012/09/09/generating-voronoi-diagrams/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>Anything worth doing is worth over doing, right? This time we have another two problems from Programming Praxis, aptly title &ldquo;<a href=https://blog.jverkamp.com/2012/04/13/wombat-ide-turtle-graphics/>Turtle Graphics</a> instead of just printing the characters. &#x1f604;</p><p>As always if you would like to download the entire source code, you can do so <a href=https://github.com/jpverkamp/small-projects/blob/master/blog/first-two-problems.ss target=_blank rel=noopener>here</a>. Granted, you&rsquo;ll almost surely need <a href=https://github.com/jpverkamp/small-projects/blob/master/blog/first-two-problems.ss target=_blank rel=noopener>source code</a>.</p><p>Now the big question is how do you actually draw those? It turns out, it&rsquo;s not so bad. Here&rsquo;s the first function which takes a vector of point lists (like <code>digits</code> above) and draws the list at a given point with the given turtle:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; using turtle t, draw the digit/letter with index i from table chars</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; with the top left at r, c</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; reset the turtle to wherever it was after that</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>draw-thing</span> chars t r c i)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>block</span> t
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>let </span>([ps (vector-ref chars i)])
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>lift-pen!</span> t)
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>move-to!</span> t (+ c (cadar ps)) (+ r (caar ps)))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>drop-pen!</span> t)
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>let </span>loop ([ps (cdr ps)])
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>unless</span> (null? ps)
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>move-to!</span> t (+ c (cadar ps)) (+ r (caar ps)))
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>loop</span> (cdr ps)))))))
</span></span></code></pre></div><p>Pretty straight forward. Save the state, lift the pen to move to the first point, and then recursively draw lines from point to point. Now what if we want to use that to draw a number? Still pretty straight forward. Just loop through the digits, drawing them one at a time. The hardest part was actually formatting them from the right so that the standard <code>mod</code>/<code>div</code> method for extracting digits would work.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; using turtle t, draw a number n with the top left at r, c</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; reset the turtle to whever it was after that</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>draw-number</span> t r c n)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>block</span> t
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>if </span>(= n <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>draw-thing</span> digits t r (+ c <span style=color:#ae81ff>10</span>) <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        (<span style=color:#66d9ef>let </span>([? (&lt; n <span style=color:#ae81ff>0</span>)])
</span></span><span style=display:flex><span>          (<span style=color:#66d9ef>let </span>loop ([c (+ c (* <span style=color:#ae81ff>10</span> (<span style=color:#a6e22e>digits-in</span> n)) <span style=color:#ae81ff>1</span>)]
</span></span><span style=display:flex><span>                     [n (abs n)])
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>when</span> (&gt; n <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>              (<span style=color:#a6e22e>draw-thing</span> digits t r c (<span style=color:#a6e22e>mod</span> n <span style=color:#ae81ff>10</span>))
</span></span><span style=display:flex><span>              (<span style=color:#a6e22e>loop</span> (- c <span style=color:#ae81ff>10</span>) (<span style=color:#a6e22e>div</span> n <span style=color:#ae81ff>10</span>)))
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>when</span> (<span style=color:#66d9ef>and </span>? (= n <span style=color:#ae81ff>0</span>))
</span></span><span style=display:flex><span>              (<span style=color:#a6e22e>draw-thing</span> digits t r c <span style=color:#ae81ff>10</span>)))))))
</span></span></code></pre></div><p>In case you were wondering, here&rsquo;s the function that will tell me how many characters are in a number, including an extra one for the <code>-</code> in negative numbers:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; helper to calculate how wide a number is (add one for negative numbers)</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>digits-in</span> n)
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>if </span>(= n <span style=color:#ae81ff>0</span>) 
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>      (+ (<span style=color:#66d9ef>if </span>(&lt; n <span style=color:#ae81ff>0</span>) <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        (inexact-&gt;exact (+ <span style=color:#ae81ff>1</span> (floor (log (abs n) <span style=color:#ae81ff>10</span>)))))))
</span></span></code></pre></div><p>After getting numbers working, drawing strings was much easier. Particularly because you can directly access the letters from left to right with <code>string-ref</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; using turtle t, draw a string s with the top left at r, c</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; reset the turtle to whever it was after that</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>draw-string</span> t r c s)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>block</span> t
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>for-each</span>
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>lambda </span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>unless</span> (eq? <span style=color:#e6db74>#\space</span> (string-ref s i))
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>draw-thing</span> letters t r (+ c (* i <span style=color:#ae81ff>10</span>))
</span></span><span style=display:flex><span>            (- (char-&gt;integer (char-upcase (string-ref s i))) <span style=color:#ae81ff>65</span>))))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>iota</span> (string-length s)))))
</span></span></code></pre></div><p>And that&rsquo;s it. Well, except for the minor fact that we haven&rsquo;t actually solved the problem yet. &#x1f604;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; draw a temperature table</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; (draw-image (make-temperature-table))</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>make-temperature-table</span>)
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>let </span>([t (<span style=color:#a6e22e>hatch</span>)])
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>draw-string</span> t <span style=color:#ae81ff>15</span> <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#34; F&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>draw-string</span> t <span style=color:#ae81ff>15</span> <span style=color:#ae81ff>50</span> <span style=color:#e6db74>&#34; C&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>for-each</span>
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>lambda </span>(<span style=color:#a6e22e>row</span>)
</span></span><span style=display:flex><span>        (<span style=color:#66d9ef>let* </span>([f (* row <span style=color:#ae81ff>20</span>)]
</span></span><span style=display:flex><span>               [c (inexact-&gt;exact (round (/ (* (- f <span style=color:#ae81ff>32</span>) <span style=color:#ae81ff>5</span>) <span style=color:#ae81ff>9</span>)))])
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>draw-number</span> t (* (- row) <span style=color:#ae81ff>15</span>) <span style=color:#ae81ff>0</span> f)
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>draw-number</span> t (* (- row) <span style=color:#ae81ff>15</span>) <span style=color:#ae81ff>50</span> c)))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>iota</span> <span style=color:#ae81ff>16</span>))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>turtle-&gt;image</span> t)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; draw hello world</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; (draw-image (hello-world))</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>hello-world</span>)
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>let </span>([t (<span style=color:#a6e22e>hatch</span>)])
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>draw-string</span> t <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#34;Hello World&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>turtle-&gt;image</span> t)))
</span></span></code></pre></div><p>Much better.</p><p>That was actually really fun to do. Perhaps I&rsquo;ll see what other <del>trouble</del> fun I can get into with it.</p><p>If you would like to download the entire source code, you can do so <a href=https://blog.jverkamp.com/2012/04/13/wombat-ide-turtle-graphics/>Turtle Graphics</a>).</p><p>As a random side note, it&rsquo;s amusing to watch the turtles actually going about the drawing. Try turning on <code>(live-display #t)</code>.</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>