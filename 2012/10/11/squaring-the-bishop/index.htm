<!DOCTYPE html>
<html>
<head>
        
        

        <title>Squaring the Bishop | jverkamp.com | John-Paul Verkamp</title>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css" />
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.css" />
        <script src="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.js"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.9/jquery.transit.min.js"></script>

        <!-- Highlight.js for syntax highlighting -->
        <link rel="stylesheet" href="/highlight/styles/tomorrow-night.css" />
        <script src="/highlight/highlight.pack.js"></script>

        <!-- MathJax for LaTeX support -->
        <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- nanoGallery for Flickr Galleries -->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/css/themes/light/nanogallery_light.css" />
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/jquery.nanogallery.min.js"></script>

        <!-- Any custom CSS or JS that I've written; this should be kept minimal -->
        <link rel="stylesheet" href="/custom.css" />
        <script src="/custom.js"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
        <header class="container">
        <nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://blog.jverkamp.com"><span style="color: green;">jv</span>erkamp.com</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav"><li class="dropdown"><a href="http://blog.jverkamp.com/category/archives" class="dropdown-toggle">Archives<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/archives/2004">2004</a></li><li><a href="http://blog.jverkamp.com/category/archives/2005">2005</a></li><li><a href="http://blog.jverkamp.com/category/archives/2006">2006</a></li><li><a href="http://blog.jverkamp.com/category/archives/2007">2007</a></li><li><a href="http://blog.jverkamp.com/category/archives/2008">2008</a></li><li><a href="http://blog.jverkamp.com/category/archives/2009">2009</a></li><li><a href="http://blog.jverkamp.com/category/archives/2010">2010</a></li><li><a href="http://blog.jverkamp.com/category/archives/2011">2011</a></li><li><a href="http://blog.jverkamp.com/category/archives/2012">2012</a></li><li><a href="http://blog.jverkamp.com/category/archives/2013">2013</a></li><li><a href="http://blog.jverkamp.com/category/archives/2014">2014</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/other" class="dropdown-toggle">Other<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/other/board-game-reviews">Board Game Reviews</a></li><li><a href="http://blog.jverkamp.com/category/other/cooking">Cooking</a></li><li><a href="http://blog.jverkamp.com/category/other/movie-reviews">Movie Reviews</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/photography" class="dropdown-toggle">Photography<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/photography/dp-challenge">DP Challenge</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosets">Photosets</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosynth">Photosynth</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/programming" class="dropdown-toggle">Programming<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/programming/by-language">By Language</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-project">By Project</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-source">By Source</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/programming/libraries">Libraries</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/research" class="dropdown-toggle">Research<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/research/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/research/publications">Publications</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/writing" class="dropdown-toggle">Writing<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/writing/by-genre">By Genre</a></li><li><a href="http://blog.jverkamp.com/category/writing/nanowrimo">NaNoWriMo</a></li><li><a href="http://blog.jverkamp.com/category/writing/novels">Novels</a></li><li><a href="http://blog.jverkamp.com/category/writing/other">Other</a></li><li><a href="http://blog.jverkamp.com/category/writing/short-stories">Short Stories</a></li></ul></li></ul>

      <form action="http://www.google.com/search" method="get" onSubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input name="q" type="hidden" />
          <input name="qfront" type="text" class="form-control" placeholder="Search" />
          <button type="submit" class="btn btn-default" value="Search">Search</button>
        </p>
      </form>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
        </header>

        <article class="container">
                <header>
                        <h1 class="entry-title">Squaring the Bishop</h1>

                        <div class="entry-meta">
                                <span class="posted-on"><time class="entry-date" datetime="2012-10-11"><span class="year">2012</span> <span class="month">Oct</span> <span class="day">11</span></time></span>
                                <span class="tags"><ul class="tag-list list-inline"><li><a href="http://blog.jverkamp.com/category/programming/by-source/programming-praxis">Programming Praxis</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/word-games">Word Games</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-language/scheme">Scheme</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-language/racket">Racket</a></li></ul></span>
                        </div>

                        <hr />
                </header>
                <div class="entry-content">
                        <p>Okay, this one was just neat. Based on <a href="http://programmingpraxis.com/2011/05/03/squaring-the-bishop/" title="Programming Praxis: Word square">an older post</a> from Programming Praxis filed under <a href="http://programmingpraxis.com/contents/themes/#Word Games" title="Programming Praxis: Word Games">Word Games</a>, the idea is to find a set of words with very special properties:</p>
<pre><a href="http://dictionary.reference.com/browse/bishop" title="Dictionary.com: bishop">BISHOP</a>
<a href="http://dictionary.reference.com/browse/impose" title="Dictionary.com: impose">IMPOSE</a>
<a href="http://dictionary.reference.com/browse/spirits" title="Dictionary.com: spirits">SPIRTS</a>
<a href="http://dictionary.reference.com/browse/hornet" title="Dictionary.com: hornet">HORNET</a>
<a href="http://dictionary.reference.com/browse/osteal" title="Dictionary.com: osteal">OSTEAL</a>
<a href="http://dictionary.reference.com/browse/pestle" title="Dictionary.com: pestle">PESTLE</a></pre>
<p>Essentially, the first row and column are the same word, the second row and column are the same word, and so on. So a matrix that is its own <a href="https://en.wikipedia.org/wiki/transpose">transpose</a>. The fun comes in when you start with a dictionary and a word and try to construct all of the possible word squares.</p>
<!--more-->
<p>If you would like to follow along, you can download the full source for this program here: <a href="http://blog.jverkamp.com/2012/10/11/dictionary-tries-in-racket">previous post</a>. I know they run at least in <a href="http://racket-lang.org/" title="(((? Racket)))">Racket 5.3+</a>.</p>
<p>Now, onto the code!</p>
<p>Long story short, using the library makes the whole thing a lot easier. The bulk of the post is actually <a href="http://blog.jverkamp.com/2012/10/11/dictionary-tries-in-racket">over there</a>. :)</p>
<pre class="scheme"><code>; given a dictionary and a word, create a word square
; it should be len(word) words, each starting with a letter in word
; example:
;   AURORA
;   UNEVEN
;   REFUND
;   OVULAR
;   RENAME
;   ANDREW
(define (word-squares dict word)
  ; start with just the one word
  (let loop ([words (list (string-upcase word))])
    (if (= (length words) (string-length word))
        (list words)
        ; get a prefix for the new row
        (let ([prefix (list-&gt;string
                       (for/list ([i (length words)])
                         (string-ref (list-ref words i)
                                     (length words))))])
          ; branch into each of those cases
          ; filter the words based on length
          (apply
           append
           (for/list ([next (filter
                             (lambda (each) (= (string-length each)
                                               (string-length word)))
                             (words-by-prefix dict prefix))]
                      #:when (not (null? next)))
             (loop (snoc next words))))))))</code></pre>
<p>We do use <code>snoc</code> to append to the end of a list which isn't terribly effective, but it was easier than reversing the list back and forth whenever we needed a prefix. In any case, the code is pretty straight forward given all of the work that went into all of the previous functions. Perhaps the most interesting part is this code to determine the current prefix:</p>
<pre class="scheme"><code>(list-&gt;string
 (for/list ([i (length words)])
   (string-ref (list-ref words i)
               (length words))))</code></pre>
<p>So there you have it. Theoretically, calling <code>word-squares</code> with given dictionary and a root word should give us all of the valid word squares.</p>
<pre class="scheme"><code>&gt; (define dict (load-dictionary "wordsEn.txt"))
&gt; (word-squares dict "BISHOP")
'(("BISHOP" "ILLUME" "SLIDES" "HUDDLE" "OMELET" "PESETA")
  ("BISHOP" "ILLUME" "SLIMES" "HUMBLE" "OMELET" "PESETA")
  ("BISHOP" "INHERE" "SHREWD" "HEELED" "ORWELL" "PEDDLE")
  ("BISHOP" "INHERE" "SHREWD" "HEEDED" "ORWELL" "PEDDLE")
  ("BISHOP" "INHUME" "SHIRES" "HURDLE" "OMELET" "PESETA")
  ("BISHOP" "INHUME" "SHIRES" "HURTLE" "OMELET" "PESETA")
  ("BISHOP" "INHUME" "SHORES" "HURDLE" "OMELET" "PESETA")
  ("BISHOP" "INHUME" "SHORES" "HURTLE" "OMELET" "PESETA")
  ("BISHOP" "INHUME" "SHADES" "HUDDLE" "OMELET" "PESETA")
  ("BISHOP" "INHUME" "SHARES" "HURDLE" "OMELET" "PESETA")
  ("BISHOP" "INHUME" "SHARES" "HURTLE" "OMELET" "PESETA")
  ("BISHOP" "INHUME" "SHAMES" "HUMBLE" "OMELET" "PESETA")
  ("BISHOP" "INCASE" "SCONCE" "HANGUP" "OSCULE" "PEEPED")
  ("BISHOP" "INCASE" "SCONCE" "HANGUP" "OSCULE" "PEEPER")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOVER" "OSTEAL" "PEARLS")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOVER" "OSTEAL" "PEARLY")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOKER" "OSTEAL" "PEARLS")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOKER" "OSTEAL" "PEARLY")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOFER" "OSTEAL" "PEARLS")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOFER" "OSTEAL" "PEARLY")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOTER" "OSTEAL" "PEARLS")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOTER" "OSTEAL" "PEARLY")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOPER" "OSTEAL" "PEARLS")
  ("BISHOP" "ISCOSE" "SCROTA" "HOOPER" "OSTEAL" "PEARLY")
  ("BISHOP" "ISCOSE" "SCONCE" "HONOUR" "OSCULE" "PEERED")
  ("BISHOP" "IMPOSE" "SPENCE" "HONOUR" "OSCULE" "PEERED")
  ("BISHOP" "IMPOSE" "SPIRTS" "HORNET" "OSTEAL" "PESTLE")
  ("BISHOP" "IMPOSE" "SPURTS" "HORNET" "OSTEAL" "PESTLE")
  ("BISHOP" "IMPOSE" "SPORTS" "HORNET" "OSTEAL" "PESTLE")
  ("BISHOP" "IMPOSE" "SPARTA" "HORNER" "OSTEAL" "PEARLS")
  ("BISHOP" "IMPOSE" "SPARTA" "HORNER" "OSTEAL" "PEARLY"))</code></pre>
<p>There you have it. Although of course what words you get will depend on which dictionary you use. I used <a href="http://www.sil.org/linguistics/wordlists/english/" title="SIL International: wordsEn.txt">wordsEn.txt</a> from SIL international. Actually, it doesn't even matter what language you use. Since Racket supports Unicode strings by default and the nested trie structure doesn't specify a character set (as my original code using just a flat 26 element vector did), you can use any wordlist you want.</p>
<p>There's one last thing to consider though. A nice way to print out the word squares:</p>
<pre class="scheme"><code>; print out a word square
(define (print-word-square square)
  (for-each
   (lambda (word) (printf "~a\n" word))
   square)
  (newline))

&gt; (print-word-square (car (word-squares dict "BISHOP")))
BISHOP
ILLUME
SLIDES
HUDDLE
OMELET
PESETA</code></pre>
<p>And there you go. Hope you've enjoyed it, I had a lot of fun writing it. It's always neat</p>
<p>You can download the full source for this program here: <a href='https://github.com/jpverkamp/small-projects/blob/master/blog/word-squares.rkt'>word-squares source</a>. I've only tested it in <a href="http://racket-lang.org/" title="(((? Racket)))">Racket 5.3+</a>, but newer versions should work as well. Racket 5.2 won't work without some tweaking as (at the very least) it's missing a definition for <code>string-trim</code>.</p>
                </div>
                <div class="entry-footnotes">
                        <div id="footnotes"><ol></ol></div>
                </div>

                <div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = "jverkamp";
var disqus_title = "Squaring the Bishop";
var disqus_url = "http://blog.jverkamp.com/2012/10/11/squaring-the-bishop/";
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </article>

        <footer class="container" role="contentinfo">
                <nav class="navbar navbar-default" role="navigation"><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2012/10/11/dictionary-tries-in-racket">← Dictionary tries in Racket</a></li><li><a href="http://blog.jverkamp.com/category/archives">Archives</a></li><li><a href="http://blog.jverkamp.com/2012/10/12/a-sea-of-stars-ch-14-madeline">A Sea of Stars - Ch. 14 - Madeline →</a></li></ul><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2012/10/11/dictionary-tries-in-racket">← Dictionary tries in Racket</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li><li><a href="http://blog.jverkamp.com/2012/10/13/word-cubes">Word cubes →</a></li></ul></nav>

                <div class="legal">
                        All posts unless otherwise mentioned are licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" /></a><br />
                        Any source code unless otherwise mentioned is licensed under the <a href="http://directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
                </div>
        </footer>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-53688146-1', 'auto');
ga('send', 'pageview');
</script>
</body>
</html>