<!doctype html><html><head><title>Evaluating prefix/infix/postfix expressions â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_5823201688106629450.min.8c7d803d89ebdecf2416d468f4ecb981a3acf645154a7a336f2e5d0190ea8163.js integrity="sha256-jH2APYnr3s8kFtRo9Oy5gaOs9kUVSnozby5dAZDqgWM=" defer></script>
<script src=/jquery.fancybox_6181813213021922412.min.921ca906a32e718ab61ac0b4da24e0eaa6bdd41912654a33b44bd3fc2f0c2a4d.js integrity="sha256-khypBqMucYq2GsC02iTg6qa91BkSZUoztEvT/C8MKk0=" defer></script>
<script src=/katex_12008035502722260518.min.1c3dce03daaf56a7d2fe0d0ec49bf35256837226f835adaf52c09502ef9bc5d1.js integrity="sha256-HD3OA9qvVqfS/g0OxJvzUlaDcib4Na2vUsCVAu+bxdE=" defer></script>
<script src=/auto-render_2152414756166376840.min.45ae2f6b03d0c7b867df0a6cb7d43215ec78369998685a5748c5b12f502321f2.js integrity="sha256-Ra4vawPQx7hn3wpst9QyFex4NpmYaFpXSMWxL1AjIfI=" defer></script>
<script src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js integrity="sha256-XoC9heuuuVYHg01nd7/nAT0dFh8PAqMbhF5L12WJgxY=" defer></script>
<script src=/mermaid_12365941879912544862.min.973b5415b3fa1835d620c0e58236f859d5f80891f447e240cbbb9eb825251ff0.js integrity="sha256-lztUFbP6GDXWIMDlgjb4WdX4CJH0R+JAy7ueuCUlH/A=" defer></script>
<script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css integrity="sha256-4otdfZ2J76y19wisMMvXaxuaD4Ft/Z2pZjHR0Jy73XY="><link rel=stylesheet href=/css_4780214198035419921.min.246b6f8e7620eeb717bca5e7b121037906e5dfaa05805f427fcc5a09b6c99f5c.css integrity="sha256-JGtvjnYg7rcXvKXnsSEDeQbl36oFgF9Cf8xaCbbJn1w="><link rel=stylesheet href=/main.min.7a29c6e86e28b6da48d6e8a526f4fa597dfba1464ca3f975ea9e0fb8c00052b7.css integrity="sha256-einG6G4ottpI1uilJvT6WX37oUZMo/l16p4PuMAAUrc="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/home-automation/>Home Automation</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>Evaluating prefix/infix/postfix expressions</h1><div class=entry-meta><span class=entry-date>2012-10-08</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2012/10/03/elementary-cellular-automaton/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/javascript>JavaScript</a><a href=https://blog.jverkamp.com/2013/03/06/partitioning-the-dutch-national-flag/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2012/10/07/three-ways-to-write-expressions/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/data-structures>Data Structures</a><a href=https://blog.jverkamp.com/2012/10/11/dictionary-tries-in-racket/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2012/10/07/three-ways-to-write-expressions/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2012/10/10/two-word-games/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2012/10/07/three-ways-to-write-expressions/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2012/10/09/a-sea-of-stars-ch.-13-missing/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>In <a href=https://blog.jverkamp.com/2012/10/07/three-ways-to-write-expressions/>yesterday&rsquo;s post</a>, I talked about three different ways to write expressions: prefix, infix, and postfix expressions. I also promised to write up a web-based example that would show the guts of each algorithm in action. Well, here it is!</p><p>Use the three buttons at the top to switch between the different machines. Enter an expression in the box and click run to evaluate it. The only things that are supported at the moment are numbers (integers or floating point) and the operators +, -, *, and /, although the code is extensible enough that adding more shouldn&rsquo;t be an issue.</p><p>Have fun!</p><ul><li><a href=#prefix>prefix</a></li><li><a href=#infix>infix</a></li><li><a href=#postfix>postfix</a></li></ul><h1 id=prefix--scheme-a-nameprefixa>Prefix / Scheme <a name=prefix></a></h1><p><input type=text id=prefixInput value="+ * 5 8 + 5 - 1 4"> <button id=prefixRun>Run</button></p><h2 id=results>Results</h2><table class="table table-striped"><thead><tr><td>Tick</td><td>Input</td><td>Output</td><td>Rest</td><td>Error</td></tr></thead><tbody id=prefixResult></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// known operators
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>operators</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;+&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;-&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;*&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;/&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// process at this level
</span></span></span><span style=display:flex><span><span style=color:#75715e>// return the result of this level and what we didn&#39;t use
</span></span></span><span style=display:flex><span><span style=color:#75715e>// return a null value if we fail at any point
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>step</span>(<span style=color:#a6e22e>current</span>) {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// directly return numbers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>isNaN(parseFloat(<span style=color:#a6e22e>current</span>[<span style=color:#ae81ff>0</span>]))) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> parseFloat(<span style=color:#a6e22e>current</span>[<span style=color:#ae81ff>0</span>]),
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>rest</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>current</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>		};
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// otherwise, we&#39;re going to have to recur
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>f</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>operators</span>[<span style=color:#a6e22e>current</span>[<span style=color:#ae81ff>0</span>]];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// recur for left, use that rest for right
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>left</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>step</span>(<span style=color:#a6e22e>current</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>));
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>left</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span>) <span style=color:#66d9ef>return</span> {<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>, <span style=color:#a6e22e>rest</span><span style=color:#f92672>:</span> []};
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>right</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>step</span>(<span style=color:#a6e22e>left</span>.<span style=color:#a6e22e>rest</span>);
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>right</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span>) <span style=color:#66d9ef>return</span> {<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>, <span style=color:#a6e22e>rest</span><span style=color:#f92672>:</span> []};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// return at my level
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>f</span>(<span style=color:#a6e22e>left</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>right</span>.<span style=color:#a6e22e>value</span>),
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>rest</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>right</span>.<span style=color:#a6e22e>rest</span>
</span></span><span style=display:flex><span>		};
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>step</span>(<span style=color:#a6e22e>input</span>);
</span></span></code></pre></div><hr><h1 id=infix-a-nameinfixa>Infix <a name=infix></a></h1><p><input type=text id=infixInput value="4 + 2 * 7 - 1 * 5 + 6 * 5 - 1"> <button id=infixRun>Run</button></p><h2 id=results-1>Results</h2><table class="table table-striped"><thead><tr><td>Tick</td><td>Command</td><td>Reducing</td><td>Error</td></tr></thead><tbody id=infixResult></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// known operators
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>operators</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;+&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;-&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;*&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;/&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>precedence</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>	[<span style=color:#e6db74>&#39;*&#39;</span>, <span style=color:#e6db74>&#39;/&#39;</span>],
</span></span><span style=display:flex><span>	[<span style=color:#e6db74>&#39;+&#39;</span>, <span style=color:#e6db74>&#39;-&#39;</span>]
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// process until we are done
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// find the first operator at the lowest level
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>reduceAt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>found</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>precedence</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>$</span>.<span style=color:#a6e22e>inArray</span>(<span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>j</span>], <span style=color:#a6e22e>precedence</span>[<span style=color:#a6e22e>i</span>]) <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>reduceAt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>j</span>;
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>found</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>found</span>) <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// if we didn&#39;t find one, bail
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>found</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// otherwise, reduce that operator
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>newInput</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>f</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>operators</span>[<span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>reduceAt</span>]];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>reduceAt</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>newInput</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>newInput</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>f</span>(
</span></span><span style=display:flex><span>		parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>reduceAt</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]),
</span></span><span style=display:flex><span>		parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>reduceAt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>	));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>reduceAt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>newInput</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>newInput</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h1 id=postfix--rpn-a-namepostfixa>Postfix / RPN <a name=postfix></a></h1><p><input type=text id=postfixInput value="4 2 7 * + 1 6 - 5 * - 1 -"> <button id=postfixRun>Run</button></p><h2 id=results-2>Results</h2><table class="table table-striped"><thead><tr><td>Tick</td><td>Command</td><td>Stack</td><td>Error</td></tr></thead><tbody id=postfixResult></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// known operators
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>operators</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;+&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;-&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;*&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;/&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>b</span>; },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// run through all commands in the input
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>stack</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>cmd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// known operator
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>cmd</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>operators</span>) {
</span></span><span style=display:flex><span>		<span style=color:#75715e>// get the function
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>f</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>operators</span>[<span style=color:#a6e22e>cmd</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// sanity check
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stack</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>length</span>) {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;not enough arguments&#39;</span>;
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// get the correct number of arguments
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>args</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>args</span>.<span style=color:#a6e22e>unshift</span>(<span style=color:#a6e22e>stack</span>.<span style=color:#a6e22e>shift</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// apply and push back onto the stack
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// note: the first argument to apply is &#39;this&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#a6e22e>stack</span>.<span style=color:#a6e22e>unshift</span>(<span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>apply</span>(<span style=color:#66d9ef>undefined</span>, <span style=color:#a6e22e>args</span>));
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// anything else, push onto the stack as either a number or string
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>stack</span>.<span style=color:#a6e22e>unshift</span>(isNaN(parseFloat(<span style=color:#a6e22e>cmd</span>)) <span style=color:#f92672>?</span> <span style=color:#a6e22e>cmd</span> <span style=color:#f92672>:</span> parseFloat(<span style=color:#a6e22e>cmd</span>));
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><p>Hopefully this helps give some insight into what I was talking about in <a href=https://blog.jverkamp.com/2012/10/07/three-ways-to-write-expressions/>yesterday&rsquo;s post</a>. I have to admit, I&rsquo;m actually starting to like Javascript. It&rsquo;s a bit strange at times, but it does have a nice functional flavor which is always fun.</p><p>If you&rsquo;d like to download the entire source code, you can do so here: <a href=https://github.com/jpverkamp/small-projects/blob/master/blog/evaluating-prefix-infix-postfix.js title="Evaluating prefix/infix/postfix source code">source code</a></p><style>.warning{color:red}</style><script>jQuery(function(e){e("#infix").hide(),e("#postfix").hide(),e("#prefixShow").click(function(){e("#prefix").show(),e("#infix").hide(),e("#postfix").hide()}),e("#infixShow").click(function(){e("#prefix").hide(),e("#infix").show(),e("#postfix").hide()}),e("#postfixShow").click(function(){e("#prefix").hide(),e("#infix").hide(),e("#postfix").show()}),e(".source").hide(),e("#showHidePrefixSource").click(function(){e("#prefixSource").toggle()}),e("#showHideInfixSource").click(function(){e("#infixSource").toggle()}),e("#showHidePostfixSource").click(function(){e("#postfixSource").toggle()});var t={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t}},n=[["*","/"],["+","-"]];function s(){e("#prefixResult").empty();var s,n=0,i=e("#prefixInput").val().split(" "),a=null;function o(s){if(n+=1,s.length==0)return e("#prefixResult").append("<tr><td>"+n+"</td><td>"+s.join(" ")+`</td><td></td><td></td><td class="warning">unable to continue, no input</td></tr>
`),{value:null,rest:[]};if(e("#prefixResult").append("<tr><td>"+n+"</td><td>"+s.join(" ")+`</td><td></td><td></td><td class="warning"></td></tr>
`),isNaN(parseFloat(s[0])))return l=t[s[0]],r=o(s.slice(1)),r.value==null?{value:null,rest:[]}:(c=o(r.rest),c.value==null?{value:null,rest:[]}:(i=l(r.value,c.value),a=c.rest,e("#prefixResult").append("<tr><td>"+n+"</td><td></td><td>"+r.value+" "+s[0]+" "+c.value+" = "+i+"</td><td>"+a.join(" ")+`</td><td class="warning"></td></tr>
`),{value:i,rest:a}));var r,c,l,i=parseFloat(s[0]),a=s.slice(1);return e("#prefixResult").append("<tr><td>"+n+"</td><td></td><td>"+i+"</td><td>"+a.join(" ")+`</td><td class="warning"></td></tr>
`),{value:i,rest:a}}s=o(i),s.value==null||(s.rest.length==0?e("#prefixResult").append("<tr><td>result</td><td></td><td><b>"+s.value+`</b></td><td></td><td class="warning"></td></tr>
`):e("#prefixResult").append("<tr><td>result</td><td></td><td></td><td>"+s.rest.join(" ")+`</td><td class="warning">malformed expression</td></tr>
`))}e("#prefixRun").click(s);function o(){e("#infixResult").empty();for(var o,i,a,r,c,d,u,l=0,s=e("#infixInput").val().split(" "),h=null;s.length>1;){l+=1,i=0,d=void 0,c=!1;for(o=0;o<n.length;o++){for(a=1;a<s.length-1;a++)if(e.inArray(s[a],n[o])>=0){i=a,d=n[o].join(" "),c=!0;break}if(c)break}if(!c){e("#infixResult").append("<tr><td>"+l+"</td><td>"+s.join(" ")+`</td><td></td><td class="warning">unable to find an operator to reduce</td></tr>
`),e(".warning").css("color","red");return}e("#infixResult").append("<tr><td>"+l+"</td><td>"+s.join(" ")+"</td><td>"+d+`</td><td class="warning"></td></tr>
`),r=[],u=t[s[i]];for(o=0;o<i-1;o++)r.push(s[o]);r.push(""+u(parseFloat(s[i-1]),parseFloat(s[i+1])));for(o=i+2;o<s.length;o++)r.push(s[o]);s=r}e("#infixResult").append("<tr><td>result</td><td><b>"+s.join(" ")+`</b></td><td></td><td class="warning"></td></tr>
`)}e("#infixRun").click(o);function i(){e("#postfixResult").empty();for(var s,i,r,c,l=0,n=[],d=e("#postfixInput").val().split(" "),o=null,a=0;a<d.length;a++){if(s=d[a],l+=1,s in t){if(i=t[s],n.length<i.length){o="not enough arguments";break}r=[];for(c=0;c<i.length;c++)r.unshift(n.shift());n.unshift(i.apply(void 0,r))}else n.unshift(isNaN(parseFloat(s))?s:parseFloat(s));e("#postfixResult").append("<tr><td>"+l+"</td><td>"+s+"</td><td>"+n+`</td><td></td></tr>
`)}n.length>1&&(o="malformed expression, multiple results on final stack"),o==null?e("#postfixResult").append("<tr><td>result</td><td></td><td><b>"+n+`</b></td><td></td></tr>
`):(e("#postfixResult").append("<tr><td>result</td><td>"+s+"</td><td>"+n+'</td><td class="warning">'+o+`</td></tr>
`),o=null)}e("#postfixRun").click(i)})</script></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>