<!DOCTYPE html>
<html>
<head>
        
        

        <title>The Birthday Paradox | jverkamp.com | John-Paul Verkamp</title>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

        <script src="//code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css" />
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.css" />
        <script src="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.js"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.9/jquery.transit.min.js"></script>

        <!-- Highlight.js for syntax highlighting -->
        <link rel="stylesheet" href="/highlight/styles/obsidian.css" />
        <script src="/highlight/highlight.pack.js"></script>

        <!-- MathJax for LaTeX support -->
        <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- nanoGallery for Flickr Galleries -->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/css/themes/light/nanogallery_light.css" />
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/jquery.nanogallery.min.js"></script>

        <!-- Any custom CSS or JS that I've written; this should be kept minimal -->
        <link rel="stylesheet" href="/custom.css" />
        <script src="/custom.js"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="http://blog.jverkamp.com/feed/" />
</head>
<body>
        <header class="container">
        <nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://blog.jverkamp.com"><span style="color: green;">jv</span>erkamp.com</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav"><li class="dropdown"><a href="http://blog.jverkamp.com/category/archives" class="dropdown-toggle">Archives<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/archives/2004">2004</a></li><li><a href="http://blog.jverkamp.com/category/archives/2005">2005</a></li><li><a href="http://blog.jverkamp.com/category/archives/2006">2006</a></li><li><a href="http://blog.jverkamp.com/category/archives/2007">2007</a></li><li><a href="http://blog.jverkamp.com/category/archives/2008">2008</a></li><li><a href="http://blog.jverkamp.com/category/archives/2009">2009</a></li><li><a href="http://blog.jverkamp.com/category/archives/2010">2010</a></li><li><a href="http://blog.jverkamp.com/category/archives/2011">2011</a></li><li><a href="http://blog.jverkamp.com/category/archives/2012">2012</a></li><li><a href="http://blog.jverkamp.com/category/archives/2013">2013</a></li><li><a href="http://blog.jverkamp.com/category/archives/2014">2014</a></li><li><a href="http://blog.jverkamp.com/category/archives/2015">2015</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/other" class="dropdown-toggle">Other<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/other/board-game-reviews">Board Game Reviews</a></li><li><a href="http://blog.jverkamp.com/category/other/cooking">Cooking</a></li><li><a href="http://blog.jverkamp.com/category/other/movie-reviews">Movie Reviews</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/photography" class="dropdown-toggle">Photography<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/photography/dp-challenge">DP Challenge</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosets">Photosets</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosynth">Photosynth</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/programming" class="dropdown-toggle">Programming<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/programming/by-language">By Language</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-project">By Project</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-source">By Source</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/programming/libraries">Libraries</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/research" class="dropdown-toggle">Research<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/research/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/research/publications">Publications</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/writing" class="dropdown-toggle">Writing<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/writing/by-genre">By Genre</a></li><li><a href="http://blog.jverkamp.com/category/writing/nanowrimo">NaNoWriMo</a></li><li><a href="http://blog.jverkamp.com/category/writing/novels">Novels</a></li><li><a href="http://blog.jverkamp.com/category/writing/other">Other</a></li><li><a href="http://blog.jverkamp.com/category/writing/short-stories">Short Stories</a></li></ul></li></ul>

      <form action="http://www.google.com/search" method="get" onSubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input name="q" type="hidden" />
          <input name="qfront" type="text" class="form-control" placeholder="Search" />
          <button type="submit" class="btn btn-default" value="Search">Search</button>
        </p>
      </form>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
        </header>

        <article class="container">
                <header>
                        <h1 class="entry-title">The Birthday Paradox</h1>

                        <div class="entry-meta">
                                <span class="posted-on"><time class="entry-date" datetime="2012-10-01"><span class="year">2012</span> <span class="month">Oct</span> <span class="day">1</span></time></span>
                                <span class="tags"><ul class="tag-list list-inline"><li><a href="http://blog.jverkamp.com/category/programming/by-language/javascript">JavaScript</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/mathematics">Mathematics</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li></ul></span>
                        </div>

                        <hr />
                </header>
                <div class="entry-content">
                        <p>Probability can be a bit counter-intuitive at times. Take for example, the <a href="https://en.wikipedia.org/wiki/birthday_problem / paradox">Birthday paradox</a>: how many people do you need in a room to have a 50/50 chance that two share the same birthday?</p>
<!--more-->
<p>Turns out, it's not as many as you might think: you only need 23.</p>
<p>Why? Math!</p>
<p>If you have one person, it's guaranteed that you won't have duplicated birthdays. If you have two, there is a 1/365 chance (we're going to ignore <a href="https://en.wikipedia.org/wiki/Leap_Days">February 29</a> for the time being). You can think of it by randomly choosing the first birthday then finding the chance of matching that.</p>
<p>The math starts getting a bit more interesting when you have three people. Rather than directly calculating the problem, consider the inverse. Start with the chance that the second person doesn't match the first and then add the chance that the third doesn't match either the first or second:</p>
<div>$$ (1 - 1/365) * (1 - 2/365) \approx 99.2\% $$</div>
<p>One minus that is the chance that any of the three share a birthday:</p>
<div>$$ 1 - ((1 - 1/365) * (1 - 2/365)) \approx 0.8\% $$</div>
<p>Then if you have four:</p>
<div>$$ 1 - ((1 - 1/365) * (1 - 2/365) * (1 - 3/365)) \approx 1.6\% $$</div>
<p>Which generalizes pretty directly to any number of people <em>n</em>:</p>
<div>$$ B(n) = 1 - \prod_{i=1}^{(n-1)}(1-\frac{i}{365}) $$</div>
<p>Working out several interesting values of <em>n</em>:</p>
<table class="table table-striped">
<thead><tr><td>n</td><td>B(n)</td></tr></thead>
<tbody>
<tr><td>1</td><td>0.8%</td></tr>
<tr><td>2</td><td>1.6%</td></tr>
<tr><td>3</td><td>2.7%</td></tr>
<tr><td>5</td><td>5.6%</td></tr>
<tr><td>10</td><td>11.7%</td></tr>
<tr><td>20</td><td>41.1%</td></tr>
<tr><td><b>23</b></td><td><b>50.7%</b></td></tr>
<tr><td>30</td><td>70.6%</td></tr>
<tr><td>50</td><td>97.0%</td></tr>
<tr><td>57</td><td>99.0%</td></tr>
<tr><td>100</td><td>99.9%</td></tr>
<tr><td>366</td><td>100%</td></tr>
</tbody>
</table>
<p>So it turns out, you only need 23 people to get a 50/50 chance of two sharing the same birthday. That's about what you'd seen in the average classroom. Not what you'd probably expect, but the math holds it out. There's also another interesting factor going on that once you have 367 people in a room (one more than the possible number of days in a year, then are guaranteed to have a match). That's from the <a href="https://en.wikipedia.org/wiki/pigeonhole_principle">pigeonhole principle</a>, but hopefully it's more intuitive as well. If you have 366 people spread out all over the year, even on February 29, then when could the 367's birthday possibly be to <em>not</em> overlap? Exactly.</p>
<p>But you don't have to take my word for it, the math should stand by itself. And if that's not enough, here's a quick script that might just help to convince you. Just click the button to generate a random room of 23 people. Run it enough times and you should see that 50/50 split.</p>
<table class="table table-striped">
<tr>
<td style="text-align: right;">Number of birthdays:</td>
<td><input id="numberOfBirthdays" value="23" /></td>
<td><button style="width: 200px;" id="runBirthdays">Random birthdays!</button></td>
</tr>
<tr>
<td style="text-align: right;">Repeat:</td>
<td><input id="repeatCount" value="1"></td>
<td><button style="width: 200px;" id="repeatBirthdays">Run multiple</button></td>
</tr>
</table>
<p><button style="width: 200px;" id="viewHideSource">View/Hide Source</button> <button style="width: 200px;" id="resetBirthdays">Reset</button></p>
<div id="source">

<pre class="javascript"><code>
var results = {};

function randomBirthday() {
        var d = new Date((new Date().getTime()) +
                Math.floor(Math.random() * 365) *
                24 * 60 * 60 * 1000);
        d.setHours(0);
        d.setMinutes(14);
        d.setSeconds(0);
        d.setMilliseconds(0);
        return d;
}

function date_sort(date1, date2) {
        if (date1 &gt; date2) return 1;
        if (date1 &lt; date2) return -1;
        return 0;
};

function b(n) {
        var prod = 1;
        for (var i = 1; i &lt; n; i++)
                prod *= (1 - i / 365);
        return Math.round(10000 * (1 - prod)) / 100;
}

function doRun(n) {
        var dates = new Array();
        for (var i = 0; i &lt; n; i++)
                dates.push(randomBirthday());

        dates.sort(date_sort);

        var found = false;
        for (var i = 0; i &lt; n; i++)
                dates[i] = dates[i].toLocaleDateString();

        for (var i = 0; i &lt; n; i++) {
                if ((i &gt; 0 && dates[i] == dates[i - 1]) ||
                                (i &lt; n - 1 && dates[i] == dates[i + 1])) {
                        found = true;
                        break;
                }
        }

        if (!(n in results)) results[n] = {runs: 0, good: 0};
        results[n].runs += 1;
        if (found) results[n].good += 1;
}
</code></pre>

Or download it here: <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/birthday-paradox.js" title="Birthday Paradox source">Birthday Paradox source</a>
</div>
<p id="result"></p>
<script>
jQuery(function($) {
        var results = {};

        function randomBirthday() {
                var d = new Date((new Date().getTime()) + Math.floor(Math.random() * 365) * 24 * 60 * 60 * 1000);
                d.setHours(0);
                d.setMinutes(14);
                d.setSeconds(0);
                d.setMilliseconds(0);
                return d;
        }

        function date_sort(date1, date2) {
                if (date1 > date2) return 1;
                if (date1 < date2) return -1;
                return 0;
        };

        function b(n) {
                var prod = 1;
                for (var i = 1; i < n; i++)
                        prod *= (1 - i / 365);
                return Math.round(10000 * (1 - prod)) / 100;
        }

        function doRun(silent) {
                var result = '';
                silent = silent || false;

                var n = $("#numberOfBirthdays").val();
                if (isNaN(n) || n < 1) {
                        if (!silent) result = '<p class="warning">Invalid number of birthdays, defaulting to 23.</p>\n';
                        n = 23;
                }

                var dates = new Array();
                for (var i = 0; i < n; i++)
                        dates.push(randomBirthday());

                dates.sort(date_sort);

                var found = false;
                for (var i = 0; i < n; i++)
                        dates[i] = dates[i].toLocaleDateString();

                for (var i = 0; i < n; i++) {
                        if ((i > 0 && dates[i] == dates[i - 1]) || (i < n - 1 && dates[i] == dates[i + 1])) {
                                if (!silent) result += '<b>' + dates[i] + '</b><br />\n';
                                found = true;
                        } else {
                                if (!silent) result += dates[i] + '<br />\n';
                        }
                }

                if (!(n in results)) results[n] = {runs: 0, good: 0};
                results[n].runs += 1;
                if (found) results[n].good += 1;

                if (!silent) {
                        result = '<hr />\n' + result;
                        result = 'So far for ' + n + ' birthday' + (n == 1 ? '' : 's') + ' there ' + (results[n].good == 1 ? 'has' : 'have') + ' been ' +
                                        results[n].good + ' matched birthday' + (results[n].good == 1 ? '' : 's') + ' from ' +
                                        results[n].runs + ' run' + (results[n].runs == 1 ? '' : 's') + ' for a ' +
                                        (Math.round(10000 * results[n].good / results[n].runs) / 100) + '% chance. ' +
                                        'The expected chance for ' + n + ' birthday' + (n == 1 ? '' : 's') + ' is ' + b(n) + '%.<br />\n' + result;

                        $("#result").html(result);
                }
        }

        $("#runBirthdays").click(function() { doRun(false); } );

        $("#resetBirthdays").click(function() {
                results = {};
                $("#result").html('');
        });

        $("#repeatBirthdays").click(function() {
        repeatBirthdays
                var n = $("#repeatCount").val();
                var warning = '';
                if (isNaN(n) || n < 1) {
                        warning = '<p class="warning">Invalid number of birthdays, defaulting to 23.</p>\n';
                        n = 1;
                }

                for (var i = 0; i < n - 1; i++)
                        doRun(true);

                doRun(false);
                $("#result").prepend(warning);
        });

        $("#source").hide();
        $("#viewHideSource").click(function() { $("#source").toggle(); } );
});
</script>
<p>Also, I'm a quarter of a century old today. Here's to several more of those. :)</p>
                </div>
                <div class="entry-footnotes">
                        <div id="footnotes"><ol></ol></div>
                </div>

                <div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = "jverkamp";
var disqus_title = "The Birthday Paradox";
var disqus_url = "http://blog.jverkamp.com/2012/10/01/the-birthday-paradox/";
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </article>

        <footer class="container" role="contentinfo">
                <nav class="navbar navbar-default" role="navigation"><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2012/10/01/looper">← Looper</a></li><li><a href="http://blog.jverkamp.com/category/archives">Archives</a></li><li><a href="http://blog.jverkamp.com/2012/10/02/a-sea-of-stars-ch-11-surprises">A Sea of Stars - Ch. 11 - Surprises →</a></li></ul><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2012/09/29/pickles-and-memoization">← Pickles and memoization</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li><li><a href="http://blog.jverkamp.com/2012/10/03/elementary-cellular-automaton">Elementary cellular automaton →</a></li></ul></nav>

                <div class="legal">
                        <a href="http://blog.jverkamp.com/feed/atom.xml">feed <img style="border: 0;" src="http://blog.jverkamp.com/rss.png" /></a><br />
                        All posts unless otherwise mentioned are licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" /></a><br />
                        Any source code unless otherwise mentioned is licensed under the <a href="http://directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
                </div>
        </footer>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-53688146-1', 'auto');
ga('send', 'pageview');
</script>
</body>
</html>