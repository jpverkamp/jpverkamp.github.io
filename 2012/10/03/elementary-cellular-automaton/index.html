<!DOCTYPE html>
<html>
<head>
    <title>Elementary cellular automaton â€“ jverkamp.com</title>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8"><link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="//blog.jverkamp.com/feed/">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css" integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" />

<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel="stylesheet">

<link rel="stylesheet" href="/custom.css" defer />

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <div id="wrapper"><header id="page-header" role="banner">
    <h1><a href="/">JP's Blog</a></h1>

    <ul id="page-header-links">
        <li>
            <a href="https://twitter.com/jpverkamp">Twitter</a> *
            <a href="https://github.com/jpverkamp">GitHub</a> *
            <a href="https://www.flickr.com/photos/jpverkamp">Flickr</a>
        </li>
        <li>
            <form action="//www.google.com/search" method="get" onsubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search" _lpchecked="1">
                <div class="form-group">
                    <input name="q" type="hidden">
                    <input name="qfront" type="text" class="form-control" placeholder="Search">
                    <button type="submit" class="btn btn-default" value="Search">Search</button>
                </div>
            </form>
        </li>

    </ul>

    <nav id="header-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation"><li><a href="https://blog.jverkamp.com/photography/">Photography</a></li><li><a href="https://blog.jverkamp.com/reviews/">Reviews</a></li><li><a href="https://blog.jverkamp.com/programming/">Programming</a></li><li><a href="https://blog.jverkamp.com/writing/">Writing</a></li><li><a href="https://blog.jverkamp.com/research/">Research</a></li><li class="subscription" data-subscription="rss"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </nav>
</header>
<div id="page-content-wrapper">
            <div id="page-content"><article>
	<header>
		<h1 class="entry-title">Elementary cellular automaton</h1>

        <div class="entry-meta"><span class="entry-date">2012-10-03</span>
            </div><div class="entry-tags"><ul class="taxonomy-keys"><li>
            <a class="taxonomy-key" href="/programming/languages/">Languages</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2012/09/27/html5-bugs/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/html">HTML</a><a href="https://blog.jverkamp.com/2012/10/06/generated-html-index/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2012/10/01/the-birthday-paradox/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/javascript">JavaScript</a><a href="https://blog.jverkamp.com/2012/10/08/evaluating-prefix/infix/postfix-expressions/" class="next-link"></a></li></ul>
        </li><li>
            <a class="taxonomy-key" href="/programming/topics/">Topics</a>
            <ul class="taxonomy-values"><li><a class="taxonomy-value" href="/programming/topics/cellular-automata">Cellular Automata</a><a href="https://blog.jverkamp.com/2012/10/17/rule-30-rng/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2012/10/01/the-birthday-paradox/" class="previous-link"></a><a class="taxonomy-value" href="/programming/topics/mathematics">Mathematics</a><a href="https://blog.jverkamp.com/2012/10/17/rule-30-rng/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2012/09/27/html5-bugs/" class="previous-link"></a><a class="taxonomy-value" href="/programming/topics/web-development">Web Development</a><a href="https://blog.jverkamp.com/2012/10/06/generated-html-index/" class="next-link"></a></li></ul>
        </li><li><a class="taxonomy-key" href="/programming">programming</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2012/10/01/the-birthday-paradox/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2012/10/04/querying-csv-files-with-sql/" class="next-link">Next</a></ul>
        </li><li><a class="taxonomy-key" href="/">All Posts</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2012/10/02/a-sea-of-stars-ch.-11-surprises/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2012/10/04/querying-csv-files-with-sql/" class="next-link">Next</a></ul>
        </li></ul>
</div>
</header>

	<div class="entry-content"><p>Today we&rsquo;re going to be playing with an HTML5 canvas again (previously we made <a href="https://blog.jverkamp.com/2012/09/26/line-art-with-an-html5-canvas/">line art</a> and <a href="https://blog.jverkamp.com/2012/09/27/html5-bugs/">bugs</a>). This time, the goal is to make a tool where you can explore <a href="http://mathworld.wolfram.com/ElementaryCellularAutomaton.html" title="Wolfram Mathworld: Elementary Cellular Automaton">elementary cellular automaton</a>.</p>

<p>(If you just want to jump to the toy, <a href="#thecanvas">click here</a>. There&rsquo;s also a much larger version available <a href="http://apps.jverkamp.com/small-projects/cellular/" title="jverkamp apps: Cellular">here</a>.)</p>

<p>Essentially, you can think of an elementary cellular automaton as a function on a series of rooms. Each room has a light and the ability to see their neighbor&rsquo;s lights as well as their own. Now if you take that those three inputs, there are 8 cases to consider:</p>

<table>
<thead>
<tr>
<th>left</th>
<th>me</th>
<th>right</th>
</tr>
</thead>

<tbody>
<tr>
<td>off</td>
<td>off</td>
<td>off</td>
</tr>

<tr>
<td>off</td>
<td>off</td>
<td>on</td>
</tr>

<tr>
<td>off</td>
<td>on</td>
<td>off</td>
</tr>

<tr>
<td>off</td>
<td>on</td>
<td>on</td>
</tr>

<tr>
<td>on</td>
<td>off</td>
<td>off</td>
</tr>

<tr>
<td>on</td>
<td>off</td>
<td>on</td>
</tr>

<tr>
<td>on</td>
<td>on</td>
<td>off</td>
</tr>

<tr>
<td>on</td>
<td>on</td>
<td>on</td>
</tr>
</tbody>
</table>

<p>For each of those eight inputs, there are two possible outputs. I can either turn my light on or turn it off. This in turn will be seen by my neighbors who might the adjust their own lights and so on.</p>

<p>What gets more interesting is when you show a picture of the changing lights over time. Imagine a series of rows where each row is the state of all of the lights at one moment in time. So if the rule is that whenever either neighbor&rsquo;s light is on to turn your own on, you&rsquo;ll see a spreading wave of lights turning on as you move down the picture (rule 222).</p>

<p>So how does this all work in practice? It turns out, it&rsquo;s actually pretty simple.</p>

<p>First, we&rsquo;ll initialize two arrays. I&rsquo;ve included a number of initial conditions including all off, all on, half and half, random, and a single point.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">oldRow</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Array(<span style="color:#a6e22e">width</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">newRow</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Array(<span style="color:#a6e22e">width</span>);

<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">width</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">initial</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;random&#34;</span>)
    <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> (Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0.5</span> <span style="color:#f92672">?</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>);
  <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">initial</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;5050&#34;</span>)
    <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">width</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">?</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>);
  <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">initial</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;point&#34;</span>)
    <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">==</span> Math.<span style="color:#a6e22e">floor</span>(<span style="color:#a6e22e">width</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">?</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>);
  <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">initial</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;black&#34;</span>)
    <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
  <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">initial</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;white&#34;</span>)
    <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
  <span style="color:#66d9ef">else</span>
    <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

  <span style="color:#a6e22e">newRow</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div>
<p>Why two arrays? So that we can update one without the updates themselves having an effect on the row we&rsquo;re working on. You could actually do that just as well, but it wouldn&rsquo;t be the simulation we&rsquo;re trying to do.</p>

<p>In any case, the next step we need is run the actual simulation. Basically, work from top to bottom making each row based off of the previous one.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">row</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">row</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">height</span>; <span style="color:#a6e22e">row</span><span style="color:#f92672">++</span>) {
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">col</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">col</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">width</span>; <span style="color:#a6e22e">col</span><span style="color:#f92672">++</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">col</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)
      <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#a6e22e">col</span>, <span style="color:#a6e22e">row</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);

    <span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">col</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">?</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">col</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">col</span>] <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">col</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">width</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">width</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">col</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>];
    <span style="color:#a6e22e">newRow</span>[<span style="color:#a6e22e">col</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">setTo</span>[<span style="color:#a6e22e">index</span>];
  }

  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">col</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">col</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">width</span>; <span style="color:#a6e22e">col</span><span style="color:#f92672">++</span>) {
    <span style="color:#a6e22e">oldRow</span>[<span style="color:#a6e22e">col</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">newRow</span>[<span style="color:#a6e22e">col</span>];
  }
}
</code></pre></div>
<p>One interesting bit there is the calculation and use of the variable <code>index</code>. Basically, <code>index</code> treats the values to the left, right, and at the given point as a binary number 0-8. These values are each decoded in another part of the code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">setTo</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>];
<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">8</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>)
  <span style="color:#a6e22e">setTo</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> (<span style="color:#a6e22e">rule</span> <span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">i</span>) <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">1</span>;
</code></pre></div>
<p>That may look like black magic, but all it&rsquo;s doing is turning a number in the range [0, 255] into a set of rules for the automaton. Here&rsquo;s how that works:</p>

<p>First, convert the number into binary:
Rule 30 = 00011110</p>

<p>Then, go through the 8 possibilies for off/on patterns we discussed earlier. Assign each bit to each pattern in order, treating 0 as off and 1 as on:</p>

<table>
<thead>
<tr>
<th>left</th>
<th>me</th>
<th>right</th>
<th>bit</th>
</tr>
</thead>

<tbody>
<tr>
<td>off</td>
<td>off</td>
<td>off</td>
<td>0 = off</td>
</tr>

<tr>
<td>off</td>
<td>off</td>
<td>on</td>
<td>0 = 0ff</td>
</tr>

<tr>
<td>off</td>
<td>on</td>
<td>off</td>
<td>0 = off</td>
</tr>

<tr>
<td>off</td>
<td>on</td>
<td>on</td>
<td>1 = on</td>
</tr>

<tr>
<td>on</td>
<td>off</td>
<td>off</td>
<td>1 = on</td>
</tr>

<tr>
<td>on</td>
<td>off</td>
<td>on</td>
<td>1 = on</td>
</tr>

<tr>
<td>on</td>
<td>on</td>
<td>off</td>
<td>1 = on</td>
</tr>

<tr>
<td>on</td>
<td>on</td>
<td>on</td>
<td>0 = off</td>
</tr>
</tbody>
</table>

<p>Then, we can interpret the table by finding the row that corresponds to what we currently see and adjusting our lights accordingly. So if our light is on and so is our left neighbor but the right is out, that means we are in the second last row and should keep our light on. If our right neighbor turns their light on though, that puts us in the last row so we should turn our light off. That then means we&rsquo;re in the 6th row, so we should turn it back on (and thus we alternate between the 6th and 8th rows until one of our neighbors turns their light off). Isn&rsquo;t it neat how you get oscillating behavior like that from such a simple set of rules?</p>

<p>In any case, that&rsquo;s about enough from me for the time being. Why don&rsquo;t you try out the demo below? You can choose any of the 256 possible rules with 5 initial conditions I mentioned above or you can try out the interesting cases mentioned in the <a href="http://mathworld.wolfram.com/ElementaryCellularAutomaton.html" title="Wolfram Mathworld: Elementary Cellular Automaton">Wolfram Mathworld</a> article mine is based on.</p>

<p>If you have any questions / comments / suggestions, feel free to drop me a line below.</p>

<p>If you would like to try this in a larger, resizable version, you can do so <a href="http://apps.jverkamp.com/small-projects/cellular/" title="jverkamp apps: Cellular">here</a>.</p>

<p>Have fun!</p>

<p><a name="thecanvas">
<canvas style="border: 1px solid black;" id="canvas" width="400" height="200"></canvas>
</a></p>

<table class="table table-striped">
  <tr><td>Rule</td><td><input class="update" id="inputRule" type="text" value="30" /></td><td class="warning" id="inputRuleWarning"></td></tr>
  <tr><td>Scale</td><td><input class="update" id="inputScale" type="text" value="1" /></td><td class="warning" id="inputScaleWarning"></td></tr>
  <tr><td>Initial condition</td>
    <td>
      <select class="update" id="inputInitial">
        <option value="point">Point</option>
        <option value="random">Random</option>
        <option value="5050">50/50 Split</option>
        <option value="black">Black</option>
        <option value="white">White</option>
      </select>
    </td><td></td>
  </tr>
  <tr><td>Interesting rules</td>
  <td>
<select id="inputInteresting">
  <option value=""></option>
  <option value="30">30</option>
  <option value="54">54</option>
  <option value="60">60</option>
  <option value="62">62</option>
  <option value="90">90</option>
  <option value="94">94</option>
  <option value="102">102</option>
  <option value="110">110</option>
  <option value="122">122</option>
  <option value="126">126</option>
  <option value="150">150</option>
  <option value="158">158</option>
  <option value="182">182</option>
  <option value="188">188</option>
  <option value="190">190</option>
  <option value="220">220</option>
  <option value="222">222</option>
  <option value="250">250</option>
</select>
</td><td></td></tr>
</table>

<p><button id="drawButton">Draw</button> <button id="saveButton">Save</button></p>

<p style="color: red;" id="warning"></p>

<p>If you&rsquo;d like, you can download the source here: <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/cellular-automaton.js" title="Cellular automaton source">cellular automaton source code</a></p>

<script>
jQuery(function($) {
  function div(a, b) {
    return Math.floor(a / b);
  }

  function drawRule(rule, initial, scale) {
    var c = $("#canvas")[0].getContext('2d');
    c.lineWidth = 1;
    c.fillStyle = "black";

    var width = $("#canvas").width();
    var height = $("#canvas").height();

    var scaleWidth = div(width, scale);
    var scaleHeight = div(height, scale);

    c.clearRect(0, 0, width, height);

    var setTo = [0, 0, 0, 0, 0, 0, 0, 0];
    for (var i = 0; i < 8; i++)
      setTo[i] = (rule >> i) & 1;

    var oldRow = new Array(scaleWidth);
    var newRow = new Array(scaleWidth);

    for (var i = 0; i < scaleWidth; i++) {
      if (initial == "random")
        oldRow[i] = (Math.random() > 0.5 ? 1 : 0);
      else if (initial == "5050")
        oldRow[i] = (i < scaleWidth / 2 ? 0 : 1);
      else if (initial == "point")
        oldRow[i] = (i == div(scaleWidth, 2) ? 1 : 0);
      else if (initial == "black")
        oldRow[i] = 1;
      else if (initial == "white")
        oldRow[i] = 0;
      else
        oldRow[i] = 0;

      newRow[i] = 0;
    }

    var index = 0;
    for (var row = 0; row < scaleHeight; row++) {
      for (var col = 0; col < scaleWidth; col++) {
        if (oldRow[col] == 1)
          c.fillRect(col * scale, row * scale, scale, scale);

        index = oldRow[col == 0 ? 0 : col - 1] * 4 + oldRow[col] * 2 + oldRow[col == scaleWidth - 1 ? scaleWidth - 1 : col + 1];
        newRow[col] = setTo[index];
      }

      for (var col = 0; col < scaleWidth; col++) {
        oldRow[col] = newRow[col];
      }
    }
  }

  $(".warning").css("color", "red");

  function doUpdate() {
    $(".warning").empty();

    var rule = parseInt($("#inputRule").val());
    if (isNaN(rule) || rule < 0 || rule > 255) {
      $("#inputRuleWarning").html('Rule must be an integer in the range [0, 255]');
      return;
    }

    var scale = parseInt($("#inputScale").val());
    if (isNaN(scale) || scale < 1 || scale > 10) {
      $("#inputScaleWarning").html('Rule must be an integer in the range [1, 10]');
      return;
    }

    var initial = $("#inputInitial").val();
    drawRule(rule, initial, scale);
  };

  $(".update").change(doUpdate);
  $("#drawButton").click(doUpdate);

  $("#inputInteresting").change(function() {
    if ($("#inputInteresting").val() != "") {
      $("#inputRule").val($("#inputInteresting").val());
      $("#inputInitial").val("point");
      $("#inputInteresting").val("");
      doUpdate();
    }
  });

  doUpdate();

  function doSave() {
    window.open(jQuery("#canvas")[0].toDataURL());
  }
  $("#saveButton").click(doSave);
});
</script></div>
<div class="entry-comments">
    <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = "jverkamp";
            var disqus_title = "Elementary cellular automaton";
            var disqus_url = "https:\/\/blog.jverkamp.com\/2012\/10\/03\/elementary-cellular-automaton\/";

             
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div></article></div>
        </div><footer id="page-footer" role="contentinfo">
    <nav id="footer-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
            <li><a href="/archive-by-date/">All posts: By Date</a></li>
            <li><a href="/archive-by-tag/">All posts: By Tag</a></li>

            <li>
                <a href="/atom.xml">
                    RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li><li>
                <a href="/programming/atom.xml">
                    RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li></ul>
    </nav>

    <div id="page-footer-content">
        <div class="legal">
            <p>
                All posts unless otherwise mentioned are licensed under
                <a rel="license" href="//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
                    <img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png">
                </a>
            </p>

            <p>
                Any source code unless otherwise mentioned is licensed under the <a href="//directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
            </p>
        </div>
    </div>
</footer>
</div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js" integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js" integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin="anonymous"></script>

<script type="text/javascript" src="/custom.js" defer></script>
</body>
</html>
