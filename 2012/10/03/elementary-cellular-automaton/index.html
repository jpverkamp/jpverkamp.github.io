<!doctype html><html><head><title>Elementary cellular automaton â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_5823201688106629450.min.8c7d803d89ebdecf2416d468f4ecb981a3acf645154a7a336f2e5d0190ea8163.js integrity="sha256-jH2APYnr3s8kFtRo9Oy5gaOs9kUVSnozby5dAZDqgWM=" defer></script>
<script src=/jquery.fancybox_6181813213021922412.min.921ca906a32e718ab61ac0b4da24e0eaa6bdd41912654a33b44bd3fc2f0c2a4d.js integrity="sha256-khypBqMucYq2GsC02iTg6qa91BkSZUoztEvT/C8MKk0=" defer></script>
<script src=/katex_12008035502722260518.min.1c3dce03daaf56a7d2fe0d0ec49bf35256837226f835adaf52c09502ef9bc5d1.js integrity="sha256-HD3OA9qvVqfS/g0OxJvzUlaDcib4Na2vUsCVAu+bxdE=" defer></script>
<script src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js integrity="sha256-XoC9heuuuVYHg01nd7/nAT0dFh8PAqMbhF5L12WJgxY=" defer></script>
<script src=/mermaid_12365941879912544862.min.973b5415b3fa1835d620c0e58236f859d5f80891f447e240cbbb9eb825251ff0.js integrity="sha256-lztUFbP6GDXWIMDlgjb4WdX4CJH0R+JAy7ueuCUlH/A=" defer></script>
<script src=/main.min.982c2d7bb434b4cf8b19c2cf38ef7e7f7162ddbed610e5bdddbb937001e26574.js integrity="sha256-mCwte7Q0tM+LGcLPOO9+f3Fi3b7WEOW93buTcAHiZXQ=" defer></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css integrity="sha256-4otdfZ2J76y19wisMMvXaxuaD4Ft/Z2pZjHR0Jy73XY="><link rel=stylesheet href=/css_4780214198035419921.min.246b6f8e7620eeb717bca5e7b121037906e5dfaa05805f427fcc5a09b6c99f5c.css integrity="sha256-JGtvjnYg7rcXvKXnsSEDeQbl36oFgF9Cf8xaCbbJn1w="><link rel=stylesheet href=/main.min.e0e68b86dea32185ab89b0b9cc01649107cc6b0be3290c8c7b13c716bc0dabfa.css integrity="sha256-4OaLht6jIYWribC5zAFkkQfMawvjKQyMexPHFrwNq/o="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>Elementary cellular automaton</h1><div class=entry-meta><span class=entry-date>2012-10-03</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2012/09/27/html5-bugs/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/html>HTML</a><a href=https://blog.jverkamp.com/2012/10/06/generated-html-index/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2012/10/01/the-birthday-paradox/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/javascript>JavaScript</a><a href=https://blog.jverkamp.com/2012/10/08/evaluating-prefix/infix/postfix-expressions/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a class=taxonomy-value href=/programming/topics/cellular-automata>Cellular Automata</a><a href=https://blog.jverkamp.com/2012/10/17/rule-30-rng/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2012/10/01/the-birthday-paradox/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/mathematics>Mathematics</a><a href=https://blog.jverkamp.com/2012/10/17/rule-30-rng/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2012/09/27/html5-bugs/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/web-development>Web Development</a><a href=https://blog.jverkamp.com/2012/10/06/generated-html-index/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2012/10/01/the-birthday-paradox/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2012/10/04/querying-csv-files-with-sql/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2012/10/02/a-sea-of-stars-ch.-11-surprises/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2012/10/04/querying-csv-files-with-sql/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>Today we&rsquo;re going to be playing with an HTML5 canvas again (previously we made <a href=https://blog.jverkamp.com/2012/09/26/line-art-with-an-html5-canvas/>line art</a> and <a href=https://blog.jverkamp.com/2012/09/27/html5-bugs/>bugs</a>). This time, the goal is to make a tool where you can explore <a href=http://mathworld.wolfram.com/ElementaryCellularAutomaton.html title="Wolfram Mathworld: Elementary Cellular Automaton">elementary cellular automaton</a>.</p><p>(If you just want to jump to the toy, <a href=#thecanvas>click here</a>. There&rsquo;s also a much larger version available <a href=http://apps.jverkamp.com/small-projects/cellular/ title="jverkamp apps: Cellular">here</a>.)</p><p>Essentially, you can think of an elementary cellular automaton as a function on a series of rooms. Each room has a light and the ability to see their neighbor&rsquo;s lights as well as their own. Now if you take that those three inputs, there are 8 cases to consider:</p><table><thead><tr><th>left</th><th>me</th><th>right</th></tr></thead><tbody><tr><td>off</td><td>off</td><td>off</td></tr><tr><td>off</td><td>off</td><td>on</td></tr><tr><td>off</td><td>on</td><td>off</td></tr><tr><td>off</td><td>on</td><td>on</td></tr><tr><td>on</td><td>off</td><td>off</td></tr><tr><td>on</td><td>off</td><td>on</td></tr><tr><td>on</td><td>on</td><td>off</td></tr><tr><td>on</td><td>on</td><td>on</td></tr></tbody></table><p>For each of those eight inputs, there are two possible outputs. I can either turn my light on or turn it off. This in turn will be seen by my neighbors who might the adjust their own lights and so on.</p><p>What gets more interesting is when you show a picture of the changing lights over time. Imagine a series of rows where each row is the state of all of the lights at one moment in time. So if the rule is that whenever either neighbor&rsquo;s light is on to turn your own on, you&rsquo;ll see a spreading wave of lights turning on as you move down the picture (rule 222).</p><p>So how does this all work in practice? It turns out, it&rsquo;s actually pretty simple.</p><p>First, we&rsquo;ll initialize two arrays. I&rsquo;ve included a number of initial conditions including all off, all on, half and half, random, and a single point.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>oldRow</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#a6e22e>width</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>newRow</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#a6e22e>width</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>initial</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;random&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> (Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>initial</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;5050&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>initial</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;point&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>==</span> Math.<span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>?</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>initial</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;black&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>initial</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;white&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>newRow</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Why two arrays? So that we can update one without the updates themselves having an effect on the row we&rsquo;re working on. You could actually do that just as well, but it wouldn&rsquo;t be the simulation we&rsquo;re trying to do.</p><p>In any case, the next step we need is run the actual simulation. Basically, work from top to bottom making each row based off of the previous one.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>row</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>row</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>col</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>col</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>col</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>fillRect</span>(<span style=color:#a6e22e>col</span>, <span style=color:#a6e22e>row</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>col</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>col</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>col</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>newRow</span>[<span style=color:#a6e22e>col</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>setTo</span>[<span style=color:#a6e22e>index</span>];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>col</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>col</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>oldRow</span>[<span style=color:#a6e22e>col</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>newRow</span>[<span style=color:#a6e22e>col</span>];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>One interesting bit there is the calculation and use of the variable <code>index</code>. Basically, <code>index</code> treats the values to the left, right, and at the given point as a binary number 0-8. These values are each decoded in another part of the code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>setTo</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>8</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setTo</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> (<span style=color:#a6e22e>rule</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#a6e22e>i</span>) <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>1</span>;
</span></span></code></pre></div><p>That may look like black magic, but all it&rsquo;s doing is turning a number in the range [0, 255] into a set of rules for the automaton. Here&rsquo;s how that works:</p><p>First, convert the number into binary:
Rule 30 = 00011110</p><p>Then, go through the 8 possibilies for off/on patterns we discussed earlier. Assign each bit to each pattern in order, treating 0 as off and 1 as on:</p><table><thead><tr><th>left</th><th>me</th><th>right</th><th>bit</th></tr></thead><tbody><tr><td>off</td><td>off</td><td>off</td><td>0 = off</td></tr><tr><td>off</td><td>off</td><td>on</td><td>0 = 0ff</td></tr><tr><td>off</td><td>on</td><td>off</td><td>0 = off</td></tr><tr><td>off</td><td>on</td><td>on</td><td>1 = on</td></tr><tr><td>on</td><td>off</td><td>off</td><td>1 = on</td></tr><tr><td>on</td><td>off</td><td>on</td><td>1 = on</td></tr><tr><td>on</td><td>on</td><td>off</td><td>1 = on</td></tr><tr><td>on</td><td>on</td><td>on</td><td>0 = off</td></tr></tbody></table><p>Then, we can interpret the table by finding the row that corresponds to what we currently see and adjusting our lights accordingly. So if our light is on and so is our left neighbor but the right is out, that means we are in the second last row and should keep our light on. If our right neighbor turns their light on though, that puts us in the last row so we should turn our light off. That then means we&rsquo;re in the 6th row, so we should turn it back on (and thus we alternate between the 6th and 8th rows until one of our neighbors turns their light off). Isn&rsquo;t it neat how you get oscillating behavior like that from such a simple set of rules?</p><p>In any case, that&rsquo;s about enough from me for the time being. Why don&rsquo;t you try out the demo below? You can choose any of the 256 possible rules with 5 initial conditions I mentioned above or you can try out the interesting cases mentioned in the <a href=http://mathworld.wolfram.com/ElementaryCellularAutomaton.html title="Wolfram Mathworld: Elementary Cellular Automaton">Wolfram Mathworld</a> article mine is based on.</p><p>If you have any questions / comments / suggestions, feel free to drop me a line below.</p><p>If you would like to try this in a larger, resizable version, you can do so <a href=http://apps.jverkamp.com/small-projects/cellular/ title="jverkamp apps: Cellular">here</a>.</p><p>Have fun!</p><a name=thecanvas><canvas style="border:1px solid #000" id=canvas width=400 height=200></canvas></a><table class="table table-striped"><tr><td>Rule</td><td><input class=update id=inputRule type=text value=30></td><td class=warning id=inputRuleWarning></td></tr><tr><td>Scale</td><td><input class=update id=inputScale type=text value=1></td><td class=warning id=inputScaleWarning></td></tr><tr><td>Initial condition</td><td><select class=update id=inputInitial><option value=point>Point</option><option value=random>Random</option><option value=5050>50/50 Split</option><option value=black>Black</option><option value=white>White</option></select></td><td></td></tr><tr><td>Interesting rules</td><td><select id=inputInteresting><option value></option><option value=30>30</option><option value=54>54</option><option value=60>60</option><option value=62>62</option><option value=90>90</option><option value=94>94</option><option value=102>102</option><option value=110>110</option><option value=122>122</option><option value=126>126</option><option value=150>150</option><option value=158>158</option><option value=182>182</option><option value=188>188</option><option value=190>190</option><option value=220>220</option><option value=222>222</option><option value=250>250</option></select></td><td></td></tr></table><p><button id=drawButton>Draw</button> <button id=saveButton>Save</button></p><p style=color:red id=warning></p><p>If you&rsquo;d like, you can download the source here: <a href=https://github.com/jpverkamp/small-projects/blob/master/blog/cellular-automaton.js title="Cellular automaton source">cellular automaton source code</a></p><script>jQuery(function(e){function n(e,t){return Math.floor(e/t)}function s(t,s,o){var i,a,r,c,d,u,h,m,f,p,g,l=e("#canvas")[0].getContext("2d");l.lineWidth=1,l.fillStyle="black",h=e("#canvas").width(),m=e("#canvas").height(),c=n(h,o),g=n(m,o),l.clearRect(0,0,h,m),f=[0,0,0,0,0,0,0,0];for(i=0;i<8;i++)f[i]=t>>i&1;r=new Array(c),d=new Array(c);for(i=0;i<c;i++)s=="random"?r[i]=Math.random()>.5?1:0:s=="5050"?r[i]=i<c/2?0:1:s=="point"?r[i]=i==n(c,2)?1:0:s=="black"?r[i]=1:s=="white"?r[i]=0:r[i]=0,d[i]=0;p=0;for(u=0;u<g;u++){for(a=0;a<c;a++)r[a]==1&&l.fillRect(a*o,u*o,o,o),p=r[a==0?0:a-1]*4+r[a]*2+r[a==c-1?c-1:a+1],d[a]=f[p];for(a=0;a<c;a++)r[a]=d[a]}}e(".warning").css("color","red");function t(){e(".warning").empty();var t,o,n=parseInt(e("#inputRule").val());if(isNaN(n)||n<0||n>255){e("#inputRuleWarning").html("Rule must be an integer in the range [0, 255]");return}if(t=parseInt(e("#inputScale").val()),isNaN(t)||t<1||t>10){e("#inputScaleWarning").html("Rule must be an integer in the range [1, 10]");return}o=e("#inputInitial").val(),s(n,o,t)}e(".update").change(t),e("#drawButton").click(t),e("#inputInteresting").change(function(){e("#inputInteresting").val()!=""&&(e("#inputRule").val(e("#inputInteresting").val()),e("#inputInitial").val("point"),e("#inputInteresting").val(""),t())}),t();function o(){window.open(jQuery("#canvas")[0].toDataURL())}e("#saveButton").click(o)})</script></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>