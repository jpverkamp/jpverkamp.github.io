<!doctype html><html><head><title>Hash Tables With Open Addressing – jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_5823201688106629450.min.8c7d803d89ebdecf2416d468f4ecb981a3acf645154a7a336f2e5d0190ea8163.js integrity="sha256-jH2APYnr3s8kFtRo9Oy5gaOs9kUVSnozby5dAZDqgWM=" defer></script>
<script src=/jquery.fancybox_6181813213021922412.min.921ca906a32e718ab61ac0b4da24e0eaa6bdd41912654a33b44bd3fc2f0c2a4d.js integrity="sha256-khypBqMucYq2GsC02iTg6qa91BkSZUoztEvT/C8MKk0=" defer></script>
<script src=/katex_12008035502722260518.min.1c3dce03daaf56a7d2fe0d0ec49bf35256837226f835adaf52c09502ef9bc5d1.js integrity="sha256-HD3OA9qvVqfS/g0OxJvzUlaDcib4Na2vUsCVAu+bxdE=" defer></script>
<script src=/auto-render_2152414756166376840.min.45ae2f6b03d0c7b867df0a6cb7d43215ec78369998685a5748c5b12f502321f2.js integrity="sha256-Ra4vawPQx7hn3wpst9QyFex4NpmYaFpXSMWxL1AjIfI=" defer></script>
<script src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js integrity="sha256-XoC9heuuuVYHg01nd7/nAT0dFh8PAqMbhF5L12WJgxY=" defer></script>
<script src=/mermaid_12365941879912544862.min.973b5415b3fa1835d620c0e58236f859d5f80891f447e240cbbb9eb825251ff0.js integrity="sha256-lztUFbP6GDXWIMDlgjb4WdX4CJH0R+JAy7ueuCUlH/A=" defer></script>
<script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css integrity="sha256-4otdfZ2J76y19wisMMvXaxuaD4Ft/Z2pZjHR0Jy73XY="><link rel=stylesheet href=/css_4780214198035419921.min.246b6f8e7620eeb717bca5e7b121037906e5dfaa05805f427fcc5a09b6c99f5c.css integrity="sha256-JGtvjnYg7rcXvKXnsSEDeQbl36oFgF9Cf8xaCbbJn1w="><link rel=stylesheet href=/main.min.d99288811f82c16d031e4f6c01e50e18aeccbb9968db7c625a21660aef059ef5.css integrity="sha256-2ZKIgR+CwW0DHk9sAeUOGK7Mu5lo23xiWiFmCu8FnvU="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>Hash Tables With Open Addressing</h1><div class=entry-meta><span class=entry-date>2012-08-29</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2012/08/27/4sum/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/scheme>Scheme</a><a href=https://blog.jverkamp.com/2012/08/30/random-access-lists/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2012/08/27/4sum/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/programming-praxis>Programming Praxis</a><a href=https://blog.jverkamp.com/2012/08/30/random-access-lists/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2012/08/27/4sum/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2012/08/30/random-access-lists/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2012/08/28/a-sea-of-stars-ch.-1-liftoff/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2012/08/30/random-access-lists/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>Another day, another post from <a href=https://github.com/jpverkamp/small-projects/blob/master/chez-libraries/hash.ss target=_blank rel=noopener>here</a>.</p><p>Okay, first, some administrative detail. First, we have to set up the library (we&rsquo;re important the standard Chez Scheme library) and the data structure that we&rsquo;re going to use internally. The nice thing about <code>define-record</code> is that it makes a bunch of functions for us, like the constructor <code>make-#️⃣</code> and the accessors <code>#️⃣-f</code>, <code>#️⃣-nul</code>, <code>#️⃣-vals</code>, etc.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>(<span style=color:#a6e22e>library</span> (<span style=color:#a6e22e>hash</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>export</span> make-hash hash-ref hash-set! hash-unset! hash-&gt;list)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>import</span> (<span style=color:#a6e22e>chezscheme</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-record</span> <span style=color:#f92672>#</span>️<span style=color:#960050;background-color:#1e0010>⃣</span> (<span style=color:#a6e22e>f</span> nul del keys vals))
</span></span></code></pre></div><p>Next up, we want a function that will set up a hash. I went with the abstraction that you pass the hashing function in here and it&rsquo;s stored with the hash record rather than passing it around all over the place. The nul and del symbols are also created here, gensym&rsquo;ed to be unique<sup>1</sup>. The hash function is also wrapped here to force all generated keys to be in the proper range.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; given a hash function and a size for the table, create a hash</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>make-hash</span> hash-function size)
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>let </span>([nul (<span style=color:#a6e22e>gensym</span>)])
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>make-</span><span style=color:#f92672>#</span>️<span style=color:#960050;background-color:#1e0010>⃣</span> 
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>lambda </span>(<span style=color:#a6e22e>key</span>)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>mod</span> (<span style=color:#a6e22e>hash-function</span> key) size))
</span></span><span style=display:flex><span>      nul
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>gensym</span>)
</span></span><span style=display:flex><span>      (make-vector size nul)
</span></span><span style=display:flex><span>      (make-vector size nul))))
</span></span></code></pre></div><p>Next, our first helper function. I want to be able to unpack all of the parts of a <code>#️⃣</code> structure, which I can do with this nice bit of code and the helper of multiple value returns. Behold the power of Scheme!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; unpack a #️⃣</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>*unpack</span> h)
</span></span><span style=display:flex><span>  (values 
</span></span><span style=display:flex><span>    (<span style=color:#f92672>#</span>️<span style=color:#960050;background-color:#1e0010>⃣</span>-f h) (<span style=color:#f92672>#</span>️<span style=color:#960050;background-color:#1e0010>⃣</span>-nul h) (<span style=color:#f92672>#</span>️<span style=color:#960050;background-color:#1e0010>⃣</span>-del h)
</span></span><span style=display:flex><span>    (<span style=color:#f92672>#</span>️<span style=color:#960050;background-color:#1e0010>⃣</span>-keys h) (<span style=color:#f92672>#</span>️<span style=color:#960050;background-color:#1e0010>⃣</span>-vals h)))
</span></span></code></pre></div><p>Our second helper. This one is the core of pretty much all of the rest of the functions. Basically, we want to turn a key into an index. If the key is in the hash, this should be the index into the <code>keys</code> and <code>vals</code> for that key. If the key isn&rsquo;t, this should be the first location currently marked as either <code>nul</code> or <code>del</code> after that point. If the hash is full when you try to look up a hash that isn&rsquo;t already in it, then you&rsquo;ll get a nice error.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; convert a hash into an index</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; start at the hashed index and look for either that key or nul</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; error (hash is full) if we loop</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; set del? to return a del? index</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>*get-index</span> h k del?)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>let-values</span> ([(<span style=color:#a6e22e>f</span> nul del ks vs) (<span style=color:#a6e22e>*unpack</span> h)])
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>let </span>([i0 (<span style=color:#a6e22e>f</span> k)])
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>let </span>loop ([i i0] [fst <span style=color:#66d9ef>#t</span>])
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>cond</span>
</span></span><span style=display:flex><span>          [(<span style=color:#66d9ef>and </span>(not fst) (= i i0)) (<span style=color:#a6e22e>error</span> <span style=color:#e6db74>&#39;hash</span> <span style=color:#e6db74>&#34;hash is full&#34;</span>)]
</span></span><span style=display:flex><span>          [(equal? (vector-ref ks i) k) i]
</span></span><span style=display:flex><span>          [(equal? (vector-ref ks i) nul) i]
</span></span><span style=display:flex><span>          [(<span style=color:#66d9ef>and </span>del? (equal? (vector-ref ks i) del)) i]
</span></span><span style=display:flex><span>          [<span style=color:#66d9ef>else </span>(<span style=color:#a6e22e>loop</span> (<span style=color:#a6e22e>mod</span> (+ i <span style=color:#ae81ff>1</span>) <span style=color:#ae81ff>1000</span>) <span style=color:#66d9ef>#f</span>)])))))
</span></span></code></pre></div><p>Once the helper is set up, it makes writing things like <code>hash-ref</code> much easier. Just find the index. If they key matches, return the value; otherwise, return an error.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; get the value associated with a key k out of the hash h</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; error if they key has not been set</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>hash-ref</span> h k)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>let-values</span> ([(<span style=color:#a6e22e>f</span> nul del ks vs) (<span style=color:#a6e22e>*unpack</span> h)])
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>let </span>([i (<span style=color:#a6e22e>*get-index</span> h k <span style=color:#66d9ef>#f</span>)])
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>cond</span>
</span></span><span style=display:flex><span>        [(equal? (vector-ref ks i) nul)
</span></span><span style=display:flex><span>         (<span style=color:#a6e22e>error</span> <span style=color:#e6db74>&#39;hash</span> <span style=color:#e6db74>&#34;key not set&#34;</span>)]
</span></span><span style=display:flex><span>        [else
</span></span><span style=display:flex><span>         (vector-ref vs i)]))))
</span></span></code></pre></div><p>Even easier is the mutator for binding a key and a value. Since the <code>*get-index</code> function returns either the index of the item if it already exists or the first available index, you can just use that and then set the key and value. Done. Bam.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; get the value associated with key k out of the hash h</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>hash-set!</span> h k v)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>let-values</span> ([(<span style=color:#a6e22e>f</span> nul del ks vs) (<span style=color:#a6e22e>*unpack</span> h)])
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>let </span>([i (<span style=color:#a6e22e>*get-index</span> h k <span style=color:#66d9ef>#t</span>)])
</span></span><span style=display:flex><span>      (vector-set! ks i k)
</span></span><span style=display:flex><span>      (vector-set! vs i v))))
</span></span></code></pre></div><p>Same for unsetting values. Just set the key and value to <code>del</code>. Technically, we don&rsquo;t have to set the value as a value associated with <code>key = del</code> will never show up, but we might as well.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; remove a given key from the hash</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>hash-unset!</span> h k)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>let-values</span> ([(<span style=color:#a6e22e>f</span> nul del ks vs) (<span style=color:#a6e22e>*unpack</span> h)])
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>let </span>([i (<span style=color:#a6e22e>*get-index</span> h k <span style=color:#66d9ef>#t</span>)])
</span></span><span style=display:flex><span>      (vector-set! ks i del)
</span></span><span style=display:flex><span>      (vector-set! vs i del))))
</span></span></code></pre></div><p>Finally, a nice helper function to convert a hash into an association list. Pretty straight forward.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; convert a hash into a list of key, value pairs</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>hash-&gt;list</span> h)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>let-values</span> ([(<span style=color:#a6e22e>f</span> nul del ks vs) (<span style=color:#a6e22e>*unpack</span> h)])
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>let </span>loop ([i <span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>cond</span>
</span></span><span style=display:flex><span>        [(= i (vector-length ks)) <span style=color:#f92672>&#39;</span>()]
</span></span><span style=display:flex><span>        [(<span style=color:#66d9ef>or </span>(equal? (vector-ref ks i) nul)
</span></span><span style=display:flex><span>             (equal? (vector-ref ks i) del))
</span></span><span style=display:flex><span>         (<span style=color:#a6e22e>loop</span> (+ i <span style=color:#ae81ff>1</span>))]
</span></span><span style=display:flex><span>        [else
</span></span><span style=display:flex><span>         (cons 
</span></span><span style=display:flex><span>           (cons (vector-ref ks i) (vector-ref vs i))
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>loop</span> (+ i <span style=color:#ae81ff>1</span>)))]))))
</span></span></code></pre></div><p>And then the inverse:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; convert a hash into a list of key, value pairs</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>hash-&gt;list</span> h)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>let-values</span> ([(<span style=color:#a6e22e>f</span> nul del ks vs) (<span style=color:#a6e22e>*unpack</span> h)])
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>let </span>loop ([i <span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>cond</span>
</span></span><span style=display:flex><span>        [(= i (vector-length ks)) <span style=color:#f92672>&#39;</span>()]
</span></span><span style=display:flex><span>        [(<span style=color:#66d9ef>or </span>(equal? (vector-ref ks i) nul)
</span></span><span style=display:flex><span>             (equal? (vector-ref ks i) del))
</span></span><span style=display:flex><span>         (<span style=color:#a6e22e>loop</span> (+ i <span style=color:#ae81ff>1</span>))]
</span></span><span style=display:flex><span>        [else
</span></span><span style=display:flex><span>         (cons 
</span></span><span style=display:flex><span>           (list (vector-ref ks i) (vector-ref vs i))
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>loop</span> (+ i <span style=color:#ae81ff>1</span>)))]))))
</span></span></code></pre></div><p>Also, I wanted to make the printout a little nicer. Instead of printing out the hash function and <code>nul</code> and <code>del</code> values, just print out the association list.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; custom writer for the hash</span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>record-writer</span> (<span style=color:#a6e22e>type-descriptor</span> <span style=color:#f92672>#</span>️<span style=color:#960050;background-color:#1e0010>⃣</span>smile:
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>lambda </span>(<span style=color:#a6e22e>r</span> p wr)
</span></span><span style=display:flex><span>    (display <span style=color:#e6db74>&#34;#[hash &#34;</span> p)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>wr</span> (<span style=color:#a6e22e>hash-&gt;list</span> r) p)
</span></span><span style=display:flex><span>    (display <span style=color:#e6db74>&#34;]&#34;</span> p)))
</span></span></code></pre></div><p>All together, we have a nice hashing library. Let&rsquo;s try it out! I&rsquo;m going to use Chez Scheme&rsquo;s built in <code>string-hash</code> for the hashing function. Let&rsquo;s start with a 100 item hash.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>~ (<span style=color:#a6e22e>import</span> (<span style=color:#a6e22e>hash</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ (<span style=color:#66d9ef>define </span>h (<span style=color:#a6e22e>make-hash</span> string-hash <span style=color:#ae81ff>100</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ h
</span></span><span style=display:flex><span> <span style=color:#f92672>#</span>[hash ()]
</span></span></code></pre></div><p>Now, we&rsquo;ll add a few keys:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>~ (<span style=color:#a6e22e>hash-set!</span> h <span style=color:#e6db74>&#34;cat&#34;</span> <span style=color:#e6db74>&#34;dog&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ (<span style=color:#a6e22e>hash-set!</span> h <span style=color:#e6db74>&#34;thunder&#34;</span> <span style=color:#e6db74>&#34;storm&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ (<span style=color:#a6e22e>hash-set!</span> h <span style=color:#e6db74>&#34;alpha&#34;</span> <span style=color:#e6db74>&#34;beta&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ h
</span></span><span style=display:flex><span> <span style=color:#f92672>#</span>[hash ((<span style=color:#e6db74>&#34;thunder&#34;</span> <span style=color:#e6db74>&#34;storm&#34;</span>) (<span style=color:#e6db74>&#34;cat&#34;</span> <span style=color:#e6db74>&#34;dog&#34;</span>) (<span style=color:#e6db74>&#34;alpha&#34;</span> <span style=color:#e6db74>&#34;beta&#34;</span>))]
</span></span></code></pre></div><p>Delete one and reset another:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>~ (<span style=color:#a6e22e>hash-unset!</span> h <span style=color:#e6db74>&#34;cat&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ (<span style=color:#a6e22e>hash-set!</span> h <span style=color:#e6db74>&#34;thunder&#34;</span> <span style=color:#e6db74>&#34;stone&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ h
</span></span><span style=display:flex><span> <span style=color:#f92672>#</span>[hash ((<span style=color:#e6db74>&#34;thunder&#34;</span> <span style=color:#e6db74>&#34;stone&#34;</span>) (<span style=color:#e6db74>&#34;alpha&#34;</span> <span style=color:#e6db74>&#34;beta&#34;</span>))]
</span></span></code></pre></div><p>Finally, test <code>hash->list</code> and <code>list->hash</code>. The <code>list->hash</code> also tests collisions as everything hashes to the same thing. (Isn&rsquo;t that an awesome hashing function?)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>~ (<span style=color:#a6e22e>hash-&gt;list</span> h)
</span></span><span style=display:flex><span> ((<span style=color:#e6db74>&#34;thunder&#34;</span> <span style=color:#e6db74>&#34;stone&#34;</span>) (<span style=color:#e6db74>&#34;alpha&#34;</span> <span style=color:#e6db74>&#34;beta&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ (<span style=color:#66d9ef>define </span>h2 (<span style=color:#a6e22e>list-&gt;hash</span> (<span style=color:#66d9ef>lambda </span>(<span style=color:#a6e22e>x</span>) x) <span style=color:#ae81ff>5</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> zero) (<span style=color:#ae81ff>1</span> one) (<span style=color:#ae81ff>5</span> five))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ (<span style=color:#a6e22e>hash-unset!</span> h2 <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ (<span style=color:#a6e22e>hash-set!</span> h2 <span style=color:#ae81ff>2</span> <span style=color:#e6db74>&#39;two</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~ h2
</span></span><span style=display:flex><span> <span style=color:#f92672>#</span>[hash ((<span style=color:#ae81ff>0</span> zero) (<span style=color:#ae81ff>5</span> five) (<span style=color:#ae81ff>2</span> two))]
</span></span></code></pre></div><p>Anyways, that&rsquo;s what I have. You can download the entire code <a href=https://github.com/jpverkamp/small-projects/blob/master/chez-libraries/hash.ss target=_blank rel=noopener>here</a>.</p><p><sup>1</sup> unique enough for our purposes anyways</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>