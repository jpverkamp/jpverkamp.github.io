<!DOCTYPE html>
<html>
<head>
    <title>
    Narcissistic Numbers – jverkamp.com
</title>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">

    <link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="//blog.jverkamp.com/feed/">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/css/themes/light/nanogallery_light.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css">

<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel="stylesheet">

<link rel="stylesheet" href="/custom.css" defer />


    
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <div id="wrapper">
        <header id="page-header" role="banner">
    <h1><a href="/">JP's Blog</a></h1>

    <ul id="page-header-links">
        <li>
            <a href="https://twitter.com/jpverkamp">Twitter</a> *
            <a href="https://github.com/jpverkamp">GitHub</a> *
            <a href="https://www.flickr.com/photos/jpverkamp">Flickr</a>
        </li>
        <li>
            <form action="//www.google.com/search" method="get" onsubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search" _lpchecked="1">
                <div class="form-group">
                    <input name="q" type="hidden">
                    <input name="qfront" type="text" class="form-control" placeholder="Search">
                    <button type="submit" class="btn btn-default" value="Search">Search</button>
                </div>
            </form>
        </li>

    </ul>

    <nav id="header-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
        
            
        
            
            <li><a href="https://blog.jverkamp.com/photography/">Photography</a></li>
            
        
            
            <li><a href="https://blog.jverkamp.com/programming/">Programming</a></li>
            
        
            
            <li><a href="https://blog.jverkamp.com/research/">Research</a></li>
            
        
            
            <li><a href="https://blog.jverkamp.com/reviews/">Reviews</a></li>
            
        
            
            <li><a href="https://blog.jverkamp.com/writing/">Writing</a></li>
            
        
            <li class="subscription" data-subscription="rss"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </nav>
</header>


        <div id="page-content-wrapper">
            <div id="page-content">
            
<article>
	<header>
		<h1 class="entry-title">Narcissistic Numbers</h1>

        <div class="entry-meta">
            
            <span class="entry-date">2012-12-14</span>
            
            
        </div>

        <div class="entry-tags">
    
    

    <ul class="taxonomy-keys">
    
        
        

        
        

        
    
        
        

        
        

        
        <li>
            <a class="taxonomy-key" href="/programming/languages/">Languages</a>
            <ul class="taxonomy-values">
            
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    

                    
                    

                    <li>
                        <a href="https://blog.jverkamp.com/2012/12/12/generating-non-repeating-strings/" class="previous-link"></a>
                        <a class="taxonomy-value" href="/programming/languages/racket">Racket</a>
                        <a href="https://blog.jverkamp.com/2012/12/22/nested-primes/" class="next-link"></a>
                    </li>
                
            
                

                
                

                
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    

                    
                    

                    <li>
                        <a href="https://blog.jverkamp.com/2012/12/12/generating-non-repeating-strings/" class="previous-link"></a>
                        <a class="taxonomy-value" href="/programming/languages/scheme">Scheme</a>
                        <a href="https://blog.jverkamp.com/2012/12/22/nested-primes/" class="next-link"></a>
                    </li>
                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
            
            </ul>
        </li>
        
    
        
        

        
        

        
        <li>
            <a class="taxonomy-key" href="/programming/sources/">Sources</a>
            <ul class="taxonomy-values">
            
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    

                    
                    

                    <li>
                        <a href="https://blog.jverkamp.com/2012/12/12/generating-non-repeating-strings/" class="previous-link"></a>
                        <a class="taxonomy-value" href="/programming/sources/programming-praxis">Programming Praxis</a>
                        <a href="https://blog.jverkamp.com/2012/12/22/nested-primes/" class="next-link"></a>
                    </li>
                
            
                

                
                

                
            
                

                
                

                
            
            
            </ul>
        </li>
        
    
        
        

        
        

        
        <li>
            <a class="taxonomy-key" href="/programming/topics/">Topics</a>
            <ul class="taxonomy-values">
            
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    

                    
                    

                    <li>
                        <a href="https://blog.jverkamp.com/2012/11/29/one-billion-primes---segmented-sieve/" class="previous-link"></a>
                        <a class="taxonomy-value" href="/programming/topics/mathematics">Mathematics</a>
                        <a href="https://blog.jverkamp.com/2013/01/02/happy-new-year/" class="next-link"></a>
                    </li>
                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
                

                
                

                
            
            
            </ul>
        </li>
        
    
        
        

        
        

        
    
        
        

        
        

        
    
        
        

        
        

        
    
        
        

        
        

        
    
        
        

        
        

        
    
        
        

        
        

        
    

    
        
        <li><a class="taxonomy-key" href="/programming">programming</a>
            <ul>
                <li>
                
                <a href="https://blog.jverkamp.com/2012/12/12/generating-non-repeating-strings/" class="previous-link">Prev</a>
                

                
                <a href="https://blog.jverkamp.com/2012/12/18/ludum-dare-25---first-favorites/" class="next-link">Next</a>
                
            </ul>
        </li>
        

        
        <li><a class="taxonomy-key" href="/">All Posts</a>
            <ul>
                <li>
                
                <a href="https://blog.jverkamp.com/2012/12/14/confession---day-43/" class="previous-link">Prev</a>
                

                
                <a href="https://blog.jverkamp.com/2012/12/15/confession---day-44/" class="next-link">Next</a>
                
            </ul>
        </li>
        
    
    </ul>
</div>

    </header>

	<div class="entry-content">
		<p><a title="Programming Praxis: 115132219018763992565095597973971522401" href="http://programmingpraxis.com/2012/12/14/115132219018763992565095597973971522401/">Today&rsquo;s post</a> from Programming Praxis posits an interesting problem: how can we (efficiently) find all of the <a title="Wolfram Mathworld: Narcissistic numbers" href="http://mathworld.wolfram.com/NarcissisticNumber.html">narcissistic numbers</a> (in base 10)?</p>

<p></p>

<p>First, we need to know just what a narcissistic number is. Relatively simply put, it&rsquo;s a number with <em>n</em> digits such that the sum of each digit raised to the *n*th power is the number itself. So 153 is a narcissistic number because <em>1<sup>3</sup> + 5<sup>3</sup> + 3<sup>3</sup> = 153</em>.</p>

<p>Furthermore, it turns out that we can establish an upper bound. Because the maximum such number would be all 9s, we only have a valid number if the following holds true:</p>

<div class="latex-block">
    n 9^n < 10^{n-1}
</div>


<p>This is true for <span class="latex-inline">n \leq 60</span>
, so that will be our eventual upper bound (although the largest one is actually only 39 digits long: 115132219018763992565095597973971522401).</p>

<p>If you&rsquo;d like to follow along, you can download the full source here:
- <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/narcissistic.rkt" title="narcissistic source code on GitHub">narcissistic source code</a></p>

<p>To start with, we know that simply directly enumerating all of the numbers is going to take a really long time, let along calculating all of those exponents. So let&rsquo;s try to do something a bit smarter. My idea is to recur on lists of digits. As we go, keep the list of digits and the sum of powers of those. Once the sum is too large, we can break that recursion since it will never have a solution.</p>

<p>So here&rsquo;s that initial code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#75715e">; find all narcissistic numbers of length n</span>
<span style="color:#75715e">; narcissistic numbers are those which have the following property</span>
<span style="color:#75715e">; i = sum(d^n) for digit d in number i of length n</span>
(<span style="color:#66d9ef">define </span>(narcissistic n)
  <span style="color:#75715e">; exponents</span>
  (<span style="color:#66d9ef">define </span>expts (for/vector ([i (in-range <span style="color:#ae81ff">10</span>)]) (expt i n)))

  <span style="color:#75715e">; upper bound on n</span>
  (<span style="color:#66d9ef">define </span>bound (expt <span style="color:#ae81ff">10</span> n))

  <span style="color:#75715e">; find all numbers</span>
  (sort
   (unique
    <span style="color:#75715e">; digits - digits added so far</span>
    <span style="color:#75715e">; sum - the current sum of powers</span>
    (<span style="color:#66d9ef">let </span>loop ([digits <span style="color:#f92672">&#39;</span>()] [sum <span style="color:#ae81ff">0</span>])
      (<span style="color:#66d9ef">cond </span>
        <span style="color:#75715e">; if we have enough digits, check for a valid solution</span>
        [(= n (length digits))
         (<span style="color:#66d9ef">if </span>(unordered-equal? digits (digits-of sum))
             (list sum)
             <span style="color:#f92672">&#39;</span>())]

        <span style="color:#75715e">; if the sum is too large, bail out</span>
        [(&gt;= sum bound)
         <span style="color:#f92672">&#39;</span>()]

        <span style="color:#75715e">; otherwise, recur on all possible digits</span>
        [else
         (for*/list ([i (in-range <span style="color:#ae81ff">10</span>)]
                     [res (in-list (loop (cons i digits) 
                                         (+ (vector-ref expts i) sum)))])
           res)])))
   &lt;))</code></pre></div>
<p>A few sample runs for <em>n = 3, 5, and 7</em>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">&gt; (time (narcissistic <span style="color:#ae81ff">3</span>))
cpu time: <span style="color:#ae81ff">0</span> real time: <span style="color:#ae81ff">1</span> gc time: <span style="color:#ae81ff">0</span>
<span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">153</span> <span style="color:#ae81ff">370</span> <span style="color:#ae81ff">371</span> <span style="color:#ae81ff">407</span>)

&gt; (time (narcissistic <span style="color:#ae81ff">5</span>))
cpu time: <span style="color:#ae81ff">15</span> real time: <span style="color:#ae81ff">8</span> gc time: <span style="color:#ae81ff">0</span>
<span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">54748</span> <span style="color:#ae81ff">92727</span> <span style="color:#ae81ff">93084</span>)

&gt; (time (narcissistic <span style="color:#ae81ff">7</span>))
cpu time: <span style="color:#ae81ff">62</span> real time: <span style="color:#ae81ff">58</span> gc time: <span style="color:#ae81ff">0</span>
<span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1741725</span> <span style="color:#ae81ff">4210818</span> <span style="color:#ae81ff">9800817</span> <span style="color:#ae81ff">9926315</span>)</code></pre></div>
<p>That&rsquo;s all well and good, but we can do better. The next optimization I want to make is to avoid duplicating digit lists. Since I&rsquo;m already comparing them where the order of digits doesn&rsquo;t matter, I can fix the recursive call (specifically in the <em>for</em>/list*) to only add digits at least as big as the ones we&rsquo;ve already added. This requires another variable in the <em>loop</em>, but that&rsquo;s easy enough. Here&rsquo;s the modified version (with only the new <em>loop</em> code):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#75715e">; min - only add additional digits &gt;= this</span>
<span style="color:#75715e">; digits - digits added so far</span>
<span style="color:#75715e">; sum - the current sum of powers</span>
(<span style="color:#66d9ef">let </span>loop ([min <span style="color:#ae81ff">0</span>] [digits <span style="color:#f92672">&#39;</span>()] [sum <span style="color:#ae81ff">0</span>])
  (<span style="color:#66d9ef">cond </span>
    <span style="color:#75715e">; if we have enough digits, check for a valid solution</span>
    [(= n (length digits))
     (<span style="color:#66d9ef">if </span>(equal? digits (sort (digits-of sum) &gt;))
         (list sum)
         <span style="color:#f92672">&#39;</span>())]

    <span style="color:#75715e">; if the sum is too large, bail out</span>
    [(&gt;= sum bound)
     <span style="color:#f92672">&#39;</span>()]

    <span style="color:#75715e">; otherwise, recur on all possible digits (&gt;= min)</span>
    [else
     (for*/list ([i (in-range min <span style="color:#ae81ff">10</span>)]
                 [res (in-list (loop i
                                     (cons i digits) 
                                     (+ (vector-ref expts i) sum)))])
       res)]))</code></pre></div>
<p>(We also don&rsquo;t need either the <em>unordered-equal?</em> or <em>unique</em> any more since <em>digits</em> is guaranteed to be sorted in descending order, so that will help a bit.)</p>

<p>That&rsquo;s all of the optimizations I can think of at the moment, so with one additional method designed to run through all of the values from 1 to 60 (see the <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/narcissistic.rkt" title="narcissistic source code on GitHub">full source</a> for details), we&rsquo;re golden. Let&rsquo;s try it out:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">&gt; (all-narcissistic)

<span style="color:#ae81ff">1</span>: <span style="color:#ae81ff">0</span> ms (<span style="color:#ae81ff">0</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">10</span> value(s)
(<span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">9</span>)

<span style="color:#ae81ff">3</span>: <span style="color:#ae81ff">1</span> ms (<span style="color:#ae81ff">1</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">4</span> value(s)
(<span style="color:#ae81ff">153</span> <span style="color:#ae81ff">370</span> <span style="color:#ae81ff">371</span> <span style="color:#ae81ff">407</span>)

<span style="color:#ae81ff">4</span>: <span style="color:#ae81ff">1</span> ms (<span style="color:#ae81ff">2</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">3</span> value(s)
(<span style="color:#ae81ff">1634</span> <span style="color:#ae81ff">8208</span> <span style="color:#ae81ff">9474</span>)

<span style="color:#ae81ff">5</span>: <span style="color:#ae81ff">5</span> ms (<span style="color:#ae81ff">7</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">3</span> value(s)
(<span style="color:#ae81ff">54748</span> <span style="color:#ae81ff">92727</span> <span style="color:#ae81ff">93084</span>)

<span style="color:#ae81ff">6</span>: <span style="color:#ae81ff">44</span> ms (<span style="color:#ae81ff">51</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">1</span> value(s)
(<span style="color:#ae81ff">548834</span>)

<span style="color:#ae81ff">7</span>: <span style="color:#ae81ff">36</span> ms (<span style="color:#ae81ff">87</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">4</span> value(s)
(<span style="color:#ae81ff">1741725</span> <span style="color:#ae81ff">4210818</span> <span style="color:#ae81ff">9800817</span> <span style="color:#ae81ff">9926315</span>)

<span style="color:#ae81ff">8</span>: <span style="color:#ae81ff">86</span> ms (<span style="color:#ae81ff">173</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">3</span> value(s)
(<span style="color:#ae81ff">24678050</span> <span style="color:#ae81ff">24678051</span> <span style="color:#ae81ff">88593477</span>)

<span style="color:#ae81ff">9</span>: <span style="color:#ae81ff">186</span> ms (<span style="color:#ae81ff">359</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">4</span> value(s)
(<span style="color:#ae81ff">146511208</span> <span style="color:#ae81ff">472335975</span> <span style="color:#ae81ff">534494836</span> <span style="color:#ae81ff">912985153</span>)

<span style="color:#ae81ff">10</span>: <span style="color:#ae81ff">376</span> ms (<span style="color:#ae81ff">735</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">1</span> value(s)
(<span style="color:#ae81ff">4679307774</span>)

<span style="color:#ae81ff">11</span>: <span style="color:#ae81ff">740</span> ms (<span style="color:#ae81ff">1475</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">8</span> value(s)
(<span style="color:#ae81ff">32164049650</span> <span style="color:#ae81ff">32164049651</span> <span style="color:#ae81ff">40028394225</span>
 <span style="color:#ae81ff">42678290603</span> <span style="color:#ae81ff">44708635679</span> <span style="color:#ae81ff">49388550606</span>
 <span style="color:#ae81ff">82693916578</span> <span style="color:#ae81ff">94204591914</span>)

<span style="color:#ae81ff">14</span>: <span style="color:#ae81ff">4256</span> ms (<span style="color:#ae81ff">9559</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">1</span> value(s)
(<span style="color:#ae81ff">28116440335967</span>)

<span style="color:#ae81ff">16</span>: <span style="color:#ae81ff">12018</span> ms (<span style="color:#ae81ff">28783</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">2</span> value(s)
(<span style="color:#ae81ff">4338281769391370</span> <span style="color:#ae81ff">4338281769391371</span>)

<span style="color:#ae81ff">17</span>: <span style="color:#ae81ff">19330</span> ms (<span style="color:#ae81ff">48113</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">3</span> value(s)
(<span style="color:#ae81ff">21897142587612075</span> <span style="color:#ae81ff">35641594208964132</span> <span style="color:#ae81ff">35875699062250035</span>)

<span style="color:#ae81ff">19</span>: <span style="color:#ae81ff">50583</span> ms (<span style="color:#ae81ff">129151</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">4</span> value(s)
(<span style="color:#ae81ff">1517841543307505039</span>
 <span style="color:#ae81ff">3289582984443187032</span>
 <span style="color:#ae81ff">4498128791164624869</span>
 <span style="color:#ae81ff">4929273885928088826</span>)

<span style="color:#ae81ff">20</span>: <span style="color:#ae81ff">90077</span> ms (<span style="color:#ae81ff">219228</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">1</span> value(s)
(<span style="color:#ae81ff">63105425988599693916</span>)

<span style="color:#ae81ff">21</span>: <span style="color:#ae81ff">147036</span> ms (<span style="color:#ae81ff">366264</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">2</span> value(s)
(<span style="color:#ae81ff">128468643043731391252</span> <span style="color:#ae81ff">449177399146038697307</span>)

<span style="color:#ae81ff">23</span>: <span style="color:#ae81ff">355509</span> ms (<span style="color:#ae81ff">951610</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">5</span> value(s)
(<span style="color:#ae81ff">21887696841122916288858</span> 
 <span style="color:#ae81ff">27879694893054074471405</span>
 <span style="color:#ae81ff">27907865009977052567814</span>
 <span style="color:#ae81ff">28361281321319229463398</span>
 <span style="color:#ae81ff">35452590104031691935943</span>)

<span style="color:#ae81ff">24</span>: <span style="color:#ae81ff">543763</span> ms (<span style="color:#ae81ff">1495373</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">3</span> value(s)
(<span style="color:#ae81ff">174088005938065293023722</span>
 <span style="color:#ae81ff">188451485447897896036875</span>
 <span style="color:#ae81ff">239313664430041569350093</span>)

<span style="color:#ae81ff">25</span>: <span style="color:#ae81ff">803950</span> ms (<span style="color:#ae81ff">2299323</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">5</span> value(s)
(<span style="color:#ae81ff">1550475334214501539088894</span>
 <span style="color:#ae81ff">1553242162893771850669378</span>
 <span style="color:#ae81ff">3706907995955475988644380</span>
 <span style="color:#ae81ff">3706907995955475988644381</span>
 <span style="color:#ae81ff">4422095118095899619457938</span>)

<span style="color:#ae81ff">27</span>: <span style="color:#ae81ff">1662002</span> ms (<span style="color:#ae81ff">5130340</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">5</span> value(s)
(<span style="color:#ae81ff">121204998563613372405438066</span> <span style="color:#ae81ff">121270696006801314328439376</span> <span style="color:#ae81ff">128851796696487777842012787</span> <span style="color:#ae81ff">174650464499531377631639254</span> <span style="color:#ae81ff">177265453171792792366489765</span>)

<span style="color:#ae81ff">29</span>: <span style="color:#ae81ff">3223268</span> ms (<span style="color:#ae81ff">10725563</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">4</span> value(s)
(<span style="color:#ae81ff">14607640612971980372614873089</span> <span style="color:#ae81ff">19008174136254279995012734740</span> <span style="color:#ae81ff">19008174136254279995012734741</span> <span style="color:#ae81ff">23866716435523975980390369295</span>)

<span style="color:#ae81ff">31</span>: <span style="color:#ae81ff">6078702</span> ms (<span style="color:#ae81ff">21295307</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">3</span> value(s)
(<span style="color:#ae81ff">1145037275765491025924292050346</span> <span style="color:#ae81ff">1927890457142960697580636236639</span> <span style="color:#ae81ff">2309092682616190307509695338915</span>)

<span style="color:#ae81ff">32</span>: <span style="color:#ae81ff">8255381</span> ms (<span style="color:#ae81ff">29550688</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">1</span> value(s)
(<span style="color:#ae81ff">17333509997782249308725103962772</span>)

<span style="color:#ae81ff">33</span>: <span style="color:#ae81ff">11122695</span> ms (<span style="color:#ae81ff">40673383</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">2</span> value(s)
(<span style="color:#ae81ff">186709961001538790100634132976990</span> <span style="color:#ae81ff">186709961001538790100634132976991</span>)

<span style="color:#ae81ff">34</span>: <span style="color:#ae81ff">14724637</span> ms (<span style="color:#ae81ff">55398020</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">1</span> value(s)
(<span style="color:#ae81ff">1122763285329372541592822900204593</span>)

<span style="color:#ae81ff">35</span>: <span style="color:#ae81ff">19443557</span> ms (<span style="color:#ae81ff">74841577</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">2</span> value(s)
(<span style="color:#ae81ff">12639369517103790328947807201478392</span> <span style="color:#ae81ff">12679937780272278566303885594196922</span>)

<span style="color:#ae81ff">37</span>: <span style="color:#ae81ff">33483043</span> ms (<span style="color:#ae81ff">133828406</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">1</span> value(s)
(<span style="color:#ae81ff">1219167219625434121569735803609966019</span>)

<span style="color:#ae81ff">38</span>: <span style="color:#ae81ff">42489389</span> ms (<span style="color:#ae81ff">176317795</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">1</span> value(s)
(<span style="color:#ae81ff">12815792078366059955099770545296129367</span>)

<span style="color:#ae81ff">39</span>: <span style="color:#ae81ff">54456508</span> ms (<span style="color:#ae81ff">230774303</span> ms total)<span style="color:#f92672">,</span> <span style="color:#ae81ff">2</span> value(s)
(<span style="color:#ae81ff">115132219018763992565095597973971522400</span> <span style="color:#ae81ff">115132219018763992565095597973971522401</span>)

<span style="color:#f92672">...</span></code></pre></div>
<p>(That&rsquo;s as far as my run had made it when I went to bed. I&rsquo;ll let it run overnight and update with the final runtime for <em>n = 1 to 60</em> when it finishes.)</p>

<p>Not too bad. For comparison, here&rsquo;s the <a href="http://programmingpraxis.com/2012/12/14/115132219018763992565095597973971522401/2/" title="Programming Praxis: 115132219018763992565095597973971522401 solution">direct solution</a> from Programming Praxis running on the same machine (with some minor modifications to add timing):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#ae81ff">1</span> (<span style="color:#ae81ff">0.17</span> ms)
<span style="color:#ae81ff">2</span> (<span style="color:#ae81ff">0.25</span> ms)
<span style="color:#ae81ff">3</span> (<span style="color:#ae81ff">0.53</span> ms)
<span style="color:#ae81ff">4</span> (<span style="color:#ae81ff">0.54</span> ms)
<span style="color:#ae81ff">5</span> (<span style="color:#ae81ff">0.70</span> ms)
<span style="color:#ae81ff">6</span> (<span style="color:#ae81ff">0.71</span> ms)
<span style="color:#ae81ff">7</span> (<span style="color:#ae81ff">0.72</span> ms)
<span style="color:#ae81ff">8</span> (<span style="color:#ae81ff">0.73</span> ms)
<span style="color:#ae81ff">9</span> (<span style="color:#ae81ff">0.73</span> ms)
<span style="color:#ae81ff">153</span> (<span style="color:#ae81ff">0.82</span> ms)
<span style="color:#ae81ff">370</span> (<span style="color:#ae81ff">0.94</span> ms)
<span style="color:#ae81ff">371</span> (<span style="color:#ae81ff">0.95</span> ms)
<span style="color:#ae81ff">407</span> (<span style="color:#ae81ff">0.98</span> ms)
<span style="color:#ae81ff">1634</span> (<span style="color:#ae81ff">1.72</span> ms)
<span style="color:#ae81ff">8208</span> (<span style="color:#ae81ff">6.64</span> ms)
<span style="color:#ae81ff">9474</span> (<span style="color:#ae81ff">7.78</span> ms)
<span style="color:#ae81ff">54748</span> (<span style="color:#ae81ff">75.36</span> ms)
<span style="color:#ae81ff">92727</span> (<span style="color:#ae81ff">108.07</span> ms)
<span style="color:#ae81ff">93084</span> (<span style="color:#ae81ff">108.47</span> ms)
<span style="color:#ae81ff">548834</span> (<span style="color:#ae81ff">580.60</span> ms)
<span style="color:#ae81ff">1741725</span> (<span style="color:#ae81ff">1914.96</span> ms)
<span style="color:#ae81ff">4210818</span> (<span style="color:#ae81ff">4851.30</span> ms)
<span style="color:#ae81ff">9800817</span> (<span style="color:#ae81ff">11564.71</span> ms)
<span style="color:#ae81ff">9926315</span> (<span style="color:#ae81ff">11715.81</span> ms)
<span style="color:#ae81ff">24678050</span> (<span style="color:#ae81ff">32655.09</span> ms)
<span style="color:#ae81ff">24678051</span> (<span style="color:#ae81ff">32655.34</span> ms)
<span style="color:#f92672">...</span></code></pre></div>
<p>Apparently Dik Winter generated the complete list in 1985 in about half an hour (from the Programming Praxis <a href="http://programmingpraxis.com/2012/12/14/115132219018763992565095597973971522401/2/" title="Programming Praxis: 115132219018763992565095597973971522401 solution">solution page</a> for this post), so I&rsquo;m still a ways off (particularly with the improvements in processing power). But that&rsquo;s not too bad for a first/second try. Perhaps I&rsquo;ll see if I can&rsquo;t do better at some point in the future.</p>

<p>If you&rsquo;d like to download the entire code for this project, you can do so on GitHub here:
- <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/narcissistic.rkt" title="narcissistic source code on GitHub">narcissistic source code</a></p>
	</div>

    
<div class="entry-comments">
    <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = "jverkamp";
            var disqus_title = "Narcissistic Numbers";
            var disqus_url = "https:\/\/blog.jverkamp.com\/2012\/12\/14\/narcissistic-numbers\/";

             
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>


</article>

            </div>
        </div>

        <footer id="page-footer" role="contentinfo">
    <nav id="footer-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
            <li><a href="/archive-by-date/">All posts: By Date</a></li>
            <li><a href="/archive-by-tag/">All posts: By Tag</a></li>

            <li>
                <a href="/atom.xml">
                    RSS: All <sup>

<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li>

            
            <li>
                <a href="/programming/atom.xml">
                    RSS: programming<sup>

<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li>
            
        </ul>
    </nav>

    <div id="page-footer-content">
        <div class="legal">
            <p>
                All posts unless otherwise mentioned are licensed under
                <a rel="license" href="//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
                    <img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png">
                </a>
            </p>

            <p>
                Any source code unless otherwise mentioned is licensed under the <a href="//directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
            </p>
        </div>
    </div>
</footer>

    </div>

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/jquery.nanogallery.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js"></script>

<script type="text/javascript" src="/custom.js" defer></script>

</body>
</html>
