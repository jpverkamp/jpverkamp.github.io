<!doctype html><html><head><title>AnnGram - nGrams vs Words – jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_6894410585563545744.min.cc1cade18c999752b7befe111634889dca8d89b24923775954ecebc68c54fcd3.js integrity="sha256-zByt4YyZl1K3vv4RFjSIncqNibJJI3dZVOzrxoxU/NM=" defer></script>
<script src=/jquery.fancybox_6181813213021922412.min.6ba037466db9f8843b66c38c32fe5a353344e7fd68ecda97efb63a84c881f828.js integrity="sha256-a6A3Rm25+IQ7ZsOMMv5aNTNE5/1o7NqX77Y6hMiB+Cg=" defer></script>
<script src=/katex_12008035502722260518.min.3cc3a080c0368785179e37b0cd0a71c6cf60c4fc5a8dce503f5a542ec0a25043.js integrity="sha256-PMOggMA2h4UXnjewzQpxxs9gxPxajc5QP1pULsCiUEM=" defer></script>
<script src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js integrity="sha256-XoC9heuuuVYHg01nd7/nAT0dFh8PAqMbhF5L12WJgxY=" defer></script>
<script src=/mermaid_12365941879912544862.min.e8f19283a632077085b9ad74aecad54abe84429c69789fd29ffa3a254d86abdd.js integrity="sha256-6PGSg6YyB3CFua10rsrVSr6EQpxpeJ/Sn/o6JU2Gq90=" defer></script>
<script src=/custom.min.9bb1a6d1e0b58ced38df246e4479317e4561461cfabab31b36fbc36035186214.js integrity="sha256-m7Gm0eC1jO043yRuRHkxfkVhRhz6urMbNvvDYDUYYhQ=" defer></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css integrity="sha256-4otdfZ2J76y19wisMMvXaxuaD4Ft/Z2pZjHR0Jy73XY="><link rel=stylesheet href=/css_4780214198035419921.min.7cfac95bdd962d85ceec560e50fe7b04c44b58a76e5202006ef36ca8c0a7d836.css integrity="sha256-fPrJW92WLYXO7FYOUP57BMRLWKduUgIAbvNsqMCn2DY="><link rel=stylesheet href=/custom.min.3bcba67844fc4a76aa7c1947a1fcf14cddaf8e9e0f1e734fde0fa219416f058d.css integrity="sha256-O8umeET8SnaqfBlHofzxTN2vjp4PHnNP3g+iGUFvBY0="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=//www.google.com/search method=get onsubmit='(function(e){e.q.value="site:blog.jverkamp.com "+e.qfront.value})(this)' class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=hidden>
<input name=qfront type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article><header><h1 class=entry-title>AnnGram - nGrams vs Words</h1><div class=entry-meta><span class=entry-date>2010-03-17</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2010/02/10/anngram-vs-k-means/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/.net>.NET</a></li><li><a href=https://blog.jverkamp.com/2010/02/10/anngram-vs-k-means/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/c>C#</a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2010/02/10/anngram-vs-k-means/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/computational-linguistics>Computational Linguistics</a><a href=https://blog.jverkamp.com/2010/05/21/flairs-2010-augmenting-n-gram-based-authorship-attribution-with-neural-networks/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2010/02/10/anngram-vs-k-means/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/natural-language-processing>Natural Language Processing</a></li><li><a href=https://blog.jverkamp.com/2010/02/10/anngram-vs-k-means/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/neural-networks>Neural Networks</a><a href=https://blog.jverkamp.com/2021/09/06/neural-network-cellular-automata/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2010/02/10/anngram-vs-k-means/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/research>Research</a><a href=https://blog.jverkamp.com/2010/05/21/flairs-2010-augmenting-n-gram-based-authorship-attribution-with-neural-networks/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/research>research</a><ul><li><a href=https://blog.jverkamp.com/2010/02/10/anngram-vs-k-means/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2010/05/21/flairs-2010-augmenting-n-gram-based-authorship-attribution-with-neural-networks/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2010/02/10/anngram-vs-k-means/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2010/03/18/%E7%A7%81%E3%81%AE%E7%9F%A5%E3%81%AA%E3%81%84%E5%A0%B4%E6%89%80/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p><strong>Overview</strong></p><p>For another comparison, I&rsquo;ve been looking for a way to replace the nGrams with another way of turning a document into a vector.  Based on word frequency instead of nGrams, I&rsquo;ve run a number of tests to see how the accuracy and speed of the algorithm compares for the two.</p><p><strong>nGrams</strong></p><figure><img src=/embeds/2010/SOM-ngram.png></figure><p>I still intend to look into why the Tragedy of Macbeth does not stay with the rest of Shakespeare&rsquo;s plays.  I still believe that it is because portions of it were possible written by another author.</p><p>From Wikipedia:</p><p>*The text that survives had been plainly altered by later hands. Most notable is the inclusion of two songs from Thomas Middleton&rsquo;s play The Witch (1615); Middleton is conjectured to have inserted an extra scene involving the witches and Hecate, for these scenes had proven highly popular with audiences. These revisions, which since the Clarendon edition of 1869 have been assumed to include all of Act III, scene v, and a portion of Act IV, scene I, are often indicated in modern texts. *</p><p>Soon, I intend to try to remove the noted portions of my copy of the Tragedy of Macbeth to see if that makes it fit better with the others of Shakespeare&rsquo;s plays.</p><p>Timing:</p><ul><li>32.5 seconds, error = 1.14</li><li>65.1 seconds, error = 0.54</li><li>97.9 seconds, error = 0.27</li><li>130.1 seconds, error = 0.11</li><li>164.5 seconds, error = 0.04</li><li>196.5 seconds, error = 0.01</li><li>230.1 seconds, error = 0.006</li><li>264.5 seconds, error = 0.002</li><li>300.3 seconds, error = 0.0007</li><li>336.3 seconds, error = 0.0001</li><li>372.5 seconds, complete</li></ul><p><strong>Words</strong></p><figure><img src=/embeds/2010/SOM-words.png></figure><p>There is still some grouping; however, the groups that would otherwise have been William Blake and the Bible are not as distinct as they are when using nGrams.  This actually makes sense as William Blake uses a less complex set of words on average than Shakespeare, more similar to the writing in many of the books of the Bible.  nGrams, on the other hand, can capture the transitions between words, showing the differences in word usage between Blake and the Bible.</p><p>Timing:</p><ul><li>34.4 seconds, error = 2.33</li><li>69.1 seconds, error = 1.38</li><li>103.7 seconds, error = 0.64</li><li>138.2 seconds, error = 0.25</li><li>172.5 seconds, error = 0.10</li><li>207.0 seconds, error = 0.03</li><li>241.3 seconds, error = 0.01</li><li>277.0 seconds, error = 0.004</li><li>314.6 seconds, error = 0.001</li><li>352.4 seconds, error = 0.0003</li><li>390.2 seconds, error = 0.0002</li><li>427.8 seconds, error = 0.0001</li><li>503.2 seconds, complete</li></ul><p><strong>Results</strong></p><p>Essentially, the nGrams appear to produce better grouping more quickly.  Using the results from my last post, it appears that the SOM part of the code is providing a larger portion of my results, but both parts are working together to improve the results.  Replacing either with an alternative yields poorer results.
The text that survives had been plainly altered by later hands. Most notable is the inclusion of two songs from <a href=https://en.wikipedia.org/wiki/Thomas%20Middleton>Thomas Middleton</a>&rsquo;s play <em><a href=https://en.wikipedia.org/wiki/The%20Witch>The Witch</a></em> (1615); Middleton is conjectured to have inserted an extra scene involving <a href=https://en.wikipedia.org/wiki/Weird%20Sisters>the witches</a> and <a href=https://en.wikipedia.org/wiki/Hecate#Hecate%20in%20literature>Hecate</a>, for these scenes had proven highly popular with audiences. These revisions, which since the Clarendon edition of 1869 have been assumed to include all of Act III, scene v, and a portion of Act IV, scene I, are often indicated in modern texts</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/research/atom.xml>RSS: research<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>