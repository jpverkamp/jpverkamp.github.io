<!doctype html><html><head><title>AoC 2016 Day 22: Data Mover â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_17422284542669262002.min.834c1e2313951f0c25b90152fe8b62250eab4a2e8cbd2560fa1a1cdc91c71733.js integrity="sha256-g0weIxOVHwwluQFS/otiJQ6rSi6MvSVg+hoc3JHHFzM=" defer></script><script src=/jquery.fancybox_16245765822111608191.min.ef050764ff69f3287c89ff655825479dd8304dcd9bc653d1ddd4772a701ad445.js integrity="sha256-7wUHZP9p8yh8if9lWCVHndgwTc2bxlPR3dR3KnAa1EU=" defer></script><script src=/katex_17296078054267651618.min.deed0e78a77391517d530a00324ce7b760ac204134992ef22d36f583615ae498.js integrity="sha256-3u0OeKdzkVF9UwoAMkznt2CsIEE0mS7yLTb1g2Fa5Jg=" defer></script><script src=/auto-render_14944144240389301023.min.e694d9d5eae2917984179683ead27b998784a81398e8836c369373d2c67fc32a.js integrity="sha256-5pTZ1erikXmEF5aD6tJ7mYeEqBOY6INsNpNz0sZ/wyo=" defer></script><script src=/bigfoot_28293813221957978.min.af671f08986f0a2267c5a0cb2748b005489e47fa25f55479b200e2a563d23022.js integrity="sha256-r2cfCJhvCiJnxaDLJ0iwBUieR/ol9VR5sgDipWPSMCI=" defer></script><script src=/mermaid_9520146763733687737.min.bfe50b47c0387e3c3bf97ec5f338bba94f7ccb02f962a4aec8cf0b4d68c8434d.js integrity="sha256-v+ULR8A4fjw7+X7F8zi7qU98ywL5YqSuyM8LTWjIQ00=" defer></script><script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script><link rel=stylesheet href=/katex_13658330645258633971.min.64e42891d651aee0b8cd02ec9227ff271d37bcf06dae985d1acf0eba1623e850.css integrity="sha256-ZOQokdZRruC4zQLskif/Jx03vPBtrphdGs8OuhYj6FA="><link rel=stylesheet href=/bigfoot-default_8781527669040159104.min.0d2b289fa3451447692959fcee5676b846532fe7ab50ddc4660824c42d4adcd7.css integrity="sha256-DSson6NFFEdpKVn87lZ2uEZTL+erUN3EZggkxC1K3Nc="><link rel=stylesheet href=/jquery.fancybox_5330465509389191777.min.67505d77381ebd82623ab9296c1989c44ec828d867c00296e80e52ef860cac37.css integrity="sha256-Z1BddzgevYJiOrkpbBmJxE7IKNhnwAKW6A5S74YMrDc="><link rel=stylesheet href=/css_1846377409604050217.min.fffe842bc000dd1fe8661ac6427a392a08faa95e8edab1ea7fb98c5f8dac6a6f.css integrity="sha256-//6EK8AA3R/oZhrGQno5Kgj6qV6O2rHqf7mMX42sam8="><link rel=stylesheet href=/main.min.b60cba31b8c292392a2d336408f8f344e261df78516eb17bcf029173b24a42b5.css integrity="sha256-tgy6MbjCkjkqLTNkCPjzROJh33hRbrF7zwKRc7JKQrU="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/home-automation/>Home Automation</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>AoC 2016 Day 22: Data Mover</h1><div class=entry-meta><span class=entry-date>2016-12-22</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2016/12/21/aoc-2016-day-21-scrambler/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/python>Python</a><a href=https://blog.jverkamp.com/2016/12/23/aoc-2016-day-23-assembunny2/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2016/12/21/aoc-2016-day-21-scrambler/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/advent-of-code>Advent of Code</a><a href=https://blog.jverkamp.com/2016/12/23/aoc-2016-day-23-assembunny2/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/series/>Series</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2016/12/21/aoc-2016-day-21-scrambler/ class=previous-link></a><a class=taxonomy-value href=/series/advent-of-code-2016>Advent of Code 2016</a><a href=https://blog.jverkamp.com/2016/12/23/aoc-2016-day-23-assembunny2/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2016/12/21/aoc-2016-day-21-scrambler/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2016/12/23/aoc-2016-day-23-assembunny2/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2016/12/22/the-color-of-magic/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2016/12/23/aoc-2016-day-23-assembunny2/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><h3 id=source-grid-computing>Source: <a href=http://adventofcode.com/2016/day/22 target=_blank rel=noopener>Grid Computing</a></h3><blockquote><p><strong>Part 1:</strong> You are given a grid of nodes and the output of the <a href=https://en.wikipedia.org/wiki/DF%20%28unix%29>df command</a> telling you how much space is on each. How many pairs of nodes are there where the data from some node <code>A</code> would fit entirely on <code>B</code>?</p></blockquote><p>First, load the data:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>sizes <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>usage <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> fileinput<span style=color:#f92672>.</span>input(args<span style=color:#f92672>.</span>files):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> line<span style=color:#f92672>.</span>startswith(<span style=color:#e6db74>&#39;/dev/grid/&#39;</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    name, size, used, available, percent <span style=color:#f92672>=</span> line<span style=color:#f92672>.</span>strip()<span style=color:#f92672>.</span>split()
</span></span><span style=display:flex><span>    _, xs, ys <span style=color:#f92672>=</span> name<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;/&#39;</span>)[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;-&#39;</span>)
</span></span><span style=display:flex><span>    x <span style=color:#f92672>=</span> int(xs[<span style=color:#ae81ff>1</span>:])
</span></span><span style=display:flex><span>    y <span style=color:#f92672>=</span> int(ys[<span style=color:#ae81ff>1</span>:])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    sizes[x, y] <span style=color:#f92672>=</span> int(size[:<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>    usage[x, y] <span style=color:#f92672>=</span> int(used[:<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])
</span></span></code></pre></div><p>Then, just directly calculate if we can move the data:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>viable_pairs <span style=color:#f92672>=</span> set()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> a <span style=color:#f92672>in</span> sizes:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> usage[a] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> b <span style=color:#f92672>in</span> sizes:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> a <span style=color:#f92672>==</span> b:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> usage[a] <span style=color:#f92672>+</span> usage[b] <span style=color:#f92672>&lt;=</span> sizes[b]:
</span></span><span style=display:flex><span>            viable_pairs<span style=color:#f92672>.</span>add((a, b))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{}</span><span style=color:#e6db74> viable pairs&#39;</span><span style=color:#f92672>.</span>format(len(viable_pairs)))
</span></span></code></pre></div><blockquote><p><strong>Part 2:</strong> Assume you can only move data between adjacent nodes and if you do so, you must move all data. How many transfers would it take to move data from the node with <code>y=0</code> and the highest <code>x</code> value (the top right) to <code>x=0, y=0</code> (the top left)?</p></blockquote><p>This is actually quite a bit harder than you might at first guess, especially if you don&rsquo;t read the huge hint they give you when given a smaller example.</p><p>If you don&rsquo;t use the hint, you might want to try a <a href=https://en.wikipedia.org/wiki/brute%20force>brute force</a> <a href=https://en.wikipedia.org/wiki/breadth%20first%20search>breadth first search</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>initial_state <span style=color:#f92672>=</span> (copy<span style=color:#f92672>.</span>deepcopy(usage), (max_x, <span style=color:#ae81ff>0</span>), <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>q <span style=color:#f92672>=</span> queue<span style=color:#f92672>.</span>Queue()
</span></span><span style=display:flex><span>q<span style=color:#f92672>.</span>put(initial_state)
</span></span><span style=display:flex><span>seen <span style=color:#f92672>=</span> set()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> q<span style=color:#f92672>.</span>empty():
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>Exception</span>(<span style=color:#e6db74>&#39;Ran out of possibilities to test&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    current_usage, goal, steps <span style=color:#f92672>=</span> q<span style=color:#f92672>.</span>get()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    current_hash <span style=color:#f92672>=</span> hash_state(current_usage, goal)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> current_hash <span style=color:#f92672>in</span> seen:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        seen<span style=color:#f92672>.</span>add(current_hash)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>) <span style=color:#f92672>==</span> goal:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#39;Found a solution in </span><span style=color:#e6db74>{}</span><span style=color:#e6db74> steps&#39;</span><span style=color:#f92672>.</span>format(steps))
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Try moving everything everywhere</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># TODO: Improve this :)</span>
</span></span><span style=display:flex><span>    nodes_added <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> range(max_x <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> y <span style=color:#f92672>in</span> range(max_y <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> xd, yd <span style=color:#f92672>in</span> [(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>), (<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>), (<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>), (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>)]:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> (<span style=color:#ae81ff>0</span> <span style=color:#f92672>&lt;=</span> x <span style=color:#f92672>+</span> xd <span style=color:#f92672>&lt;=</span> max_x <span style=color:#f92672>and</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&lt;=</span> y <span style=color:#f92672>+</span> yd <span style=color:#f92672>&lt;=</span> max_y):
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e># Make sure we can move the given data</span>
</span></span><span style=display:flex><span>                total_size <span style=color:#f92672>=</span> current_usage[x, y] <span style=color:#f92672>+</span> current_usage[x <span style=color:#f92672>+</span> xd, y <span style=color:#f92672>+</span> yd]
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> total_size <span style=color:#f92672>&lt;=</span> sizes[x <span style=color:#f92672>+</span> xd, y <span style=color:#f92672>+</span> yd]:
</span></span><span style=display:flex><span>                    new_usage <span style=color:#f92672>=</span> copy<span style=color:#f92672>.</span>deepcopy(current_usage)
</span></span><span style=display:flex><span>                    new_usage[x, y] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>                    new_usage[x <span style=color:#f92672>+</span> xd, y <span style=color:#f92672>+</span> yd] <span style=color:#f92672>=</span> total_size
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (x, y) <span style=color:#f92672>==</span> goal:
</span></span><span style=display:flex><span>                        q<span style=color:#f92672>.</span>put((new_usage, (x <span style=color:#f92672>+</span> xd, y <span style=color:#f92672>+</span> yd), steps <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>))
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                        q<span style=color:#f92672>.</span>put((new_usage, goal, steps <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    nodes_added <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>The problem with that is that the solution space is kind of huge&mldr; I let it run for a while, but after well longer than the minute I expect problems to be able to solved in (Project Euler rules), I decided that we needed something a bit more clever.</p><p><em>If you&rsquo;re trying to solve this problem by yourself and are for some reason reading this post, stop reading now.</em></p><p>The hint: there are three classes of nodes:</p><ul><li>A single node that is nearly empty, think of this as the node we&rsquo;re actually &lsquo;moving&rsquo; around</li><li>Several nodes that are nearly full, but have lower capacity similar to the empty node, these are empty space we can move in</li><li>Several more nodes that are nearly full but have much more data (> 5x as much) as the empty node, so that we couldn&rsquo;t possibly copy data into the empty node</li></ul><p>We can render this using this function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>print_usage_icons</span>(usage, goal):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;&#39;&#39;Print based on the hint in the puzzle.&#39;&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> y <span style=color:#f92672>in</span> range(max_y <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> range(max_x <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (x, y) <span style=color:#f92672>==</span> goal:
</span></span><span style=display:flex><span>                output <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;G&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>elif</span> usage[x, y] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>                output <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;@&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>elif</span> sizes[x, y] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>500</span>:
</span></span><span style=display:flex><span>                output <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;#&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                output <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;.&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            print(output, end <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>        print()
</span></span></code></pre></div><p>Visually, this gives us:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>.....................................G
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>.#####################################
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>.................@....................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span><span style=display:flex><span>......................................
</span></span></code></pre></div><p>That makes it quite a bit more obvious that there is a central &lsquo;wall&rsquo; of large nodes that we just have to go around. We can use this information: to get the goal data to the top left, we have to first move the empty spot to directly beside the goal data. After we&rsquo;ve done that, we &lsquo;walk&rsquo; it across by moving the empty data down, right, right, up, left in a continuous loop. In code, this lets us guess:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Find the empty node</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> range(max_x <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> y <span style=color:#f92672>in</span> range(max_y <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> usage[x, y] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>            (empty_x, empty_y) <span style=color:#f92672>=</span> empty <span style=color:#f92672>=</span> (x, y)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Find walls (nodes with more than 500T data)</span>
</span></span><span style=display:flex><span>walls <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    (x, y)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> range(max_x <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> y <span style=color:#f92672>in</span> range(max_y <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> sizes[x, y] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>500</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Use dynamic programming to find the minimum distance between two points</span>
</span></span><span style=display:flex><span>distance_from_empty <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>to_calculate <span style=color:#f92672>=</span> queue<span style=color:#f92672>.</span>Queue()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>to_calculate<span style=color:#f92672>.</span>put((empty, <span style=color:#ae81ff>0</span>))
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#f92672>not</span> to_calculate<span style=color:#f92672>.</span>empty():
</span></span><span style=display:flex><span>    point, distance <span style=color:#f92672>=</span> to_calculate<span style=color:#f92672>.</span>get()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> point <span style=color:#f92672>in</span> distance_from_empty:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    distance_from_empty[point] <span style=color:#f92672>=</span> distance
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    (x, y) <span style=color:#f92672>=</span> point
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> xd, yd <span style=color:#f92672>in</span> [(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>), (<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>), (<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>), (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>)]:
</span></span><span style=display:flex><span>        neighbor <span style=color:#f92672>=</span> (x <span style=color:#f92672>+</span> xd, y <span style=color:#f92672>+</span> yd)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&lt;=</span> x <span style=color:#f92672>+</span> xd <span style=color:#f92672>&lt;=</span> max_x <span style=color:#f92672>and</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&lt;=</span> y <span style=color:#f92672>+</span> yd <span style=color:#f92672>&lt;=</span> max_y <span style=color:#f92672>and</span> neighbor <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> walls:
</span></span><span style=display:flex><span>            to_calculate<span style=color:#f92672>.</span>put((neighbor, distance <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Move to immediately beside the goal</span>
</span></span><span style=display:flex><span>distance_to_goal <span style=color:#f92672>=</span> distance_from_empty[(max_x <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Now it takes 5 to move the goal one left and reset (except the last time)</span>
</span></span><span style=display:flex><span>distance_to_zero <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>*</span> (max_x <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#39;Best guess = </span><span style=color:#e6db74>{}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>{}</span><span style=color:#e6db74> to goal + </span><span style=color:#e6db74>{}</span><span style=color:#e6db74> to zero)&#39;</span><span style=color:#f92672>.</span>format(
</span></span><span style=display:flex><span>    distance_to_goal <span style=color:#f92672>+</span> distance_to_zero,
</span></span><span style=display:flex><span>    distance_to_goal,
</span></span><span style=display:flex><span>    distance_to_zero,
</span></span><span style=display:flex><span>))
</span></span></code></pre></div><p>Using this solution gives us an answer in less than a second which turns out to be completely correct. Running the full solution for more than a day gives the same answer.</p><p>Sometimes, a heuristic solution is good enough.</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>