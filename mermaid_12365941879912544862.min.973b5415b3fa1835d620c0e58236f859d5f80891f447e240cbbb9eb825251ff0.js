var __defProp=Object.defineProperty,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>(__defNormalProp(e,typeof t!="symbol"?t+"":t,n),n);(function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.mermaid=t())})(this,function(){"use strict";qg=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function FP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}M1={exports:{}},function(e){!function(t,n){e.exports=n()}(qg,function(){function n(){return tn.apply(null,arguments)}function k(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function Y(e){return e!=null&&"[object Object]"===Object.prototype.toString.call(e)}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dt(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(l(e,t))return;return 1}function j(e){return void 0===e}function I(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function je(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function jt(e,t){for(var s=[],o=e.length,n=0;n<o;++n)s.push(t(e[n],n));return s}function U(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function T(e,t,n,s){return St(e,t,n,s,!0).utc()}function a(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function lt(e){if(null==e._isValid){var t=a(e),n=fn.call(t.parsedDateParts,function(e){return e!=null}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function Fe(e){var t=T(NaN);return e!=null?U(a(t),e):a(t).userInvalidated=!0,t}var fn=Array.prototype.some||function(e){for(var n=Object(this),s=n.length>>>0,t=0;t<s;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1},_t=n.momentProperties=[],ot=!1;function st(e,t){var n,s,o,i=_t.length;if(j(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),j(t._i)||(e._i=t._i),j(t._f)||(e._f=t._f),j(t._l)||(e._l=t._l),j(t._strict)||(e._strict=t._strict),j(t._tzm)||(e._tzm=t._tzm),j(t._isUTC)||(e._isUTC=t._isUTC),j(t._offset)||(e._offset=t._offset),j(t._pf)||(e._pf=a(t)),j(t._locale)||(e._locale=t._locale),0<i)for(n=0;n<i;n++)j(o=t[s=_t[n]])||(e[s]=o);return e}function he(e){st(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===ot&&(ot=!0,n.updateOffset(this),ot=!1)}function C(e){return e instanceof he||e!=null&&null!=e._isAMomentObject}function vt(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function _(e,t){var s=!0;return U(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),s){for(var o,a,r=[],c=arguments.length,i=0;i<c;i++){if(o="","object"==typeof arguments[i]){for(a in o+=`
[`+i+"] ",arguments[0])l(arguments[0],a)&&(o+=a+": "+arguments[0][a]+", ");o=o.slice(0,-2)}else o=arguments[i];r.push(o)}vt(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+(new Error).stack),s=!1}return t.apply(this,arguments)},t)}Xe={};function Wt(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),Xe[e]||(vt(t),Xe[e]=!0)}function M(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function rt(e,t){var n,s=U({},e);for(n in t)l(t,n)&&(Y(e[n])&&Y(t[n])?(s[n]={},U(s[n],e[n]),U(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)l(e,n)&&!l(t,n)&&Y(e[n])&&(s[n]=U({},s[n]));return s}function ct(e){e!=null&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,Ct=Object.keys||function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};function S(e,t,n){var s=""+Math.abs(e);return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,t-s.length)).toString().substr(1)+s}var ht=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,xe=/(\[[^[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,at={},ie={};function o(e,t,n,s){var o="string"==typeof s?function(){return this[s]()}:s;e&&(ie[e]=o),t&&(ie[t[0]]=function(){return S(o.apply(this,arguments),t[1],t[2])}),n&&(ie[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function Te(e,t){return e.isValid()?(t=Dt(t,e.localeData()),at[t]=at[t]||function(e){for(var s,t=e.match(ht),n=0,o=t.length;n<o;n++)ie[t[n]]?t[n]=ie[t[n]]:t[n]=(s=t[n]).match(/\[[\s\S]/)?s.replace(/^\[|\]$/g,""):s.replace(/\\/g,"");return function(n){for(var i="",s=0;s<o;s++)i+=M(t[s])?t[s].call(n,e):t[s];return i}}(t),at[t](e)):e.localeData().invalidDate()}function Dt(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(xe.lastIndex=0;0<=n&&xe.test(e);)e=e.replace(xe,s),xe.lastIndex=0,--n;return e}le={};function g(e,t){var n=e.toLowerCase();le[n]=le[n+"s"]=le[t]=e}function O(e){return"string"==typeof e?le[e]||le[e.toLowerCase()]:void 0}function qe(e){var t,n,s={};for(t in e)l(e,t)&&(n=O(t))&&(s[n]=e[t]);return s}Ue={};function v(e,t){Ue[e]=t}function we(e){return e%4==0&&e%100!=0||e%400==0}function w(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function r(e){var e=+e,t=0;return t=0!=e&&isFinite(e)?w(e):t}function Z(e,t){return function(s){return s!=null?(an(this,e,s),n.updateOffset(this,t),this):Be(this,e)}}function Be(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function an(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&we(e.year())&&1===e.month()&&29===e.date()?(n=r(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Se(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var c,F,V,tn,Xe,Ct,le,Ue,t=/\d/,i=/\d\d/,Pe=/\d{3}/,X=/\d{4}/,B=/[+-]?\d{6}/,h=/\d\d?/,ne=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,oe=/\d{1,3}/,W=/\d{1,4}/,$=/[+-]?\d{1,6}/,re=/\d+/,Me=/[+-]?\d+/,Mn=/Z|[+-]\d\d:?\d\d/gi,Ce=/Z|[+-]\d\d(?::?\d\d)?/gi,L=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Oe,Ve,pe,te,Rt,Vt,$t,nt,ke;function s(e,t,n){Oe[e]=M(t)?t:function(e){return e&&n?n:t}}function Fn(e,t){return l(Oe,e)?Oe[e](t._strict,t._locale):new RegExp(y(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\][]*)\]|\\(.)/g,function(e,t,n,s,o){return t||n||s||o})))}function y(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}Oe={},Ve={};function d(e,t){var n,s,o=t;for("string"==typeof e&&(e=[e]),I(t)&&(o=function(e,n){n[t]=r(e)}),s=e.length,n=0;n<s;n++)Ve[e[n]]=o}function be(e,t){d(e,function(e,n,s,o){s._w=s._w||{},t(e,s._w,s,o)})}var f,b=0,z=1,A=2,p=3,x=4,N=5,q=6,An=7,En=8;function Se(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%(n=12)+n)%n;return e+=(t-n)/12,1==n?we(e)?29:28:31-n%7%2}f=Array.prototype.indexOf||function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},o("M",["MM",2],"Mo",function(){return this.month()+1}),o("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),o("MMMM",0,0,function(e){return this.localeData().months(this,e)}),g("month","M"),v("month",8),s("M",h),s("MM",h,i),s("MMM",function(e,t){return t.monthsShortRegex(e)}),s("MMMM",function(e,t){return t.monthsRegex(e)}),d(["M","MM"],function(e,t){t[z]=r(e)-1}),d(["MMM","MMMM"],function(e,t,n,s){s=n._locale.monthsParse(e,s,n._strict),s!=null?t[z]=s:a(n).invalidMonth=e});var ue="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),yt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ot=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/,pn=L,_n=L;function It(e,t){var n;if(e.isValid()){if("string"==typeof t)if(/^\d+$/.test(t))t=r(t);else if(!I(t=e.localeData().monthsParse(t)))return;n=Math.min(e.date(),Se(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)}}function Xt(e){return e!=null?(It(this,e),n.updateOffset(this,!0),this):Be(this,"Month")}function on(){function i(e,t){return t.length-e.length}for(var n,s=[],o=[],t=[],e=0;e<12;e++)n=T([2e3,e]),s.push(this.monthsShort(n,"")),o.push(this.months(n,"")),t.push(this.months(n,"")),t.push(this.monthsShort(n,""));for(s.sort(i),o.sort(i),t.sort(i),e=0;e<12;e++)s[e]=y(s[e]),o[e]=y(o[e]);for(e=0;e<24;e++)t[e]=y(t[e]);this._monthsRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function me(e){return we(e)?366:365}o("Y",0,0,function(){var e=this.year();return e<=9999?S(e,4):"+"+e}),o(0,["YY",2],0,function(){return this.year()%100}),o(0,["YYYY",4],0,"year"),o(0,["YYYYY",5],0,"year"),o(0,["YYYYYY",6,!0],0,"year"),g("year","y"),v("year",1),s("Y",Me),s("YY",h,i),s("YYYY",W,X),s("YYYYY",$,B),s("YYYYYY",$,B),d(["YYYYY","YYYYYY"],b),d("YYYY",function(e,t){t[b]=2===e.length?n.parseTwoDigitYear(e):r(e)}),d("YY",function(e,t){t[b]=n.parseTwoDigitYear(e)}),d("Y",function(e,t){t[b]=parseInt(e,10)}),n.parseTwoDigitYear=function(e){return r(e)+(68<r(e)?1900:2e3)},pe=Z("FullYear",!0);function ln(e,t,n,s,o,i,a){var r;return e<100&&0<=e?(r=new Date(e+400,t,n,s,o,i,a),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,n,s,o,i,a),r}function ge(e){var t;return e<100&&0<=e?((t=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,t)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function _e(e,t,n){return n=7+t-n,n-(7+ge(e,0,n).getUTCDay()-t)%7-1}function en(e,t,n,s,o){var i,t=1+7*(t-1)+(7+n-s)%7+_e(e,s,o),n=t<=0?me(i=e-1)+t:t>me(e)?(i=e+1,t-me(e)):(i=e,t);return{year:i,dayOfYear:n}}function ye(e,t,n){var o,i,s=_e(e.year(),t,n),s=Math.floor((e.dayOfYear()-s-1)/7)+1;return s<1?o=s+H(i=e.year()-1,t,n):s>H(e.year(),t,n)?(o=s-H(e.year(),t,n),i=e.year()+1):(i=e.year(),o=s),{week:o,year:i}}function H(e,t,n){var s=_e(e,t,n),t=_e(e+1,t,n);return(me(e)-s+t)/7}o("w",["ww",2],"wo","week"),o("W",["WW",2],"Wo","isoWeek"),g("week","w"),g("isoWeek","W"),v("week",5),v("isoWeek",5),s("w",h),s("ww",h,i),s("W",h),s("WW",h,i),be(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=r(e)});function Ke(e,t){return e.slice(t,7).concat(e.slice(0,t))}o("d",0,"do","day"),o("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),o("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),o("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),o("e",0,0,"weekday"),o("E",0,0,"isoWeekday"),g("day","d"),g("weekday","e"),g("isoWeekday","E"),v("day",11),v("weekday",11),v("isoWeekday",11),s("d",h),s("e",h),s("E",h),s("dd",function(e,t){return t.weekdaysMinRegex(e)}),s("ddd",function(e,t){return t.weekdaysShortRegex(e)}),s("dddd",function(e,t){return t.weekdaysRegex(e)}),be(["dd","ddd","dddd"],function(e,t,n,s){s=n._locale.weekdaysParse(e,s,n._strict),s!=null?t.d=s:a(n).invalidWeekday=e}),be(["d","e","E"],function(e,t,n,s){t[s]=r(e)});var fe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),bt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),He="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),cn=L,hn=L,mn=L;function Je(){function n(e,t){return t.length-e.length}for(var e,s,o,i=[],a=[],r=[],t=[],c=0;c<7;c++)e=T([2e3,1]).day(c),s=y(this.weekdaysMin(e,"")),o=y(this.weekdaysShort(e,"")),e=y(this.weekdays(e,"")),i.push(s),a.push(o),r.push(e),t.push(s),t.push(o),t.push(e);i.sort(n),a.sort(n),r.sort(n),t.sort(n),this._weekdaysRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function et(){return this.hours()%12||12}function Pt(e,t){o(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Nt(e,t){return t._meridiemParse}o("H",["HH",2],0,"hour"),o("h",["hh",2],0,et),o("k",["kk",2],0,function(){return this.hours()||24}),o("hmm",0,0,function(){return""+et.apply(this)+S(this.minutes(),2)}),o("hmmss",0,0,function(){return""+et.apply(this)+S(this.minutes(),2)+S(this.seconds(),2)}),o("Hmm",0,0,function(){return""+this.hours()+S(this.minutes(),2)}),o("Hmmss",0,0,function(){return""+this.hours()+S(this.minutes(),2)+S(this.seconds(),2)}),Pt("a",!0),Pt("A",!1),g("hour","h"),v("hour",13),s("a",Nt),s("A",Nt),s("H",h),s("h",h),s("k",h),s("HH",h,i),s("hh",h,i),s("kk",h,i),s("hmm",ne),s("hmmss",se),s("Hmm",ne),s("Hmmss",se),d(["H","HH"],p),d(["k","kk"],function(e,t){e=r(e),t[p]=24===e?0:e}),d(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),d(["h","hh"],function(e,t,n){t[p]=r(e),a(n).bigHour=!0}),d("hmm",function(e,t,n){var s=e.length-2;t[p]=r(e.substr(0,s)),t[x]=r(e.substr(s)),a(n).bigHour=!0}),d("hmmss",function(e,t,n){var s=e.length-4,o=e.length-2;t[p]=r(e.substr(0,s)),t[x]=r(e.substr(s,2)),t[N]=r(e.substr(o)),a(n).bigHour=!0}),d("Hmm",function(e,t){var s=e.length-2;t[p]=r(e.substr(0,s)),t[x]=r(e.substr(s))}),d("Hmmss",function(e,t){var s=e.length-4,o=e.length-2;t[p]=r(e.substr(0,s)),t[x]=r(e.substr(s,2)),t[N]=r(e.substr(o))});var L=Z("Hours",!0),ve,zt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:ue,monthsShort:yt,week:{dow:0,doy:6},weekdays:fe,weekdaysMin:He,weekdaysShort:bt,meridiemParse:/[ap]\.?m?\.?/i},m={},de={};function Tt(e){return e&&e.toLowerCase().replace("_","-")}function gn(e){for(var t,n,o,i,s=0;s<e.length;){for(t=(o=Tt(e[s]).split("-")).length,n=(n=Tt(e[s+1]))?n.split("-"):null;0<t;){if(i=Ae(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&function(e,t){for(var s=Math.min(e.length,t.length),n=0;n<s;n+=1)if(e[n]!==t[n])return n;return s}(o,n)>=t-1)break;t--}s++}return ve}function Ae(t){var n;if(void 0===m[t]&&!0&&e&&e.exports&&null!=t.match("^[^/\\\\]*$"))try{n=ve._abbr,FP("./locale/"+t),K(n)}catch{m[t]=null}return m[t]}function K(e,t){return e&&((t=j(t)?D(e):ut(e,t))?ve=t:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ve._abbr}function ut(e,t){if(null===t)return delete m[e],null;var s,n=zt;if(t.abbr=e,null!=m[e])Wt("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=m[e]._config;else if(null!=t.parentLocale)if(null!=m[t.parentLocale])n=m[t.parentLocale]._config;else{if(null==(s=Ae(t.parentLocale)))return de[t.parentLocale]||(de[t.parentLocale]=[]),de[t.parentLocale].push({name:e,config:t}),null;n=s._config}return m[e]=new ct(rt(n,t)),de[e]&&de[e].forEach(function(e){ut(e.name,e.config)}),K(e),m[e]}function D(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return ve;if(!k(e)){if(t=Ae(e))return t;e=[e]}return gn(e)}function mt(e){var t=e._a;return t&&-2===a(e).overflow&&(t=t[z]<0||11<t[z]?z:t[A]<1||t[A]>Se(t[b],t[z])?A:t[p]<0||24<t[p]||24===t[p]&&(0!==t[x]||0!==t[N]||0!==t[q])?p:t[x]<0||59<t[x]?x:t[N]<0||59<t[N]?N:t[q]<0||999<t[q]?q:-1,a(e)._overflowDayOfYear&&(t<b||A<t)&&(t=A),a(e)._overflowWeeks&&-1===t&&(t=An),a(e)._overflowWeekday&&-1===t&&(t=En),a(e).overflow=t),e}var vn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yn=/Z|[+-]\d\d(?::?\d\d)?/,De=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Sn=/^\/?Date\((-?\d+)/i,Cn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,un={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function wt(e){var t,s,o,r,c,l,i=e._i,n=vn.exec(i)||bn.exec(i),i=De.length,d=gt.length;if(n){for(a(e).iso=!0,t=0,s=i;t<s;t++)if(De[t][1].exec(n[1])){r=De[t][0],c=!1!==De[t][2];break}if(r==null)e._isValid=!1;else{if(n[3]){for(t=0,s=d;t<s;t++)if(gt[t][1].exec(n[3])){o=(n[2]||" ")+gt[t][0];break}if(o==null)return void(e._isValid=!1)}if(c||o==null){if(n[4]){if(!yn.exec(n[4]))return void(e._isValid=!1);l="Z"}e._f=r+(o||"")+(l||""),ft(e)}else e._isValid=!1}}else e._isValid=!1}function rn(e,t,n,s,o,i){return e=[function(e){e=parseInt(e,10);{if(e<=49)return 2e3+e;if(e<=999)return 1900+e}return e}(e),yt.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(o,10)],i&&e.push(parseInt(i,10)),e}function xt(e){var n,s,o,i,t=Cn.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));t?(i=rn(t[4],t[3],t[2],t[5],t[6],t[7]),n=t[1],s=i,o=e,n&&bt.indexOf(n)!==new Date(s[0],s[1],s[2]).getDay()?(a(o).weekdayMismatch=!0,o._isValid=!1):(e._a=i,e._tzm=(n=t[8],s=t[9],o=t[10],n?un[n]:s?0:60*(((n=parseInt(o,10))-(s=n%100))/100)+s),e._d=ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),a(e).rfc2822=!0)):e._isValid=!1}function ee(e,t,n){return e??t??n}function pt(e){var t,s,o,i,r,c,l,d,h,m,f,g=[];if(!e._d){for(o=e,t=new Date(n.now()),f=o._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()],e._w&&null==e._a[A]&&null==e._a[z]&&(null!=(t=(o=e)._w).GG||null!=t.W||null!=t.E?(r=1,m=4,l=ee(t.GG,o._a[b],ye(u(),1,4).year),h=ee(t.W,1),((i=ee(t.E,1))<1||7<i)&&(c=!0)):(r=o._locale._week.dow,m=o._locale._week.doy,d=ye(u(),r,m),l=ee(t.gg,o._a[b],d.year),h=ee(t.w,d.week),null!=t.d?((i=t.d)<0||6<i)&&(c=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(c=!0)):i=r),h<1||h>H(l,r,m)?a(o)._overflowWeeks=!0:c!=null?a(o)._overflowWeekday=!0:(d=en(l,h,i,r,m),o._a[b]=d.year,o._dayOfYear=d.dayOfYear)),null!=e._dayOfYear&&(t=ee(e._a[b],f[b]),(e._dayOfYear>me(t)||0===e._dayOfYear)&&(a(e)._overflowDayOfYear=!0),c=ge(t,0,e._dayOfYear),e._a[z]=c.getUTCMonth(),e._a[A]=c.getUTCDate()),s=0;s<3&&null==e._a[s];++s)e._a[s]=g[s]=f[s];for(;s<7;s++)e._a[s]=g[s]=null==e._a[s]?2===s?1:0:e._a[s];24===e._a[p]&&0===e._a[x]&&0===e._a[N]&&0===e._a[q]&&(e._nextDay=!0,e._a[p]=0),e._d=(e._useUTC?ge:ln).apply(null,g),l=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[p]=24),e._w&&void 0!==e._w.d&&e._w.d!==l&&(a(e).weekdayMismatch=!0)}}function ft(e){if(e._f===n.ISO_8601)wt(e);else if(e._f===n.RFC_2822)xt(e);else{e._a=[],a(e).empty=!0;for(var s,o,i,r,u,t=""+e._i,c=t.length,h=0,m=Dt(e._f,e._locale).match(ht)||[],f=m.length,d=0;d<f;d++)o=m[d],(s=(t.match(Fn(o,e))||[])[0])&&(0<(i=t.substr(0,t.indexOf(s))).length&&a(e).unusedInput.push(i),t=t.slice(t.indexOf(s)+s.length),h+=s.length),ie[o]?(s?a(e).empty=!1:a(e).unusedTokens.push(o),i=o,r=e,null!=(u=s)&&l(Ve,i)&&Ve[i](u,r._a,r,i)):e._strict&&!s&&a(e).unusedTokens.push(o);a(e).charsLeftOver=c-h,0<t.length&&a(e).unusedInput.push(t),e._a[p]<=12&&!0===a(e).bigHour&&0<e._a[p]&&(a(e).bigHour=void 0),a(e).parsedDateParts=e._a.slice(0),a(e).meridiem=e._meridiem,e._a[p]=function(e,t,n){return n==null?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((e=e.isPM(n))&&t<12&&(t+=12),t=e||12!==t?t:0):t}(e._locale,e._a[p],e._meridiem),null!==(c=a(e).era)&&(e._a[b]=e._locale.erasConvertYear(c,e._a[b])),pt(e),mt(e)}}function At(e){var t,i,r,s=e._i,o=e._f;return e._locale=e._locale||D(e._l),null===s||void 0===o&&""===s?Fe({nullInput:!0}):("string"==typeof s&&(e._i=s=e._locale.preparse(s)),C(s)?new he(mt(s)):(je(s)?e._d=s:k(o)?!function(e){var t,n,s,o,i,r,c=!1,l=e._f.length;if(0===l)return a(e).invalidFormat=!0,e._d=new Date(NaN);for(o=0;o<l;o++)n=0,i=!1,t=st({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],ft(t),lt(t)&&(i=!0),n=(n+=a(t).charsLeftOver)+10*a(t).unusedTokens.length,a(t).score=n,c?n<s&&(s=n,r=t):(s==null||n<s||i)&&(s=n,r=t,i&&(c=!0));U(e,r||t)}(e):o?ft(e):j(o=(s=e)._i)?s._d=new Date(n.now()):je(o)?s._d=new Date(o.valueOf()):"string"==typeof o?(t=s,null!==(i=Sn.exec(t._i))?t._d=new Date(+i[1]):(wt(t),!1===t._isValid&&(delete t._isValid,xt(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:n.createFromInputFallback(t))))):k(o)?(s._a=jt(o.slice(0),function(e){return parseInt(e,10)}),pt(s)):Y(o)?(i=s)._d||(r=void 0===(t=qe(i._i)).day?t.date:t.day,i._a=jt([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),pt(i)):I(o)?s._d=new Date(o):n.createFromInputFallback(s),lt(e)||(e._d=null),e))}function St(e,t,n,s,o){var i={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(Y(e)&&dt(e)||k(e)&&0===e.length)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=o,i._l=n,i._i=e,i._f=t,i._strict=s,(o=new he(mt(At(o=i))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function u(e,t,n,s){return St(e,t,n,s,!1)}n.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){},ne=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=u.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Fe()}),se=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=u.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:Fe()});function Ft(e,t){var n,s;if(!(t=1===t.length&&k(t[0])?t[0]:t).length)return u();for(s=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](s)||(s=t[n]);return s}te=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ze(e){var e=qe(e),t=e.year||0,n=e.quarter||0,s=e.month||0,o=e.week||e.isoWeek||0,i=e.day||0,a=e.hour||0,c=e.minute||0,d=e.second||0,u=e.millisecond||0;this._isValid=function(e){var t,n,s=!1,o=te.length;for(n in e)if(l(e,n)&&(-1===f.call(te,n)||null!=e[n]&&isNaN(e[n])))return!1;for(t=0;t<o;++t)if(e[te[t]]){if(s)return!1;parseFloat(e[te[t]])!==r(e[te[t]])&&(s=!0)}return!0}(e),this._milliseconds=+u+1e3*d+6e4*c+1e3*a*60*60,this._days=+i+7*o,this._months=+s+3*n+12*t,this._data={},this._locale=D(),this._bubble()}function Le(e){return e instanceof ze}function We(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Lt(e,t){o(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+S(~~(e/60),2)+t+S(~~e%60,2)})}Lt("Z",":"),Lt("ZZ",""),s("Z",Ce),s("ZZ",Ce),d(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=tt(Ce,e)}),Rt=/([+-]|\d\d)/gi;function tt(e,t){var t=(t||"").match(e);return null===t?null:0===(t=60*(e=((t[t.length-1]||[])+"").match(Rt)||["-",0,0])[1]+r(e[2]))?0:"+"===e[0]?t:-t}function Ze(e,t){var s;return t._isUTC?(t=t.clone(),s=(C(e)||je(e)?e:u(e)).valueOf()-t.valueOf(),t._d.setTime(t._d.valueOf()+s),n.updateOffset(t,!1),t):u(e).local()}function Qe(e){return-Math.round(e._d.getTimezoneOffset())}function Bt(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){},Vt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,$t=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function E(e,t){var o,s=e,n=null;return Le(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:I(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(n=Vt.exec(e))?(o="-"===n[1]?-1:1,s={y:0,d:r(n[A])*o,h:r(n[p])*o,m:r(n[x])*o,s:r(n[N])*o,ms:r(We(1e3*n[q]))*o}):(n=$t.exec(e))?(o="-"===n[1]?-1:1,s={y:G(n[2],o),M:G(n[3],o),w:G(n[4],o),d:G(n[5],o),h:G(n[6],o),m:G(n[7],o),s:G(n[8],o)}):s==null?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(t=function(e,t){var n;return!e.isValid()||!t.isValid()?{milliseconds:0,months:0}:(t=Ze(t,e),e.isBefore(t)?n=Kt(e,t):((n=Kt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n)}(u(s.from),u(s.to)),(s={}).ms=t.milliseconds,s.M=t.months),n=new ze(s),Le(e)&&l(e,"_locale")&&(n._locale=e._locale),Le(e)&&l(e,"_isValid")&&(n._isValid=e._isValid),n}function G(e,t){return e=e&&parseFloat(e.replace(",",".")),(isNaN(e)?0:e)*t}function Kt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function qt(e,t){return function(n,s){var o;return null===s||isNaN(+s)||(Wt(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=s,s=o),Yt(this,E(n,s),e),this}}function Yt(e,t,s,o){var a=t._milliseconds,i=We(t._days),t=We(t._months);e.isValid()&&(o=o==null||o,t&&It(e,Be(e,"Month")+t*s),i&&an(e,"Date",Be(e,"Date")+i*s),a&&e._d.setTime(e._d.valueOf()+a*s),o&&n.updateOffset(e,i||t))}E.fn=ze.prototype,E.invalid=function(){return E(NaN)},ue=qt(1,"add"),fe=qt(-1,"subtract");function Gt(e){return"string"==typeof e||e instanceof String}function jn(e){return C(e)||je(e)||Gt(e)||I(e)||function(e){var t=k(e),n=!1;return t&&(n=0===e.filter(function(t){return!I(t)&&Gt(e)}).length),t&&n}(e)||function(e){var t,s,i=Y(e)&&!dt(e),n=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a=o.length;for(t=0;t<a;t+=1)s=o[t],n=n||l(e,s);return i&&n}(e)||e==null}function Ie(e,t){if(e.date()<t.date())return-Ie(t,e);var s=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(s,"months"),t=t-n<0?(t-n)/(n-e.clone().add(s-1,"months")):(t-n)/(e.clone().add(1+s,"months")-n);return-(s+t)||0}function Zt(e){return void 0===e?this._locale._abbr:(null!=(e=D(e))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",He=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Jt(){return this._locale}nt=126227808e5;function ce(e,t){return(e%t+t)%t}function nn(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-nt:new Date(e,t,n).valueOf()}function sn(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-nt:Date.UTC(e,t,n)}function Ye(e,t){return t.erasAbbrRegex(e)}function Ge(){for(var s=[],o=[],i=[],n=[],t=this.eras(),e=0,a=t.length;e<a;++e)o.push(y(t[e].name)),s.push(y(t[e].abbr)),i.push(y(t[e].narrow)),n.push(y(t[e].name)),n.push(y(t[e].abbr)),n.push(y(t[e].narrow));this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+o.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Re(e,t){o(0,[e,e.length],0,t)}function Qt(e,t,n,s,o){var i;return e==null?ye(this,s,o).year:(i=H(e,s,o),function(e,t,n,s,o){return e=en(e,t,n,s,o),t=ge(e.year,0,e.dayOfYear),this.year(t.getUTCFullYear()),this.month(t.getUTCMonth()),this.date(t.getUTCDate()),this}.call(this,e,t=i<t?i:t,n,s,o))}o("N",0,0,"eraAbbr"),o("NN",0,0,"eraAbbr"),o("NNN",0,0,"eraAbbr"),o("NNNN",0,0,"eraName"),o("NNNNN",0,0,"eraNarrow"),o("y",["y",1],"yo","eraYear"),o("y",["yy",2],0,"eraYear"),o("y",["yyy",3],0,"eraYear"),o("y",["yyyy",4],0,"eraYear"),s("N",Ye),s("NN",Ye),s("NNN",Ye),s("NNNN",function(e,t){return t.erasNameRegex(e)}),s("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),d(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){s=n._locale.erasParse(e,s,n._strict),s?a(n).era=s:a(n).invalidEra=e}),s("y",re),s("yy",re),s("yyy",re),s("yyyy",re),s("yo",function(e,t){return t._eraYearOrdinalRegex||re}),d(["y","yy","yyy","yyyy"],b),d(["yo"],function(e,t,n){var o;n._locale._eraYearOrdinalRegex&&(o=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[b]=n._locale.eraYearOrdinalParse(e,o):t[b]=parseInt(e,10)}),o(0,["gg",2],0,function(){return this.weekYear()%100}),o(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Re("gggg","weekYear"),Re("ggggg","weekYear"),Re("GGGG","isoWeekYear"),Re("GGGGG","isoWeekYear"),g("weekYear","gg"),g("isoWeekYear","GG"),v("weekYear",1),v("isoWeekYear",1),s("G",Me),s("g",Me),s("GG",h,i),s("gg",h,i),s("GGGG",W,X),s("gggg",W,X),s("GGGGG",$,B),s("ggggg",$,B),be(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=r(e)}),be(["gg","GG"],function(e,t,s,o){t[o]=n.parseTwoDigitYear(e)}),o("Q",0,"Qo","quarter"),g("quarter","Q"),v("quarter",7),s("Q",t),d("Q",function(e,t){t[z]=3*(r(e)-1)}),o("D",["DD",2],"Do","date"),g("date","D"),v("date",9),s("D",h),s("DD",h,i),s("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),d(["D","DD"],A),d("Do",function(e,t){t[A]=r(e.match(h)[0])}),W=Z("Date",!0),o("DDD",["DDDD",3],"DDDo","dayOfYear"),g("dayOfYear","DDD"),v("dayOfYear",4),s("DDD",oe),s("DDDD",Pe),d(["DDD","DDDD"],function(e,t,n){n._dayOfYear=r(e)}),o("m",["mm",2],0,"minute"),g("minute","m"),v("minute",14),s("m",h),s("mm",h,i),d(["m","mm"],x),X=Z("Minutes",!1),$=(o("s",["ss",2],0,"second"),g("second","s"),v("second",15),s("s",h),s("ss",h,i),d(["s","ss"],N),Z("Seconds",!1));for(o("S",0,0,function(){return~~(this.millisecond()/100)}),o(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),o(0,["SSS",3],0,"millisecond"),o(0,["SSSS",4],0,function(){return 10*this.millisecond()}),o(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),o(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),o(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),o(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),o(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),g("millisecond","ms"),v("millisecond",16),s("S",oe,t),s("SS",oe,i),s("SSS",oe,Pe),V="SSSS";V.length<=9;V+="S")s(V,re);function dn(e,t){t[q]=r(1e3*("0."+e))}for(V="S";V.length<=9;V+="S")d(V,dn);B=Z("Milliseconds",!1),o("z",0,0,"zoneAbbr"),o("zz",0,0,"zoneName"),t=he.prototype;function Ut(e){return e}t.add=ue,t.calendar=function(e,t){1===arguments.length&&(arguments[0]?jn(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var o=Y(e)&&!dt(e),t=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n=0;n<s.length;n+=1)t=t||l(e,s[n]);return o&&t}(arguments[0])&&(t=arguments[0],e=void 0):t=e=void 0);var e=e||u(),s=Ze(e,this).startOf("day"),s=n.calendarFormat(this,s)||"sameElse",t=t&&(M(t[s])?t[s].call(this,e):t[s]);return this.format(t||this.localeData().calendar(s,this,u(e)))},t.clone=function(){return new he(this)},t.diff=function(e,t,n){var s,o,i;if(!this.isValid())return NaN;if(!(s=Ze(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=O(t)){case"year":o=Ie(this,s)/12;break;case"month":o=Ie(this,s);break;case"quarter":o=Ie(this,s)/3;break;case"second":o=(this-s)/1e3;break;case"minute":o=(this-s)/6e4;break;case"hour":o=(this-s)/36e5;break;case"day":o=(this-s-i)/864e5;break;case"week":o=(this-s-i)/6048e5;break;default:o=this-s}return n?o:w(o)},t.endOf=function(e){var t,s;if(void 0===(e=O(e))||"millisecond"===e||!this.isValid())return this;switch(s=this._isUTC?sn:nn,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-ce(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-ce(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-ce(t,1e3)-1;break}return this._d.setTime(t),n.updateOffset(this,!0),this},t.format=function(e){return e=e||(this.isUtc()?n.defaultFormatUtc:n.defaultFormat),e=Te(this,e),this.localeData().postformat(e)},t.from=function(e,t){return this.isValid()&&(C(e)&&e.isValid()||u(e).isValid())?E({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},t.fromNow=function(e){return this.from(u(),e)},t.to=function(e,t){return this.isValid()&&(C(e)&&e.isValid()||u(e).isValid())?E({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},t.toNow=function(e){return this.to(u(),e)},t.get=function(e){return M(this[e=O(e)])?this[e]():this},t.invalidAt=function(){return a(this).overflow},t.isAfter=function(e,t){return e=C(e)?e:u(e),!!this.isValid()&&!!e.isValid()&&("millisecond"===(t=O(t)||"millisecond")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(t).valueOf())},t.isBefore=function(e,t){return e=C(e)?e:u(e),!!this.isValid()&&!!e.isValid()&&("millisecond"===(t=O(t)||"millisecond")?this.valueOf()<e.valueOf():this.clone().endOf(t).valueOf()<e.valueOf())},t.isBetween=function(e,t,n,s){return e=C(e)?e:u(e),t=C(t)?t:u(t),!!(this.isValid()&&e.isValid()&&t.isValid())&&("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n))},t.isSame=function(e,t){var e=C(e)?e:u(e);return!!this.isValid()&&!!e.isValid()&&("millisecond"===(t=O(t)||"millisecond")?this.valueOf()===e.valueOf():(e=e.valueOf(),this.clone().startOf(t).valueOf()<=e&&e<=this.clone().endOf(t).valueOf()))},t.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},t.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},t.isValid=function(){return lt(this)},t.lang=He,t.locale=Zt,t.localeData=Jt,t.max=se,t.min=ne,t.parsingFlags=function(){return U({},a(this))},t.set=function(e,t){if("object"==typeof e)for(var s=function(e){var t,n=[];for(t in e)l(e,t)&&n.push({unit:t,priority:Ue[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=qe(e)),o=s.length,n=0;n<o;n++)this[s[n].unit](e[s[n].unit]);else if(M(this[e=O(e)]))return this[e](t);return this},t.startOf=function(e){var t,s;if(void 0===(e=O(e))||"millisecond"===e||!this.isValid())return this;switch(s=this._isUTC?sn:nn,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ce(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=ce(t,6e4);break;case"second":t=this._d.valueOf(),t-=ce(t,1e3);break}return this._d.setTime(t),n.updateOffset(this,!0),this},t.subtract=fe,t.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},t.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},t.toDate=function(){return new Date(this.valueOf())},t.toISOString=function(e){if(!this.isValid())return null;var t=(e=!0!==e)?this.clone().utc():this;return t.year()<0||9999<t.year()?Te(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Te(t,"Z")):Te(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},t.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e="moment",n="";return this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),e="["+e+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+(n+'[")]'))},"undefined"!=typeof Symbol&&null!=Symbol.for&&(t[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},t.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},t.eraName=function(){for(var n,t=this.localeData().eras(),e=0,s=t.length;e<s;++e){if(n=this.clone().startOf("day").valueOf(),t[e].since<=n&&n<=t[e].until)return t[e].name;if(t[e].until<=n&&n<=t[e].since)return t[e].name}return""},t.eraNarrow=function(){for(var n,t=this.localeData().eras(),e=0,s=t.length;e<s;++e){if(n=this.clone().startOf("day").valueOf(),t[e].since<=n&&n<=t[e].until)return t[e].narrow;if(t[e].until<=n&&n<=t[e].since)return t[e].narrow}return""},t.eraAbbr=function(){for(var n,t=this.localeData().eras(),e=0,s=t.length;e<s;++e){if(n=this.clone().startOf("day").valueOf(),t[e].since<=n&&n<=t[e].until)return t[e].abbr;if(t[e].until<=n&&n<=t[e].since)return t[e].abbr}return""},t.eraYear=function(){for(var s,o,t=this.localeData().eras(),e=0,i=t.length;e<i;++e)if(o=t[e].since<=t[e].until?1:-1,s=this.clone().startOf("day").valueOf(),t[e].since<=s&&s<=t[e].until||t[e].until<=s&&s<=t[e].since)return(this.year()-n(t[e].since).year())*o+t[e].offset;return this.year()},t.year=pe,t.isLeapYear=function(){return we(this.year())},t.weekYear=function(e){return Qt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},t.isoWeekYear=function(e){return Qt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},t.quarter=t.quarters=function(e){return e==null?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},t.month=Xt,t.daysInMonth=function(){return Se(this.year(),this.month())},t.week=t.weeks=function(e){var t=this.localeData().week(this);return e==null?t:this.add(7*(e-t),"d")},t.isoWeek=t.isoWeeks=function(e){var t=ye(this,1,4).week;return e==null?t:this.add(7*(e-t),"d")},t.weeksInYear=function(){var e=this.localeData()._week;return H(this.year(),e.dow,e.doy)},t.weeksInWeekYear=function(){var e=this.localeData()._week;return H(this.weekYear(),e.dow,e.doy)},t.isoWeeksInYear=function(){return H(this.year(),1,4)},t.isoWeeksInISOWeekYear=function(){return H(this.isoWeekYear(),1,4)},t.date=W,t.day=t.days=function(e){if(!this.isValid())return e!=null?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},t.weekday=function(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")},t.isoWeekday=function(e){return this.isValid()?e!=null?(t=e,n=this.localeData(),n="string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t,this.day(this.day()%7?n:n-7)):this.day()||7:e!=null?this:NaN;var t,n},t.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")},t.hour=t.hours=L,t.minute=t.minutes=X,t.second=t.seconds=$,t.millisecond=t.milliseconds=B,t.utcOffset=function(e,t,s){var o,i=this._offset||0;if(!this.isValid())return e!=null?this:NaN;if(e==null)return this._isUTC?i:Qe(this);if("string"==typeof e){if(null===(e=tt(Ce,e)))return this}else Math.abs(e)<16&&!s&&(e*=60);return!this._isUTC&&t&&(o=Qe(this)),this._offset=e,this._isUTC=!0,o!=null&&this.add(o,"m"),i!==e&&(!t||this._changeInProgress?Yt(this,E(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this},t.utc=function(e){return this.utcOffset(0,e)},t.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Qe(this),"m")),this},t.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=tt(Mn,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},t.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?u(e).utcOffset():0,(this.utcOffset()-e)%60==0)},t.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},t.isLocal=function(){return!!this.isValid()&&!this._isUTC},t.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},t.isUtc=Bt,t.isUTC=Bt,t.zoneAbbr=function(){return this._isUTC?"UTC":""},t.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},t.dates=_("dates accessor is deprecated. Use date instead.",W),t.months=_("months accessor is deprecated. Use month instead",Xt),t.years=_("years accessor is deprecated. Use year instead",pe),t.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return e!=null?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()}),t.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!j(this._isDSTShifted))return this._isDSTShifted;var t,e={};return st(e,this),(e=At(e))._a?(t=(e._isUTC?T:u)(e._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0,s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&r(e[s])!==r(t[s]))&&o++;return o+a}(e._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),i=ct.prototype;function Ne(e,t,n,s){var o=D(),s=T().set(s,t);return o[n](s,e)}function Ht(e,t,n){if(I(e)&&(t=e,e=void 0),e=e||"",t!=null)return Ne(e,t,n,"month");for(var o=[],s=0;s<12;s++)o[s]=Ne(e,s,n,"month");return o}function $e(e,t,n,s){t=("boolean"==typeof e?I(t)&&(n=t,t=void 0):(t=e,e=!1,I(n=t)&&(n=t,t=void 0)),t||"");var o,r=D(),i=e?r._week.dow:0,a=[];if(n!=null)return Ne(t,(n+i)%7,s,"day");for(o=0;o<7;o++)a[o]=Ne(t,(o+i)%7,s,"day");return a}i.calendar=function(e,t,n){return M(e=this._calendar[e]||this._calendar.sameElse)?e.call(t,n):e},i.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(ht).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},i.invalidDate=function(){return this._invalidDate},i.ordinal=function(e){return this._ordinal.replace("%d",e)},i.preparse=Ut,i.postformat=Ut,i.relativeTime=function(e,t,n,s){var o=this._relativeTime[n];return M(o)?o(e,t,n,s):o.replace(/%d/i,e)},i.pastFuture=function(e,t){return M(e=this._relativeTime[0<e?"future":"past"])?e(t):e.replace(/%s/i,t)},i.set=function(e){var t,n;for(t in e)l(e,t)&&(M(n=e[t])?this[t]=n:this["_"+t]=n);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},i.eras=function(){for(var i,s=this._eras||D("en")._eras,o=0,a=s.length;o<a;++o){switch(typeof s[o].since){case"string":i=n(s[o].since).startOf("day"),s[o].since=i.valueOf();break}switch(typeof s[o].until){case"undefined":s[o].until=1/0;break;case"string":i=n(s[o].until).startOf("day").valueOf(),s[o].until=i.valueOf();break}}return s},i.erasParse=function(e,t,n){var s,i,a,r,c,o=this.eras();for(e=e.toUpperCase(),s=0,c=o.length;s<c;++s)if(i=o[s].name.toUpperCase(),a=o[s].abbr.toUpperCase(),r=o[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return o[s];break;case"NNNN":if(i===e)return o[s];break;case"NNNNN":if(r===e)return o[s];break}else if(0<=[i,a,r].indexOf(e))return o[s]},i.erasConvertYear=function(e,t){var s=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*s},i.erasAbbrRegex=function(e){return l(this,"_erasAbbrRegex")||Ge.call(this),e?this._erasAbbrRegex:this._erasRegex},i.erasNameRegex=function(e){return l(this,"_erasNameRegex")||Ge.call(this),e?this._erasNameRegex:this._erasRegex},i.erasNarrowRegex=function(e){return l(this,"_erasNarrowRegex")||Ge.call(this),e?this._erasNarrowRegex:this._erasRegex},i.months=function(e,t){return e?(k(this._months)?this._months:this._months[(this._months.isFormat||Ot).test(t)?"format":"standalone"])[e.month()]:k(this._months)?this._months:this._months.standalone},i.monthsShort=function(e,t){return e?(k(this._monthsShort)?this._monthsShort:this._monthsShort[Ot.test(t)?"format":"standalone"])[e.month()]:k(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},i.monthsParse=function(e,t,n){var s,o;if(this._monthsParseExact)return function(e,t,n){var s,o,i,e=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;o<12;++o)i=T([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(s=f.call(this._shortMonthsParse,e))?s:null:-1!==(s=f.call(this._longMonthsParse,e))?s:null:"MMM"===t?-1!==(s=f.call(this._shortMonthsParse,e))||-1!==(s=f.call(this._longMonthsParse,e))?s:null:-1!==(s=f.call(this._longMonthsParse,e))||-1!==(s=f.call(this._shortMonthsParse,e))?s:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(o=T([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(o="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[s]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},i.monthsRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||on.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=_n),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},i.monthsShortRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||on.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=pn),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},i.week=function(e){return ye(e,this._week.dow,this._week.doy).week},i.firstDayOfYear=function(){return this._week.doy},i.firstDayOfWeek=function(){return this._week.dow},i.weekdays=function(e,t){return t=k(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"],!0===e?Ke(t,this._week.dow):e?t[e.day()]:t},i.weekdaysMin=function(e){return!0===e?Ke(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},i.weekdaysShort=function(e){return!0===e?Ke(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},i.weekdaysParse=function(e,t,n){var s,o;if(this._weekdaysParseExact)return function(e,t,n){var s,o,i,e=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;o<7;++o)i=T([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(s=f.call(this._weekdaysParse,e))?s:null:"ddd"===t?-1!==(s=f.call(this._shortWeekdaysParse,e))?s:null:-1!==(s=f.call(this._minWeekdaysParse,e))?s:null:"dddd"===t?-1!==(s=f.call(this._weekdaysParse,e))||-1!==(s=f.call(this._shortWeekdaysParse,e))||-1!==(s=f.call(this._minWeekdaysParse,e))?s:null:"ddd"===t?-1!==(s=f.call(this._shortWeekdaysParse,e))||-1!==(s=f.call(this._weekdaysParse,e))||-1!==(s=f.call(this._minWeekdaysParse,e))?s:null:-1!==(s=f.call(this._minWeekdaysParse,e))||-1!==(s=f.call(this._weekdaysParse,e))||-1!==(s=f.call(this._shortWeekdaysParse,e))?s:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(o=T([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(o="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[s]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},i.weekdaysRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=cn),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},i.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=hn),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},i.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=mn),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},i.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},i.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},K("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===r(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),n.lang=_("moment.lang is deprecated. Use moment.locale instead.",K),n.langData=_("moment.langData is deprecated. Use moment.localeData instead.",D),F=Math.abs;function Mt(e,t,n,s){return t=E(t,n),e._milliseconds+=s*t._milliseconds,e._days+=s*t._days,e._months+=s*t._months,e._bubble()}function kt(e){return e<0?Math.floor(e):Math.ceil(e)}function Et(e){return 4800*e/146097}function it(e){return 146097*e/4800}function R(e){return function(){return this.as(e)}}oe=R("ms"),Pe=R("s"),ue=R("m"),se=R("h"),ne=R("d"),fe=R("w"),L=R("M"),X=R("Q"),$=R("y");function Q(e){return function(){return this.isValid()?this._data[e]:NaN}}var B=Q("milliseconds"),W=Q("seconds"),pe=Q("minutes"),i=Q("hours"),wn=Q("days"),On=Q("months"),xn=Q("years"),P=Math.round,J={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function kn(e,t,n,s){var i=E(e).abs(),o=P(i.as("s")),a=P(i.as("m")),r=P(i.as("h")),c=P(i.as("d")),l=P(i.as("M")),d=P(i.as("w")),i=P(i.as("y")),o=(o<=n.ss?["s",o]:o<n.s&&["ss",o])||a<=1&&["m"]||a<n.m&&["mm",a]||r<=1&&["h"]||r<n.h&&["hh",r]||c<=1&&["d"]||c<n.d&&["dd",c];return(o=(o=null!=n.w?o||d<=1&&["w"]||d<n.w&&["ww",d]:o)||l<=1&&["M"]||l<n.M&&["MM",l]||i<=1&&["y"]||["yy",i])[2]=t,o[3]=0<+e,o[4]=s,function(e,t,n,s,o){return o.relativeTime(t||1,!!n,e,s)}.apply(null,o)}ke=Math.abs;function ae(e){return(0<e)-(e<0)||+e}function Ee(){if(!this.isValid())return this.localeData().invalidDate();var e,s,o,a,r,c,l,t=ke(this._milliseconds)/1e3,d=ke(this._days),i=ke(this._months),n=this.asSeconds();return n?(e=w(t/60),s=w(e/60),t%=60,e%=60,a=w(i/12),i%=12,c=t?t.toFixed(3).replace(/\.?0+$/,""):"",r=ae(this._months)!==ae(n)?"-":"",l=ae(this._days)!==ae(n)?"-":"",o=ae(this._milliseconds)!==ae(n)?"-":"",(n<0?"-":"")+"P"+(a?r+a+"Y":"")+(i?r+i+"M":"")+(d?l+d+"D":"")+(s||e||t?"T":"")+(s?o+s+"H":"")+(e?o+e+"M":"")+(t?o+c+"S":"")):"P0D"}return c=ze.prototype,c.isValid=function(){return this._isValid},c.abs=function(){var e=this._data;return this._milliseconds=F(this._milliseconds),this._days=F(this._days),this._months=F(this._months),e.milliseconds=F(e.milliseconds),e.seconds=F(e.seconds),e.minutes=F(e.minutes),e.hours=F(e.hours),e.months=F(e.months),e.years=F(e.years),this},c.add=function(e,t){return Mt(this,e,t,1)},c.subtract=function(e,t){return Mt(this,e,t,-1)},c.as=function(e){if(!this.isValid())return NaN;var t,s,n=this._milliseconds;if("month"===(e=O(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,s=this._months+Et(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(it(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},c.asMilliseconds=oe,c.asSeconds=Pe,c.asMinutes=ue,c.asHours=se,c.asDays=ne,c.asWeeks=fe,c.asMonths=L,c.asQuarters=X,c.asYears=$,c.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12):NaN},c._bubble=function(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data;return 0<=e&&0<=t&&0<=n||e<=0&&t<=0&&n<=0||(e+=864e5*kt(it(n)+t),n=t=0),s.milliseconds=e%1e3,e=w(e/1e3),s.seconds=e%60,e=w(e/60),s.minutes=e%60,e=w(e/60),s.hours=e%24,t+=w(e/24),n+=e=w(Et(t)),t-=kt(it(e)),e=w(n/12),n%=12,s.days=t,s.months=n,s.years=e,this},c.clone=function(){return E(this)},c.get=function(e){return e=O(e),this.isValid()?this[e+"s"]():NaN},c.milliseconds=B,c.seconds=W,c.minutes=pe,c.hours=i,c.days=wn,c.weeks=function(){return w(this.days()/7)},c.months=On,c.years=xn,c.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=J;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(n=e),"object"==typeof t&&(s=Object.assign({},J,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),e=this.localeData(),t=kn(this,!n,s,e),n&&(t=e.pastFuture(+this,t)),e.postformat(t)},c.toISOString=Ee,c.toString=Ee,c.toJSON=Ee,c.locale=Zt,c.localeData=Jt,c.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ee),c.lang=He,o("X",0,0,"unix"),o("x",0,0,"valueOf"),s("x",Me),s("X",/[+-]?\d+(\.\d{1,3})?/),d("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),d("x",function(e,t,n){n._d=new Date(r(e))}),n.version="2.29.4",tn=u,n.fn=t,n.min=function(){return Ft("isBefore",[].slice.call(arguments,0))},n.max=function(){return Ft("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=T,n.unix=function(e){return u(1e3*e)},n.months=function(e,t){return Ht(e,t,"months")},n.isDate=je,n.locale=K,n.invalid=Fe,n.duration=E,n.isMoment=C,n.weekdays=function(e,t,n){return $e(e,t,n,"weekdays")},n.parseZone=function(){return u.apply(null,arguments).parseZone()},n.localeData=D,n.isDuration=Le,n.monthsShort=function(e,t){return Ht(e,t,"monthsShort")},n.weekdaysMin=function(e,t,n){return $e(e,t,n,"weekdaysMin")},n.defineLocale=ut,n.updateLocale=function(e,t){var n,s;return t!=null?(n=zt,null!=m[e]&&null!=m[e].parentLocale?m[e].set(rt(m[e]._config,t)):(t=rt(n=null!=(s=Ae(e))?s._config:n,t),s==null&&(t.abbr=e),(n=new ct(t)).parentLocale=m[e],m[e]=n),K(e)):null!=m[e]&&(null!=m[e].parentLocale?(m[e]=m[e].parentLocale,e===K()&&K(e)):null!=m[e]&&delete m[e]),m[e]},n.locales=function(){return Ct(m)},n.weekdaysShort=function(e,t,n){return $e(e,t,n,"weekdaysShort")},n.normalizeUnits=O,n.relativeTimeRounding=function(e){return void 0===e?P:"function"==typeof e&&(P=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==J[e]&&(void 0===t?J[e]:(J[e]=t,"s"===e&&(J.ss=t-1),!0))},n.calendarFormat=function(e,t){return(e=e.diff(t,"days",!0))<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse"},n.prototype=t,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n})}(M1);const Re=M1.exports,jt={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},e={trace:(...e)=>{},debug:(...e)=>{},info:(...e)=>{},warn:(...e)=>{},error:(...e)=>{},fatal:(...e)=>{}},S1=function(t="fatal"){let n=jt.fatal;typeof t=="string"?(t=t.toLowerCase(),t in jt&&(n=jt[t])):typeof t=="number"&&(n=t),e.trace=()=>{},e.debug=()=>{},e.info=()=>{},e.warn=()=>{},e.error=()=>{},e.fatal=()=>{},n<=jt.fatal&&(e.fatal=console.error?console.error.bind(console,Ce("FATAL"),"color: orange"):console.log.bind(console,"[35m",Ce("FATAL"))),n<=jt.error&&(e.error=console.error?console.error.bind(console,Ce("ERROR"),"color: orange"):console.log.bind(console,"[31m",Ce("ERROR"))),n<=jt.warn&&(e.warn=console.warn?console.warn.bind(console,Ce("WARN"),"color: orange"):console.log.bind(console,`[33m`,Ce("WARN"))),n<=jt.info&&(e.info=console.info?console.info.bind(console,Ce("INFO"),"color: lightblue"):console.log.bind(console,"[34m",Ce("INFO"))),n<=jt.debug&&(e.debug=console.debug?console.debug.bind(console,Ce("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",Ce("DEBUG"))),n<=jt.trace&&(e.trace=console.debug?console.debug.bind(console,Ce("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",Ce("TRACE")))},Ce=e=>{const t=Re().format("ss.SSS");return`%c${t} : ${e} : `};fi={},Object.defineProperty(fi,"__esModule",{value:!0}),ht=fi.sanitizeUrl=void 0,D1=/^([^\w]*)(javascript|data|vbscript)/im,N1=/&#(\w+)(^\w|;)?/g,$1=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,U1=/^([^:]+):/gm,J1=[".","/"];function sP(e){return J1.indexOf(e[0])>-1}function QR(e){return e.replace(N1,function(e,t){return String.fromCharCode(t)})}function zR(e){var n,s,t=QR(e||"").replace($1,"").trim();return t?sP(t)?t:(n=t.match(U1),n?(s=n[0],D1.test(s)?"about:blank":t):t):"about:blank"}ht=fi.sanitizeUrl=zR;function _i(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function MR(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yu(e){let t,n,s;e.length!==2?(t=_i,n=(t,n)=>_i(e(t),n),s=(t,n)=>e(t)-n):(t=e===_i||e===MR?e:SR,n=e,s=e);function o(e,s,o=0,i=e.length){if(o<i){if(t(s,s)!==0)return i;do{const t=o+i>>>1;n(e[t],s)<0?o=t+1:i=t}while(o<i)}return o}function i(e,s,o=0,i=e.length){if(o<i){if(t(s,s)!==0)return i;do{const t=o+i>>>1;n(e[t],s)<=0?o=t+1:i=t}while(o<i)}return o}function a(e,t,n=0,i=e.length){const a=o(e,t,n,i-1);return a>n&&s(e[a-1],t)>-s(e[a],t)?a-1:a}return{left:o,center:a,right:i}}function SR(){return 0}function AR(e){return e===null?NaN:+e}const kR=Yu(_i),CR=kR.right;Yu(AR).center;const bR=CR;class E4 extends Map{constructor(e,t=dR){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(A4(this,e))}has(e){return super.has(A4(this,e))}set(e,t){return super.set(fR(this,e),t)}delete(e){return super.delete(hR(this,e))}}function A4({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function fR({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function hR({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function dR(e){return e!==null&&typeof e=="object"?e.valueOf():e}var Pu=Math.sqrt(50),Du=Math.sqrt(10),zu=Math.sqrt(2);function rR(e,t,n){var s,i,a,r,o=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),(s=z4(e,t,n))===0||!isFinite(s))return[];if(s>0){let n=Math.round(e/s),r=Math.round(t/s);for(n*s<e&&++n,r*s>t&&--r,a=new Array(i=r-n+1);++o<i;)a[o]=(n+o)*s}else{s=-s;let n=Math.round(e*s),r=Math.round(t*s);for(n/s<e&&++n,r/s>t&&--r,a=new Array(i=r-n+1);++o<i;)a[o]=(n+o)/s}return r&&a.reverse(),a}function z4(e,t,n){var i=(t-e)/Math.max(0,n),o=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,o);return o>=0?(s>=Pu?10:s>=Du?5:s>=zu?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(s>=Pu?10:s>=Du?5:s>=zu?2:1)}function Mu(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/s;return o>=Pu?s*=10:o>=Du?s*=5:o>=zu&&(s*=2),t<e?-s:s}function HL(e,t){let n;if(t===void 0)for(const t of e)t!=null&&(n<t||n===void 0&&t>=t)&&(n=t);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function PL(e,t){let n;if(t===void 0)for(const t of e)t!=null&&(n>t||n===void 0&&t>=t)&&(n=t);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function RL(e){return e}var $i=1,bu=2,vu=3,Wi=4,H4=1e-6;function zL(e){return"translate("+e+",0)"}function ML(e){return"translate(0,"+e+")"}function AL(e){return t=>+e(t)}function kL(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function OL(){return!this.__axis}function I4(e,t){var r=[],c=null,l=null,a=6,o=6,u=3,s=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,i=e===$i||e===Wi?-1:1,d=e===Wi||e===bu?"x":"y",h=e===$i||e===vu?zL:ML;function n(n){var C=c??(t.ticks?t.ticks.apply(t,r):t.domain()),E=l??(t.tickFormat?t.tickFormat.apply(t,r):RL),x=Math.max(a,0)+u,w=t.range(),y=+w[0]+s,j=+w[w.length-1]+s,b=(t.bandwidth?kL:AL)(t.copy(),s),p=n.selection?n.selection():n,f=p.selectAll(".domain").data([null]),m=p.selectAll(".tick").data(C,t).order(),O=m.exit(),_=m.enter().append("g").attr("class","tick"),v=m.select("line"),g=m.select("text"),f=f.merge(f.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),m=m.merge(_),v=v.merge(_.append("line").attr("stroke","currentColor").attr(d+"2",i*a)),g=g.merge(_.append("text").attr("fill","currentColor").attr(d,i*x).attr("dy",e===$i?"0em":e===vu?"0.71em":"0.32em"));n!==p&&(f=f.transition(n),m=m.transition(n),v=v.transition(n),g=g.transition(n),O=O.transition(n).attr("opacity",H4).attr("transform",function(e){return isFinite(e=b(e))?h(e+s):this.getAttribute("transform")}),_.attr("opacity",H4).attr("transform",function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:b(e))+s)})),O.remove(),f.attr("d",e===Wi||e===bu?o?"M"+i*o+","+y+"H"+s+"V"+j+"H"+i*o:"M"+s+","+y+"V"+j:o?"M"+y+","+i*o+"V"+s+"H"+j+"V"+i*o:"M"+y+","+s+"H"+j),m.attr("opacity",1).attr("transform",function(e){return h(b(e)+s)}),v.attr(d+"2",i*a),g.attr(d,i*x).text(E),p.filter(OL).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===bu?"start":e===Wi?"end":"middle"),p.each(function(){this.__axis=b})}return n.scale=function(e){return arguments.length?(t=e,n):t},n.ticks=function(){return r=Array.from(arguments),n},n.tickArguments=function(e){return arguments.length?(r=e==null?[]:Array.from(e),n):r.slice()},n.tickValues=function(e){return arguments.length?(c=e==null?null:Array.from(e),n):c&&c.slice()},n.tickFormat=function(e){return arguments.length?(l=e,n):l},n.tickSize=function(e){return arguments.length?(a=o=+e,n):a},n.tickSizeInner=function(e){return arguments.length?(a=+e,n):a},n.tickSizeOuter=function(e){return arguments.length?(o=+e,n):o},n.tickPadding=function(e){return arguments.length?(u=+e,n):u},n.offset=function(e){return arguments.length?(s=+e,n):s},n}function fL(e){return I4($i,e)}function JN(e){return I4(vu,e)}n0={value:()=>{}};function a0(){for(var e,t=0,s=arguments.length,n={};t<s;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new fa(n)}function fa(e){this._=e}function PN(e,t){return e.trim().split(/^|\s+/).map(function(e){var s="",n=e.indexOf(".");if(n>=0&&(s=e.slice(n+1),e=e.slice(0,n)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:s}})}fa.prototype=a0.prototype={constructor:fa,on:function(e,t){var n,s=this._,i=PN(e+"",s),o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((n=(e=i[o]).type)&&(n=RN(s[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)s[n]=p0(s[n],e.name,t);else if(t==null)for(n in s)s[n]=p0(s[n],e.name,null);return this},copy:function(){var n,e={},t=this._;for(n in t)e[n]=t[n].slice();return new fa(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var s,o,i=new Array(s),n=0;n<s;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,s=o.length;n<s;++n)o[n].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,i=o.length;s<i;++s)o[s].value.apply(t,n)}};function RN(e,t){for(var s,n=0,o=e.length;n<o;++n)if((s=e[n]).name===t)return s.value}function p0(e,t,n){for(var s=0,o=e.length;s<o;++s)if(e[s].name===t){e[s]=n0,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}ba="http://www.w3.org/1999/xhtml";const b0={svg:"http://www.w3.org/2000/svg",xhtml:ba,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ja(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),b0.hasOwnProperty(t)?{space:b0[t],local:e}:e}function hN(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ba&&t.documentElement.namespaceURI===ba?t.createElement(e):t.createElementNS(n,e)}}function rN(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function w0(e){var t=ja(e);return(t.local?rN:hN)(t)}function tN(){}function Ad(e){return e==null?tN:function(){return this.querySelector(e)}}function QD(e){typeof e!="function"&&(e=Ad(e));for(var a=this._groups,r=a.length,c=new Array(r),s=0;s<r;++s)for(var t,i,o=a[s],l=o.length,d=c[s]=new Array(l),n=0;n<l;++n)(t=o[n])&&(i=e.call(t,t.__data__,n,o))&&("__data__"in t&&(i.__data__=t.__data__),d[n]=i);return new re(c,this._parents)}function T0(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function KD(){return[]}function z0(e){return e==null?KD:function(){return this.querySelectorAll(e)}}function PD(e){return function(){return T0(e.apply(this,arguments))}}function RD(e){typeof e=="function"?e=PD(e):e=z0(e);for(var i=this._groups,c=i.length,a=[],r=[],s=0;s<c;++s)for(var t,o=i[s],l=o.length,n=0;n<l;++n)(t=o[n])&&(a.push(e.call(t,t.__data__,n,o)),r.push(t));return new re(a,r)}function N0(e){return function(){return this.matches(e)}}function R0(e){return function(t){return t.matches(e)}}P0=Array.prototype.find;function OD(e){return function(){return P0.call(this.children,e)}}function _D(){return this.firstElementChild}function bD(e){return this.select(e==null?_D:OD(typeof e=="function"?e:R0(e)))}G0=Array.prototype.filter;function uD(){return Array.from(this.children)}function nD(e){return function(){return G0.call(this.children,e)}}function eD(e){return this.selectAll(e==null?uD:nD(typeof e=="function"?e:R0(e)))}function Qz(e){typeof e!="function"&&(e=N0(e));for(var i=this._groups,a=i.length,r=new Array(a),t=0;t<a;++t)for(var n,o=i[t],c=o.length,l=r[t]=[],s=0;s<c;++s)(n=o[s])&&e.call(n,n.__data__,s,o)&&l.push(n);return new re(r,this._parents)}function o2(e){return new Array(e.length)}function qz(){return new re(this._enter||this._groups.map(o2),this._parents)}function cr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}cr.prototype={constructor:cr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Kz(e){return function(){return e}}function Wz(e,t,n,s,o,i){for(var r,a=0,c=t.length,l=i.length;a<l;++a)(r=t[a])?(r.__data__=i[a],s[a]=r):n[a]=new cr(e,i[a]);for(;a<c;++a)(r=t[a])&&(o[a]=r)}function $z(e,t,n,s,o,i,a){var r,c,l,d=new Map,u=t.length,m=i.length,h=new Array(u);for(r=0;r<u;++r)(c=t[r])&&(h[r]=l=a.call(c,c.__data__,r,t)+"",d.has(l)?o[r]=c:d.set(l,c));for(r=0;r<m;++r)l=a.call(e,i[r],r,i)+"",(c=d.get(l))?(s[r]=c,c.__data__=i[r],d.delete(l)):n[r]=new cr(e,i[r]);for(r=0;r<u;++r)(c=t[r])&&d.get(h[r])===c&&(o[r]=c)}function Vz(e){return e.__data__}function Hz(e,t){if(!arguments.length)return Array.from(this,Vz);var _=t?$z:Wz,l=this._parents,h=this._groups;typeof e!="function"&&(e=Kz(e));for(var r=h.length,s=new Array(r),d=new Array(r),u=new Array(r),n=0;n<r;++n){var o,i,f,b,a=l[n],m=h[n],j=m.length,p=Pz(e.call(a,a&&a.__data__,n,l)),c=p.length,g=d[n]=new Array(c),v=s[n]=new Array(c),y=u[n]=new Array(j);_(a,m,g,v,y,p,t);for(o=0,i=0;o<c;++o)if(b=g[o]){for(o>=i&&(i=o+1);!(f=v[i])&&++i<c;);b._next=f||null}}return s=new re(s,l),s._enter=d,s._exit=u,s}function Pz(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wz(){return new re(this._exit||this._groups.map(o2),this._parents)}function yz(e,t,n){var s=this.enter(),o=this,i=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),s&&o?s.merge(o).order():o}function uz(e){a=e.selection?e.selection():e;for(var a,i=this._groups,r=a._groups,o=i.length,u=r.length,h=Math.min(o,u),s=new Array(o),t=0;t<h;++t)for(var d,c=i[t],m=r[t],l=c.length,f=s[t]=new Array(l),n=0;n<l;++n)(d=c[n]||m[n])&&(f[n]=d);for(;t<o;++t)s[t]=i[t];return new re(s,this._parents)}function cz(){for(var o=this._groups,i=-1,a=o.length;++i<a;)for(var t,n=o[i],s=n.length-1,e=n[s];--s>=0;)(t=n[s])&&(e&&t.compareDocumentPosition(e)^4&&e.parentNode.insertBefore(t,e),e=t);return this}function tz(e){e||(e=GT);function d(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var s=this._groups,o=s.length,i=new Array(o),t=0;t<o;++t){for(var l,a=s[t],r=a.length,c=i[t]=new Array(r),n=0;n<r;++n)(l=a[n])&&(c[n]=l);c.sort(d)}return new re(i,this._parents).order()}function GT(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function KT(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function IT(){return Array.from(this)}function RT(){for(var n,s=this._groups,e=0,i=s.length;e<i;++e)for(var o=s[e],t=0,a=o.length;t<a;++t)if(n=o[t],n)return n;return null}function DT(){let e=0;for(const t of this)++e;return e}function TT(){return!this.node()}function FT(e){for(var i=this._groups,n=0,a=i.length;n<a;++n)for(var o,s=i[n],t=0,r=s.length;t<r;++t)(o=s[t])&&e.call(o,o.__data__,t,s);return this}function MT(e){return function(){this.removeAttribute(e)}}function ST(e){return function(){this.removeAttributeNS(e.space,e.local)}}function AT(e,t){return function(){this.setAttribute(e,t)}}function CT(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function uT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cT(e,t){var s,n=ja(e);return arguments.length<2?(s=this.node(),n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)):this.each((t==null?n.local?ST:MT:typeof t=="function"?n.local?uT:wT:n.local?CT:AT)(n,t))}function t3(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function BF(e){return function(){this.style.removeProperty(e)}}function IF(e,t,n){return function(){this.style.setProperty(e,t,n)}}function HF(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function PF(e,t,n){return arguments.length>1?this.each((t==null?BF:typeof t=="function"?HF:IF)(e,t,n??"")):Ps(this.node(),e)}function Ps(e,t){return e.style.getPropertyValue(t)||t3(e).getComputedStyle(e,null).getPropertyValue(t)}function NF(e){return function(){delete this[e]}}function TF(e,t){return function(){this[e]=t}}function FF(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function MF(e,t){return arguments.length>1?this.each((t==null?NF:typeof t=="function"?FF:TF)(e,t)):this.node()[e]}function a3(e){return e.trim().split(/^|\s+/)}function $c(e){return e.classList||new v3(e)}function v3(e){this._node=e,this._names=a3(e.getAttribute("class")||"")}v3.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function b3(e,t){for(var s=$c(e),n=-1,o=t.length;++n<o;)s.add(t[n])}function _3(e,t){for(var s=$c(e),n=-1,o=t.length;++n<o;)s.remove(t[n])}function rF(e){return function(){b3(this,e)}}function iF(e){return function(){_3(this,e)}}function nF(e,t){return function(){(t.apply(this,arguments)?b3:_3)(this,e)}}function JM(e,t){if(n=a3(e+""),arguments.length<2){for(var n,o=$c(this.node()),s=-1,i=n.length;++s<i;)if(!o.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?nF:t?rF:iF)(n,t))}function WM(){this.textContent=""}function BM(e){return function(){this.textContent=e}}function IM(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function HM(e){return arguments.length?this.each(e==null?WM:(typeof e=="function"?IM:BM)(e)):this.node().textContent}function LM(){this.innerHTML=""}function NM(e){return function(){this.innerHTML=e}}function TM(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function aM(e){return arguments.length?this.each(e==null?LM:(typeof e=="function"?TM:NM)(e)):this.node().innerHTML}function iM(){this.nextSibling&&this.parentNode.appendChild(this)}function oM(){return this.each(iM)}function sM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tM(){return this.each(sM)}function eM(e){var t=typeof e=="function"?e:w0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function JS(){return null}function ZS(e,t){var n=typeof e=="function"?e:w0(e),s=t==null?JS:typeof t=="function"?t:Ad(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function QS(){var e=this.parentNode;e&&e.removeChild(this)}function XS(){return this.each(QS)}function GS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function YS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qS(e){return this.select(e?YS:GS)}function KS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $S(e){return function(t){e.call(this,t,this.__data__)}}function VS(e){return e.trim().split(/^|\s+/).map(function(e){var n="",t=e.indexOf(".");return t>=0&&(n=e.slice(t+1),e=e.slice(0,t)),{type:e,name:n}})}function kS(e){return function(){if(n=this.__on,!n)return;for(var t,n,s=0,o=-1,i=n.length;s<i;++s)t=n[s],(!e.type||t.type===e.type)&&t.name===e.name?this.removeEventListener(t.type,t.listener,t.options):n[++o]=t;++o?n.length=o:delete this.__on}}function mS(e,t,n){return function(){var s,i,r,o=this.__on,a=$S(t);if(o)for(i=0,r=o.length;i<r;++i)if((s=o[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=t;return}this.addEventListener(e.type,a,n),s={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(s):this.__on=[s]}}function nS(e,t,n){var s,o,i,a,l,d,r=VS(e+""),c=r.length;if(arguments.length<2){if(o=this.node().__on,o)for(i=0,d=o.length;i<d;++i)for(s=0,a=o[i];s<c;++s)if((l=r[s]).type===a.type&&l.name===a.name)return a.value;return}o=t?mS:kS;for(s=0;s<c;++s)this.each(o(r[s],t,n));return this}function fh(e,t,n){var o=t3(e),s=o.CustomEvent;typeof s=="function"?s=new s(t,n):(s=o.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function eS(e,t){return function(){return fh(this,e,t)}}function UA(e,t){return function(){return fh(this,e,t.apply(this,arguments))}}function RA(e,t){return this.each((typeof t=="function"?UA:eS)(e,t))}function*DA(){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var o,s=n[e],t=0,a=s.length;t<a;++t)(o=s[t])&&(yield o)}Ar=[null];function re(e,t){this._groups=e,this._parents=t}function Xo(){return new re([[document.documentElement]],Ar)}function TA(){return this}re.prototype=Xo.prototype={constructor:re,select:QD,selectAll:RD,selectChild:bD,selectChildren:eD,filter:Qz,data:Hz,enter:qz,exit:wz,join:yz,merge:uz,selection:TA,order:cz,sort:tz,call:KT,nodes:IT,node:RT,size:DT,empty:TT,each:FT,attr:cT,style:PF,property:MF,classed:JM,text:HM,html:aM,raise:oM,lower:tM,append:eM,insert:ZS,remove:XS,clone:qS,datum:KS,on:nS,dispatch:RA,[Symbol.iterator]:DA};function i(e){return typeof e=="string"?new re([[document.querySelector(e)]],[document.documentElement]):new re([[e]],Ar)}function xl(e){return typeof e=="string"?new re([document.querySelectorAll(e)],[document.documentElement]):new re([T0(e)],Ar)}function Zo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function lr(e,t){var s,n=Object.create(e.prototype);for(s in t)n[s]=t[s];return n}function dn(){}var Jo=.7,or=1/Jo,Ts="\\s*([+-]?\\d+)\\s*",ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",FA=/^#([0-9a-f]{3,8})$/,kA=new RegExp(`^rgb\\(${Ts},${Ts},${Ts}\\)$`),wA=new RegExp(`^rgb\\(${nt},${nt},${nt}\\)$`),_A=new RegExp(`^rgba\\(${Ts},${Ts},${Ts},${ni}\\)$`),jA=new RegExp(`^rgba\\(${nt},${nt},${nt},${ni}\\)$`),bA=new RegExp(`^hsl\\(${ni},${nt},${nt}\\)$`),fA=new RegExp(`^hsla\\(${ni},${nt},${nt},${ni}\\)$`),Fh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zo(dn,sn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zh,formatHex:zh,formatHex8:Mk,formatHsl:Ak,formatRgb:Dh,toString:Dh});function zh(){return this.rgb().formatHex()}function Mk(){return this.rgb().formatHex8()}function Ak(){return Zh(this).formatHsl()}function Dh(){return this.rgb().formatRgb()}function sn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=FA.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Nh(t):n===3?new J(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?va(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?va(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kA.exec(e))?new J(t[1],t[2],t[3],1):(t=wA.exec(e))?new J(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_A.exec(e))?va(t[1],t[2],t[3],t[4]):(t=jA.exec(e))?va(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bA.exec(e))?Kh(t[1],t[2]/100,t[3]/100,1):(t=fA.exec(e))?Kh(t[1],t[2]/100,t[3]/100,t[4]):Fh.hasOwnProperty(e)?Nh(Fh[e]):e==="transparent"?new J(NaN,NaN,NaN,0):null}function Nh(e){return new J(e>>16&255,e>>8&255,e&255,1)}function va(e,t,n,s){return s<=0&&(e=t=n=NaN),new J(e,t,n,s)}function Lh(e){return e instanceof dn||(e=sn(e)),e?(e=e.rgb(),new J(e.r,e.g,e.b,e.opacity)):new J}function Ud(e,t,n,s){return arguments.length===1?Lh(e):new J(e,t,n,s??1)}function J(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}Zo(J,Ud,lr(dn,{brighter(e){return e=e==null?or:Math.pow(or,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jo:Math.pow(Jo,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new J(Pn(this.r),Pn(this.g),Pn(this.b),oa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hh,formatHex:Hh,formatHex8:Ok,formatRgb:$h,toString:$h}));function Hh(){return`#${Hn(this.r)}${Hn(this.g)}${Hn(this.b)}`}function Ok(){return`#${Hn(this.r)}${Hn(this.g)}${Hn(this.b)}${Hn((isNaN(this.opacity)?1:this.opacity)*255)}`}function $h(){const e=oa(this.opacity);return`${e===1?"rgb(":"rgba("}${Pn(this.r)}, ${Pn(this.g)}, ${Pn(this.b)}${e===1?")":`, ${e})`}`}function oa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Hn(e){return e=Pn(e),(e<16?"0":"")+e.toString(16)}function Kh(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Se(e,t,n,s)}function Zh(e){if(e instanceof Se)return new Se(e.h,e.s,e.l,e.opacity);if(e instanceof dn||(e=sn(e)),!e)return new Se;if(e instanceof Se)return e;e=e.rgb();var i=e.r/255,n=e.g/255,a=e.b/255,r=Math.min(i,n,a),s=Math.max(i,n,a),o=NaN,t=s-r,c=(s+r)/2;return t?(i===s?o=(n-a)/t+(n<a)*6:n===s?o=(a-i)/t+2:o=(i-n)/t+4,t/=c<.5?s+r:2-s-r,o*=60):t=c>0&&c<1?0:o,new Se(o,t,c,e.opacity)}function jk(e,t,n,s){return arguments.length===1?Zh(e):new Se(e,t,n,s??1)}function Se(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}Zo(Se,jk,lr(dn,{brighter(e){return e=e==null?or:Math.pow(or,e),new Se(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jo:Math.pow(Jo,e),new Se(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,o=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*o,s=2*t-n;return new J(Eu(e>=240?e-240:e+120,s,n),Eu(e,s,n),Eu(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Se(em(this.h),Ki(this.s),Ki(this.l),oa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=oa(this.opacity);return`${e===1?"hsl(":"hsla("}${em(this.h)}, ${Ki(this.s)*100}%, ${Ki(this.l)*100}%${e===1?")":`, ${e})`}`}}));function em(e){return e=(e||0)%360,e<0?e+360:e}function Ki(e){return Math.max(0,Math.min(1,e||0))}function Eu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const vk=Math.PI/180,gk=180/Math.PI,Di=18,am=.96422,dm=1,um=.82521,mm=4/29,es=6/29,pm=3*es*es,IE=es*es*es;function gm(e){if(e instanceof it)return new it(e.l,e.a,e.b,e.opacity);if(e instanceof Nt)return jm(e);e instanceof J||(e=Lh(e));var i,a,n=ql(e.r),t=ql(e.g),s=ql(e.b),o=w1((.2225045*n+.7168786*t+.0606169*s)/dm);return n===t&&t===s?i=a=o:(i=w1((.4360747*n+.3850649*t+.1430804*s)/am),a=w1((.0139322*n+.0971045*t+.7141733*s)/um)),new it(116*o-16,500*(i-o),200*(o-a),e.opacity)}function kE(e,t,n,s){return arguments.length===1?gm(e):new it(e,t,n,s??1)}function it(e,t,n,s){this.l=+e,this.a=+t,this.b=+n,this.opacity=+s}Zo(it,kE,lr(dn,{brighter(e){return new it(this.l+Di*(e??1),this.a,this.b,this.opacity)},darker(e){return new it(this.l-Di*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200,t=am*x1(t),e=dm*x1(e),n=um*x1(n);return new J(yd(3.1338561*t-1.6168667*e-.4906146*n),yd(-.9787684*t+1.9161415*e+.033454*n),yd(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function w1(e){return e>IE?Math.pow(e,1/3):e/pm+mm}function x1(e){return e>es?e*e*e:pm*(e-mm)}function yd(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ql(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function EE(e){if(e instanceof Nt)return new Nt(e.h,e.c,e.l,e.opacity);if(e instanceof it||(e=gm(e)),e.a===0&&e.b===0)return new Nt(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*gk;return new Nt(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Il(e,t,n,s){return arguments.length===1?EE(e):new Nt(e,t,n,s??1)}function Nt(e,t,n,s){this.h=+e,this.c=+t,this.l=+n,this.opacity=+s}function jm(e){if(isNaN(e.h))return new it(e.l,0,0,e.opacity);var t=e.h*vk;return new it(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Zo(Nt,Il,lr(dn,{brighter(e){return new Nt(this.h,this.c,this.l+Di*(e??1),this.opacity)},darker(e){return new Nt(this.h,this.c,this.l-Di*(e??1),this.opacity)},rgb(){return jm(this).rgb()}}));const Or=e=>()=>e;function Cm(e,t){return function(n){return e+n*t}}function aE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function sE(e,t){var n=t-e;return n?Cm(e,n>180||n<-180?n-360*Math.round(n/360):n):Or(isNaN(e)?t:e)}function nE(e){return(e=+e)===1?Bo:function(t,n){return n-t?aE(t,n,e):Or(isNaN(t)?n:t)}}function Bo(e,t){var n=t-e;return n?Cm(e,n):Or(isNaN(e)?t:e)}const tc=function e(t){var n=nE(t);function s(e,t){var s=n((e=Ud(e)).r,(t=Ud(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=Bo(e.opacity,t.opacity);return function(t){return e.r=s(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return s.gamma=e,s}(1);function $C(e,t){t||(t=[]);var n,o=e?Math.min(t.length,e.length):0,s=t.slice();return function(i){for(n=0;n<o;++n)s[n]=e[n]*(1-i)+t[n]*i;return s}}function vC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gC(e,t){var n,s=t?t.length:0,o=e?Math.min(s,e.length):0,a=new Array(o),i=new Array(s);for(n=0;n<o;++n)a[n]=xu(e[n],t[n]);for(;n<s;++n)i[n]=t[n];return function(e){for(n=0;n<o;++n)i[n]=a[n](e);return i}}function oC(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function Le(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function sC(e,t){var n,s={},o={};(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?s[n]=xu(e[n],t[n]):o[n]=t[n];return function(e){for(n in s)o[n]=s[n](e);return o}}nc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_r=new RegExp(nc.source,"g");function Jx(e){return function(){return e}}function Xx(e){return function(t){return e(t)+""}}function Im(e,t){var o,i,c,a=nc.lastIndex=_r.lastIndex=0,s=-1,n=[],r=[];for(e=e+"",t=t+"";(c=nc.exec(e))&&(i=_r.exec(t));)(o=i.index)>a&&(o=t.slice(a,o),n[s]?n[s]+=o:n[++s]=o),(c=c[0])===(i=i[0])?n[s]?n[s]+=i:n[++s]=i:(n[++s]=null,r.push({i:s,x:Le(c,i)})),a=_r.lastIndex;return a<t.length&&(o=t.slice(a),n[s]?n[s]+=o:n[++s]=o),n.length<2?r[0]?Xx(r[0].x):Jx(t):(t=r.length,function(e){for(var o,s=0;s<t;++s)n[(o=r[s]).i]=o.x(e);return n.join("")})}function xu(e,t){var s,n=typeof t;return t==null||n==="boolean"?Or(t):(n==="number"?Le:n==="string"?(s=sn(t))?(t=s,tc):Im:t instanceof sn?tc:t instanceof Date?oC:vC(t)?$C:Array.isArray(t)?gC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?sC:Le)(e,t)}function Yx(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}Zu=180/Math.PI,mi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bm(e,t,n,s,o,i){var a,r,c;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(a=e*n+t*s)&&(n-=e*a,s-=t*a),(c=Math.sqrt(n*n+s*s))&&(n/=c,s/=c,a/=c),e*s<t*n&&(e=-e,t=-t,a=-a,r=-r),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Zu,skewX:Math.atan(a)*Zu,scaleX:r,scaleY:c}}function Kx(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mi:Bm(t.a,t.b,t.c,t.d,t.e,t.f)}function Ux(e){return e==null?mi:(Qi||(Qi=document.createElementNS("http://www.w3.org/2000/svg","g")),Qi.setAttribute("transform",e),(e=Qi.transform.baseVal.consolidate())?(e=e.matrix,Bm(e.a,e.b,e.c,e.d,e.e,e.f)):mi)}function Vm(e,t,n,s){function o(e){return e.length?e.pop()+" ":""}function i(e,s,o,i,a,r){if(e!==o||s!==i){var c=a.push("translate(",null,t,null,n);r.push({i:c-4,x:Le(e,o)},{i:c-2,x:Le(s,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}function a(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,s)-2,x:Le(e,t)})):t&&n.push(o(n)+"rotate("+t+s)}function r(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,s)-2,x:Le(e,t)}):t&&n.push(o(n)+"skewX("+t+s)}function c(e,t,n,s,i,a){if(e!==n||t!==s){var r=i.push(o(i)+"scale(",null,",",null,")");a.push({i:r-4,x:Le(e,n)},{i:r-2,x:Le(t,s)})}else(n!==1||s!==1)&&i.push(o(i)+"scale("+n+","+s+")")}return function(t,n){var s=[],o=[];return t=e(t),n=e(n),i(t.translateX,t.translateY,n.translateX,n.translateY,s,o),a(t.rotate,n.rotate,s,o),r(t.skewX,n.skewX,s,o),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,s,o),t=n=null,function(e){for(var n,t=-1,i=o.length;++t<i;)s[(n=o[t]).i]=n.x(e);return s.join("")}}}$m=Vm(Kx,"px, ","px)","deg)"),Wm=Vm(Ux,", ",")",")");function _x(e){return function(t,n){var s=e((t=Il(t)).h,(n=Il(n)).h),o=Bo(t.c,n.c),i=Bo(t.l,n.l),a=Bo(t.opacity,n.opacity);return function(e){return t.h=s(e),t.c=o(e),t.l=i(e),t.opacity=a(e),t+""}}}const yx=_x(sE);var Ns=0,qs=0,Ys=0,Um=1e3,Ni,Qs,Hi=0,an=0,Yi=0,to=typeof performance=="object"&&performance.now?performance:Date,Ym=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qd(){return an||(Ym(ZO),an=to.now()+Yi)}function ZO(){an=0}function xa(){this._call=this._time=this._next=null}xa.prototype=h8.prototype={constructor:xa,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?qd():+n)+(t==null?0:+t),!this._next&&Qs!==this&&(Qs?Qs._next=this:Ni=this,Qs=this),this._call=e,this._time=n,Jl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jl())}};function h8(e,t,n){var s=new xa;return s.restart(e,t,n),s}function YO(){qd(),++Ns;for(var t,e=Ni;e;)(t=an-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ns}function g8(){an=(Hi=to.now())+Yi,Ns=qs=0;try{YO()}finally{Ns=0,zO(),an=0}}function RO(){var e=to.now(),t=e-Hi;t>Um&&(Yi-=t,Hi=e)}function zO(){for(var t,n,e=Ni,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ni=n);Qs=t,Jl(s)}function Jl(e){if(Ns)return;qs&&(qs=clearTimeout(qs));var t=e-an;t>24?(e<1/0&&(qs=setTimeout(g8,e-to.now()-Yi)),Ys&&(Ys=clearInterval(Ys))):(Ys||(Hi=to.now(),Ys=setInterval(RO,Um)),Ns=1,Ym(g8))}function b8(e,t,n){var s=new xa;return t=t==null?0:+t,s.restart(n=>{s.stop(),e(n+t)},t,n),s}L8=a0("start","end","cancel","interrupt"),U8=[],jl=0,bl=1,Mr=2,jo=3,ll=4,Nr=5,wo=6;function Rr(e,t,n,s,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};pw(e,n,{name:t,index:s,group:o,on:L8,tween:U8,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:jl})}function Jc(e,t){var n=He(e,t);if(n.state>jl)throw new Error("too late; already scheduled");return n}function tt(e,t){var n=He(e,t);if(n.state>jo)throw new Error("too late; already running");return n}function He(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function pw(e,t,n){var o,s=e.__transition;s[t]=n,n.timer=h8(c,0,n.time);function c(e){n.state=bl,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}function i(c){var l,d,u,h;if(n.state!==bl)return a();for(d in s){if(l=s[d],l.name!==n.name)continue;if(l.state===jo)return b8(i);l.state===ll?(l.state=wo,l.timer.stop(),l.on.call("interrupt",e,e.__data__,l.index,l.group),delete s[d]):+d<t&&(l.state=wo,l.timer.stop(),l.on.call("cancel",e,e.__data__,l.index,l.group),delete s[d])}if(b8(function(){n.state===jo&&(n.state=ll,n.timer.restart(r,n.delay,n.time),r(c))}),n.state=Mr,n.on.call("start",e,e.__data__,n.index,n.group),n.state!==Mr)return;n.state=jo,o=new Array(h=n.tween.length);for(d=0,u=-1;d<h;++d)(l=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++u]=l);o.length=u+1}function r(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=Nr,1),s=-1,r=o.length;++s<r;)o[s].call(e,i);n.state===Nr&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=wo,n.timer.stop(),delete s[t];for(var o in s)return;delete e.__transition}}function ew(e,t){var n,o,i,s=e.__transition,a=!0;if(!s)return;t=t==null?null:t+"";for(o in s){if((n=s[o]).name!==t){a=!1;continue}i=n.state>Mr&&n.state<Nr,n.state=wo,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete s[o]}a&&delete e.__transition}function X_(e){return this.each(function(){ew(this,e)})}function K_(e,t){var n,s;return function(){var o,r,i=tt(this,e),a=i.tween;if(a!==s){n=s=a;for(o=0,r=n.length;o<r;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function W_(e,t,n){var s,o;if(typeof n!="function")throw new Error;return function(){if(a=tt(this,e),r=a.tween,r!==o){s=(o=r).slice();for(var a,r,c={name:t,value:n},i=0,l=s.length;i<l;++i)if(s[i].name===t){s[i]=c;break}i===l&&s.push(c)}a.tween=s}}function R_(e,t){if(n=this._id,e+="",arguments.length<2){s=He(this.node(),n).tween;for(var n,s,i,o=0,a=s.length;o<a;++o)if((i=s[o]).name===e)return i.value;return null}return this.each((t==null?K_:W_)(n,e,t))}function Tc(e,t,n){var s=e._id;return e.each(function(){var e=tt(this,s);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return He(e,s).value[t]}}function af(e,t){var n;return(typeof t=="number"?Le:t instanceof sn?tc:(n=sn(t))?(t=n,tc):Im)(e,t)}function T_(e){return function(){this.removeAttribute(e)}}function F_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function M_(e,t,n){var s,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===s?o:o=t(s=a,n)}}function E_(e,t,n){var s,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===s?o:o=t(s=a,n)}}function v_(e,t,n){var s,o,i;return function(){var a,r,c=n(this);return c==null?void this.removeAttribute(e):(a=this.getAttribute(e),r=c+"",a===r?null:a===s&&r===o?i:(o=r,i=t(s=a,c)))}}function p_(e,t,n){var s,o,i;return function(){var a,r,c=n(this);return c==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),r=c+"",a===r?null:a===s&&r===o?i:(o=r,i=t(s=a,c)))}}function m_(e,t){var n=ja(e),s=n==="transform"?Wm:af;return this.attrTween(e,typeof t=="function"?(n.local?p_:v_)(n,s,Tc(this,"attr."+e,t)):t==null?(n.local?F_:T_)(n):(n.local?E_:M_)(n,s,t))}function r_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Zy(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Qy(e,t){var n,s;function o(){var o=t.apply(this,arguments);return o!==s&&(n=(s=o)&&Zy(e,o)),n}return o._value=t,o}function Xy(e,t){var n,s;function o(){var o=t.apply(this,arguments);return o!==s&&(n=(s=o)&&r_(e,o)),n}return o._value=t,o}function Yy(e,t){var s,n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return s=ja(e),this.tween(n,(s.local?Qy:Xy)(s,t))}function qy(e,t){return function(){Jc(this,e).delay=+t.apply(this,arguments)}}function Ky(e,t){return t=+t,function(){Jc(this,e).delay=t}}function Wy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qy:Ky)(t,e)):He(this.node(),t).delay}function $y(e,t){return function(){tt(this,e).duration=+t.apply(this,arguments)}}function Py(e,t){return t=+t,function(){tt(this,e).duration=t}}function Ly(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$y:Py)(t,e)):He(this.node(),t).duration}function My(e,t){if(typeof t!="function")throw new Error;return function(){tt(this,e).ease=t}}function Ay(e){var t=this._id;return arguments.length?this.each(My(t,e)):He(this.node(),t).ease}function Oy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;tt(this,e).ease=n}}function _y(e){if(typeof e!="function")throw new Error;return this.each(Oy(this._id,e))}function jy(e){typeof e!="function"&&(e=N0(e));for(var i=this._groups,a=i.length,r=new Array(a),t=0;t<a;++t)for(var n,o=i[t],c=o.length,l=r[t]=[],s=0;s<c;++s)(n=o[s])&&e.call(n,n.__data__,s,o)&&l.push(n);return new Pt(r,this._parents,this._name,this._id)}function fy(e){if(e._id!==this._id)throw new Error;for(var i=this._groups,l=e._groups,o=i.length,h=l.length,d=Math.min(o,h),s=new Array(o),t=0;t<d;++t)for(var c,r=i[t],u=l[t],a=r.length,m=s[t]=new Array(a),n=0;n<a;++n)(c=r[n]||u[n])&&(m[n]=c);for(;t<o;++t)s[t]=i[t];return new Pt(s,this._parents,this._name,this._id)}function hy(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function uy(e,t,n){var s,o,i=hy(t)?Jc:tt;return function(){var a=i(this,e),r=a.on;r!==s&&(o=(s=r).copy()).on(t,n),a.on=o}}function cy(e,t){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(e):this.each(uy(n,e,t))}function iy(e){return function(){var n,t=this.parentNode;for(n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ty(){return this.on("end.remove",iy(this._id))}function Zj(e){i=this._name,s=this._id,typeof e!="function"&&(e=Ad(e));for(var s,i,l=this._groups,d=l.length,u=new Array(d),o=0;o<d;++o)for(var n,c,a=l[o],h=a.length,r=u[o]=new Array(h),t=0;t<h;++t)(n=a[t])&&(c=e.call(n,n.__data__,t,a))&&("__data__"in n&&(c.__data__=n.__data__),r[t]=c,Rr(r[t],i,s,t,r,He(n,s)));return new Pt(u,this._parents,i,s)}function Nj(e){a=this._name,n=this._id,typeof e!="function"&&(e=z0(e));for(var n,a,h=this._groups,f=h.length,u=[],d=[],r=0;r<f;++r)for(var t,c=h[r],m=c.length,i=0;i<m;++i)if(t=c[i]){for(var l,o=e.call(t,t.__data__,i,c),p=He(t,n),s=0,g=o.length;s<g;++s)(l=o[s])&&Rr(l,a,n,s,o,p);u.push(o),d.push(t)}return new Pt(u,d,a,n)}a6=Xo.prototype.constructor;function wj(){return new a6(this._groups,this._parents)}function rj(e,t){var n,s,o;return function(){var i=Ps(this,e),a=(this.style.removeProperty(e),Ps(this,e));return i===a?null:i===n&&a===s?o:o=t(n=i,s=a)}}function b6(e){return function(){this.style.removeProperty(e)}}function Ub(e,t,n){var s,o,i=n+"";return function(){var a=Ps(this,e);return a===i?null:a===s?o:o=t(s=a,n)}}function Wb(e,t,n){var s,o,i;return function(){var c=Ps(this,e),a=n(this),r=a+"";return a==null&&(r=a=(this.style.removeProperty(e),Ps(this,e))),c===r?null:c===s&&r===o?i:(o=r,i=t(s=c,a))}}function hb(e,t){var n,s,o,a,i="style."+t,r="end."+i;return function(){var c=tt(this,e),l=c.on,d=c.value[i]==null?a||(a=b6(t)):void 0;(l!==n||o!==d)&&(s=(n=l).copy()).on(r,o=d),c.on=s}}function rb(e,t,n){var s=(e+="")==="transform"?$m:af;return t==null?this.styleTween(e,rj(e,s)).on("end.style."+e,b6(e)):typeof t=="function"?this.styleTween(e,Wb(e,s,Tc(this,"style."+e,t))).each(hb(this._id,e)):this.styleTween(e,Ub(e,s,t),n).on("end.style."+e,null)}function N9(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function D9(e,t,n){var s,o;function i(){var i=t.apply(this,arguments);return i!==o&&(s=(o=i)&&N9(e,i,n)),s}return i._value=t,i}function M9(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,D9(e,t,n??""))}function S9(e){return function(){this.textContent=e}}function x9(e){return function(){var t=e(this);this.textContent=t??""}}function O9(e){return this.tween("text",typeof e=="function"?x9(Tc(this,"text",e)):S9(e==null?"":e+""))}function u9(e){return function(t){this.textContent=e.call(this,t)}}function l9(e){var t,n;function s(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&u9(s)),t}return s._value=e,s}function r9(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,l9(e))}function o9(){for(var e,a=this._name,c=this._id,r=ap(),n=this._groups,l=n.length,s=0;s<l;++s)for(var i,o=n[s],d=o.length,t=0;t<d;++t)(i=o[t])&&(e=He(i,c),Rr(i,a,r,t,o,{time:e.time+e.delay+e.duration,delay:0,duration:e.duration,ease:e.ease}));return new Pt(n,this._parents,a,r)}function Qv(){var e,n,t=this,o=t._id,s=t.size();return new Promise(function(i,a){var r={value:a},c={value:function(){--s===0&&i()}};t.each(function(){var t=tt(this,o),s=t.on;s!==n&&(e=(n=s).copy(),e._.cancel.push(r),e._.interrupt.push(r),e._.end.push(c)),t.on=e}),s===0&&i()})}Z6=0;function Pt(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function ap(){return++Z6}st=Xo.prototype,Pt.prototype={constructor:Pt,select:Zj,selectAll:Nj,selectChild:st.selectChild,selectChildren:st.selectChildren,filter:jy,merge:fy,selection:wj,transition:o9,call:st.call,nodes:st.nodes,node:st.node,size:st.size,empty:st.empty,each:st.each,on:cy,attr:m_,attrTween:Yy,style:rb,styleTween:M9,text:O9,textTween:r9,remove:ty,tween:R_,delay:Wy,duration:Ly,ease:Ay,easeVarying:_y,end:Qv,[Symbol.iterator]:st[Symbol.iterator]};function Vv(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}cp={time:null,delay:0,duration:250,ease:Vv};function Hv(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Lv(e){e instanceof Pt?(t=e._id,e=e._name):(t=ap(),(r=cp).time=qd(),e=e==null?null:e+"");for(var t,r,s=this._groups,c=s.length,o=0;o<c;++o)for(var a,i=s[o],l=i.length,n=0;n<l;++n)(a=i[n])&&Rr(a,e,t,n,i,r||Hv(a,t));return new Pt(s,this._parents,e,t)}Xo.prototype.interrupt=X_,Xo.prototype.transition=Lv;const Au=Math.PI,ku=2*Au,Nn=1e-6,Cv=ku-Nn;function yu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function gu(){return new yu}yu.prototype=gu.prototype={constructor:yu,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,s){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(e,t,n,s,o,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +s+","+(this._x1=+o)+","+(this._y1=+i)},arcTo:function(e,t,n,s,o){e=+e,t=+t,n=+n,s=+s,o=+o;var f=this._x1,m=this._y1,r=n-e,c=s-t,i=f-e,a=m-t,d=i*i+a*a;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>Nn)if(!(Math.abs(a*r-c*i)>Nn)||!o)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var u=n-f,l=s-m,p=r*r+c*c,y=u*u+l*l,g=Math.sqrt(p),v=Math.sqrt(d),b=o*Math.tan((Au-Math.acos((p+d-y)/(2*g*v)))/2),h=b/v,j=b/g;Math.abs(h-1)>Nn&&(this._+="L"+(e+h*i)+","+(t+h*a)),this._+="A"+o+","+o+",0,0,"+ +(a*u>i*l)+","+(this._x1=e+j*r)+","+(this._y1=t+j*c)}},arc:function(e,t,n,s,o,i){e=+e,t=+t,n=+n,i=!!i;var d=n*Math.cos(s),u=n*Math.sin(s),r=e+d,c=t+u,l=1^i,a=i?s-o:o-s;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null?this._+="M"+r+","+c:(Math.abs(this._x1-r)>Nn||Math.abs(this._y1-c)>Nn)&&(this._+="L"+r+","+c),!n)return;a<0&&(a=a%ku+ku),a>Cv?this._+="A"+n+","+n+",0,1,"+l+","+(e-d)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=r)+","+(this._y1=c):a>Nn&&(this._+="A"+n+","+n+",0,"+ +(a>=Au)+","+l+","+(this._x1=e+n*Math.cos(o))+","+(this._y1=t+n*Math.sin(o)))},rect:function(e,t,n,s){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +s+"h"+-n+"Z"},toString:function(){return this._}};function _v(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function bv(e,t){return fetch(e,t).then(_v)}function vv(e){return(t,n)=>bv(t,n).then(t=>(new DOMParser).parseFromString(t,e))}bp=vv("image/svg+xml");function fv(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Xi(e,t){if((s=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var s,n=e.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+e.slice(s+1)]}function Wn(e){return e=Xi(Math.abs(e)),e?e[1]:NaN}function hv(e,t){return function(n,s){for(var i=n.length,r=[],c=0,o=e[0],a=0;i>0&&o>0;){if(a+o+1>s&&(o=Math.max(1,s-a)),r.push(n.substring(i-=o,i+o)),(a+=o+1)>s)break;o=e[c=(c+1)%e.length]}return r.reverse().join(t)}}function uv(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}_p=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ta(e){if(!(t=_p.exec(e)))throw new Error("invalid format: "+e);var t;return new iu({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ta.prototype=iu.prototype;function iu(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}iu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tv(e){out:for(var s,o=e.length,t=1,n=-1;t<o;++t)switch(e[t]){case".":n=s=t;break;case"0":n===0&&(n=t),s=t;break;default:if(!+e[t])break out;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}function q7(e,t){if(o=Xi(e,t),!o)return e+"";var o,s=o[0],a=o[1],n=a-(Pp=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=s.length;return n===i?s:n>i?s+new Array(n-i+1).join("0"):n>0?s.slice(0,n)+"."+s.slice(n):"0."+new Array(1-n).join("0")+Xi(e,Math.max(0,t+n-1))[0]}function Jp(e,t){if(o=Xi(e,t),!o)return e+"";var o,n=o[0],s=o[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const ng={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:fv,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Jp(e*100,t),r:Jp,s:q7,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sg(e){return e}Zd=Array.prototype.map,Xd=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function T7(e){var t=e.grouping===void 0||e.thousands===void 0?sg:hv(Zd.call(e.grouping,Number),e.thousands+""),s=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?sg:uv(Zd.call(e.numerals,String)),r=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function n(e){e=ta(e);var b,y,_,w,g=e.fill,v=e.align,d=e.sign,m=e.symbol,h=e.zero,f=e.width,p=e.comma,u=e.precision,j=e.trim,n=e.type;n==="n"?(p=!0,n="g"):ng[n]||(u===void 0&&(u=12),j=!0,n="g"),(h||g==="0"&&v==="=")&&(h=!0,g="0",v="="),y=m==="$"?s:m==="#"&&/[boxX]/.test(n)?"0"+n.toLowerCase():"",_=m==="$"?o:/[%p]/.test(n)?r:"",b=ng[n],w=/[defgprs%]/.test(n),u=u===void 0?6:/[gprs]/.test(n)?Math.max(1,Math.min(21,u)):Math.max(0,Math.min(20,u));function O(e){var o,m,O,x,C,E,r=y,s=_;if(n==="c")s=b(e)+s,e="";else if(e=+e,O=e<0||1/e<0,e=isNaN(e)?l:b(Math.abs(e),u),j&&(e=tv(e)),O&&+e===0&&d!=="+"&&(O=!1),r=(O?d==="("?d:c:d==="-"||d==="("?"":d)+r,s=(n==="s"?Xd[8+Pp/3]:"")+s+(O&&d==="("?")":""),w)for(m=-1,E=e.length;++m<E;)if(C=e.charCodeAt(m),48>C||C>57){s=(C===46?i+e.slice(m+1):e.slice(m))+s,e=e.slice(0,m);break}switch(p&&!h&&(e=t(e,1/0)),x=r.length+e.length+s.length,o=x<f?new Array(f-x+1).join(g):"",p&&h&&(e=t(o+e,o.length?f-s.length:1/0),o=""),v){case"<":e=r+e+s+o;break;case"=":e=r+o+e+s;break;case"^":e=o.slice(0,x=o.length>>1)+r+e+s+o.slice(x);break;default:e=o+r+e+s;break}return a(e)}return O.toString=function(){return e+""},O}function d(e,t){var o=n((e=ta(e),e.type="f",e)),s=Math.max(-8,Math.min(8,Math.floor(Wn(t)/3)))*3,i=Math.pow(10,-s),a=Xd[8+s/3];return function(e){return o(i*e)+a}}return{format:n,formatPrefix:d}}A7({thousands:",",grouping:[3],currency:["$",""]});function A7(e){return ha=T7(e),ag=ha.format,rg=ha.formatPrefix,ha}function E7(e){return Math.max(0,-Wn(Math.abs(e)))}function t7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wn(t)/3)))*3-Wn(Math.abs(e)))}function Z5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Wn(t)-Wn(e))+1}function Bd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const hg=Symbol("implicit");function mg(){var t=new E4,n=[],s=[],o=hg;function e(e){let i=t.get(e);if(i===void 0){if(o!==hg)return o;t.set(e,i=n.push(e)-1)}return s[i%s.length]}return e.domain=function(s){if(!arguments.length)return n.slice();n=[],t=new E4;for(const e of s){if(t.has(e))continue;t.set(e,n.push(e)-1)}return e},e.range=function(t){return arguments.length?(s=Array.from(t),e):s.slice()},e.unknown=function(t){return arguments.length?(o=t,e):o},e.copy=function(){return mg(n,s).unknown(o)},Bd.apply(e,arguments),e}function q5(e){return function(){return e}}function $5(e){return+e}Td=[0,1];function vs(e){return e}function Fd(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:q5(isNaN(t)?NaN:.5)}function H5(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}function L5(e,t,n){var s=e[0],i=e[1],o=t[0],a=t[1];return i<s?(s=Fd(i,s),o=n(a,o)):(s=Fd(s,i),o=n(o,a)),function(e){return o(s(e))}}function N5(e,t,n){var o=Math.min(e.length,t.length)-1,i=new Array(o),a=new Array(o),s=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<o;)i[s]=Fd(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=bR(e,t,1,o)-1;return a[n](i[n](t))}}function yg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function T5(){var a,r,c,l,d,u,t=Td,n=Td,i=xu,s=vs;function o(){var o=Math.min(t.length,n.length);return s!==vs&&(s=H5(t[0],t[o-1])),c=o>2?N5:L5,l=d=null,e}function e(e){return e==null||isNaN(e=+e)?r:(l||(l=c(t.map(a),n,i)))(a(s(e)))}return e.invert=function(e){return s(u((d||(d=c(n,t.map(a),Le)))(e)))},e.domain=function(e){return arguments.length?(t=Array.from(e,$5),o()):t.slice()},e.range=function(e){return arguments.length?(n=Array.from(e),o()):n.slice()},e.rangeRound=function(e){return n=Array.from(e),i=Yx,o()},e.clamp=function(e){return arguments.length?(s=!!e||vs,o()):s!==vs},e.interpolate=function(e){return arguments.length?(i=e,o()):i},e.unknown=function(t){return arguments.length?(r=t,e):r},function(e,t){return a=e,u=t,o()}}function Cg(){return T5()(vs,vs)}function S5(e,t,n,s){var o,a,i=Mu(e,t,n);switch(s=ta(s??",f"),s.type){case"s":return a=Math.max(Math.abs(e),Math.abs(t)),s.precision==null&&!isNaN(o=t7(i,a))&&(s.precision=o),rg(s,a);case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(o=Z5(i,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=o-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(o=E7(i))&&(s.precision=o-(s.type==="%")*2);break}}return ag(s)}function A5(e){var t=e.domain;return e.ticks=function(e){var n=t();return rR(n[0],n[n.length-1],e??10)},e.tickFormat=function(e,n){var s=t();return S5(s[0],s[s.length-1],e??10,n)},e.nice=function(n){n==null&&(n=10);var s,l,a=t(),r=0,c=a.length-1,o=a[r],i=a[c],d=10;for(i<o&&(s=o,o=i,i=s,s=r,r=c,c=s);d-- >0;){if(s=z4(o,i,n),s===l)return a[r]=o,a[c]=i,t(a);if(s>0)o=Math.floor(o/s)*s,i=Math.ceil(i/s)*s;else if(s<0)o=Math.ceil(o*s)/s,i=Math.floor(i*s)/s;else break;l=s}return e},e}function Hg(){var e=Cg();return e.copy=function(){return yg(e,Hg())},Bd.apply(e,arguments),A5(e)}function x5(e,t){e=e.slice();var a,n=0,s=e.length-1,o=e[n],i=e[s];return i<o&&(a=n,n=s,s=a,a=o,o=i,i=a),e[n]=t.floor(o),e[s]=t.ceil(i),e}Ra=new Date,Pa=new Date;function U(e,t,n,s){function o(t){return e(t=arguments.length===0?new Date:new Date(+t)),t}return o.floor=function(t){return e(t=new Date(+t)),t},o.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},o.round=function(e){var t=o(e),n=o.ceil(e);return e-t<n-e?t:n},o.offset=function(e,n){return t(e=new Date(+e),n==null?1:Math.floor(n)),e},o.range=function(n,s,i){var r,a=[];if(n=o.ceil(n),i=i==null?1:Math.floor(i),!(n<s)||!(i>0))return a;do a.push(r=new Date(+n)),t(n,i),e(n);while(r<n&&n<s)return a},o.filter=function(n){return U(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,s){if(e>=e)if(s<0)for(;++s<=0;)for(;t(e,-1),!n(e););else for(;--s>=0;)for(;t(e,1),!n(e););})},n&&(o.count=function(t,s){return Ra.setTime(+t),Pa.setTime(+s),e(Ra),e(Pa),Math.floor(n(Ra,Pa))},o.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?o.filter(s?function(t){return s(t)%e===0}:function(t){return o.count(0,t)%e===0}):o}),o}ii=U(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e}),ii.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?U(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):ii};const u5=ii;ii.range;const Mt=1e3,we=Mt*60,_t=we*60,bn=_t*24,ud=bn*7,T1=bn*30,od=bn*365;nd=U(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*Mt)},function(e,t){return(t-e)/Mt},function(e){return e.getUTCSeconds()});const si=nd;nd.range,td=U(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mt)},function(e,t){e.setTime(+e+t*we)},function(e,t){return(t-e)/we},function(e){return e.getMinutes()});const Za=td;td.range,Ql=U(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mt-e.getMinutes()*we)},function(e,t){e.setTime(+e+t*_t)},function(e,t){return(t-e)/_t},function(e){return e.getHours()});const er=Ql;Ql.range,Gl=U(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*we)/bn,e=>e.getDate()-1);const Fs=Gl;Gl.range;function fn(e){return U(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*we)/ud})}hn=fn(0),ei=fn(1),Jg=fn(2),Zg=fn(3),un=fn(4),Xg=fn(5),Yg=fn(6),hn.range,ei.range,Jg.range,Zg.range,un.range,Xg.range,Yg.range,Hl=U(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});const hr=Hl;Hl.range,mr=U(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),mr.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:U(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};const cn=mr;mr.range,Pl=U(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*we)},function(e,t){return(t-e)/we},function(e){return e.getUTCMinutes()});const v5=Pl;Pl.range,Dl=U(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*_t)},function(e,t){return(t-e)/_t},function(e){return e.getUTCHours()});const O5=Dl;Dl.range,Sl=U(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/bn},function(e){return e.getUTCDate()-1});const kl=Sl;Sl.range;function rn(e){return U(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/ud})}wr=rn(0),Qo=rn(1),Dg=rn(2),zg=rn(3),Dn=rn(4),Fg=rn(5),Sg=rn(6),wr.range,Qo.range,Dg.range,zg.range,Dn.range,Fg.range,Sg.range,fl=U(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});const k5=fl;fl.range,Fr=U(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),Fr.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:U(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};const Os=Fr;Fr.range;function Eg(e,t,n,s,o,i){const a=[[si,1,Mt],[si,5,5*Mt],[si,15,15*Mt],[si,30,30*Mt],[i,1,we],[i,5,5*we],[i,15,15*we],[i,30,30*we],[o,1,_t],[o,3,3*_t],[o,6,6*_t],[o,12,12*_t],[s,1,bn],[s,2,2*bn],[n,1,ud],[t,1,T1],[t,3,3*T1],[e,1,od]];function c(e,t,n){const s=t<e;s&&([e,t]=[t,e]);const o=n&&typeof n.range=="function"?n:r(e,t,n),i=o?o.range(e,+t+1):[];return s?i.reverse():i}function r(t,n,s){const i=Math.abs(n-t)/s,o=Yu(([,,e])=>e).right(a,i);if(o===a.length)return e.every(Mu(t/od,n/od,s));if(o===0)return u5.every(Math.max(Mu(t,n,s),1));const[r,c]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return r.every(c)}return[c,r]}Eg(Os,k5,wr,kl,O5,v5);const[M5,X5]=Eg(cn,hr,hn,Fs,er,Za);function al(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function il(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Go(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function R7(e){var u=e.dateTime,h=e.date,d=e.time,r=e.periods,i=e.days,a=e.shortDays,o=e.months,c=e.shortMonths,x=$o(r),O=Po(r),w=$o(i),f=Po(i),y=$o(a),j=Po(a),S=$o(o),g=Po(o),v=$o(c),b=Po(c),n={a:z,A:D,b:N,B:L,c:null,d:y6,e:y6,f:sj,g:ry,G:l_,H:Qb,I:ej,j:nj,L:g6,m:oj,M:xj,p:R,q:P,Q:z8,s:_8,S:Rj,u:Uj,U:Kj,V:qj,w:ey,W:ny,x:null,X:null,y:oy,Y:c_,Z:h_,"%":P8},s={a:H,A:I,b:B,B:V,c:null,d:vf,e:vf,f:O_,g:lw,G:mw,H:g_,I:b_,j:j_,L:hf,m:C_,M:S_,p:$,q:W,Q:z8,s:_8,S:z_,u:D_,U:N_,V:H_,w:B_,W:Z_,x:null,X:null,y:J_,Y:hw,Z:jw,"%":P8},_={a:E,A:k,b:A,B:p,c:M,d:Op,e:Op,f:Jv,g:Ap,G:Mp,H:yp,I:yp,j:lv,L:Uv,m:cv,M:dv,p:C,q:av,Q:Yb,s:Gb,S:pv,u:W7,U:U7,V:X7,w:V7,W:nv,x:F,X:T,y:Ap,Y:Mp,Z:iv,"%":Kb};n.x=t(h,n),n.X=t(d,n),n.c=t(u,n),s.x=t(h,s),s.X=t(d,s),s.c=t(u,s);function t(e,t){return function(n){var o,r,c,i=[],s=-1,a=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)e.charCodeAt(s)===37&&(i.push(e.slice(a,s)),(r=Zp[o=e.charAt(++s)])!=null?o=e.charAt(++s):r=o==="e"?" ":"0",(c=t[o])&&(o=c(n,r)),i.push(o),a=s+1);return i.push(e.slice(a,s)),i.join("")}}function m(e,t){return function(n){var o,i,s=Go(1900,void 0,1),a=l(s,e,n+="",0);if(a!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(s.s*1e3+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+s.p*12),s.m===void 0&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(o=il(Go(s.y,0,1)),i=o.getUTCDay(),o=i>4||i===0?Qo.ceil(o):Qo(o),o=kl.offset(o,(s.V-1)*7),s.y=o.getUTCFullYear(),s.m=o.getUTCMonth(),s.d=o.getUTCDate()+(s.w+6)%7):(o=al(Go(s.y,0,1)),i=o.getDay(),o=i>4||i===0?ei.ceil(o):ei(o),o=Fs.offset(o,(s.V-1)*7),s.y=o.getFullYear(),s.m=o.getMonth(),s.d=o.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),i="Z"in s?il(Go(s.y,0,1)).getUTCDay():al(Go(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+s.W*7-(i+5)%7:s.w+s.U*7-(i+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,il(s)):al(s)}}function l(e,t,n,s){for(var o,a,i=0,r=t.length,c=n.length;i<r;){if(s>=c)return-1;if(o=t.charCodeAt(i++),o===37){if(o=t.charAt(i++),a=_[o in Zp?t.charAt(i++):o],!a||(s=a(e,n,s))<0)return-1}else if(o!=n.charCodeAt(s++))return-1}return s}function C(e,t,n){var s=x.exec(t.slice(n));return s?(e.p=O.get(s[0].toLowerCase()),n+s[0].length):-1}function E(e,t,n){var s=y.exec(t.slice(n));return s?(e.w=j.get(s[0].toLowerCase()),n+s[0].length):-1}function k(e,t,n){var s=w.exec(t.slice(n));return s?(e.w=f.get(s[0].toLowerCase()),n+s[0].length):-1}function A(e,t,n){var s=v.exec(t.slice(n));return s?(e.m=b.get(s[0].toLowerCase()),n+s[0].length):-1}function p(e,t,n){var s=S.exec(t.slice(n));return s?(e.m=g.get(s[0].toLowerCase()),n+s[0].length):-1}function M(e,t,n){return l(e,u,t,n)}function F(e,t,n){return l(e,h,t,n)}function T(e,t,n){return l(e,d,t,n)}function z(e){return a[e.getDay()]}function D(e){return i[e.getDay()]}function N(e){return c[e.getMonth()]}function L(e){return o[e.getMonth()]}function R(e){return r[+(e.getHours()>=12)]}function P(e){return 1+~~(e.getMonth()/3)}function H(e){return a[e.getUTCDay()]}function I(e){return i[e.getUTCDay()]}function B(e){return c[e.getUTCMonth()]}function V(e){return o[e.getUTCMonth()]}function $(e){return r[+(e.getUTCHours()>=12)]}function W(e){return 1+~~(e.getUTCMonth()/3)}return{format:function(e){var s=t(e+="",n);return s.toString=function(){return e},s},parse:function(e){var t=m(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",s);return n.toString=function(){return e},n},utcParse:function(e){var t=m(e+="",!0);return t.toString=function(){return e},t}}}var Zp={"-":"",_:" ",0:"0"},$=/^\s*\d+/,H7=/^%/,I7=/[\\^$*+?|[\]().{}]/g;function j(e,t,n){var o=e<0?"-":"",s=(o?-e:e)+"",i=s.length;return o+(i<n?new Array(n-i+1).join(t)+s:s)}function B7(e){return e.replace(I7,"\\$&")}function $o(e){return new RegExp("^(?:"+e.map(B7).join("|")+")","i")}function Po(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function V7(e,t,n){var s=$.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function W7(e,t,n){var s=$.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function U7(e,t,n){var s=$.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function X7(e,t,n){var s=$.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function nv(e,t,n){var s=$.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function Mp(e,t,n){var s=$.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function Ap(e,t,n){var s=$.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function iv(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function av(e,t,n){var s=$.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function cv(e,t,n){var s=$.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function Op(e,t,n){var s=$.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function lv(e,t,n){var s=$.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function yp(e,t,n){var s=$.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function dv(e,t,n){var s=$.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function pv(e,t,n){var s=$.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function Uv(e,t,n){var s=$.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function Jv(e,t,n){var s=$.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function Kb(e,t,n){var s=H7.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function Yb(e,t,n){var s=$.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function Gb(e,t,n){var s=$.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function y6(e,t){return j(e.getDate(),t,2)}function Qb(e,t){return j(e.getHours(),t,2)}function ej(e,t){return j(e.getHours()%12||12,t,2)}function nj(e,t){return j(1+Fs.count(cn(e),e),t,3)}function g6(e,t){return j(e.getMilliseconds(),t,3)}function sj(e,t){return g6(e,t)+"000"}function oj(e,t){return j(e.getMonth()+1,t,2)}function xj(e,t){return j(e.getMinutes(),t,2)}function Rj(e,t){return j(e.getSeconds(),t,2)}function Uj(e){var t=e.getDay();return t===0?7:t}function Kj(e,t){return j(hn.count(cn(e)-1,e),t,2)}function Xf(e){var t=e.getDay();return t>=4||t===0?un(e):un.ceil(e)}function qj(e,t){return e=Xf(e),j(un.count(cn(e),e)+(cn(e).getDay()===4),t,2)}function ey(e){return e.getDay()}function ny(e,t){return j(ei.count(cn(e)-1,e),t,2)}function oy(e,t){return j(e.getFullYear()%100,t,2)}function ry(e,t){return e=Xf(e),j(e.getFullYear()%100,t,2)}function c_(e,t){return j(e.getFullYear()%1e4,t,4)}function l_(e,t){var n=e.getDay();return e=n>=4||n===0?un(e):un.ceil(e),j(e.getFullYear()%1e4,t,4)}function h_(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+j(t/60|0,"0",2)+j(t%60,"0",2)}function vf(e,t){return j(e.getUTCDate(),t,2)}function g_(e,t){return j(e.getUTCHours(),t,2)}function b_(e,t){return j(e.getUTCHours()%12||12,t,2)}function j_(e,t){return j(1+kl.count(Os(e),e),t,3)}function hf(e,t){return j(e.getUTCMilliseconds(),t,3)}function O_(e,t){return hf(e,t)+"000"}function C_(e,t){return j(e.getUTCMonth()+1,t,2)}function S_(e,t){return j(e.getUTCMinutes(),t,2)}function z_(e,t){return j(e.getUTCSeconds(),t,2)}function D_(e){var t=e.getUTCDay();return t===0?7:t}function N_(e,t){return j(wr.count(Os(e)-1,e),t,2)}function sf(e){var t=e.getUTCDay();return t>=4||t===0?Dn(e):Dn.ceil(e)}function H_(e,t){return e=sf(e),j(Dn.count(Os(e),e)+(Os(e).getUTCDay()===4),t,2)}function B_(e){return e.getUTCDay()}function Z_(e,t){return j(Qo.count(Os(e)-1,e),t,2)}function J_(e,t){return j(e.getUTCFullYear()%100,t,2)}function lw(e,t){return e=sf(e),j(e.getUTCFullYear()%100,t,2)}function hw(e,t){return j(e.getUTCFullYear()%1e4,t,4)}function mw(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Dn(e):Dn.ceil(e),j(e.getUTCFullYear()%1e4,t,4)}function jw(){return"+0000"}function P8(){return"%"}function z8(e){return+e}function _8(e){return Math.floor(+e/1e3)}HO({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function HO(e){return Rs=R7(e),Hr=Rs.format,Rs.parse,Rs.utcFormat,Rs.utcParse,Rs}function UO(e){return new Date(e)}function GO(e){return e instanceof Date?+e:+new Date(+e)}function a8(e,t,n,s,o,i,a,r,c,l){var d=Cg(),h=d.invert,u=d.domain,m=l(".%L"),f=l(":%S"),p=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),b=l("%b %d"),j=l("%B"),y=l("%Y");function _(e){return(c(e)<e?m:r(e)<e?f:a(e)<e?p:i(e)<e?g:s(e)<e?o(e)<e?v:b:n(e)<e?j:y)(e)}return d.invert=function(e){return new Date(h(e))},d.domain=function(e){return arguments.length?u(Array.from(e,GO)):u().map(UO)},d.ticks=function(t){var n=u();return e(n[0],n[n.length-1],t??10)},d.tickFormat=function(e,t){return t==null?_:l(t)},d.nice=function(e){var n=u();return(!e||typeof e.range!="function")&&(e=t(n[0],n[n.length-1],e??10)),e?u(x5(n,e)):d},d.copy=function(){return yg(d,a8(e,t,n,s,o,i,a,r,c,l))},d}function tx(){return Bd.apply(a8(M5,X5,cn,hr,hn,Fs,er,Za,si,Hr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function F(e){return function(){return e}}const o8=Math.abs,ee=Math.atan2,gn=Math.cos,nx=Math.max,pl=Math.min,et=Math.sin,_s=Math.sqrt,me=1e-12,go=Math.PI,kr=go/2,Cr=2*go;function dx(e){return e>1?0:e<-1?go:Math.acos(e)}function Gm(e){return e>=1?kr:e<=-1?-kr:Math.asin(e)}function fx(e){return e.innerRadius}function bx(e){return e.outerRadius}function jx(e){return e.startAngle}function wx(e){return e.endAngle}function mE(e){return e&&e.padAngle}function pE(e,t,n,s,o,i,a,r){var l=n-e,d=s-t,u=a-o,h=r-i,c=h*l-u*d;if(c*c<me)return;return c=(u*(t-i)-h*(e-o))/c,[e+c*l,t+c*d]}function br(e,t,n,s,o,i,a){var b=e-n,w=t-s,x=(a?i:-i)/_s(b*b+w*w),_=x*w,y=-x*b,j=e+_,p=t+y,g=n+_,v=s+y,C=(j+g)/2,O=(p+v)/2,c=g-j,r=v-p,d=c*c+r*r,f=o-i,l=j*v-g*p,h=(r<0?-1:1)*_s(nx(0,f*f*d-l*l)),m=(l*r-c*h)/d,u=(-l*c-r*h)/d,E=(l*r+c*h)/d,k=(-l*c+r*h)/d,A=m-C,S=u-O,M=E-C,F=k-O;return A*A+S*S>M*M+F*F&&(m=E,u=k),{cx:m,cy:u,x01:-_,y01:-y,x11:m*(o/f-1),y11:u*(o/f-1)}}function Fl(){var n=fx,s=bx,r=F(0),o=null,i=jx,a=wx,c=mE,e=null;function t(){var T,$,d=+n.apply(this,arguments),u=+s.apply(this,arguments),m=i.apply(this,arguments)-kr,f=a.apply(this,arguments)-kr,k=o8(f-m),h=f>m;if(e||(e=T=gu()),u<d&&($=u,u=d,d=$),u>me)if(k>Cr-me)e.moveTo(u*gn(m),u*et(m)),e.arc(0,0,u,m,f,!h),d>me&&(e.moveTo(d*gn(f),d*et(f)),e.arc(0,0,d,f,m,h));else{var t,l,x,C,E=m,_=f,O=m,w=f,D=k,N=k,V=c.apply(this,arguments)/2,L=V>me&&(o?+o.apply(this,arguments):_s(d*d+u*u)),b=pl(o8(u-d)/2,+r.apply(this,arguments)),v=b,g=b;L>me&&(x=Gm(L/d*et(V)),C=Gm(L/u*et(V)),(D-=x*2)>me?(x*=h?1:-1,O+=x,w-=x):(D=0,O=w=(m+f)/2),(N-=C*2)>me?(C*=h?1:-1,E+=C,_-=C):(N=0,E=_=(m+f)/2));var y=u*gn(E),j=u*et(E),F=d*gn(w),M=d*et(w);if(b>me){var p,S=u*gn(_),A=u*et(_),R=d*gn(O),P=d*et(O);if(k<go&&(p=pE(y,j,R,P,S,A,F,M))){var I=y-p[0],B=j-p[1],z=S-p[0],H=A-p[1],W=1/et(dx((I*z+B*H)/(_s(I*I+B*B)*_s(z*z+H*H)))/2),U=_s(p[0]*p[0]+p[1]*p[1]);v=pl(b,(d-U)/(W-1)),g=pl(b,(u-U)/(W+1))}}N>me?g>me?(t=br(R,P,y,j,u,g,h),l=br(S,A,F,M,u,g,h),e.moveTo(t.cx+t.x01,t.cy+t.y01),g<b?e.arc(t.cx,t.cy,g,ee(t.y01,t.x01),ee(l.y01,l.x01),!h):(e.arc(t.cx,t.cy,g,ee(t.y01,t.x01),ee(t.y11,t.x11),!h),e.arc(0,0,u,ee(t.cy+t.y11,t.cx+t.x11),ee(l.cy+l.y11,l.cx+l.x11),!h),e.arc(l.cx,l.cy,g,ee(l.y11,l.x11),ee(l.y01,l.x01),!h))):(e.moveTo(y,j),e.arc(0,0,u,E,_,!h)):e.moveTo(y,j),!(d>me)||!(D>me)?e.lineTo(F,M):v>me?(t=br(F,M,S,A,d,-v,h),l=br(y,j,R,P,d,-v,h),e.lineTo(t.cx+t.x01,t.cy+t.y01),v<b?e.arc(t.cx,t.cy,v,ee(t.y01,t.x01),ee(l.y01,l.x01),!h):(e.arc(t.cx,t.cy,v,ee(t.y01,t.x01),ee(t.y11,t.x11),!h),e.arc(0,0,d,ee(t.cy+t.y11,t.cx+t.x11),ee(l.cy+l.y11,l.cx+l.x11),h),e.arc(l.cx,l.cy,v,ee(l.y11,l.x11),ee(l.y01,l.x01),!h))):e.arc(0,0,d,w,O,h)}else e.moveTo(0,0);if(e.closePath(),T)return e=null,T+""||null}return t.centroid=function(){var e=(+n.apply(this,arguments)+ +s.apply(this,arguments))/2,t=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-go/2;return[gn(t)*e,et(t)*e]},t.innerRadius=function(e){return arguments.length?(n=typeof e=="function"?e:F(+e),t):n},t.outerRadius=function(e){return arguments.length?(s=typeof e=="function"?e:F(+e),t):s},t.cornerRadius=function(e){return arguments.length?(r=typeof e=="function"?e:F(+e),t):r},t.padRadius=function(e){return arguments.length?(o=e==null?null:typeof e=="function"?e:F(+e),t):o},t.startAngle=function(e){return arguments.length?(i=typeof e=="function"?e:F(+e),t):i},t.endAngle=function(e){return arguments.length?(a=typeof e=="function"?e:F(+e),t):a},t.padAngle=function(e){return arguments.length?(c=typeof e=="function"?e:F(+e),t):c},t.context=function(n){return arguments.length?(e=n??null,t):e},t}function vm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fm(e){this._context=e}fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function pe(e){return new fm(e)}function XE(e){return e[0]}function QE(e){return e[1]}function cs(e,t){var a=F(!0),o=null,i=pe,s=null;e=typeof e=="function"?e:e===void 0?XE:F(e),t=typeof t=="function"?t:t===void 0?QE:F(t);function n(n){var r,l,d,u=(n=vm(n)).length,c=!1;o==null&&(s=i(d=gu()));for(r=0;r<=u;++r)!(r<u&&a(l=n[r],r,n))===c&&((c=!c)?s.lineStart():s.lineEnd()),c&&s.point(+e(l,r,n),+t(l,r,n));if(d)return s=null,d+""||null}return n.x=function(t){return arguments.length?(e=typeof t=="function"?t:F(+t),n):e},n.y=function(e){return arguments.length?(t=typeof e=="function"?e:F(+e),n):t},n.defined=function(e){return arguments.length?(a=typeof e=="function"?e:F(!!e),n):a},n.curve=function(e){return arguments.length?(i=e,o!=null&&(s=i(o)),n):i},n.context=function(e){return arguments.length?(e==null?o=s=null:s=i(o=e),n):o},n}function nk(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function ok(e){return e}function ck(){var s=ok,t=nk,n=null,o=F(0),i=F(Cr),a=F(0);function e(e){var r,l,h,f,j,c=(e=vm(e)).length,g=0,m=new Array(c),d=new Array(c),u=+o.apply(this,arguments),p=Math.min(Cr,Math.max(-Cr,i.apply(this,arguments)-u)),v=Math.min(Math.abs(p)/c,a.apply(this,arguments)),b=v*(p<0?-1:1);for(r=0;r<c;++r)(l=d[m[r]=r]=+s(e[r],r,e))>0&&(g+=l);t!=null?m.sort(function(e,n){return t(d[e],d[n])}):n!=null&&m.sort(function(t,s){return n(e[t],e[s])});for(r=0,j=g?(p-c*b)/g:0;r<c;++r,u=f)h=m[r],l=d[h],f=u+(l>0?l*j:0)+b,d[h]={data:e[h],index:r,value:l,startAngle:u,endAngle:f,padAngle:v};return d}return e.value=function(t){return arguments.length?(s=typeof t=="function"?t:F(+t),e):s},e.sortValues=function(s){return arguments.length?(t=s,n=null,e):t},e.sort=function(s){return arguments.length?(n=s,t=null,e):n},e.startAngle=function(t){return arguments.length?(o=typeof t=="function"?t:F(+t),e):o},e.endAngle=function(t){return arguments.length?(i=typeof t=="function"?t:F(+t),e):i},e.padAngle=function(t){return arguments.length?(a=typeof t=="function"?t:F(+t),e):a},e}function rr(){}function ar(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function om(e){this._context=e}om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ar(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ar(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vn(e){return new om(e)}function sm(e){this._context=e}sm.prototype={areaStart:rr,areaEnd:rr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ar(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pk(e){return new sm(e)}function tm(e){this._context=e}tm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:ar(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bk(e){return new tm(e)}function Jh(e){this._context=e}Jh.prototype={areaStart:rr,areaEnd:rr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yk(e){return new Jh(e)}function Qh(e){return e<0?-1:1}function Gh(e,t,n){var s=e._x1-e._x0,o=t-e._x1,i=(e._y1-e._y0)/(s||o<0&&-0),a=(n-e._y1)/(o||s<0&&-0),r=(i*o+a*s)/(s+o);return(Qh(i)+Qh(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(r))||0}function Yh(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ed(e,t,n){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,s=(o-i)/3;e._context.bezierCurveTo(i+s,r+s*t,o-s,a-s*n,o,a)}function Qa(e){this._context=e}Qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ed(this,this._t0,Yh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e===this._x1&&t===this._y1)return;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ed(this,Yh(this,n=Gh(this,e,t)),n);break;default:ed(this,this._t0,n=Gh(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}};function qh(e){this._context=new Uh(e)}(qh.prototype=Object.create(Qa.prototype)).point=function(e,t){Qa.prototype.point.call(this,t,e)};function Uh(e){this._context=e}Uh.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,o,i){this._context.bezierCurveTo(t,e,s,n,i,o)}};function wk(e){return new Qa(e)}function xk(e){return new qh(e)}function Ph(e){this._context=e}Ph.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t,s,i,a,e=this._x,n=this._y,o=e.length;if(o)if(this._line?this._context.lineTo(e[0],n[0]):this._context.moveTo(e[0],n[0]),o===2)this._context.lineTo(e[1],n[1]);else{i=Rh(e),a=Rh(n);for(t=0,s=1;s<o;++t,++s)this._context.bezierCurveTo(i[0][t],a[0][t],i[1][t],a[1][t],e[s],n[s])}(this._line||this._line!==0&&o===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Rh(e){var t,a,n=e.length-1,s=new Array(n),o=new Array(n),i=new Array(n);s[0]=0,o[0]=2,i[0]=e[0]+2*e[1];for(t=1;t<n-1;++t)s[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];s[n-1]=2,o[n-1]=7,i[n-1]=8*e[n-1]+e[n];for(t=1;t<n;++t)a=s[t]/o[t-1],o[t]-=a,i[t]-=a*i[t-1];s[n-1]=i[n-1]/o[n-1];for(t=n-2;t>=0;--t)s[t]=(i[t]-s[t+1])/o[t];o[n-1]=(e[n]+s[n-1])/2;for(t=0;t<n-1;++t)o[t]=2*e[t+1]-s[t+1];return[s,o]}function Ck(e){return new Ph(e)}function qa(e,t){this._context=e,this._t=t}qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Pk(e){return new qa(e,.5)}function Gk(e){return new qa(e,0)}function tA(e){return new qa(e,1)}function ys(e,t,n){this.k=e,this.x=t,this.y=n}ys.prototype={constructor:ys,scale:function(e){return e===1?this:new ys(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ys(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new ys(1,0,0),ys.prototype;function Zt(e){return"@babel/helpers - typeof",Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}function pd(e,t){return pd=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},pd(e,t)}function sA(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Va(){return sA()?Va=Reflect.construct:Va=function(t,n,s){var i,a,o=[null];return o.push.apply(o,n),a=Function.bind.apply(t,o),i=new a,s&&pd(i,s.prototype),i},Va.apply(null,arguments)}function $e(e){return mA(e)||pA(e)||gA(e)||XA()}function mA(e){if(Array.isArray(e))return wd(e)}function pA(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gA(e,t){if(!e)return;if(typeof e=="string")return wd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wd(e,t)}function wd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function XA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fS=Object.hasOwnProperty,ch=Object.setPrototypeOf,yS=Object.isFrozen,wS=Object.getPrototypeOf,OS=Object.getOwnPropertyDescriptor,ae=Object.freeze,Ye=Object.seal,LS=Object.create,U3=typeof Reflect!="undefined"&&Reflect,Oa=U3.apply,Dd=U3.construct;Oa||(Oa=function(t,n,s){return t.apply(n,s)}),ae||(ae=function(t){return t}),Ye||(Ye=function(t){return t}),Dd||(Dd=function(t,n){return Va(t,$e(n))}),$3=_e(Array.prototype.forEach),Ld=_e(Array.prototype.pop),xs=_e(Array.prototype.push),oo=_e(String.prototype.toLowerCase),_a=_e(String.prototype.toString),L3=_e(String.prototype.match),ke=_e(String.prototype.replace),N3=_e(String.prototype.indexOf),z3=_e(String.prototype.trim),ne=_e(RegExp.prototype.test),ga=cF(TypeError);function _e(e){return function(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),n=1;n<s;n++)o[n-1]=arguments[n];return Oa(e,t,o)}}function cF(e){return function(){for(var n=arguments.length,s=new Array(n),t=0;t<n;t++)s[t]=arguments[t];return Dd(e,s)}}function v(e,t,n){n=n||oo,ch&&ch(e,null);for(var s,o,i=t.length;i--;)s=t[i],typeof s=="string"&&(o=n(s),o!==s&&(yS(t)||(t[i]=o),s=o)),e[s]=!0;return e}function Tn(e){var t,n=LS(null);for(t in e)Oa(fS,e,[t])&&(n[t]=e[t]);return n}function da(e,t){for(;e!==null;){var n=OS(e,t);if(n){if(n.get)return _e(n.get);if(typeof n.value=="function")return _e(n.value)}e=wS(e)}function s(e){return console.warn("fallback value for",e),null}return s}Qd=ae(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),la=ae(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ra=ae(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),j3=ae(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ia=ae(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),l3=ae(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),su=ae(["#text"]),ou=ae(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),na=ae(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),au=ae(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),no=ae(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),i3=Ye(/\{\{[\w\W]*|[\w\W]*\}\}/gm),o3=Ye(/<%[\w\W]*|[\w\W]*%>/gm),n3=Ye(/\${[\w\W]*}/gm),Q2=Ye(/^data-[-\w.\u00B7-\uFFFF]/),X2=Ye(/^aria-[-\w]+$/),G2=Ye(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.-]+(?:[^a-z+.\-:]|$))/i),V2=Ye(/^(?:\w+script|data):/i),H2=Ye(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),P2=Ye(/^html$/i),L2=function(){return typeof window=="undefined"?null:window},F2=function(t,n){if(Zt(t)!=="object"||typeof t.createPolicy!="function")return null;var o,s=null,i="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(i)&&(s=n.currentScript.getAttribute(i)),o="dompurify"+(s?"#"+s:"");try{return t.createPolicy(o,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function M2(){if(t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L2(),e=function(t){return M2(t)},e.version="2.4.1",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var e,t,s,a,c,l,h,g,x,S,D,L,$,Y,X,J,H=t.document,u=t.document,Ee=t.DocumentFragment,Xe=t.HTMLTemplateElement,K=t.Node,le=t.Element,se=t.NodeFilter,ce=t.NamedNodeMap,Ge=ce===void 0?t.NamedNodeMap||t.MozNamedAttrMap:ce,Ye=t.HTMLFormElement,qe=t.DOMParser,z=t.trustedTypes,re,fe,oe,Oe,C=le.prototype,Ke=da(C,"cloneNode"),Ue=da(C,"nextSibling"),We=da(C,"childNodes"),B=da(C,"parentNode");typeof Xe=="function"&&(x=u.createElement("template"),x.content&&x.content.ownerDocument&&(u=x.content.ownerDocument));var r=F2(z,H),ye=r?r.createHTML(""):"",M=u,I=M.implementation,Ve=M.createNodeIterator,Me=M.createDocumentFragment,Be=M.getElementsByTagName,Ie=H.importNode,Se={};try{Se=Tn(u).documentMode?u.documentMode:{}}catch{}a={},e.isSupported=typeof B=="function"&&I&&typeof I.createHTMLDocument!="undefined"&&Se!==9;var te=i3,ee=o3,G=n3,He=Q2,Pe=X2,Re=V2,ve=H2,P=G2,o=null,we=v({},[].concat($e(Qd),$e(la),$e(ra),$e(ia),$e(su))),i=null,_e=v({},[].concat($e(ou),$e(na),$e(au),$e(no))),n=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),w=null,U=null,pe=!0,q=!0,ge=!1,f=!1,m=!1,Q=!1,Z=!1,p=!1,T=!1,F=!1,de=!0,be=!1,Le="user-content-",ie=!0,O=!1,b={},j=null,ue=v({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),he=null,me=v({},["audio","video","img","source","image","track"]),N=null,je=v({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),A="http://www.w3.org/1998/Math/MathML",k="http://www.w3.org/2000/svg",d="http://www.w3.org/1999/xhtml",y=d,W=!1,V=null,Ne=v({},[A,k,d],_a),ze=["application/xhtml+xml","text/html"],Te="text/html",_=null,Fe=u.createElement("form"),Ae=function(t){return t instanceof RegExp||t instanceof Function},R=function(t){if(_&&_===t)return;(!t||Zt(t)!=="object")&&(t={}),t=Tn(t),h=ze.indexOf(t.PARSER_MEDIA_TYPE)===-1?h=Te:h=t.PARSER_MEDIA_TYPE,s=h==="application/xhtml+xml"?_a:oo,o="ALLOWED_TAGS"in t?v({},t.ALLOWED_TAGS,s):we,i="ALLOWED_ATTR"in t?v({},t.ALLOWED_ATTR,s):_e,V="ALLOWED_NAMESPACES"in t?v({},t.ALLOWED_NAMESPACES,_a):Ne,N="ADD_URI_SAFE_ATTR"in t?v(Tn(je),t.ADD_URI_SAFE_ATTR,s):je,he="ADD_DATA_URI_TAGS"in t?v(Tn(me),t.ADD_DATA_URI_TAGS,s):me,j="FORBID_CONTENTS"in t?v({},t.FORBID_CONTENTS,s):ue,w="FORBID_TAGS"in t?v({},t.FORBID_TAGS,s):{},U="FORBID_ATTR"in t?v({},t.FORBID_ATTR,s):{},b="USE_PROFILES"in t&&t.USE_PROFILES,pe=t.ALLOW_ARIA_ATTR!==!1,q=t.ALLOW_DATA_ATTR!==!1,ge=t.ALLOW_UNKNOWN_PROTOCOLS||!1,f=t.SAFE_FOR_TEMPLATES||!1,m=t.WHOLE_DOCUMENT||!1,p=t.RETURN_DOM||!1,T=t.RETURN_DOM_FRAGMENT||!1,F=t.RETURN_TRUSTED_TYPE||!1,Z=t.FORCE_BODY||!1,de=t.SANITIZE_DOM!==!1,be=t.SANITIZE_NAMED_PROPS||!1,ie=t.KEEP_CONTENT!==!1,O=t.IN_PLACE||!1,P=t.ALLOWED_URI_REGEXP||P,y=t.NAMESPACE||d,t.CUSTOM_ELEMENT_HANDLING&&Ae(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(n.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Ae(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(n.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(n.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),f&&(q=!1),T&&(p=!0),b&&(o=v({},$e(su)),i=[],b.html===!0&&(v(o,Qd),v(i,ou)),b.svg===!0&&(v(o,la),v(i,na),v(i,no)),b.svgFilters===!0&&(v(o,ra),v(i,na),v(i,no)),b.mathMl===!0&&(v(o,ia),v(i,au),v(i,no))),t.ADD_TAGS&&(o===we&&(o=Tn(o)),v(o,t.ADD_TAGS,s)),t.ADD_ATTR&&(i===_e&&(i=Tn(i)),v(i,t.ADD_ATTR,s)),t.ADD_URI_SAFE_ATTR&&v(N,t.ADD_URI_SAFE_ATTR,s),t.FORBID_CONTENTS&&(j===ue&&(j=Tn(j)),v(j,t.FORBID_CONTENTS,s)),ie&&(o["#text"]=!0),m&&v(o,["html","head","body"]),o.table&&(v(o,["tbody"]),delete w.tbody),ae&&ae(t),_=t},Ce=v({},["mi","mo","mn","ms","mtext"]),xe=v({},["foreignobject","desc","title","annotation-xml"]),De=v({},["title","style","font","a","script"]),E=v({},la);return v(E,ra),v(E,j3),S=v({},ia),v(S,l3),re=function(t){var s,o,n=B(t);return(!n||!n.tagName)&&(n={namespaceURI:y,tagName:"template"}),s=oo(t.tagName),o=oo(n.tagName),!!V[t.namespaceURI]&&(t.namespaceURI===k?n.namespaceURI===d?s==="svg":n.namespaceURI===A?s==="svg"&&(o==="annotation-xml"||Ce[o]):Boolean(E[s]):t.namespaceURI===A?n.namespaceURI===d?s==="math":n.namespaceURI===k?s==="math"&&xe[o]:Boolean(S[s]):t.namespaceURI===d?!(n.namespaceURI===k&&!xe[o])&&!(n.namespaceURI===A&&!Ce[o])&&!S[s]&&(De[s]||!E[s]):!!(h==="application/xhtml+xml"&&V[t.namespaceURI]))},c=function(n){xs(e.removed,{element:n});try{n.parentNode.removeChild(n)}catch{try{n.outerHTML=ye}catch{n.remove()}}},D=function(n,s){try{xs(e.removed,{attribute:s.getAttributeNode(n),from:s})}catch{xs(e.removed,{attribute:null,from:s})}if(s.removeAttribute(n),n==="is"&&!i[n])if(p||T)try{c(s)}catch{}else try{s.setAttribute(n,"")}catch{}},Y=function(t){if(Z)t="<remove></remove>"+t;else{var n,s,o,i,a=L3(t,/^[\r\n\t ]+/);o=a&&a[0]}if(h==="application/xhtml+xml"&&y===d&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>"),i=r?r.createHTML(t):t,y===d)try{n=(new qe).parseFromString(i,h)}catch{}if(!n||!n.documentElement){n=I.createDocument(y,"template",null);try{n.documentElement.innerHTML=W?"":i}catch{}}return s=n.body||n.documentElement,t&&o&&s.insertBefore(u.createTextNode(o),s.childNodes[0]||null),y===d?Be.call(n,m?"html":"body")[0]:m?n.documentElement:s},L=function(t){return Ve.call(t.ownerDocument||t,t,se.SHOW_ELEMENT|se.SHOW_COMMENT|se.SHOW_TEXT,null,!1)},fe=function(t){return t instanceof Ye&&(typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof Ge)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function"||typeof t.hasChildNodes!="function")},g=function(t){return Zt(K)==="object"?t instanceof K:t&&Zt(t)==="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string"},l=function(n,s,o){if(!a[n])return;$3(a[n],function(t){t.call(e,s,o,_)})},$=function(i){if(l("beforeSanitizeElements",i,null),fe(i))return c(i),!0;if(ne(/[\u0080-\uFFFF]/,i.nodeName))return c(i),!0;var r,d,u,h,m,a=s(i.nodeName);if(l("uponSanitizeElement",i,{tagName:a,allowedTags:o}),i.hasChildNodes()&&!g(i.firstElementChild)&&(!g(i.content)||!g(i.content.firstElementChild))&&ne(/<[/\w]/g,i.innerHTML)&&ne(/<[/\w]/g,i.textContent))return c(i),!0;if(a==="select"&&ne(/<template/i,i.innerHTML))return c(i),!0;if(!o[a]||w[a]){if(!w[a]&&J(a)){if(n.tagNameCheck instanceof RegExp&&ne(n.tagNameCheck,a))return!1;if(n.tagNameCheck instanceof Function&&n.tagNameCheck(a))return!1}if(ie&&!j[a]&&(h=B(i)||i.parentNode,d=We(i)||i.childNodes,d&&h)){m=d.length;for(u=m-1;u>=0;--u)h.insertBefore(Ke(d[u],!0),Ue(i))}return c(i),!0}return i instanceof le&&!re(i)?(c(i),!0):(a==="noscript"||a==="noembed")&&ne(/<\/no(script|embed)/i,i.innerHTML)?(c(i),!0):(f&&i.nodeType===3&&(r=i.textContent,r=ke(r,te," "),r=ke(r,ee," "),r=ke(r,G," "),i.textContent!==r&&(xs(e.removed,{element:i.cloneNode()}),i.textContent=r)),l("afterSanitizeElements",i,null),!1)},X=function(t,s,o){if(de&&(s==="id"||s==="name")&&(o in u||o in Fe))return!1;if(q&&!U[s]&&ne(He,s));else if(pe&&ne(Pe,s));else if(!i[s]||U[s])if(J(t)&&(n.tagNameCheck instanceof RegExp&&ne(n.tagNameCheck,t)||n.tagNameCheck instanceof Function&&n.tagNameCheck(t))&&(n.attributeNameCheck instanceof RegExp&&ne(n.attributeNameCheck,s)||n.attributeNameCheck instanceof Function&&n.attributeNameCheck(s))||s==="is"&&n.allowCustomizedBuiltInElements&&(n.tagNameCheck instanceof RegExp&&ne(n.tagNameCheck,o)||n.tagNameCheck instanceof Function&&n.tagNameCheck(o)));else return!1;else if(N[s]);else if(ne(P,ke(o,ve,"")));else if((s==="src"||s==="xlink:href"||s==="href")&&t!=="script"&&N3(o,"data:")===0&&he[t]);else if(ge&&!ne(Re,ke(o,ve,"")));else if(o)return!1;return!0},J=function(t){return t.indexOf("-")>0},oe=function(n){if(l("beforeSanitizeAttributes",n,null),h=n.attributes,!h)return;for(a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:i},m=h.length;m--;){u=h[m];var o,a,d,u,h,m,g,v=u,c=v.name,p=v.namespaceURI;if(o=c==="value"?u.value:z3(u.value),d=s(c),a.attrName=d,a.attrValue=o,a.keepAttr=!0,a.forceKeepAttr=void 0,l("uponSanitizeAttribute",n,a),o=a.attrValue,a.forceKeepAttr)continue;if(D(c,n),!a.keepAttr)continue;if(ne(/\/>/i,o)){D(c,n);continue}if(f&&(o=ke(o,te," "),o=ke(o,ee," "),o=ke(o,G," ")),g=s(n.nodeName),!X(g,d,o))continue;if(be&&(d==="id"||d==="name")&&(D(c,n),o=Le+o),r&&Zt(z)==="object"&&typeof z.getAttributeType=="function")if(p);else switch(z.getAttributeType(g,d)){case"TrustedHTML":o=r.createHTML(o);break;case"TrustedScriptURL":o=r.createScriptURL(o);break}try{p?n.setAttributeNS(p,c,o):n.setAttribute(c,o),Ld(e.removed)}catch{}}l("afterSanitizeAttributes",n,null)},Oe=function e(t){var n,s=L(t);for(l("beforeSanitizeShadowDOM",t,null);n=s.nextNode();){if(l("uponSanitizeShadowNode",n,null),$(n))continue;n.content instanceof Ee&&e(n.content),oe(n)}l("afterSanitizeShadowDOM",t,null)},e.sanitize=function(n){var a,l,d,u,h,v,b,j,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(W=!n,W&&(n="<!-->"),typeof n!="string"&&!g(n)){if(typeof n.toString!="function")throw ga("toString is not a function");if(n=n.toString(),typeof n!="string")throw ga("dirty is not a string, aborting")}if(!e.isSupported){if(Zt(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof n=="string")return t.toStaticHTML(n);if(g(n))return t.toStaticHTML(n.outerHTML)}return n}if(Q||R(y),e.removed=[],typeof n=="string"&&(O=!1),O){if(n.nodeName&&(b=s(n.nodeName),!o[b]||w[b]))throw ga("root node is forbidden and cannot be sanitized in-place")}else if(n instanceof K)a=Y("<!---->"),u=a.ownerDocument.importNode(n,!0),u.nodeType===1&&u.nodeName==="BODY"?a=u:u.nodeName==="HTML"?a=u:a.appendChild(u);else{if(!p&&!f&&!m&&n.indexOf("<")===-1)return r&&F?r.createHTML(n):n;if(a=Y(n),!a)return p?null:F?ye:""}for(a&&Z&&c(a.firstChild),j=L(O?n:a);d=j.nextNode();){if(d.nodeType===3&&d===v)continue;if($(d))continue;d.content instanceof Ee&&Oe(d.content),oe(d),v=d}if(v=null,O)return n;if(p){if(T)for(h=Me.call(a.ownerDocument);a.firstChild;)h.appendChild(a.firstChild);else h=a;return i.shadowroot&&(h=Ie.call(H,h,!0)),h}return l=m?a.outerHTML:a.innerHTML,m&&o["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&ne(P2,a.ownerDocument.doctype.name)&&(l="<!DOCTYPE "+a.ownerDocument.doctype.name+`>
`+l),f&&(l=ke(l,te," "),l=ke(l,ee," "),l=ke(l,G," ")),r&&F?r.createHTML(l):l},e.setConfig=function(e){R(e),Q=!0},e.clearConfig=function(){_=null,Q=!1},e.isValidAttribute=function(e,t,n){_||R({});var o=s(e),i=s(t);return X(o,i,n)},e.addHook=function(e,t){if(typeof t!="function")return;a[e]=a[e]||[],xs(a[e],t)},e.removeHook=function(e){if(a[e])return Ld(a[e])},e.removeHooks=function(e){a[e]&&(a[e]=[])},e.removeAllHooks=function(){a={}},e}is=M2();const JT=e=>{if(!e)return[""];const t=Q0(e).replace(/\\n/g,"#br#");return t.split("#br#")},E2=e=>is.sanitize(e),h2=(e,t)=>{var n;if(((n=t.flowchart)==null?void 0:n.htmlLabels)!==!1){const n=t.securityLevel;n==="antiscript"||n==="strict"?e=E2(e):n!=="loose"&&(e=Q0(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=pD(e))}return e},Me=(e,t)=>e&&(t.dompurifyConfig?e=is.sanitize(h2(e,t),t.dompurifyConfig).toString():e=is.sanitize(h2(e,t),{FORBID_TAGS:["style"]}).toString(),e),tD=(e,t)=>typeof e=="string"?Me(e,t):e.flat().map(e=>Me(e,t)),Bi=/<br\s*\/?>/gi,dD=e=>Bi.test(e),hD=e=>e.split(Bi),pD=e=>e.replace(/#br#/g,"<br/>"),Q0=e=>e.replace(Bi,"#br#"),vD=e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},K=e=>e!==!1&&!["false","null","0"].includes(String(e).trim().toLowerCase()),qt=function(e){let t=e;return e.includes("~")?(t=t.replace(/~([^~].*)/,"<$1"),t=t.replace(/~([^~]*)$/,">$1"),qt(t)):t},h={getRows:JT,sanitizeText:Me,sanitizeTextOrArray:tD,hasBreaks:dD,splitBreaks:hD,lineBreakRegex:Bi,removeScript:E2,getUrl:vD,evaluate:K},Ri={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e),hsl2rgb:({h:e,s:t,l:n},s)=>{if(!t)return n*2.55;e/=360,t/=100,n/=100;const o=n<.5?n*(1+t):n+t-n*t,i=2*n-o;switch(s){case"r":return Ri.hue2rgb(i,o,e+1/3)*255;case"g":return Ri.hue2rgb(i,o,e)*255;case"b":return Ri.hue2rgb(i,o,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:n},s)=>{e/=255,t/=255,n/=255;const o=Math.max(e,t,n),i=Math.min(e,t,n),r=(o+i)/2;if(s==="l")return r*100;if(o===i)return 0;const a=o-i,c=r>.5?a/(2-o-i):a/(o+i);if(s==="s")return c*100;switch(o){case e:return((t-n)/a+(t<n?6:0))*60;case t:return((n-e)/a+2)*60;case n:return((e-t)/a+4)*60;default:return-1}}},wD=Ri,xD={clamp:(e,t,n)=>t>n?Math.min(t,Math.max(n,e)):Math.min(n,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},CD=xD,kD={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},AD=kD,FD={channel:wD,lang:CD,unit:AD},g=FD,Qt={};for(let e=0;e<=255;e++)Qt[e]=g.unit.dec2hex(e);const Z={ALL:0,RGB:1,HSL:2};class LD{constructor(){this.type=Z.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=Z.ALL}is(e){return this.type===e}}const HD=LD;class VD{constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new HD}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=Z.ALL,this}_ensureHSL(){const e=this.data,{h:t,s:n,l:s}=e;t===void 0&&(e.h=g.channel.rgb2hsl(e,"h")),n===void 0&&(e.s=g.channel.rgb2hsl(e,"s")),s===void 0&&(e.l=g.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:t,g:n,b:s}=e;t===void 0&&(e.r=g.channel.hsl2rgb(e,"r")),n===void 0&&(e.g=g.channel.hsl2rgb(e,"g")),s===void 0&&(e.b=g.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,t=e.r;return!this.type.is(Z.HSL)&&t!==void 0?t:(this._ensureHSL(),g.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,t=e.g;return!this.type.is(Z.HSL)&&t!==void 0?t:(this._ensureHSL(),g.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,t=e.b;return!this.type.is(Z.HSL)&&t!==void 0?t:(this._ensureHSL(),g.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,t=e.h;return!this.type.is(Z.RGB)&&t!==void 0?t:(this._ensureRGB(),g.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,t=e.s;return!this.type.is(Z.RGB)&&t!==void 0?t:(this._ensureRGB(),g.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,t=e.l;return!this.type.is(Z.RGB)&&t!==void 0?t:(this._ensureRGB(),g.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(Z.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(Z.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(Z.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(Z.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(Z.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(Z.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const GD=VD,XD=new GD({r:0,g:0,b:0,a:0},"transparent"),Fi=XD,S0={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const r=e.match(S0.re);if(!r)return;const c=r[1],t=parseInt(c,16),l=c.length,d=l%4===0,o=l>4,n=o?1:17,i=o?8:4,a=d?0:-1,s=o?255:15;return Fi.set({r:(t>>i*(a+3)&s)*n,g:(t>>i*(a+2)&s)*n,b:(t>>i*(a+1)&s)*n,a:d?(t&s)*n/255:1},e)},stringify:e=>{const{r:t,g:n,b:s,a:o}=e;return o<1?`#${Qt[Math.round(t)]}${Qt[Math.round(n)]}${Qt[Math.round(s)]}${Qt[Math.round(o*255)]}`:`#${Qt[Math.round(t)]}${Qt[Math.round(n)]}${Qt[Math.round(s)]}`}},Ks=S0,Mi={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(Mi.hueRe);if(t){const[,e,n]=t;switch(n){case"grad":return g.channel.clamp.h(parseFloat(e)*.9);case"rad":return g.channel.clamp.h(parseFloat(e)*180/Math.PI);case"turn":return g.channel.clamp.h(parseFloat(e)*360)}}return g.channel.clamp.h(parseFloat(e))},parse:e=>{const n=e.charCodeAt(0);if(n!==104&&n!==72)return;const s=e.match(Mi.re);if(!s)return;const[,o,i,a,t,r]=s;return Fi.set({h:Mi._hue2deg(o),s:g.channel.clamp.s(parseFloat(i)),l:g.channel.clamp.l(parseFloat(a)),a:t?g.channel.clamp.a(r?parseFloat(t)/100:parseFloat(t)):1},e)},stringify:e=>{const{h:t,s:n,l:s,a:o}=e;return o<1?`hsla(${g.lang.round(t)}, ${g.lang.round(n)}%, ${g.lang.round(s)}%, ${o})`:`hsl(${g.lang.round(t)}, ${g.lang.round(n)}%, ${g.lang.round(s)}%)`}},Si=Mi,Ai={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=Ai.colors[e];if(!t)return;return Ks.parse(t)},stringify:e=>{const t=Ks.stringify(e);for(const e in Ai.colors)if(Ai.colors[e]===t)return e}},C0=Ai,O0={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const n=e.charCodeAt(0);if(n!==114&&n!==82)return;const s=e.match(O0.re);if(!s)return;const[,o,r,i,c,a,l,t,d]=s;return Fi.set({r:g.channel.clamp.r(r?parseFloat(o)*2.55:parseFloat(o)),g:g.channel.clamp.g(c?parseFloat(i)*2.55:parseFloat(i)),b:g.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:t?g.channel.clamp.a(d?parseFloat(t)/100:parseFloat(t)):1},e)},stringify:e=>{const{r:t,g:n,b:s,a:o}=e;return o<1?`rgba(${g.lang.round(t)}, ${g.lang.round(n)}, ${g.lang.round(s)}, ${g.lang.round(o)})`:`rgb(${g.lang.round(t)}, ${g.lang.round(n)}, ${g.lang.round(s)})`}},Ei=O0,nN={format:{keyword:C0,hex:Ks,rgb:Ei,rgba:Ei,hsl:Si,hsla:Si},parse:e=>{if(typeof e!="string")return e;const t=Ks.parse(e)||Ei.parse(e)||Si.parse(e)||C0.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Z.HSL)||e.data.r===void 0?Si.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Ei.stringify(e):Ks.stringify(e)},At=nN,aN=(e,t)=>{const n=At.parse(e);for(const e in t)n[e]=g.channel.clamp[e](t[e]);return At.stringify(n)},y0=aN,dN=(e,t,n=0,s=1)=>{if(typeof e!="number")return y0(e,{a:t});const o=Fi.set({r:g.channel.clamp.r(e),g:g.channel.clamp.g(t),b:g.channel.clamp.b(n),a:g.channel.clamp.a(s)});return At.stringify(o)},$s=dN,bN=(e,t,n)=>{const s=At.parse(e),o=s[t],i=g.channel.clamp[t](o+n);return o!==i&&(s[t]=i),At.stringify(s)},Z4=bN,yL=(e,t)=>Z4(e,"l",t),u=yL,_L=(e,t)=>Z4(e,"l",-t),m=_L,NR=(e,t)=>{const s=At.parse(e),n={};for(const e in t){if(!t[e])continue;n[e]=s[e]+t[e]}return y0(e,n)},s=NR,LR=(e,t,n=50)=>{const{r:u,g:p,b:d,a:l}=At.parse(e),{r:g,g:m,b:h,a:c}=At.parse(t),i=n/100,s=i*2-1,r=l-c,f=s*r===-1?s:(s+r)/(1+s*r),o=(f+1)/2,a=1-o,v=u*o+g*a,b=p*o+m*a,j=d*o+h*a,y=l*i+c*(1-i);return $s(v,b,j,y)},HR=LR,ZR=(e,t=100)=>{const n=At.parse(e);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,HR(n,e,t)},r=ZR,oe=(e,t)=>t?s(e,{s:-40,l:10}):s(e,{s:-40,l:-10}),gi="#ffffff",pi="#f2f2f2";class eP{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||s(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||s(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||oe(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||oe(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||oe(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||r(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||r(this.tertiaryColor),this.lineColor=this.lineColor||r(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?m(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||m(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||r(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||u(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||s(this.primaryColor,{h:30}),this.cScale4=this.cScale4||s(this.primaryColor,{h:60}),this.cScale5=this.cScale5||s(this.primaryColor,{h:90}),this.cScale6=this.cScale6||s(this.primaryColor,{h:120}),this.cScale7=this.cScale7||s(this.primaryColor,{h:150}),this.cScale8=this.cScale8||s(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||s(this.primaryColor,{h:270}),this.cScale10=this.cScale10||s(this.primaryColor,{h:300}),this.cScale11=this.cScale11||s(this.primaryColor,{h:330}),this.darkMode)for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=m(this["cScale"+e],75);else for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=m(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||r(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||u(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||m(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||s(this.primaryColor,{h:64}),this.fillType3=this.fillType3||s(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||s(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||s(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||s(this.primaryColor,{h:128}),this.fillType7=this.fillType7||s(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||s(this.primaryColor,{l:-10}),this.pie5=this.pie5||s(this.secondaryColor,{l:-10}),this.pie6=this.pie6||s(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||s(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||s(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||s(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||s(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||s(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||s(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?m(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||s(this.primaryColor,{h:-30}),this.git4=this.git4||s(this.primaryColor,{h:-60}),this.git5=this.git5||s(this.primaryColor,{h:-90}),this.git6=this.git6||s(this.primaryColor,{h:60}),this.git7=this.git7||s(this.primaryColor,{h:120}),this.darkMode?(this.git0=u(this.git0,25),this.git1=u(this.git1,25),this.git2=u(this.git2,25),this.git3=u(this.git3,25),this.git4=u(this.git4,25),this.git5=u(this.git5,25),this.git6=u(this.git6,25),this.git7=u(this.git7,25)):(this.git0=m(this.git0,25),this.git1=m(this.git1,25),this.git2=m(this.git2,25),this.git3=m(this.git3,25),this.git4=m(this.git4,25),this.git5=m(this.git5,25),this.git6=m(this.git6,25),this.git7=m(this.git7,25)),this.gitInv0=this.gitInv0||r(this.git0),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||gi,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||pi}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}}const tP=e=>{const t=new eP;return t.calculate(e),t};class nP{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=u(this.primaryColor,16),this.tertiaryColor=s(this.primaryColor,{h:-160}),this.primaryBorderColor=r(this.background),this.secondaryBorderColor=oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oe(this.tertiaryColor,this.darkMode),this.primaryTextColor=r(this.primaryColor),this.secondaryTextColor=r(this.secondaryColor),this.tertiaryTextColor=r(this.tertiaryColor),this.lineColor=r(this.background),this.textColor=r(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=u(r("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=$s(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=m("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=$s(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=$s(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=u(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=u(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=u(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=s(this.primaryColor,{h:64}),this.fillType3=s(this.secondaryColor,{h:64}),this.fillType4=s(this.primaryColor,{h:-64}),this.fillType5=s(this.secondaryColor,{h:-64}),this.fillType6=s(this.primaryColor,{h:128}),this.fillType7=s(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||s(this.primaryColor,{h:30}),this.cScale4=this.cScale4||s(this.primaryColor,{h:60}),this.cScale5=this.cScale5||s(this.primaryColor,{h:90}),this.cScale6=this.cScale6||s(this.primaryColor,{h:120}),this.cScale7=this.cScale7||s(this.primaryColor,{h:150}),this.cScale8=this.cScale8||s(this.primaryColor,{h:210}),this.cScale9=this.cScale9||s(this.primaryColor,{h:270}),this.cScale10=this.cScale10||s(this.primaryColor,{h:300}),this.cScale11=this.cScale11||s(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||r(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||u(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?m(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=u(this.secondaryColor,20),this.git1=u(this.pie2||this.secondaryColor,20),this.git2=u(this.pie3||this.tertiaryColor,20),this.git3=u(this.pie4||s(this.primaryColor,{h:-30}),20),this.git4=u(this.pie5||s(this.primaryColor,{h:-60}),20),this.git5=u(this.pie6||s(this.primaryColor,{h:-90}),10),this.git6=u(this.pie7||s(this.primaryColor,{h:60}),10),this.git7=u(this.pie8||s(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||r(this.git0),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||u(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||u(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}}const oP=e=>{const t=new nP;return t.calculate(e),t};class yP{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=s(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=s(this.primaryColor,{h:-160}),this.primaryBorderColor=oe(this.primaryColor,this.darkMode),this.secondaryBorderColor=oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oe(this.tertiaryColor,this.darkMode),this.primaryTextColor=r(this.primaryColor),this.secondaryTextColor=r(this.secondaryColor),this.tertiaryTextColor=r(this.tertiaryColor),this.lineColor=r(this.background),this.textColor=r(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=$s(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||s(this.primaryColor,{h:30}),this.cScale4=this.cScale4||s(this.primaryColor,{h:60}),this.cScale5=this.cScale5||s(this.primaryColor,{h:90}),this.cScale6=this.cScale6||s(this.primaryColor,{h:120}),this.cScale7=this.cScale7||s(this.primaryColor,{h:150}),this.cScale8=this.cScale8||s(this.primaryColor,{h:210}),this.cScale9=this.cScale9||s(this.primaryColor,{h:270}),this.cScale10=this.cScale10||s(this.primaryColor,{h:300}),this.cScale11=this.cScale11||s(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||m(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||m(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=m(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||m(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||s(this["cScale"+e],{h:180});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||r(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||r(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=u(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=s(this.primaryColor,{h:64}),this.fillType3=s(this.secondaryColor,{h:64}),this.fillType4=s(this.primaryColor,{h:-64}),this.fillType5=s(this.secondaryColor,{h:-64}),this.fillType6=s(this.primaryColor,{h:128}),this.fillType7=s(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||s(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||s(this.primaryColor,{l:-10}),this.pie5=this.pie5||s(this.secondaryColor,{l:-30}),this.pie6=this.pie6||s(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||s(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||s(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||s(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||s(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||s(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||s(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||s(this.primaryColor,{h:-30}),this.git4=this.git4||s(this.primaryColor,{h:-60}),this.git5=this.git5||s(this.primaryColor,{h:-90}),this.git6=this.git6||s(this.primaryColor,{h:60}),this.git7=this.git7||s(this.primaryColor,{h:120}),this.darkMode?(this.git0=u(this.git0,25),this.git1=u(this.git1,25),this.git2=u(this.git2,25),this.git3=u(this.git3,25),this.git4=u(this.git4,25),this.git5=u(this.git5,25),this.git6=u(this.git6,25),this.git7=u(this.git7,25)):(this.git0=m(this.git0,25),this.git1=m(this.git1,25),this.git2=m(this.git2,25),this.git3=m(this.git3,25),this.git4=m(this.git4,25),this.git5=m(this.git5,25),this.git6=m(this.git6,25),this.git7=m(this.git7,25)),this.gitInv0=this.gitInv0||m(r(this.git0),25),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||r(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||r(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||gi,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||pi}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}}const OP=e=>{const t=new yP;return t.calculate(e),t};class R9{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=u("#cde498",10),this.primaryBorderColor=oe(this.primaryColor,this.darkMode),this.secondaryBorderColor=oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oe(this.tertiaryColor,this.darkMode),this.primaryTextColor=r(this.primaryColor),this.secondaryTextColor=r(this.secondaryColor),this.tertiaryTextColor=r(this.primaryColor),this.lineColor=r(this.background),this.textColor=r(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||s(this.primaryColor,{h:30}),this.cScale4=this.cScale4||s(this.primaryColor,{h:60}),this.cScale5=this.cScale5||s(this.primaryColor,{h:90}),this.cScale6=this.cScale6||s(this.primaryColor,{h:120}),this.cScale7=this.cScale7||s(this.primaryColor,{h:150}),this.cScale8=this.cScale8||s(this.primaryColor,{h:210}),this.cScale9=this.cScale9||s(this.primaryColor,{h:270}),this.cScale10=this.cScale10||s(this.primaryColor,{h:300}),this.cScale11=this.cScale11||s(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||m(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||m(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=m(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||m(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||s(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=m(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=s(this.primaryColor,{h:64}),this.fillType3=s(this.secondaryColor,{h:64}),this.fillType4=s(this.primaryColor,{h:-64}),this.fillType5=s(this.secondaryColor,{h:-64}),this.fillType6=s(this.primaryColor,{h:128}),this.fillType7=s(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||s(this.primaryColor,{l:-30}),this.pie5=this.pie5||s(this.secondaryColor,{l:-30}),this.pie6=this.pie6||s(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||s(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||s(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||s(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||s(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||s(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||s(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||s(this.primaryColor,{h:-30}),this.git4=this.git4||s(this.primaryColor,{h:-60}),this.git5=this.git5||s(this.primaryColor,{h:-90}),this.git6=this.git6||s(this.primaryColor,{h:60}),this.git7=this.git7||s(this.primaryColor,{h:120}),this.darkMode?(this.git0=u(this.git0,25),this.git1=u(this.git1,25),this.git2=u(this.git2,25),this.git3=u(this.git3,25),this.git4=u(this.git4,25),this.git5=u(this.git5,25),this.git6=u(this.git6,25),this.git7=u(this.git7,25)):(this.git0=m(this.git0,25),this.git1=m(this.git1,25),this.git2=m(this.git2,25),this.git3=m(this.git3,25),this.git4=m(this.git4,25),this.git5=m(this.git5,25),this.git6=m(this.git6,25),this.git7=m(this.git7,25)),this.gitInv0=this.gitInv0||r(this.git0),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||gi,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||pi}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}}const AP=e=>{const t=new R9;return t.calculate(e),t};class kP{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=u(this.contrast,55),this.background="#ffffff",this.tertiaryColor=s(this.primaryColor,{h:-160}),this.primaryBorderColor=oe(this.primaryColor,this.darkMode),this.secondaryBorderColor=oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oe(this.tertiaryColor,this.darkMode),this.primaryTextColor=r(this.primaryColor),this.secondaryTextColor=r(this.secondaryColor),this.tertiaryTextColor=r(this.tertiaryColor),this.lineColor=r(this.background),this.textColor=r(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=u(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||r(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||u(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||m(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=u(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=u(this.contrast,30),this.sectionBkgColor2=u(this.contrast,30),this.taskBorderColor=m(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=u(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=m(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=s(this.primaryColor,{h:64}),this.fillType3=s(this.secondaryColor,{h:64}),this.fillType4=s(this.primaryColor,{h:-64}),this.fillType5=s(this.secondaryColor,{h:-64}),this.fillType6=s(this.primaryColor,{h:128}),this.fillType7=s(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=m(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||s(this.primaryColor,{h:-30}),this.git4=this.pie5||s(this.primaryColor,{h:-60}),this.git5=this.pie6||s(this.primaryColor,{h:-90}),this.git6=this.pie7||s(this.primaryColor,{h:60}),this.git7=this.pie8||s(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||r(this.git0),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||gi,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||pi}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}}const EP=e=>{const t=new kP;return t.calculate(e),t},Ot={base:{getThemeVariables:tP},dark:{getThemeVariables:oP},default:{getThemeVariables:OP},forest:{getThemeVariables:AP},neutral:{getThemeVariables:EP}},tn={theme:"default",themeVariables:Ot.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};tn.class&&(tn.class.arrowMarkerAbsolute=tn.arrowMarkerAbsolute),tn.gitGraph&&(tn.gitGraph.arrowMarkerAbsolute=tn.arrowMarkerAbsolute);const P1=(e,t="")=>Object.keys(e).reduce((n,s)=>Array.isArray(e[s])?n:typeof e[s]=="object"&&e[s]!==null?[...n,t+s,...P1(e[s],"")]:[...n,t+s],[]),vP=P1(tn,""),gP=tn;function B1(e){return typeof e=="undefined"||e===null}function fP(e){return typeof e=="object"&&e!==null}function mP(e){return Array.isArray(e)?e:B1(e)?[]:[e]}function hP(e,t){var n,s,o,i;if(t){o=Object.keys(t);for(n=0,i=o.length;n<i;n+=1)s=o[n],e[s]=t[s]}return e}function cP(e,t){var n,s="";for(n=0;n<t;n+=1)s+=e;return s}function iP(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}q1=B1,Y1=fP,G1=mP,X1=cP,Q1=iP,Z1=hP,X={isNothing:q1,isObject:Y1,toArray:G1,repeat:X1,isNegativeZero:Q1,extend:Z1};function e4(e,t){var n="",s=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),s+" "+n):s}function Bs(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=e4(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Bs.prototype=Object.create(Error.prototype),Bs.prototype.constructor=Bs,Bs.prototype.toString=function(t){return this.name+": "+e4(this,t)},mt=Bs;function E1(e,t,n,s,o){var i="",r="",a=Math.floor(o/2)-1;return s-t>a&&(i=" ... ",t=s-a+i.length),n-s>a&&(r=" ...",n=s+a-r.length),{str:i+e.slice(t,n).replace(/\t/g,"→")+r,pos:s-t+i.length}}function _1(e,t){return X.repeat(" ",t-e.length)+e}function XR(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var s,i,a,c,l,d,u=/\r?\n|\r|\0/g,o=[0],r=[],n=-1;l=u.exec(e.buffer);)r.push(l.index),o.push(l.index+l[0].length),e.position<=l.index&&n<0&&(n=o.length-2);n<0&&(n=o.length-1),i="",c=Math.min(e.line+t.linesAfter,r.length).toString().length,d=t.maxLength-(t.indent+c+3);for(s=1;s<=t.linesBefore;s++){if(n-s<0)break;a=E1(e.buffer,o[n-s],r[n-s],e.position-(o[n]-o[n-s]),d),i=X.repeat(" ",t.indent)+_1((e.line-s+1).toString(),c)+" | "+a.str+`
`+i}a=E1(e.buffer,o[n],r[n],e.position,d),i+=X.repeat(" ",t.indent)+_1((e.line+1).toString(),c)+" | "+a.str+`
`,i+=X.repeat("-",t.indent+c+3+a.pos)+`^
`;for(s=1;s<=t.linesAfter;s++){if(n+s>=r.length)break;a=E1(e.buffer,o[n+s],r[n+s],e.position-(o[n]-o[n+s]),d),i+=X.repeat(" ",t.indent)+_1((e.line+s+1).toString(),c)+" | "+a.str+`
`}return i.replace(/\n$/,"")}a4=XR,r4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],c4=["scalar","sequence","mapping"];function qR(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}function KR(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(r4.indexOf(t)===-1)throw new mt('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=qR(t.styleAliases||null),c4.indexOf(this.kind)===-1)throw new mt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}q=KR;function h4(e,t){var n=[];return e[t].forEach(function(e){var t=n.length;n.forEach(function(n,s){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=s)}),n[t]=e}),n}function PR(){var t,n,e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function s(t){t.multi?(e.multi[t.kind].push(t),e.multi.fallback.push(t)):e[t.kind][t.tag]=e.fallback[t.tag]=t}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(s);return e}function j1(e){return this.extend(e)}j1.prototype.extend=function(t){var n,o=[],s=[];if(t instanceof q)s.push(t);else if(Array.isArray(t))s=s.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(o=o.concat(t.implicit)),t.explicit&&(s=s.concat(t.explicit));else throw new mt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");return o.forEach(function(e){if(!(e instanceof q))throw new mt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&e.loadKind!=="scalar")throw new mt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new mt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),s.forEach(function(e){if(!(e instanceof q))throw new mt("Specified list of YAML types (or a single Type object) contains a non-Type object.")}),n=Object.create(j1.prototype),n.implicit=(this.implicit||[]).concat(o),n.explicit=(this.explicit||[]).concat(s),n.compiledImplicit=h4(n,"implicit"),n.compiledExplicit=h4(n,"explicit"),n.compiledTypeMap=PR(n.compiledImplicit,n.compiledExplicit),n},p4=j1,g4=new q("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),v4=new q("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),b4=new q("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),v1=new p4({explicit:[g4,v4,b4]});function DR(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function ER(){return null}function wR(e){return e===null}O4=new q("tag:yaml.org,2002:null",{kind:"scalar",resolve:DR,construct:ER,predicate:wR,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function _R(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function jR(e){return e==="true"||e==="True"||e==="TRUE"}function vR(e){return Object.prototype.toString.call(e)==="[object Boolean]"}k4=new q("tag:yaml.org,2002:bool",{kind:"scalar",resolve:_R,construct:jR,predicate:vR,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function pR(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function cR(e){return 48<=e&&e<=55}function sR(e){return 48<=e&&e<=57}function eR(e){if(e===null)return!1;var t,o=e.length,n=0,s=!1;if(!o)return!1;if(t=e[n],(t==="-"||t==="+")&&(t=e[++n]),t==="0"){if(n+1===o)return!0;if(t=e[++n],t==="b"){for(n++;n<o;n++){if(t=e[n],t==="_")continue;if(t!=="0"&&t!=="1")return!1;s=!0}return s&&t!=="_"}if(t==="x"){for(n++;n<o;n++){if(t=e[n],t==="_")continue;if(!pR(e.charCodeAt(n)))return!1;s=!0}return s&&t!=="_"}if(t==="o"){for(n++;n<o;n++){if(t=e[n],t==="_")continue;if(!cR(e.charCodeAt(n)))return!1;s=!0}return s&&t!=="_"}}if(t==="_")return!1;for(;n<o;n++){if(t=e[n],t==="_")continue;if(!sR(e.charCodeAt(n)))return!1;s=!0}return!!s&&t!=="_"}function JL(e){var n,t=e,s=1;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(s=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return s*parseInt(t.slice(2),2);if(t[1]==="x")return s*parseInt(t.slice(2),16);if(t[1]==="o")return s*parseInt(t.slice(2),8)}return s*parseInt(t,10)}function QL(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!X.isNegativeZero(e)}D4=new q("tag:yaml.org,2002:int",{kind:"scalar",resolve:eR,construct:JL,predicate:QL,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),N4=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function XL(e){return e!==null&&!!N4.test(e)&&e[e.length-1]!=="_"}function YL(e){var t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1;return"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}P4=/^[-+]?[0-9]+e/;function LL(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(X.isNegativeZero(e))return"-0.0";return n=e.toString(10),P4.test(n)?n.replace("e",".e"):n}function wL(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||X.isNegativeZero(e))}B4=new q("tag:yaml.org,2002:float",{kind:"scalar",resolve:XL,construct:YL,predicate:wL,represent:LL,defaultStyle:"lowercase"}),V4=v1.extend({implicit:[O4,k4,D4,B4]}),$4=V4,p1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),m1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function jL(e){return e!==null&&(p1.exec(e)!==null||m1.exec(e)!==null)}function bL(e){var o,i,a,r,c,l,d,u,h,n=0,s=null,t=p1.exec(e);if(t===null&&(t=m1.exec(e)),t===null)throw new Error("Date resolve error");if(i=+t[1],a=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(i,a,r));if(c=+t[4],l=+t[5],d=+t[6],t[7]){for(n=t[7].slice(0,3);n.length<3;)n+="0";n=+n}return t[9]&&(u=+t[10],h=+(t[11]||0),s=(u*60+h)*6e4,t[9]==="-"&&(s=-s)),o=new Date(Date.UTC(i,a,r,c,l,d,n)),s&&o.setTime(o.getTime()-s),o}function vL(e){return e.toISOString()}G4=new q("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:jL,construct:bL,instanceOf:Date,represent:vL});function gL(e){return e==="<<"||e===null}Q4=new q("tag:yaml.org,2002:merge",{kind:"scalar",resolve:gL}),yi=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
`;function hL(e){if(e===null)return!1;var t,n,s=0,o=e.length,i=yi;for(t=0;t<o;t++){if(n=i.indexOf(e.charAt(t)),n>64)continue;if(n<0)return!1;s+=6}return s%8===0}function uL(e){var s,o,i=e.replace(/[\r\n=]/g,""),a=i.length,r=yi,t=0,n=[];for(s=0;s<a;s++)s%4===0&&s&&(n.push(t>>16&255),n.push(t>>8&255),n.push(t&255)),t=t<<6|r.indexOf(i.charAt(s));return o=a%4*6,o===0?(n.push(t>>16&255),n.push(t>>8&255),n.push(t&255)):o===18?(n.push(t>>10&255),n.push(t>>2&255)):o===12&&n.push(t>>4&255),new Uint8Array(n)}function nL(e){var o,i,t="",s=0,a=e.length,n=yi;for(o=0;o<a;o++)o%3===0&&o&&(t+=n[s>>18&63],t+=n[s>>12&63],t+=n[s>>6&63],t+=n[s&63]),s=(s<<8)+e[o];return i=a%3,i===0?(t+=n[s>>18&63],t+=n[s>>12&63],t+=n[s>>6&63],t+=n[s&63]):i===2?(t+=n[s>>10&63],t+=n[s>>4&63],t+=n[s<<2&63],t+=n[64]):i===1&&(t+=n[s>>2&63],t+=n[s<<4&63],t+=n[64],t+=n[64]),t}function KN(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}s0=new q("tag:yaml.org,2002:binary",{kind:"scalar",resolve:hL,construct:uL,predicate:KN,represent:nL}),o0=Object.prototype.hasOwnProperty,i0=Object.prototype.toString;function UN(e){if(e===null)return!0;var t,n,s,o,a,i=[],r=e;for(t=0,a=r.length;t<a;t+=1){if(n=r[t],o=!1,i0.call(n)!=="[object Object]")return!1;for(s in n)if(o0.call(n,s)){if(o)return!1;o=!0}if(!o)return!1;if(i.indexOf(s)===-1)i.push(s);else return!1}return!0}function $N(e){return e!==null?e:[]}c0=new q("tag:yaml.org,2002:omap",{kind:"sequence",resolve:UN,construct:$N}),l0=Object.prototype.toString;function NN(e){if(e===null)return!0;var t,n,s,i,o=e,a=new Array(o.length);for(t=0,i=o.length;t<i;t+=1){if(n=o[t],l0.call(n)!=="[object Object]")return!1;if(s=Object.keys(n),s.length!==1)return!1;a[t]=[s[0],n[s[0]]]}return!0}function DN(e){if(e===null)return[];var t,n,s,i,o=e,a=new Array(o.length);for(t=0,i=o.length;t<i;t+=1)n=o[t],s=Object.keys(n),a[t]=[s[0],n[s[0]]];return a}h0=new q("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:NN,construct:DN}),m0=Object.prototype.hasOwnProperty;function wN(e){if(e===null)return!0;var t,n=e;for(t in n)if(m0.call(n,t)&&n[t]!==null)return!1;return!0}function jN(e){return e!==null?e:{}}g0=new q("tag:yaml.org,2002:set",{kind:"mapping",resolve:wN,construct:jN}),v0=$4.extend({implicit:[G4,Q4],explicit:[s0,c0,h0,g0]}),Et=Object.prototype.hasOwnProperty,Ws=1,c1=2,r1=3,Us=4,ki=1,x0=2,n1=3,E0=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,k0=/[\x85\u2028\u2029]/,A0=/[,[\]{}]/,Qu=/^(?:!|!!|![a-z-]+!)$/i,Gu=/^(?:!|[^,[\]{}])(?:%[0-9a-f]{2}|[0-9a-z-#;/?:@&=+$,_.!~*'()[\]])*$/i;function F0(e){return Object.prototype.toString.call(e)}function at(e){return e===10||e===13}function jn(e){return e===9||e===32}function de(e){return e===9||e===32||e===10||e===13}function Es(e){return e===44||e===91||e===93||e===123||e===125}function ND(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function DD(e){return e===120?2:e===117?4:e===85?8:0}function zD(e){return 48<=e&&e<=57?e-48:-1}function H0(e){return e===48?"\0":e===97?"":e===98?"":e===116?"	":e===9?"	":e===110?`
`:e===118?"":e===102?"":e===114?``:e===101?"":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?" ":e===80?" ":""}function TD(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}Bu=new Array(256),Iu=new Array(256);for(kn=0;kn<256;kn++)Bu[kn]=H0(kn)?1:0,Iu[kn]=H0(kn);function ED(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||v0,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function U0(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=a4(n),new mt(t,n)}function d(e,t){throw U0(e,t)}function Li(e,t){e.onWarning&&e.onWarning.call(null,U0(e,t))}Lu={YAML:function(t,n,s){var o,i,a;t.version!==null&&d(t,"duplication of %YAML directive"),s.length!==1&&d(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(s[0]),o===null&&d(t,"ill-formed argument of the YAML directive"),a=parseInt(o[1],10),i=parseInt(o[2],10),a!==1&&d(t,"unacceptable YAML version of the document"),t.version=s[0],t.checkLineBreaks=i<2,i!==1&&i!==2&&Li(t,"unsupported YAML version of the document")},TAG:function(t,n,s){var o,i;s.length!==2&&d(t,"TAG directive accepts exactly two arguments"),i=s[0],o=s[1],Qu.test(i)||d(t,"ill-formed tag handle (first argument) of the TAG directive"),Et.call(t.tagMap,i)&&d(t,'there is a previously declared suffix for "'+i+'" tag handle'),Gu.test(o)||d(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{d(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function Ut(e,t,n,s){var o,i,a,r;if(t<n){if(o=e.input.slice(t,n),s)for(i=0,r=o.length;i<r;i+=1)a=o.charCodeAt(i),a===9||32<=a&&a<=1114111||d(e,"expected valid JSON character");else E0.test(o)&&d(e,"the stream contains non-printable characters");e.result+=o}}function X0(e,t,n,s){var o,i,a,r;X.isObject(n)||d(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(n);for(i=0,r=a.length;i<r;i+=1)o=a[i],Et.call(t,o)||(t[o]=n[o],s[o]=!0)}function ds(e,t,n,s,o,i,a,r,c){var l,u;if(Array.isArray(o)){o=Array.prototype.slice.call(o);for(l=0,u=o.length;l<u;l+=1)Array.isArray(o[l])&&d(e,"nested arrays are not supported inside keys"),typeof o=="object"&&F0(o[l])==="[object Object]"&&(o[l]="[object Object]")}if(typeof o=="object"&&F0(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),s==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)X0(e,t,i[l],n);else X0(e,t,i,n);else!e.json&&!Et.call(n,o)&&Et.call(t,o)&&(e.line=a||e.line,e.lineStart=r||e.lineStart,e.position=c||e.position,d(e,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[o]=i,delete n[o];return t}function Su(e){var t=e.input.charCodeAt(e.position);t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):d(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function L(e,t,n){for(var o=0,s=e.input.charCodeAt(e.position);s!==0;){for(;jn(s);)s===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0)if(at(s))for(Su(e),s=e.input.charCodeAt(e.position),o++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position);else break}return n!==-1&&o!==0&&e.lineIndent<n&&Li(e,"deficient indentation"),o}function Ii(e){var n=e.position,t=e.input.charCodeAt(n);return!!((t===45||t===46)&&t===e.input.charCodeAt(n+1)&&t===e.input.charCodeAt(n+2)&&(n+=3,t=e.input.charCodeAt(n),t===0||de(t)))}function Cu(e,t){t===1?e.result+=" ":t>1&&(e.result+=X.repeat(`
`,t-1))}function Jz(e,t,n){var o,i,a,r,c,l,d,u,h=e.kind,m=e.result,s=e.input.charCodeAt(e.position);if(de(s)||Es(s)||s===35||s===38||s===42||s===33||s===124||s===62||s===39||s===34||s===37||s===64||s===96)return!1;if((s===63||s===45)&&(o=e.input.charCodeAt(e.position+1),de(o)||n&&Es(o)))return!1;for(e.kind="scalar",e.result="",a=i=e.position,r=!1;s!==0;){if(s===58){if(o=e.input.charCodeAt(e.position+1),de(o)||n&&Es(o))break}else if(s===35){if(l=e.input.charCodeAt(e.position-1),de(l))break}else if(e.position===e.lineStart&&Ii(e)||n&&Es(s))break;else if(at(s)){if(c=e.line,d=e.lineStart,u=e.lineIndent,L(e,!1,-1),e.lineIndent>=t){r=!0,s=e.input.charCodeAt(e.position);continue}e.position=i,e.line=c,e.lineStart=d,e.lineIndent=u;break}r&&(Ut(e,a,i,!1),Cu(e,e.line-c),a=i=e.position,r=!1),jn(s)||(i=e.position+1),s=e.input.charCodeAt(++e.position)}return Ut(e,a,i,!1),!!e.result||(e.kind=h,e.result=m,!1)}function Zz(e,t){if(n=e.input.charCodeAt(e.position),n!==39)return!1;e.kind="scalar",e.result="",e.position++,s=o=e.position;for(var n,s,o;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Ut(e,s,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)s=e.position,e.position++,o=e.position;else return!0;else at(n)?(Ut(e,s,o,!0),Cu(e,L(e,!1,t)),s=o=e.position):e.position===e.lineStart&&Ii(e)?d(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);d(e,"unexpected end of the stream within a single quoted scalar")}function Yz(e,t){if(n=e.input.charCodeAt(e.position),n!==34)return!1;for(e.kind="scalar",e.result="",e.position++,s=o=e.position;(n=e.input.charCodeAt(e.position))!==0;){if(n===34)return Ut(e,s,e.position,!0),e.position++,!0;if(n===92){if(Ut(e,s,e.position,!0),n=e.input.charCodeAt(++e.position),at(n))L(e,!1,t);else if(n<256&&Bu[n])e.result+=Iu[n],e.position++;else if((a=DD(n))>0){r=a,i=0;for(var n,s,o,i,a,r;r>0;r--)n=e.input.charCodeAt(++e.position),(a=ND(n))>=0?i=(i<<4)+a:d(e,"expected hexadecimal character");e.result+=TD(i),e.position++}else d(e,"unknown escape sequence");s=o=e.position}else at(n)?(Ut(e,s,o,!0),Cu(e,L(e,!1,t)),s=o=e.position):e.position===e.lineStart&&Ii(e)?d(e,"unexpected end of the document within a double quoted scalar"):(e.position++,o=e.position)}d(e,"unexpected end of the stream within a double quoted scalar")}function Iz(e,t){var s,o,i,a,r,c,l,u,h,m,f,v,p=!0,j=e.tag,b=e.anchor,g=Object.create(null),n=e.input.charCodeAt(e.position);if(n===91)m=93,l=!1,s=[];else if(n===123)m=125,l=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),n=e.input.charCodeAt(++e.position);n!==0;){if(L(e,!0,t),n=e.input.charCodeAt(e.position),n===m)return e.position++,e.tag=j,e.anchor=b,e.kind=l?"mapping":"sequence",e.result=s,!0;p?n===44&&d(e,"expected the node content, but found ','"):d(e,"missed comma between flow collection entries"),r=o=a=null,i=f=!1,n===63&&(v=e.input.charCodeAt(e.position+1),de(v)&&(i=f=!0,e.position++,L(e,!0,t))),c=e.line,h=e.lineStart,u=e.position,rs(e,t,Ws,!1,!0),r=e.tag,o=e.result,L(e,!0,t),n=e.input.charCodeAt(e.position),(f||e.line===c)&&n===58&&(i=!0,n=e.input.charCodeAt(++e.position),L(e,!0,t),rs(e,t,Ws,!1,!0),a=e.result),l?ds(e,s,g,r,o,a,c,h,u):i?s.push(ds(e,null,g,r,o,a,c,h,u)):s.push(o),L(e,!0,t),n=e.input.charCodeAt(e.position),n===44?(p=!0,n=e.input.charCodeAt(++e.position)):p=!1}d(e,"unexpected end of the stream within a flow collection")}function Oz(e,t){var c,u,h,r=ki,o=!1,i=!1,a=t,s=0,l=!1,n=e.input.charCodeAt(e.position);if(n===124)c=!1;else if(n===62)c=!0;else return!1;for(e.kind="scalar",e.result="";n!==0;)if(n=e.input.charCodeAt(++e.position),n===43||n===45)ki===r?r=n===43?n1:x0:d(e,"repeat of a chomping mode identifier");else if((u=zD(n))>=0)u===0?d(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):i?d(e,"repeat of an indentation width identifier"):(a=t+u-1,i=!0);else break;if(jn(n)){do n=e.input.charCodeAt(++e.position);while(jn(n))if(n===35)do n=e.input.charCodeAt(++e.position);while(!at(n)&&n!==0)}for(;n!==0;){for(Su(e),e.lineIndent=0,n=e.input.charCodeAt(e.position);(!i||e.lineIndent<a)&&n===32;)e.lineIndent++,n=e.input.charCodeAt(++e.position);if(!i&&e.lineIndent>a&&(a=e.lineIndent),at(n)){s++;continue}if(e.lineIndent<a){r===n1?e.result+=X.repeat(`
`,o?1+s:s):r===ki&&o&&(e.result+=`
`);break}for(c?jn(n)?(l=!0,e.result+=X.repeat(`
`,o?1+s:s)):l?(l=!1,e.result+=X.repeat(`
`,s+1)):s===0?o&&(e.result+=" "):e.result+=X.repeat(`
`,s):e.result+=X.repeat(`
`,o?1+s:s),o=!0,i=!0,s=0,h=e.position;!at(n)&&n!==0;)n=e.input.charCodeAt(++e.position);Ut(e,h,e.position,!1)}return!0}function r2(e,t){var n,o,i,r=e.tag,c=e.anchor,s=[],a=!1;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),n=e.input.charCodeAt(e.position);n!==0;){if(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,d(e,"tab characters must not be used in indentation")),n!==45)break;if(i=e.input.charCodeAt(e.position+1),!de(i))break;if(a=!0,e.position++,L(e,!0,-1)&&e.lineIndent<=t){s.push(null),n=e.input.charCodeAt(e.position);continue}if(o=e.line,rs(e,t,r1,!1,!0),s.push(e.result),L(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===o||e.lineIndent>t)&&n!==0)d(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return!!a&&(e.tag=r,e.anchor=c,e.kind="sequence",e.result=s,!0)}function _z(e,t,n){var s,c,l,u,p,g,j,v=e.tag,b=e.anchor,r={},f=Object.create(null),a=null,i=null,m=null,o=!1,h=!1;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),s=e.input.charCodeAt(e.position);s!==0;){if(!o&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,d(e,"tab characters must not be used in indentation")),j=e.input.charCodeAt(e.position+1),p=e.line,(s===63||s===58)&&de(j))s===63?(o&&(ds(e,r,f,a,i,null,u,l,c),a=i=m=null),h=!0,o=!0,g=!0):o?(o=!1,g=!0):d(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,s=j;else{if(u=e.line,l=e.lineStart,c=e.position,!rs(e,n,c1,!1,!0))break;if(e.line===p){for(s=e.input.charCodeAt(e.position);jn(s);)s=e.input.charCodeAt(++e.position);if(s===58)s=e.input.charCodeAt(++e.position),de(s)||d(e,"a whitespace character is expected after the key-value separator within a block mapping"),o&&(ds(e,r,f,a,i,null,u,l,c),a=i=m=null),h=!0,o=!1,g=!1,a=e.tag,i=e.result;else if(h)d(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=v,e.anchor=b,!0}else if(h)d(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=v,e.anchor=b,!0}if((e.line===p||e.lineIndent>t)&&(o&&(u=e.line,l=e.lineStart,c=e.position),rs(e,t,Us,!0,g)&&(o?i=e.result:m=e.result),o||(ds(e,r,f,a,i,m,u,l,c),a=i=m=null),L(e,!0,-1),s=e.input.charCodeAt(e.position)),(e.line===p||e.lineIndent>t)&&s!==0)d(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return o&&ds(e,r,f,a,i,null,u,l,c),h&&(e.tag=v,e.anchor=b,e.kind="mapping",e.result=r),h}function pz(e){var n,s,o,i=!1,a=!1,t=e.input.charCodeAt(e.position);if(t!==33)return!1;if(e.tag!==null&&d(e,"duplication of a tag property"),t=e.input.charCodeAt(++e.position),t===60?(i=!0,t=e.input.charCodeAt(++e.position)):t===33?(a=!0,s="!!",t=e.input.charCodeAt(++e.position)):s="!",o=e.position,i){do t=e.input.charCodeAt(++e.position);while(t!==0&&t!==62)e.position<e.length?(n=e.input.slice(o,e.position),t=e.input.charCodeAt(++e.position)):d(e,"unexpected end of the stream within a verbatim tag")}else{for(;t!==0&&!de(t);)t===33&&(a?d(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(o-1,e.position+1),Qu.test(s)||d(e,"named tag handle cannot contain such characters"),a=!0,o=e.position+1)),t=e.input.charCodeAt(++e.position);n=e.input.slice(o,e.position),A0.test(n)&&d(e,"tag suffix cannot contain flow indicator characters")}n&&!Gu.test(n)&&d(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{d(e,"tag name is malformed: "+n)}return i?e.tag=n:Et.call(e.tagMap,s)?e.tag=e.tagMap[s]+n:s==="!"?e.tag="!"+n:s==="!!"?e.tag="tag:yaml.org,2002:"+n:d(e,'undeclared tag handle "'+s+'"'),!0}function fz(e){if(t=e.input.charCodeAt(e.position),t!==38)return!1;e.anchor!==null&&d(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),n=e.position;for(var t,n;t!==0&&!de(t)&&!Es(t);)t=e.input.charCodeAt(++e.position);return e.position===n&&d(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function hz(e){if(t=e.input.charCodeAt(e.position),t!==42)return!1;t=e.input.charCodeAt(++e.position),s=e.position;for(var t,n,s;t!==0&&!de(t)&&!Es(t);)t=e.input.charCodeAt(++e.position);return e.position===s&&d(e,"name of an alias node must contain at least one character"),n=e.input.slice(s,e.position),Et.call(e.anchorMap,n)||d(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],L(e,!0,-1),!0}function rs(e,t,n,s,o){var i,r,c,l,h,m,f,g,v,a=1,p=!1,u=!1;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,g=v=l=Us===n||r1===n,s&&L(e,!0,-1)&&(p=!0,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)),a===1)for(;pz(e)||fz(e);)L(e,!0,-1)?(p=!0,l=g,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)):l=!1;if(l&&(l=p||o),(a===1||Us===n)&&(Ws===n||c1===n?c=t:c=t+1,f=e.position-e.lineStart,a===1?l&&(r2(e,f)||_z(e,f,c))||Iz(e,c)?u=!0:(v&&Oz(e,c)||Zz(e,c)||Yz(e,c)?u=!0:hz(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&d(e,"alias node should not have any properties")):Jz(e,c,Ws===n)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):a===0&&(u=l&&r2(e,f))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){{e.result!==null&&e.kind!=="scalar"&&d(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"');for(r=0,m=e.implicitTypes.length;r<m;r+=1)if(i=e.implicitTypes[r],i.resolve(e.result)){e.result=i.construct(e.result),e.tag=i.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}}else if(e.tag!=="!"){if(Et.call(e.typeMap[e.kind||"fallback"],e.tag))i=e.typeMap[e.kind||"fallback"][e.tag];else{i=null,h=e.typeMap.multi[e.kind||"fallback"];for(r=0,m=h.length;r<m;r+=1)if(e.tag.slice(0,h[r].tag.length)===h[r].tag){i=h[r];break}}i||d(e,"unknown tag !<"+e.tag+">"),e.result!==null&&i.kind!==e.kind&&d(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+i.kind+'", not "'+e.kind+'"'),i.resolve(e.result,e.tag)?(e.result=i.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):d(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function dz(e){var t,n,s,o,a=e.position,i=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(t=e.input.charCodeAt(e.position))!==0;){if(L(e,!0,-1),t=e.input.charCodeAt(e.position),e.lineIndent>0||t!==37)break;for(i=!0,t=e.input.charCodeAt(++e.position),s=e.position;t!==0&&!de(t);)t=e.input.charCodeAt(++e.position);for(n=e.input.slice(s,e.position),o=[],n.length<1&&d(e,"directive name must not be less than one character in length");t!==0;){for(;jn(t);)t=e.input.charCodeAt(++e.position);if(t===35){do t=e.input.charCodeAt(++e.position);while(t!==0&&!at(t))break}if(at(t))break;for(s=e.position;t!==0&&!de(t);)t=e.input.charCodeAt(++e.position);o.push(e.input.slice(s,e.position))}t!==0&&Su(e),Et.call(Lu,n)?Lu[n](e,n,o):Li(e,'unknown document directive "'+n+'"')}if(L(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,L(e,!0,-1)):i&&d(e,"directives end mark is expected"),rs(e,e.lineIndent-1,Us,!1,!0),L(e,!0,-1),e.checkLineBreaks&&k0.test(e.input.slice(a,e.position))&&Li(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ii(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,L(e,!0,-1));return}if(e.position<e.length-1)d(e,"end of the stream or a document separator is expected");else return}function f2(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new ED(e,t),s=e.indexOf("\0");for(s!==-1&&(n.position=s,d(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)dz(n);return n.documents}function rz(e,t,n){if(t!==null&&typeof t=="object"&&typeof n=="undefined"&&(n=t,t=null),s=f2(e,n),typeof t!="function")return s;for(var s,o=0,i=s.length;o<i;o+=1)t(s[o])}function az(e,t){var n=f2(e,t);if(n.length===0)return void 0;if(n.length===1)return n[0];throw new mt("expected a single document in the stream, but found more")}v2=rz,b2=az,j2={loadAll:v2,load:b2},y2=v1,_2=j2.load;const w2=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function oz(e,t){var s;const n=e.match(w2);if(n){const o=_2(n[1],{schema:y2});return o?.title&&((s=t.setDiagramTitle)==null?void 0:s.call(t,o.title)),e.slice(n[0].length)}return e}const sz=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,nz=/\s*%%.*\n/gm,Vi={},_u=function(e,t){e=e.replace(w2,"").replace(sz,"").replace(nz,`
`);for(const[n,{detector:s}]of Object.entries(Vi)){const o=s(e,t);if(o)return n}throw new Error(`No diagram type detected for text: ${e}`)},A2=(t,n,s)=>{if(Vi[t])throw new Error(`Detector with key ${t} already exists`);Vi[t]={detector:n,loader:s},e.debug(`Detector with key ${t} added${s?" with loader":""}`)},ZT=e=>Vi[e].loader,ju=function(e,t,n){const{depth:s,clobber:o}=Object.assign({depth:2,clobber:!1},n);return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(t=>ju(e,t,n)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(t=>{e.includes(t)||e.push(t)}),e):e===void 0||s<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(n=>{typeof t[n]=="object"&&(e[n]===void 0||typeof e[n]=="object")?(e[n]===void 0&&(e[n]=Array.isArray(t[n])?[]:{}),e[n]=ju(e[n],t[n],{depth:s-1,clobber:o})):(o||typeof e[n]!="object"&&typeof t[n]!="object")&&(e[n]=t[n])}),e)},V=ju;T2=typeof global=="object"&&global&&global.Object===Object&&global;const z2=T2;D2=typeof self=="object"&&self&&self.Object===Object&&self,N2=z2||D2||Function("return this")();const We=N2;R2=We.Symbol;const ye=R2;pu=Object.prototype,I2=pu.hasOwnProperty,B2=pu.toString,Zn=ye?ye.toStringTag:void 0;function pT(e){var t,n,s=I2.call(e,Zn),o=e[Zn];try{e[Zn]=void 0,t=!0}catch{}return n=B2.call(e),t&&(s?e[Zn]=o:delete e[Zn]),n}W2=Object.prototype,U2=W2.toString;function fT(e){return U2.call(e)}q2="[object Null]",Y2="[object Undefined]",mu=ye?ye.toStringTag:void 0;function zn(e){return e==null?e===void 0?Y2:q2:mu&&mu in Object(e)?pT(e):fT(e)}function je(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var mT="[object AsyncFunction]",hT="[object Function]",dT="[object GeneratorFunction]",VF="[object Proxy]";function Yn(e){if(!je(e))return!1;var t=zn(e);return t==hT||t==dT||t==mT||t==VF}s3=We["__core-js_shared__"];const lu=s3;cu=function(){var e=/[^.]+$/.exec(lu&&lu.keys&&lu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _F(e){return!!cu&&cu in e}r3=Function.prototype,c3=r3.toString;function on(e){if(e!=null){try{return c3.call(e)}catch{}try{return e+""}catch{}}return""}d3=/[\\^$.*+?()[\]{}|]/g,u3=/^\[object .+?Constructor\]$/,h3=Function.prototype,m3=Object.prototype,f3=h3.toString,p3=m3.hasOwnProperty,g3=RegExp("^"+f3.call(p3).replace(d3,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yF(e){if(!je(e)||_F(e))return!1;var t=Yn(e)?g3:u3;return t.test(on(e))}function vF(e,t){return e?.[t]}function Ln(e,t){var n=vF(e,t);return yF(n)?n:void 0}y3=Ln(Object,"create");const so=y3;function eF(){this.__data__=so?so(null):{},this.size=0}function XM(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}x3="__lodash_hash_undefined__",C3=Object.prototype,E3=C3.hasOwnProperty;function YM(e){var n,t=this.__data__;return so?(n=t[e],n===x3?void 0:n):E3.call(t,e)?t[e]:void 0}A3=Object.prototype,S3=A3.hasOwnProperty;function KM(e){var t=this.__data__;return so?t[e]!==void 0:S3.call(t,e)}F3="__lodash_hash_undefined__";function VM(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=so&&t===void 0?F3:t,this}function Fn(e){var t,n=-1,s=e==null?0:e.length;for(this.clear();++n<s;)t=e[n],this.set(t[0],t[1])}Fn.prototype.clear=eF,Fn.prototype.delete=XM,Fn.prototype.get=YM,Fn.prototype.has=KM,Fn.prototype.set=VM;function DM(){this.__data__=[],this.size=0}function bs(e,t){return e===t||e!==e&&t!==t}function ya(e,t){for(var n=e.length;n--;)if(bs(e[n][0],t))return n;return-1}R3=Array.prototype,P3=R3.splice;function zM(e){var s,t=this.__data__,n=ya(t,e);return!(n<0)&&(s=t.length-1,n==s?t.pop():P3.call(t,n,1),--this.size,!0)}function MM(e){var t=this.__data__,n=ya(t,e);return n<0?void 0:t[n][1]}function SM(e){return ya(this.__data__,e)>-1}function nM(e,t){var n=this.__data__,s=ya(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}function bt(e){var t,n=-1,s=e==null?0:e.length;for(this.clear();++n<s;)t=e[n],this.set(t[0],t[1])}bt.prototype.clear=DM,bt.prototype.delete=zM,bt.prototype.get=MM,bt.prototype.has=SM,bt.prototype.set=nM,W3=Ln(We,"Map");const io=W3;function HS(){this.size=0,this.__data__={hash:new Fn,map:new(io||bt),string:new Fn}}function PS(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ea(e,t){var n=e.__data__;return PS(t)?n[typeof t=="string"?"string":"hash"]:n.map}function TS(e){var t=Ea(this,e).delete(e);return this.size-=t?1:0,t}function FS(e){return Ea(this,e).get(e)}function SS(e){return Ea(this,e).has(e)}function xS(e,t){var n=Ea(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}function Dt(e){var t,n=-1,s=e==null?0:e.length;for(this.clear();++n<s;)t=e[n],this.set(t[0],t[1])}Dt.prototype.clear=HS,Dt.prototype.delete=TS,Dt.prototype.get=FS,Dt.prototype.has=SS,Dt.prototype.set=xS,eh="Expected a function";function zs(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(eh);var n=function(){var a,o=arguments,i=t?t.apply(this,o):o[0],s=n.cache;return s.has(i)?s.get(i):(a=e.apply(this,o),n.cache=s.set(i,a)||s,a)};return n.cache=new(zs.Cache||Dt),n}zs.Cache=Dt;const _S={curveBasis:Vn,curveBasisClosed:pk,curveBasisOpen:bk,curveLinear:pe,curveLinearClosed:yk,curveMonotoneX:wk,curveMonotoneY:xk,curveNatural:Ck,curveStep:Pk,curveStepAfter:tA,curveStepBefore:Gk},Ed=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,jS=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,bS=function(e,t){const s=ah(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(s)){const e=s.map(e=>e.args);En(e),n=V(n,[...e])}else n=s.args;if(n){let s=_u(e,t);["config"].forEach(e=>{n[e]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),n[s]=n[e],delete n[e])})}return n},ah=function(t,n=null){try{const i=new RegExp(`[%]{2}(?![{]${jS.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),e.debug(`Detecting diagram directive${n!==null?" type:"+n:""} based on the text:${t}`);let s;const o=[];for(;(s=Ed.exec(t))!==null;)if(s.index===Ed.lastIndex&&Ed.lastIndex++,s&&!n||n&&s[1]&&s[1].match(n)||n&&s[2]&&s[2].match(n)){const e=s[1]?s[1]:s[2],t=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;o.push({type:e,args:t})}return o.length===0&&o.push({type:t,args:null}),o.length===1?o[0]:o}catch(s){return e.error(`ERROR: ${s.message} - Unable to parse directive
      ${n!==null?" type:"+n:""} based on the text:${t}`),{type:null,args:null}}},vS=function(e,t){for(const[n,s]of t.entries())if(s.match(e))return n;return-1};function Ke(e,t){if(!e)return t;const n=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return _S[n]||t}function gS(e,t){const n=e.trim();if(n)return t.securityLevel!=="loose"?ht(n):n}const pS=(e,...t)=>{const s=e.split("."),o=s.length-1,i=s[o];let n=window;for(let e=0;e<o;e++)if(n=n[s[e]],!n)return;n[i](...t)};function Ma(e,t){return e&&t?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0}function dS(e){let t,o=0;e.forEach(e=>{o+=Ma(e,t),t=e});let s=o/2,n=void 0;return t=void 0,e.forEach(e=>{if(t&&!n){const o=Ma(e,t);if(o<s)s-=o;else{const i=s/o;i<=0&&(n=t),i>=1&&(n={x:e.x,y:e.y}),i>0&&i<1&&(n={x:(1-i)*t.x+i*e.x,y:(1-i)*t.y+i*e.y})}}t=e}),n}function lS(e){return e.length===1?e[0]:dS(e)}const tS=(t,n,s)=>{let i;e.info(`our points ${JSON.stringify(n)}`),n[0]!==s&&(n=n.reverse());const d=25;let a=d,o;i=void 0,n.forEach(e=>{if(i&&!o){const t=Ma(e,i);if(t<a)a-=t;else{const n=a/t;n<=0&&(o=i),n>=1&&(o={x:e.x,y:e.y}),n>0&&n<1&&(o={x:(1-n)*i.x+n*e.x,y:(1-n)*i.y+n*e.y})}}i=e});const c=t?10:5,l=Math.atan2(n[0].y-o.y,n[0].x-o.x),r={x:0,y:0};return r.x=Math.sin(l)*c+(n[0].x+o.x)/2,r.y=-Math.cos(l)*c+(n[0].y+o.y)/2,r};function JA(t,n,s){let o=JSON.parse(JSON.stringify(s)),r;e.info("our points",o),n!=="start_left"&&n!=="start_right"&&(o=o.reverse()),o.forEach(e=>{r=e});const u=25+t;let d=u,i;r=void 0,o.forEach(e=>{if(r&&!i){const t=Ma(e,r);if(t<d)d-=t;else{const n=d/t;n<=0&&(i=r),n>=1&&(i={x:e.x,y:e.y}),n>0&&n<1&&(i={x:(1-n)*r.x+n*e.x,y:(1-n)*r.y+n*e.y})}}r=e});const c=10+t*.5,l=Math.atan2(o[0].y-i.y,o[0].x-i.x),a={x:0,y:0};return a.x=Math.sin(l)*c+(o[0].x+i.x)/2,a.y=-Math.cos(l)*c+(o[0].y+i.y)/2,n==="start_left"&&(a.x=Math.sin(l+Math.PI)*c+(o[0].x+i.x)/2,a.y=-Math.cos(l+Math.PI)*c+(o[0].y+i.y)/2),n==="end_right"&&(a.x=Math.sin(l-Math.PI)*c+(o[0].x+i.x)/2-5,a.y=-Math.cos(l-Math.PI)*c+(o[0].y+i.y)/2-5),n==="end_left"&&(a.x=Math.sin(l)*c+(o[0].x+i.x)/2-5,a.y=-Math.cos(l)*c+(o[0].y+i.y)/2-5),a}function nn(e){let t="",n="";for(const s of e)s!==void 0&&(s.startsWith("color:")||s.startsWith("text-align:")?n=n+s+";":t=t+s+";");return{style:t,labelStyle:n}}let vh=0;const bh=()=>(vh++,"id-"+Math.random().toString(36).substr(2,12)+"-"+vh);function BA(e){let t="";const n="0123456789abcdef",s=n.length;for(let o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*s));return t}const yh=e=>BA(e.length),LA=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},yA=function(e,t){const o=t.text.replace(h.lineBreakRegex," "),n=e.append("text");n.attr("x",t.x),n.attr("y",t.y),n.style("text-anchor",t.anchor),n.style("font-family",t.fontFamily),n.style("font-size",t.fontSize),n.style("font-weight",t.fontWeight),n.attr("fill",t.fill),t.class!==void 0&&n.attr("class",t.class);const s=n.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.attr("fill",t.fill),s.text(o),n},Oh=zs((e,t,n)=>{if(!e)return e;if(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),h.lineBreakRegex.test(e))return e;const i=e.split(" "),o=[];let s="";return i.forEach((e,a)=>{const r=ot(`${e} `,n),c=ot(s,n);if(r>t){const{hyphenatedStrings:i,remainingWord:a}=vA(e,t,"-",n);o.push(s,...i),s=a}else c+r>=t?(o.push(s),s=e):s=[s,e].filter(Boolean).join(" ");const l=a+1,d=l===i.length;d&&o.push(s)}),o.filter(e=>e!=="").join(n.joinWith)},(e,t,n)=>`${e}${t}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),vA=zs((e,t,n="-",s)=>{s=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},s);const i=[...e],a=[];let o="";return i.forEach((e,r)=>{const c=`${o}${e}`,l=ot(c,s);if(l>=t){const e=r+1,t=i.length===e,s=`${c}${n}`;a.push(t?c:s),o=""}else o=c}),{hyphenatedStrings:a,remainingWord:o}},(e,t,n="-",s)=>`${e}${t}${n}${s.fontSize}${s.fontWeight}${s.fontFamily}`);function _d(e,t){return t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},t),jd(e,t).height}function ot(e,t){return t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},t),jd(e,t).width}const jd=zs((e,t)=>{t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},t);const{fontSize:a,fontFamily:r,fontWeight:c}=t;if(!e)return{width:0,height:0};const l=["sans-serif",r],d=e.split(h.lineBreakRegex),n=[],s=i("body");if(!s.remove)return{width:0,height:0,lineHeight:0};const o=s.append("svg");for(const s of l){let t=0;const e={width:0,height:0,lineHeight:0};for(const l of d){const n=LA();n.text=l;const i=yA(o,n).style("font-size",a).style("font-weight",c).style("font-family",s),r=(i._groups||i)[0][0].getBBox();e.width=Math.round(Math.max(e.width,r.width)),t=Math.round(r.height),e.height+=t,e.lineHeight=Math.round(Math.max(e.lineHeight,t))}n.push(e)}o.remove();const u=isNaN(n[1].height)||isNaN(n[1].width)||isNaN(n[1].lineHeight)||n[0].height>n[1].height&&n[0].width>n[1].width&&n[0].lineHeight>n[1].lineHeight?0:1;return n[u]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),hA=class iterator{constructor(e,t){this.deterministic=e,this.seed=t,this.count=t?t.length:0}next(){return this.deterministic?this.count++:Date.now()}};let $a;const nA=function(e){return $a=$a||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),$a.innerHTML=e,unescape($a.textContent)},En=t=>{if(e.debug("directiveSanitizer called with",t),typeof t=="object"&&(t.length?t.forEach(e=>En(e)):Object.keys(t).forEach(n=>{e.debug("Checking key",n),n.startsWith("__")&&(e.debug("sanitize deleting __ option",n),delete t[n]),n.includes("proto")&&(e.debug("sanitize deleting proto option",n),delete t[n]),n.includes("constr")&&(e.debug("sanitize deleting constr option",n),delete t[n]),n.includes("themeCSS")&&(e.debug("sanitizing themeCss option"),t[n]=Ka(t[n])),n.includes("fontFamily")&&(e.debug("sanitizing fontFamily option"),t[n]=Ka(t[n])),n.includes("altFontFamily")&&(e.debug("sanitizing altFontFamily option"),t[n]=Ka(t[n])),vP.includes(n)?typeof t[n]=="object"&&(e.debug("sanitize deleting object",n),En(t[n])):(e.debug("sanitize deleting option",n),delete t[n])})),t.themeVariables){const e=Object.keys(t.themeVariables);for(const s of e){const n=t.themeVariables[s];n&&n.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[s]="")}}e.debug("After sanitization",t)},Ka=e=>{let t=0,n=0;for(const s of e){if(t<n)return"{ /* ERROR: Unbalanced CSS */ }";s==="{"?t++:s==="}"&&n++}return t!==n?"{ /* ERROR: Unbalanced CSS */ }":e};function dd(e){return"str"in e}function kk(e){return e instanceof Error?e.message:String(e)}const Ek=(e,t,n,s)=>{if(!s)return;const o=e.node().getBBox();e.append("text").text(s).attr("x",o.x+o.width/2).attr("y",-n).attr("class",t)},f={assignWithDepth:V,wrapLabel:Oh,calculateTextHeight:_d,calculateTextWidth:ot,calculateTextDimensions:jd,detectInit:bS,detectDirective:ah,isSubstringInArray:vS,interpolateToCurve:Ke,calcLabelPosition:lS,calcCardinalityPosition:tS,calcTerminalLabelPosition:JA,formatUrl:gS,getStylesFromArray:nn,generateId:bh,random:yh,runFunc:pS,entityDecode:nA,initIdGenerator:hA,directiveSanitizer:En,sanitizeCss:Ka,insertTitle:Ek};rd="comm",ad="rule",id="decl",Ih="@import",Bh="@keyframes",Vh=Math.abs,Ya=String.fromCharCode;function Wh(e){return e.trim()}function sd(e,t,n){return e.replace(t,n)}function _k(e,t){return e.indexOf(t)}function Ga(e,t){return e.charCodeAt(t)|0}function ho(e,t,n){return e.slice(t,n)}function Yt(e){return e.length}function Xh(e){return e.length}function Ja(e,t){return t.push(e),e}mo=1,An=1,Yl=0,ge=0,S=0,Bn="";function $l(e,t,n,s,o,i,a){return{value:e,root:t,parent:n,type:s,props:o,children:i,line:mo,column:An,length:a,return:""}}function uk(){return S}function dk(){return S=ge>0?Ga(Bn,--ge):0,(An--,S===10)&&(An=1,mo--),S}function ze(){return S=ge<Yl?Ga(Bn,ge++):0,(An++,S===10)&&(An=1,mo++),S}function Sn(){return Ga(Bn,ge)}function pr(){return ge}function gr(e,t){return ho(Bn,e,t)}function Nl(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qE(e){return mo=An=1,Yl=Yt(Bn=e),ge=0,[]}function WE(e){return Bn="",e}function zl(e){return Wh(gr(ge-1,Tl(e===91?e+2:e===40?e+1:e)))}function BE(e){for(;S=Sn();)if(S<33)ze();else break;return Nl(e)>2||Nl(S)>3?"":" "}function PE(e,t){for(;--t&&ze();)if(S<48||S>102||S>57&&S<65||S>70&&S<97)break;return gr(e,pr()+(t<6&&Sn()==32&&ze()==32))}function Tl(e){for(;ze();)switch(S){case e:return ge;case 34:case 39:e!==34&&e!==39&&Tl(S);break;case 40:e===41&&Tl(e);break;case 92:ze();break}return ge}function FE(e,t){for(;ze();){if(e+S===47+10)break;if(e+S===42+42&&Sn()===47)break}return"/*"+gr(t,ge-1)+"*"+Ya(e===47?e:ze())}function OE(e){for(;!Nl(Sn());)ze();return gr(e,ge)}function _E(e){return WE(jr("",null,null,null,[""],e=qE(e),0,[0],e))}function jr(e,t,n,s,o,i,a,r,c){for(var j=0,g=0,u=a,O=0,y=0,v=0,m=1,w=1,p=1,d=0,b="",_=o,f=i,h=s,l=b;w;)switch(v=d,d=ze()){case 40:if(v!=108&&Ga(l,u-1)==58){_k(l+=sd(zl(d),"&","&"),"&")!=-1&&(p=-1);break}case 34:case 39:case 91:l+=zl(d);break;case 9:case 10:case 13:case 32:l+=BE(v);break;case 92:l+=PE(pr()-1,7);continue;case 47:switch(Sn()){case 42:case 47:Ja(fE(FE(ze(),pr()),t,n),c);break;default:l+="/"}break;case 123*m:r[j++]=Yt(l)*p;case 125*m:case 59:case 0:switch(d){case 0:case 125:w=0;case 59+g:y>0&&Yt(l)-u&&Ja(y>32?xm(l+";",s,n,u-1):xm(sd(l," ","")+";",s,n,u-2),c);break;case 59:l+=";";default:if(Ja(h=wm(l,t,n,j,g,o,r,b,_=[],f=[],u),i),d===123)if(g===0)jr(l,t,h,h,_,i,u,r,f);else switch(O){case 100:case 109:case 115:jr(e,h,h,s&&Ja(wm(e,h,h,0,0,o,r,b,o,_=[],u),f),o,f,u,r,s?_:f);break;default:jr(l,h,h,h,[""],f,0,r,f)}}j=g=y=0,m=p=1,b=l="",u=a;break;case 58:u=1+Yt(l),y=v;default:if(m<1)if(d==123)--m;else if(d==125&&m++==0&&dk()==125)continue;switch(l+=Ya(d),d*m){case 38:p=g>0?1:(l+="",-1);break;case 44:r[j++]=(Yt(l)-1)*p,p=1;break;case 64:Sn()===45&&(l+=zl(ze())),O=Sn(),g=u=Yt(b=l+=OE(pr())),d++;break;case 45:v===45&&Yt(l)==2&&(m=0)}}return i}function wm(e,t,n,s,o,i,a,r,c,l,d){m=o-1,u=o===0?i:[""],p=Xh(u);for(var u,m,p,f=0,g=0,j=0;f<s;++f)for(var h=0,v=ho(e,m+1,m=Vh(g=a[f])),b=e;h<p;++h)(b=Wh(g>0?u[h]+" "+v:sd(v,/&\f/g,u[h])))&&(c[j++]=b);return $l(e,t,n,o===0?ad:r,c,l,d)}function fE(e,t,n){return $l(e,t,n,rd,Ya(uk()),ho(e,2,-2),0)}function xm(e,t,n,s){return $l(e,t,n,id,ho(e,0,s),ho(e,s+1,-1),s)}function Al(e,t){for(var s="",o=Xh(e),n=0;n<o;n++)s+=t(e[n],n,e,t)||"";return s}function hE(e,t,n,s){switch(e.type){case Ih:case id:return e.return=e.return||e.value;case rd:return"";case Bh:return e.return=e.value+"{"+Al(e.children,s)+"}";case ad:e.value=e.props.join(",")}return Yt(n=Al(e.children,s))?e.return=e.value+"{"+n+"}":""}const dE="mermaid",JC="9.3.0",qC="Markdown-ish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",VC="./dist/mermaid.min.js",HC="./dist/mermaid.core.mjs",TC="./dist/mermaid.d.ts",mC={".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},dC=["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],rC={clean:"rimraf dist","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaidAPI.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts","docs:verify":"pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts --verify","docs:pre:vitepress":"rimraf src/vitepress && pnpm docs:code && ts-node-esm src/docs.mts --vitepress","docs:build:vitepress":"pnpm docs:pre:vitepress && vitepress build src/vitepress","docs:dev":'pnpm docs:pre:vitepress && concurrently "vitepress dev src/vitepress" "ts-node-esm src/docs.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell --config ../../cSpell.json "src/docs/**/*.md"',release:"pnpm build",prepublishOnly:"pnpm -w run build"},aC={type:"git",url:"https://github.com/mermaid-js/mermaid"},nC="Knut Sveidqvist",tC="MIT",Qx={ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},Gx={"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0","dagre-d3-es":"7.0.6",dompurify:"2.4.1",khroma:"^2.0.0","lodash-es":"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},qx={"@types/d3":"^7.4.0","@types/dompurify":"^2.4.0","@types/jsdom":"^20.0.1","@types/lodash-es":"^4.17.6","@types/micromatch":"^4.0.2","@types/prettier":"^2.7.1","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.42.1","@typescript-eslint/parser":"^5.42.1",chokidar:"^3.5.3",concurrently:"^7.5.0",coveralls:"^3.1.1",cspell:"^6.14.3",globby:"^13.1.2",jison:"^0.4.18","js-base64":"^3.7.2",jsdom:"^20.0.2",micromatch:"^4.0.5",moment:"^2.29.4","path-browserify":"^1.0.1",prettier:"^2.7.1",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.14.0",typedoc:"^0.23.18","typedoc-plugin-markdown":"^3.13.6",typescript:"^4.8.4","unist-util-flatmap":"^1.0.0",vitepress:"^1.0.0-alpha.28","vitepress-plugin-search":"^1.0.4-alpha.15"},kx=["dist","README.md"],Ox=["**/*.css","**/*.scss"],yr={name:dE,version:JC,description:qC,main:VC,module:HC,types:TC,exports:mC,keywords:dC,scripts:rC,repository:aC,author:nC,license:tC,standard:Qx,dependencies:Gx,devDependencies:qx,files:kx,sideEffects:Ox},hs=Object.freeze(gP);let ce=V({},hs),qm,$n=[],po=V({},hs);const xr=(e,t)=>{let n=V({},e),s={};for(const e of t)s8(e),s=V(s,e);if(n=V(n,s),s.theme&&s.theme in Ot){const e=V({},qm),t=V(e.themeVariables||{},s.themeVariables);n.theme&&n.theme in Ot&&(n.themeVariables=Ot[n.theme].getThemeVariables(t))}return po=n,l8(po),po},lx=e=>(ce=V({},hs),ce=V(ce,e),e.theme&&Ot[e.theme]&&(ce.themeVariables=Ot[e.theme].getThemeVariables(e.themeVariables)),xr(ce,$n),ce),rx=e=>{qm=V({},e)},ix=e=>(ce=V(ce,e),xr(ce,$n),ce),e8=()=>V({},ce),t8=e=>(l8(e),V(po,e),t()),t=()=>V({},po),s8=t=>{var n;["secure",...(n=ce.secure)!=null?n:[]].forEach(n=>{t[n]!==void 0&&(e.debug(`Denied attempt to modify a secure key ${n}`,t[n]),delete t[n])}),Object.keys(t).forEach(e=>{e.indexOf("__")===0&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&s8(t[e])})},ul=e=>{e.fontFamily&&(e.themeVariables?e.themeVariables.fontFamily||(e.themeVariables={fontFamily:e.fontFamily}):e.themeVariables={fontFamily:e.fontFamily}),$n.push(e),xr(ce,$n)},Hs=(e=ce)=>{$n=[],xr(e,$n)};cl=(e=>(e.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",e))(cl||{});const r8={},ex=t=>{if(r8[t])return;e.warn(cl[t]),r8[t]=!0},l8=e=>{if(!e)return;(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&ex("LAZY_LOAD_DEPRECATED")},JO=function(e,t){for(let n of t)e.attr(n[0],n[1])},QO=function(e,t,n){let s=new Map;return n?(s.set("width","100%"),s.set("style",`max-width: ${t}px;`)):(s.set("height",e),s.set("width",t)),s},Ve=function(e,t,n,s){const o=QO(t,n,s);JO(e,o)},Lr=function(t,n,s,o){const i=n.node().getBBox(),c=i.width,l=i.height;e.info(`SVG bounds: ${c}x${l}`,i);let a=0,r=0;e.info(`Graph bounds: ${a}x${r}`,t),a=c+s*2,r=l+s*2,e.info(`Calculated bounds: ${a}x${r}`),Ve(n,r,a,o);const d=`${i.x-s} ${i.y-s} ${i.width+2*s} ${i.height+2*s}`;n.attr("viewBox",d)},WO=e=>`g.classGroup text {
  fill: ${e.nodeBorder};
  fill: ${e.classText};
  stroke: none;
  font-family: ${e.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${e.classText};
}
.edgeLabel .label rect {
  fill: ${e.mainBkg};
}
.label text {
  fill: ${e.classText};
}
.edgeLabel .label span {
  background: ${e.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${e.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.classGroup line {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${e.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${e.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,Oo=WO,PO=e=>`
  .entityBox {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${e.attributeBackgroundColorOdd};
    stroke: ${e.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${e.attributeBackgroundColorEven};
    stroke: ${e.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${e.tertiaryColor};
    opacity: 0.7;
    background-color: ${e.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${e.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }    
`,v8=PO,TO=()=>``,j8=TO,bO=e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span {
    color: ${e.titleColor};
  }

  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,Vr=bO,vO=e=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${e.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${e.sectionBkgColor};
  }

  .section2 {
    fill: ${e.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${e.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${e.titleColor};
  }

  .sectionTitle1 {
    fill: ${e.titleColor};
  }

  .sectionTitle2 {
    fill: ${e.titleColor};
  }

  .sectionTitle3 {
    fill: ${e.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${e.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${e.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${e.fontFamily};
      fill: ${e.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${e.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${e.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${e.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${e.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${e.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${e.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${e.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${e.taskBkgColor};
    stroke: ${e.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${e.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${e.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${e.activeTaskBkgColor};
    stroke: ${e.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${e.doneTaskBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,O8=vO,gO=()=>``,C8=gO,pO=e=>`
  .pieCircle{
    stroke: ${e.pieStrokeColor};
    stroke-width : ${e.pieStrokeWidth};
    opacity : ${e.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${e.pieTitleTextSize};
    fill: ${e.pieTitleTextColor};
    font-family: ${e.fontFamily};
  }
  .slice {
    font-family: ${e.fontFamily};
    fill: ${e.pieSectionTextColor};
    font-size:${e.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${e.pieLegendTextColor};
    font-family: ${e.fontFamily};
    font-size: ${e.pieLegendTextSize};
  }
`,k8=pO,fO=e=>`

  marker {
    fill: ${e.relationColor};
    stroke: ${e.relationColor};
  }

  marker.cross {
    stroke: ${e.lineColor};
  }

  svg {
    font-family: ${e.fontFamily};
    font-size: ${e.fontSize};
  }

  .reqBox {
    fill: ${e.requirementBackground};
    fill-opacity: 100%;
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${e.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${e.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${e.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${e.relationLabelColor};
  }

`,S8=fO,mO=e=>`.actor {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }

  text.actor > tspan {
    fill: ${e.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${e.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${e.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${e.signalColor};
  }

  #arrowhead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .sequenceNumber {
    fill: ${e.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${e.signalColor};
  }

  #crosshead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .messageText {
    fill: ${e.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${e.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${e.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${e.noteBorderColor};
    fill: ${e.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${e.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation1 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation2 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${e.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
    stroke-width: 2px;
  }
`,F8=mO,hO=e=>`
defs #statediagram-barbEnd {
    fill: ${e.transitionColor};
    stroke: ${e.transitionColor};
  }
g.stateGroup text {
  fill: ${e.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${e.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${e.stateLabelColor};
}

g.stateGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.stateGroup line {
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${e.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${e.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${e.noteBorderColor};
  fill: ${e.noteBkgColor};

  text {
    fill: ${e.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${e.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${e.transitionLabelColor||e.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${e.transitionLabelColor||e.tertiaryTextColor};
}

.stateLabel text {
  fill: ${e.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node .fork-join {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node circle.state-end {
  fill: ${e.innerEndBackground};
  stroke: ${e.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${e.compositeBackground||e.background};
  // stroke: ${e.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${e.stateBkg||e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${e.lineColor};
}

.statediagram-cluster rect {
  fill: ${e.compositeTitleBackground};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${e.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${e.stateBorder||e.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${e.compositeBackground||e.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${e.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${e.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${e.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${e.lineColor};
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,Wr=hO,uO=e=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${e.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${e.textColor}
  }

  .legend {
    fill: ${e.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${e.textColor}
  }

  .face {
    ${e.faceColor?`fill: ${e.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${e.fillType0?`fill: ${e.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${e.fillType0?`fill: ${e.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${e.fillType0?`fill: ${e.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${e.fillType0?`fill: ${e.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${e.fillType0?`fill: ${e.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${e.fillType0?`fill: ${e.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${e.fillType0?`fill: ${e.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${e.fillType0?`fill: ${e.fillType7}`:""};
  }

  .actor-0 {
    ${e.actor0?`fill: ${e.actor0}`:""};
  }
  .actor-1 {
    ${e.actor1?`fill: ${e.actor1}`:""};
  }
  .actor-2 {
    ${e.actor2?`fill: ${e.actor2}`:""};
  }
  .actor-3 {
    ${e.actor3?`fill: ${e.actor3}`:""};
  }
  .actor-4 {
    ${e.actor4?`fill: ${e.actor4}`:""};
  }
  .actor-5 {
    ${e.actor5?`fill: ${e.actor5}`:""};
  }
`,N8=uO,cO=e=>`.person {
    stroke: ${e.personBorder};
    fill: ${e.personBkg};
  }
`,R8=cO,Kr={flowchart:Vr,"flowchart-v2":Vr,sequence:F8,gantt:O8,classDiagram:Oo,"classDiagram-v2":Oo,class:Oo,stateDiagram:Wr,state:Wr,info:C8,pie:k8,er:v8,error:j8,journey:N8,requirement:S8,c4:R8},Gw=(t,n,s)=>{let o="";return t in Kr&&Kr[t]?o=Kr[t](s):e.warn(`No theme found for ${t}`),` & {
    font-family: ${s.fontFamily};
    font-size: ${s.fontSize};
    fill: ${s.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${s.errorBkgColor};
  }
  & .error-text {
    fill: ${s.errorTextColor};
    stroke: ${s.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${s.lineColor};
    stroke: ${s.lineColor};
  }
  & .marker.cross {
    stroke: ${s.lineColor};
  }

  & svg {
    font-family: ${s.fontFamily};
    font-size: ${s.fontSize};
  }

  ${o}

  ${n}
`},Vw=(e,t)=>{Kr[e]=t},Iw=Gw,Lw=e,Dw=S1,xo=t,vw=e=>Me(e,xo()),K8=Lr,Yr={},B=(e,t,n)=>{if(Yr[e])throw new Error(`Diagram ${e} already registered.`);Yr[e]=t,n&&A2(e,n),Vw(e,t.styles),t.injectUtils&&t.injectUtils(Lw,Dw,xo,vw,K8)},G8=e=>{if(e in Yr)return Yr[e];throw new Error(`Diagram ${e} not found.`)};Xr=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},d=[1,4],a=[1,7],r=[1,5],b=[1,9],c=[1,6],l=[2,6],v=[1,16],m=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],i=[8,14,20,22,24,25,27,29,32,37,40],y=[8,13,14,20,22,24,25,27,29,32,37,40],w=[1,26],h=[6,8,14,50,55],t=[8,14,55],f=[1,53],p=[1,52],_=[8,14,30,33,35,38,55],o=[1,67],s=[1,68],n=[1,69],j=[8,14,33,35,42,55],g={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 3:return a[c];case 4:return a[c-1];case 5:return o.setDirection(a[c-3]),a[c-1];case 7:o.setOptions(a[c-1]),this.$=a[c];break;case 8:a[c-1]+=a[c],this.$=a[c-1];break;case 10:this.$=[];break;case 11:a[c-1].push(a[c]),this.$=a[c-1];break;case 12:this.$=a[c-1];break;case 17:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 18:case 19:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 20:o.addSection(a[c].substr(8)),this.$=a[c].substr(8);break;case 22:o.checkout(a[c]);break;case 23:o.branch(a[c]);break;case 24:o.branch(a[c-2],a[c]);break;case 25:o.cherryPick(a[c],"",void 0);break;case 26:o.cherryPick(a[c-2],"",a[c]);break;case 27:case 29:o.cherryPick(a[c-2],"","");break;case 28:o.cherryPick(a[c],"",a[c-2]);break;case 30:o.merge(a[c],"","","");break;case 31:o.merge(a[c-2],a[c],"","");break;case 32:o.merge(a[c-2],"",a[c],"");break;case 33:o.merge(a[c-2],"","",a[c]);break;case 34:o.merge(a[c-4],a[c],"",a[c-2]);break;case 35:o.merge(a[c-4],"",a[c],a[c-2]);break;case 36:o.merge(a[c-4],"",a[c-2],a[c]);break;case 37:o.merge(a[c-4],a[c-2],a[c],"");break;case 38:o.merge(a[c-4],a[c-2],"",a[c]);break;case 39:o.merge(a[c-4],a[c],a[c-2],"");break;case 40:o.merge(a[c-6],a[c-4],a[c-2],a[c]);break;case 41:o.merge(a[c-6],a[c],a[c-4],a[c-2]);break;case 42:o.merge(a[c-6],a[c-4],a[c],a[c-2]);break;case 43:o.merge(a[c-6],a[c-2],a[c-4],a[c]);break;case 44:o.merge(a[c-6],a[c],a[c-2],a[c-4]);break;case 45:o.merge(a[c-6],a[c-2],a[c],a[c-4]);break;case 46:o.commit(a[c]);break;case 47:o.commit("","",o.commitType.NORMAL,a[c]);break;case 48:o.commit("","",a[c],"");break;case 49:o.commit("","",a[c],a[c-2]);break;case 50:o.commit("","",a[c-2],a[c]);break;case 51:o.commit("",a[c],o.commitType.NORMAL,"");break;case 52:o.commit("",a[c-2],o.commitType.NORMAL,a[c]);break;case 53:o.commit("",a[c],o.commitType.NORMAL,a[c-2]);break;case 54:o.commit("",a[c-2],a[c],"");break;case 55:o.commit("",a[c],a[c-2],"");break;case 56:o.commit("",a[c-4],a[c-2],a[c]);break;case 57:o.commit("",a[c-4],a[c],a[c-2]);break;case 58:o.commit("",a[c-2],a[c-4],a[c]);break;case 59:o.commit("",a[c],a[c-4],a[c-2]);break;case 60:o.commit("",a[c],a[c-2],a[c-4]);break;case 61:o.commit("",a[c-2],a[c],a[c-4]);break;case 62:o.commit(a[c],"",o.commitType.NORMAL,"");break;case 63:o.commit(a[c],"",o.commitType.NORMAL,a[c-2]);break;case 64:o.commit(a[c-2],"",o.commitType.NORMAL,a[c]);break;case 65:o.commit(a[c-2],"",a[c],"");break;case 66:o.commit(a[c],"",a[c-2],"");break;case 67:o.commit(a[c],a[c-2],o.commitType.NORMAL,"");break;case 68:o.commit(a[c-2],a[c],o.commitType.NORMAL,"");break;case 69:o.commit(a[c-4],"",a[c-2],a[c]);break;case 70:o.commit(a[c-4],"",a[c],a[c-2]);break;case 71:o.commit(a[c-2],"",a[c-4],a[c]);break;case 72:o.commit(a[c],"",a[c-4],a[c-2]);break;case 73:o.commit(a[c],"",a[c-2],a[c-4]);break;case 74:o.commit(a[c-2],"",a[c],a[c-4]);break;case 75:o.commit(a[c-4],a[c],a[c-2],"");break;case 76:o.commit(a[c-4],a[c-2],a[c],"");break;case 77:o.commit(a[c-2],a[c],a[c-4],"");break;case 78:o.commit(a[c],a[c-2],a[c-4],"");break;case 79:o.commit(a[c],a[c-4],a[c-2],"");break;case 80:o.commit(a[c-2],a[c-4],a[c],"");break;case 81:o.commit(a[c-4],a[c],o.commitType.NORMAL,a[c-2]);break;case 82:o.commit(a[c-4],a[c-2],o.commitType.NORMAL,a[c]);break;case 83:o.commit(a[c-2],a[c],o.commitType.NORMAL,a[c-4]);break;case 84:o.commit(a[c],a[c-2],o.commitType.NORMAL,a[c-4]);break;case 85:o.commit(a[c],a[c-4],o.commitType.NORMAL,a[c-2]);break;case 86:o.commit(a[c-2],a[c-4],o.commitType.NORMAL,a[c]);break;case 87:o.commit(a[c-6],a[c-4],a[c-2],a[c]);break;case 88:o.commit(a[c-6],a[c-4],a[c],a[c-2]);break;case 89:o.commit(a[c-6],a[c-2],a[c-4],a[c]);break;case 90:o.commit(a[c-6],a[c],a[c-4],a[c-2]);break;case 91:o.commit(a[c-6],a[c-2],a[c],a[c-4]);break;case 92:o.commit(a[c-6],a[c],a[c-2],a[c-4]);break;case 93:o.commit(a[c-4],a[c-6],a[c-2],a[c]);break;case 94:o.commit(a[c-4],a[c-6],a[c],a[c-2]);break;case 95:o.commit(a[c-2],a[c-6],a[c-4],a[c]);break;case 96:o.commit(a[c],a[c-6],a[c-4],a[c-2]);break;case 97:o.commit(a[c-2],a[c-6],a[c],a[c-4]);break;case 98:o.commit(a[c],a[c-6],a[c-2],a[c-4]);break;case 99:o.commit(a[c],a[c-4],a[c-2],a[c-6]);break;case 100:o.commit(a[c-2],a[c-4],a[c],a[c-6]);break;case 101:o.commit(a[c],a[c-2],a[c-4],a[c-6]);break;case 102:o.commit(a[c-2],a[c],a[c-4],a[c-6]);break;case 103:o.commit(a[c-4],a[c-2],a[c],a[c-6]);break;case 104:o.commit(a[c-4],a[c],a[c-2],a[c-6]);break;case 105:o.commit(a[c-2],a[c-4],a[c-6],a[c]);break;case 106:o.commit(a[c],a[c-4],a[c-6],a[c-2]);break;case 107:o.commit(a[c-2],a[c],a[c-6],a[c-4]);break;case 108:o.commit(a[c],a[c-2],a[c-6],a[c-4]);break;case 109:o.commit(a[c-4],a[c-2],a[c-6],a[c]);break;case 110:o.commit(a[c-4],a[c],a[c-6],a[c-2]);break;case 111:this.$="";break;case 112:this.$=a[c];break;case 113:this.$=o.commitType.NORMAL;break;case 114:this.$=o.commitType.REVERSE;break;case 115:this.$=o.commitType.HIGHLIGHT;break;case 118:o.parseDirective("%%{","open_directive");break;case 119:o.parseDirective(a[c],"type_directive");break;case 120:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 121:o.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:d,8:a,14:r,46:8,50:b,55:c},{1:[3]},{3:10,4:2,5:3,6:d,8:a,14:r,46:8,50:b,55:c},{3:11,4:2,5:3,6:d,8:a,14:r,46:8,50:b,55:c},{7:12,8:l,9:[1,13],10:[1,14],11:15,14:v},e(m,[2,124]),e(m,[2,125]),e(m,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:l,11:15,14:v},{9:[1,21]},e(i,[2,10],{12:22,13:[1,23]}),e(y,[2,9]),{9:[1,25],48:24,53:w},e([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:l,11:15,14:v},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},e(y,[2,8]),e(h,[2,116]),{49:45,52:[1,46]},e(h,[2,121]),{1:[2,4]},{8:[1,47]},e(i,[2,11]),{4:48,8:a,14:r,55:c},e(i,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),{21:[1,49]},{23:[1,50]},e(t,[2,19]),e(t,[2,20]),e(t,[2,21]),{28:51,34:f,54:p},e(t,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:f,54:p},{33:[1,61],35:[1,62]},{28:63,34:f,54:p},{48:64,53:w},{53:[2,120]},{1:[2,5]},e(i,[2,12]),e(t,[2,17]),e(t,[2,18]),e(t,[2,22]),e(_,[2,122]),e(_,[2,123]),e(t,[2,46]),{34:[1,65]},{39:66,43:o,44:s,45:n},{34:[1,70]},{34:[1,71]},e(t,[2,112]),e(t,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},e(t,[2,23],{30:[1,78]}),e(h,[2,117]),e(t,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),e(t,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),e(j,[2,113]),e(j,[2,114]),e(j,[2,115]),e(t,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),e(t,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:o,44:s,45:n},{34:[1,93]},e(t,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:o,44:s,45:n},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:o,44:s,45:n},{34:[1,106]},{34:[1,107]},{39:108,43:o,44:s,45:n},{34:[1,109]},e(t,[2,31],{35:[1,111],38:[1,110]}),e(t,[2,32],{33:[1,113],35:[1,112]}),e(t,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},e(t,[2,24]),e(t,[2,49],{33:[1,120],42:[1,121]}),e(t,[2,53],{38:[1,122],42:[1,123]}),e(t,[2,63],{33:[1,125],38:[1,124]}),e(t,[2,50],{33:[1,126],42:[1,127]}),e(t,[2,55],{35:[1,128],42:[1,129]}),e(t,[2,66],{33:[1,131],35:[1,130]}),e(t,[2,52],{38:[1,132],42:[1,133]}),e(t,[2,54],{35:[1,134],42:[1,135]}),e(t,[2,67],{35:[1,137],38:[1,136]}),e(t,[2,64],{33:[1,139],38:[1,138]}),e(t,[2,65],{33:[1,141],35:[1,140]}),e(t,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:o,44:s,45:n},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:o,44:s,45:n},e(t,[2,26]),e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:o,44:s,45:n},{34:[1,153]},{39:154,43:o,44:s,45:n},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:o,44:s,45:n},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:o,44:s,45:n},{34:[1,167]},{39:168,43:o,44:s,45:n},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:o,44:s,45:n},{34:[1,173]},e(t,[2,37],{35:[1,174]}),e(t,[2,38],{38:[1,175]}),e(t,[2,36],{33:[1,176]}),e(t,[2,39],{35:[1,177]}),e(t,[2,34],{38:[1,178]}),e(t,[2,35],{33:[1,179]}),e(t,[2,60],{42:[1,180]}),e(t,[2,73],{33:[1,181]}),e(t,[2,61],{42:[1,182]}),e(t,[2,84],{38:[1,183]}),e(t,[2,74],{33:[1,184]}),e(t,[2,83],{38:[1,185]}),e(t,[2,59],{42:[1,186]}),e(t,[2,72],{33:[1,187]}),e(t,[2,58],{42:[1,188]}),e(t,[2,78],{35:[1,189]}),e(t,[2,71],{33:[1,190]}),e(t,[2,77],{35:[1,191]}),e(t,[2,57],{42:[1,192]}),e(t,[2,85],{38:[1,193]}),e(t,[2,56],{42:[1,194]}),e(t,[2,79],{35:[1,195]}),e(t,[2,80],{35:[1,196]}),e(t,[2,86],{38:[1,197]}),e(t,[2,70],{33:[1,198]}),e(t,[2,81],{38:[1,199]}),e(t,[2,69],{33:[1,200]}),e(t,[2,75],{35:[1,201]}),e(t,[2,76],{35:[1,202]}),e(t,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:o,44:s,45:n},{34:[1,206]},{34:[1,207]},{39:208,43:o,44:s,45:n},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:o,44:s,45:n},{34:[1,214]},{39:215,43:o,44:s,45:n},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:o,44:s,45:n},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:o,44:s,45:n},{34:[1,228]},{39:229,43:o,44:s,45:n},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:o,44:s,45:n},e(t,[2,40]),e(t,[2,42]),e(t,[2,41]),e(t,[2,43]),e(t,[2,45]),e(t,[2,44]),e(t,[2,101]),e(t,[2,102]),e(t,[2,99]),e(t,[2,100]),e(t,[2,104]),e(t,[2,103]),e(t,[2,108]),e(t,[2,107]),e(t,[2,106]),e(t,[2,105]),e(t,[2,110]),e(t,[2,109]),e(t,[2,98]),e(t,[2,97]),e(t,[2,96]),e(t,[2,95]),e(t,[2,93]),e(t,[2,94]),e(t,[2,92]),e(t,[2,91]),e(t,[2,90]),e(t,[2,89]),e(t,[2,87]),e(t,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},O=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return e}();g.lexer=O;function u(){this.yy={}}return u.prototype=g,g.Parser=u,new u}(),Xr.parser=Xr;const ow=Xr,sw=e=>e.match(/^\s*gitGraph/)!==null;let Gc="",Jr="",qc="";const Kc=e=>Me(e,t()),Ne=function(){Gc="",qc="",Jr=""},Oe=function(e){Gc=Kc(e).replace(/^\s+/g,"")},Fe=function(){return Gc||Jr},De=function(e){qc=Kc(e).replace(/\n\s+/g,`
`)},Pe=function(){return qc},pt=function(e){Jr=Kc(e)},yt=function(){return Jr};let rc=t().gitGraph.mainBranchName,__=t().gitGraph.mainBranchOrder,I={},ie=null,ko={};ko[rc]={name:rc,order:__};let R={};R[rc]=ie;let W=rc,jf="LR",yn=0;function Fc(){return yh({length:7})}const a_=function(e,t,n){O.parseDirective(this,e,t,n)};function Gy(e,t){const n=Object.create(null);return e.reduce((e,s)=>{const o=t(s);return n[o]||(n[o]=!0,e.push(s)),e},[])}const Uy=function(e){jf=e};let Cf={};const Vy=function(t){e.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{Cf=JSON.parse(t)}catch(t){e.error("error while parsing gitGraph options",t.message)}},By=function(){return Cf},Iy=function(n,s,o,i){e.debug("Entering commit:",n,s,o,i),s=h.sanitizeText(s,t()),n=h.sanitizeText(n,t()),i=h.sanitizeText(i,t());const a={id:s||yn+"-"+Fc(),message:n,seq:yn++,type:o||Ao.NORMAL,tag:i||"",parents:ie==null?[]:[ie.id],branch:W};ie=a,I[a.id]=a,R[W]=a.id,e.debug("in pushCommit "+a.id)},Hy=function(n,s){if(n=h.sanitizeText(n,t()),R[n]===void 0)R[n]=ie!=null?ie.id:null,ko[n]={name:n,order:s?parseInt(s,10):null},Tf(n),e.debug("in createBranch");else{let e=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+n+'")');throw e.hash={text:"branch "+n,token:"branch "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+n+'"']},e}},Dy=function(n,s,o,i){n=h.sanitizeText(n,t()),s=h.sanitizeText(s,t());const r=I[R[W]],c=I[R[n]];if(W===n){let e=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},e}if(r===void 0||!r){let e=new Error('Incorrect usage of "merge". Current branch ('+W+")has no commits");throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},e}if(R[n]===void 0){let e=new Error('Incorrect usage of "merge". Branch to be merged ('+n+") does not exist");throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+n]},e}if(c===void 0||!c){let e=new Error('Incorrect usage of "merge". Branch to be merged ('+n+") has no commits");throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},e}if(r===c){let e=new Error('Incorrect usage of "merge". Both branches have same head');throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},e}if(s&&I[s]!==void 0){let e=new Error('Incorrect usage of "merge". Commit with id:'+s+" already exists, use different custom Id");throw e.hash={text:"merge "+n+s+o+i,token:"merge "+n+s+o+i,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+n+" "+s+"_UNIQUE "+o+" "+i]},e}const a={id:s||yn+"-"+Fc(),message:"merged branch "+n+" into "+W,seq:yn++,parents:[ie==null?null:ie.id,R[n]],branch:W,type:Ao.MERGE,customType:o,customId:!!s,tag:i||""};ie=a,I[a.id]=a,R[W]=a.id,e.debug(R),e.debug("in mergeBranch")},zy=function(n,s,o){if(e.debug("Entering cherryPick:",n,s,o),n=h.sanitizeText(n,t()),s=h.sanitizeText(s,t()),o=h.sanitizeText(o,t()),!n||I[n]===void 0){let e=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw e.hash={text:"cherryPick "+n+" "+s,token:"cherryPick "+n+" "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},e}let i=I[n],a=i.branch;if(i.type===Ao.MERGE){let e=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw e.hash={text:"cherryPick "+n+" "+s,token:"cherryPick "+n+" "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},e}if(!s||I[s]===void 0){if(a===W){let e=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw e.hash={text:"cherryPick "+n+" "+s,token:"cherryPick "+n+" "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},e}const r=I[R[W]];if(r===void 0||!r){let e=new Error('Incorrect usage of "cherry-pick". Current branch ('+W+")has no commits");throw e.hash={text:"cherryPick "+n+" "+s,token:"cherryPick "+n+" "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},e}const t={id:yn+"-"+Fc(),message:"cherry-picked "+i+" into "+W,seq:yn++,parents:[ie==null?null:ie.id,i.id],branch:W,type:Ao.CHERRY_PICK,tag:o??"cherry-pick:"+i.id};ie=t,I[t.id]=t,R[W]=t.id,e.debug(R),e.debug("in cherryPick")}},Tf=function(e){if(e=h.sanitizeText(e,t()),R[e]===void 0){let t=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+e+'")');throw t.hash={text:"checkout "+e,token:"checkout "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+e+'"']},t}W=e;const n=R[W];ie=I[n]};function zf(e,t,n){const s=e.indexOf(t);s===-1?e.push(n):e.splice(s,1,n)}function Df(t){const n=t.reduce((e,t)=>e.seq>t.seq?e:t,t[0]);let s="";t.forEach(function(e){e===n?s+="	*":s+="	|"});const o=[s,n.id,n.seq];for(let e in R)R[e]===n.id&&o.push(e);if(e.debug(o.join(" ")),n.parents&&n.parents.length==2){const e=I[n.parents[0]];zf(t,n,e),t.push(I[n.parents[1]])}else if(n.parents.length==0)return;else{const e=I[n.parents];zf(t,n,e)}t=Gy(t,e=>e.id),Df(t)}const Sy=function(){e.debug(I);const t=If()[0];Df([t])},ky=function(){I={},ie=null;let e=t().gitGraph.mainBranchName,n=t().gitGraph.mainBranchOrder;R={},R[e]=null,ko={},ko[e]={name:e,order:n},W=e,yn=0,Ne()},Cy=function(){const e=Object.values(ko).map((e,t)=>e.order!==null?e:{...e,order:parseFloat(`0.${t}`,10)}).sort((e,t)=>e.order-t.order).map(({name:e})=>({name:e}));return e},yy=function(){return R},vy=function(){return I},If=function(){const t=Object.keys(I).map(function(e){return I[e]});return t.forEach(function(t){e.debug(t.id)}),t.sort((e,t)=>e.seq-t.seq),t},my=function(){return W},dy=function(){return jf},ly=function(){return ie},Ao={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},ay={parseDirective:a_,getConfig:()=>t().gitGraph,setDirection:Uy,setOptions:Vy,getOptions:By,commit:Iy,branch:Hy,merge:Dy,cherryPick:zy,checkout:Tf,prettyPrint:Sy,clear:ky,getBranchesAsObjArray:Cy,getBranches:yy,getCommits:vy,getCommitsArray:If,getCurrentBranch:my,getDirection:dy,getHead:ly,setAccTitle:Oe,getAccTitle:Fe,getAccDescription:Pe,setAccDescription:De,setDiagramTitle:pt,getDiagramTitle:yt,commitType:Ao};let So={};const fe={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},Cn=8;let ue={},pc={},gc=[],vc=0;const Wj=()=>{ue={},pc={},So={},vc=0,gc=[]},Bj=e=>{const n=document.createElementNS("http://www.w3.org/2000/svg","text");let t=[];typeof e=="string"?t=e.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(e)?t=e:t=[];for(const s of t){const e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","0"),e.setAttribute("class","row"),e.textContent=s.trim(),n.appendChild(e)}return n},t6=(e,t,n)=>{const a=xo().gitGraph,o=e.append("g").attr("class","commit-bullets"),i=e.append("g").attr("class","commit-labels");let s=0;const r=Object.keys(t),c=r.sort((e,n)=>t[e].seq-t[n].seq);c.forEach(e=>{const r=t[e],c=ue[r.branch].pos,l=s+10;if(n){let e,t=r.customType!==void 0&&r.customType!==""?r.customType:r.type;switch(t){case fe.NORMAL:e="commit-normal";break;case fe.REVERSE:e="commit-reverse";break;case fe.HIGHLIGHT:e="commit-highlight";break;case fe.MERGE:e="commit-merge";break;case fe.CHERRY_PICK:e="commit-cherry-pick";break;default:e="commit-normal"}if(t===fe.HIGHLIGHT){const t=o.append("rect");t.attr("x",l-10),t.attr("y",c-10),t.attr("height",20),t.attr("width",20),t.attr("class",`commit ${r.id} commit-highlight${ue[r.branch].index%Cn} ${e}-outer`),o.append("rect").attr("x",l-6).attr("y",c-6).attr("height",12).attr("width",12).attr("class",`commit ${r.id} commit${ue[r.branch].index%Cn} ${e}-inner`)}else if(t===fe.CHERRY_PICK)o.append("circle").attr("cx",l).attr("cy",c).attr("r",10).attr("class",`commit ${r.id} ${e}`),o.append("circle").attr("cx",l-3).attr("cy",c+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} ${e}`),o.append("circle").attr("cx",l+3).attr("cy",c+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} ${e}`),o.append("line").attr("x1",l+3).attr("y1",c+1).attr("x2",l).attr("y2",c-5).attr("stroke","#fff").attr("class",`commit ${r.id} ${e}`),o.append("line").attr("x1",l-3).attr("y1",c+1).attr("x2",l).attr("y2",c-5).attr("stroke","#fff").attr("class",`commit ${r.id} ${e}`);else{const n=o.append("circle");if(n.attr("cx",l),n.attr("cy",c),n.attr("r",r.type===fe.MERGE?9:10),n.attr("class",`commit ${r.id} commit${ue[r.branch].index%Cn}`),t===fe.MERGE){const t=o.append("circle");t.attr("cx",l),t.attr("cy",c),t.attr("r",6),t.attr("class",`commit ${e} ${r.id} commit${ue[r.branch].index%Cn}`)}if(t===fe.REVERSE){const t=o.append("path");t.attr("d",`M ${l-5},${c-5}L${l+5},${c+5}M${l-5},${c+5}L${l+5},${c-5}`).attr("class",`commit ${e} ${r.id} commit${ue[r.branch].index%Cn}`)}}}if(pc[r.id]={x:s+10,y:c},n){const t=4,e=2;if(r.type!==fe.CHERRY_PICK&&(r.customId&&r.type===fe.MERGE||r.type!==fe.MERGE)&&a.showCommitLabel){const n=i.append("g"),l=n.insert("rect").attr("class","commit-label-bkg"),o=n.append("text").attr("x",s).attr("y",c+25).attr("class","commit-label").text(r.id);let t=o.node().getBBox();if(l.attr("x",s+10-t.width/2-e).attr("y",c+13.5).attr("width",t.width+2*e).attr("height",t.height+2*e),o.attr("x",s+10-t.width/2),a.rotateCommitLabel){let e=-7.5-(t.width+10)/25*9.5,o=10+t.width/25*8.5;n.attr("transform","translate("+e+", "+o+") rotate("+-45+", "+s+", "+c+")")}}if(r.tag){const d=i.insert("polygon"),u=i.append("circle"),l=i.append("text").attr("y",c-16).attr("class","tag-label").text(r.tag);let n=l.node().getBBox();l.attr("x",s+10-n.width/2);const a=n.height/2,o=c-19.2;d.attr("class","tag-label-bkg").attr("points",`
          ${s-n.width/2-t/2},${o+e}
          ${s-n.width/2-t/2},${o-e}
          ${s+10-n.width/2-t},${o-a-e}
          ${s+10+n.width/2+t},${o-a-e}
          ${s+10+n.width/2+t},${o+a+e}
          ${s+10-n.width/2-t},${o+a+e}`),u.attr("cx",s-n.width/2+t/2).attr("cy",o).attr("r",1.5).attr("class","tag-hole")}}s+=50,s>vc&&(vc=s)})},Hj=(e,t,n)=>{const s=Object.keys(n),o=s.filter(s=>n[s].branch===t.branch&&n[s].seq>e.seq&&n[s].seq<t.seq);return o.length>0},wc=(e,t,n=0)=>{const s=e+Math.abs(e-t)/2;if(n>5)return s;let o=gc.every(e=>Math.abs(e-s)>=10);if(o)return gc.push(s),s;const i=Math.abs(e-t);return wc(e,t-i/5,n+1)},Lj=(e,t,n,s)=>{const o=pc[t.id],i=pc[n.id],h=Hj(t,n,s);let c="",u="",a=0,r=0,d=ue[n.branch].index,l;if(h){c="A 10 10, 0, 0, 0,",u="A 10 10, 0, 0, 1,",a=10,r=10,d=ue[n.branch].index;const e=o.y<i.y?wc(o.y,i.y):wc(i.y,o.y);o.y<i.y?l=`M ${o.x} ${o.y} L ${o.x} ${e-a} ${c} ${o.x+r} ${e} L ${i.x-a} ${e} ${u} ${i.x} ${e+r} L ${i.x} ${i.y}`:l=`M ${o.x} ${o.y} L ${o.x} ${e+a} ${u} ${o.x+r} ${e} L ${i.x-a} ${e} ${c} ${i.x} ${e-r} L ${i.x} ${i.y}`}else o.y<i.y&&(c="A 20 20, 0, 0, 0,",a=20,r=20,d=ue[n.branch].index,l=`M ${o.x} ${o.y} L ${o.x} ${i.y-a} ${c} ${o.x+r} ${i.y} L ${i.x} ${i.y}`),o.y>i.y&&(c="A 20 20, 0, 0, 0,",a=20,r=20,d=ue[t.branch].index,l=`M ${o.x} ${o.y} L ${i.x-a} ${o.y} ${c} ${i.x} ${o.y-r} L ${i.x} ${i.y}`),o.y===i.y&&(d=ue[t.branch].index,l=`M ${o.x} ${o.y} L ${o.x} ${i.y-a} ${c} ${o.x+r} ${i.y} L ${i.x} ${i.y}`);e.append("path").attr("d",l).attr("class","arrow arrow"+d%Cn)},zj=(e,t)=>{const n=e.append("g").attr("class","commit-arrows");Object.keys(t).forEach(e=>{const s=t[e];s.parents&&s.parents.length>0&&s.parents.forEach(e=>{Lj(n,t[e],s,t)})})},Fj=(e,t)=>{const s=xo().gitGraph,n=e.append("g");t.forEach((e,t)=>{const r=t%Cn,i=ue[e.name].pos,a=n.append("line");a.attr("x1",0),a.attr("y1",i),a.attr("x2",vc),a.attr("y2",i),a.attr("class","branch branch"+r),gc.push(i);let u=e.name;const c=Bj(u),l=n.insert("rect"),h=n.insert("g").attr("class","branchLabel"),d=h.insert("g").attr("class","label branch-label"+r);d.node().appendChild(c);let o=c.getBBox();l.attr("class","branchLabelBkg label"+r).attr("rx",4).attr("ry",4).attr("x",-o.width-4-(s.rotateCommitLabel===!0?30:0)).attr("y",-o.height/2+8).attr("width",o.width+18).attr("height",o.height+4),d.attr("transform","translate("+(-o.width-14-(s.rotateCommitLabel===!0?30:0))+", "+(i-o.height/2-1)+")"),l.attr("transform","translate("+-19+", "+(i-o.height/2)+")")})},Mj=function(t,n,s,o){var c;Wj();const l=xo(),r=l.gitGraph;e.debug("in gitgraph renderer",t+`
`,"id:",n,s),So=o.db.getCommits();const d=o.db.getBranchesAsObjArray();let u=0;d.forEach((e,t)=>{ue[e.name]={pos:u,index:t},u+=50+(r.rotateCommitLabel?40:0)});const a=i(`[id="${n}"]`);t6(a,So,!1),r.showBranches&&Fj(a,d),zj(a,So),t6(a,So,!0),f.insertTitle(a,"gitTitleText",r.titleTopMargin,o.db.getDiagramTitle()),K8(void 0,a,r.diagramPadding,(c=r.useMaxWidth)!=null?c:l.useMaxWidth)},Sj={draw:Mj},Ej=e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
  }
`,Cj=Ej;Mo=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},oe=[1,6],fe=[1,7],re=[1,8],ae=[1,9],ue=[1,16],me=[1,11],pe=[1,12],le=[1,13],ce=[1,14],he=[1,15],ge=[1,27],X=[1,33],G=[1,34],Y=[1,35],q=[1,36],K=[1,37],b=[1,72],j=[1,73],I=[1,74],_=[1,75],w=[1,76],O=[1,77],x=[1,78],C=[1,38],E=[1,39],k=[1,40],A=[1,41],S=[1,42],M=[1,43],F=[1,44],r=[1,45],z=[1,46],D=[1,47],a=[1,48],L=[1,49],R=[1,50],P=[1,51],h=[1,52],y=[1,53],T=[1,54],V=[1,55],$=[1,56],W=[1,57],B=[1,59],H=[1,60],N=[1,61],v=[1,62],g=[1,63],p=[1,64],f=[1,65],m=[1,66],u=[1,67],d=[1,68],l=[1,69],Q=[24,52],se=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Z=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],o=[1,94],s=[1,95],n=[1,96],t=[1,97],i=[15,24,52],de=[7,8,9,10,18,22,25,26,27,28],ie=[15,24,43,52],J=[15,24,43,52,86,87,89,90],U=[15,43],te=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],ee={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 4:o.setDirection("TB");break;case 5:o.setDirection("BT");break;case 6:o.setDirection("RL");break;case 7:o.setDirection("LR");break;case 11:o.parseDirective("%%{","open_directive");break;case 12:break;case 13:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 14:o.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:o.setC4Type(a[c-3]);break;case 26:o.setTitle(a[c].substring(6)),this.$=a[c].substring(6);break;case 27:o.setAccDescription(a[c].substring(15)),this.$=a[c].substring(15);break;case 28:this.$=a[c].trim(),o.setTitle(this.$);break;case 29:case 30:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 35:case 36:a[c].splice(2,0,"ENTERPRISE"),o.addPersonOrSystemBoundary(...a[c]),this.$=a[c];break;case 37:o.addPersonOrSystemBoundary(...a[c]),this.$=a[c];break;case 38:a[c].splice(2,0,"CONTAINER"),o.addContainerBoundary(...a[c]),this.$=a[c];break;case 39:o.addDeploymentNode("node",...a[c]),this.$=a[c];break;case 40:o.addDeploymentNode("nodeL",...a[c]),this.$=a[c];break;case 41:o.addDeploymentNode("nodeR",...a[c]),this.$=a[c];break;case 42:o.popBoundaryParseStack();break;case 46:o.addPersonOrSystem("person",...a[c]),this.$=a[c];break;case 47:o.addPersonOrSystem("external_person",...a[c]),this.$=a[c];break;case 48:o.addPersonOrSystem("system",...a[c]),this.$=a[c];break;case 49:o.addPersonOrSystem("system_db",...a[c]),this.$=a[c];break;case 50:o.addPersonOrSystem("system_queue",...a[c]),this.$=a[c];break;case 51:o.addPersonOrSystem("external_system",...a[c]),this.$=a[c];break;case 52:o.addPersonOrSystem("external_system_db",...a[c]),this.$=a[c];break;case 53:o.addPersonOrSystem("external_system_queue",...a[c]),this.$=a[c];break;case 54:o.addContainer("container",...a[c]),this.$=a[c];break;case 55:o.addContainer("container_db",...a[c]),this.$=a[c];break;case 56:o.addContainer("container_queue",...a[c]),this.$=a[c];break;case 57:o.addContainer("external_container",...a[c]),this.$=a[c];break;case 58:o.addContainer("external_container_db",...a[c]),this.$=a[c];break;case 59:o.addContainer("external_container_queue",...a[c]),this.$=a[c];break;case 60:o.addComponent("component",...a[c]),this.$=a[c];break;case 61:o.addComponent("component_db",...a[c]),this.$=a[c];break;case 62:o.addComponent("component_queue",...a[c]),this.$=a[c];break;case 63:o.addComponent("external_component",...a[c]),this.$=a[c];break;case 64:o.addComponent("external_component_db",...a[c]),this.$=a[c];break;case 65:o.addComponent("external_component_queue",...a[c]),this.$=a[c];break;case 67:o.addRel("rel",...a[c]),this.$=a[c];break;case 68:o.addRel("birel",...a[c]),this.$=a[c];break;case 69:o.addRel("rel_u",...a[c]),this.$=a[c];break;case 70:o.addRel("rel_d",...a[c]),this.$=a[c];break;case 71:o.addRel("rel_l",...a[c]),this.$=a[c];break;case 72:o.addRel("rel_r",...a[c]),this.$=a[c];break;case 73:o.addRel("rel_b",...a[c]),this.$=a[c];break;case 74:a[c].splice(0,1),o.addRel("rel",...a[c]),this.$=a[c];break;case 75:o.updateElStyle("update_el_style",...a[c]),this.$=a[c];break;case 76:o.updateRelStyle("update_rel_style",...a[c]),this.$=a[c];break;case 77:o.updateLayoutConfig("update_layout_config",...a[c]),this.$=a[c];break;case 78:this.$=[a[c]];break;case 79:a[c].unshift(a[c-1]),this.$=a[c];break;case 80:case 82:this.$=a[c].trim();break;case 81:let e={};e[a[c-1].trim()]=a[c].trim(),this.$=e;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:oe,8:fe,9:re,10:ae,11:5,12:10,18:ue,22:me,25:pe,26:le,27:ce,28:he},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:oe,8:fe,9:re,10:ae,11:5,12:10,18:ue,22:me,25:pe,26:le,27:ce,28:he},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:ge},e([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{23:79,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{23:80,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{23:81,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{23:82,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},e(Q,[2,20],{53:32,39:58,40:70,42:71,30:87,44:b,46:j,47:I,48:_,49:w,50:O,51:x,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l}),e(Q,[2,21]),e(se,[2,23],{15:[1,88]}),e(Q,[2,43],{15:[1,89]}),e(Z,[2,26]),e(Z,[2,27]),{35:[1,90]},{37:[1,91]},e(Z,[2,30]),{45:92,85:93,86:o,87:s,89:n,90:t},{45:98,85:93,86:o,87:s,89:n,90:t},{45:99,85:93,86:o,87:s,89:n,90:t},{45:100,85:93,86:o,87:s,89:n,90:t},{45:101,85:93,86:o,87:s,89:n,90:t},{45:102,85:93,86:o,87:s,89:n,90:t},{45:103,85:93,86:o,87:s,89:n,90:t},{45:104,85:93,86:o,87:s,89:n,90:t},{45:105,85:93,86:o,87:s,89:n,90:t},{45:106,85:93,86:o,87:s,89:n,90:t},{45:107,85:93,86:o,87:s,89:n,90:t},{45:108,85:93,86:o,87:s,89:n,90:t},{45:109,85:93,86:o,87:s,89:n,90:t},{45:110,85:93,86:o,87:s,89:n,90:t},{45:111,85:93,86:o,87:s,89:n,90:t},{45:112,85:93,86:o,87:s,89:n,90:t},{45:113,85:93,86:o,87:s,89:n,90:t},{45:114,85:93,86:o,87:s,89:n,90:t},{45:115,85:93,86:o,87:s,89:n,90:t},{45:116,85:93,86:o,87:s,89:n,90:t},e(i,[2,66]),{45:117,85:93,86:o,87:s,89:n,90:t},{45:118,85:93,86:o,87:s,89:n,90:t},{45:119,85:93,86:o,87:s,89:n,90:t},{45:120,85:93,86:o,87:s,89:n,90:t},{45:121,85:93,86:o,87:s,89:n,90:t},{45:122,85:93,86:o,87:s,89:n,90:t},{45:123,85:93,86:o,87:s,89:n,90:t},{45:124,85:93,86:o,87:s,89:n,90:t},{45:125,85:93,86:o,87:s,89:n,90:t},{45:126,85:93,86:o,87:s,89:n,90:t},{45:127,85:93,86:o,87:s,89:n,90:t},{30:128,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{15:[1,130],43:[1,129]},{45:131,85:93,86:o,87:s,89:n,90:t},{45:132,85:93,86:o,87:s,89:n,90:t},{45:133,85:93,86:o,87:s,89:n,90:t},{45:134,85:93,86:o,87:s,89:n,90:t},{45:135,85:93,86:o,87:s,89:n,90:t},{45:136,85:93,86:o,87:s,89:n,90:t},{45:137,85:93,86:o,87:s,89:n,90:t},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},e(de,[2,9]),{14:142,21:ge},{21:[2,13]},{1:[2,15]},e(Q,[2,22]),e(se,[2,24],{31:31,29:143,32:X,33:G,34:Y,36:q,38:K}),e(Q,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:X,33:G,34:Y,36:q,38:K,44:b,46:j,47:I,48:_,49:w,50:O,51:x,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l}),e(Z,[2,28]),e(Z,[2,29]),e(i,[2,46]),e(ie,[2,78],{85:93,45:145,86:o,87:s,89:n,90:t}),e(J,[2,80]),{88:[1,146]},e(J,[2,82]),e(J,[2,83]),e(i,[2,47]),e(i,[2,48]),e(i,[2,49]),e(i,[2,50]),e(i,[2,51]),e(i,[2,52]),e(i,[2,53]),e(i,[2,54]),e(i,[2,55]),e(i,[2,56]),e(i,[2,57]),e(i,[2,58]),e(i,[2,59]),e(i,[2,60]),e(i,[2,61]),e(i,[2,62]),e(i,[2,63]),e(i,[2,64]),e(i,[2,65]),e(i,[2,67]),e(i,[2,68]),e(i,[2,69]),e(i,[2,70]),e(i,[2,71]),e(i,[2,72]),e(i,[2,73]),e(i,[2,74]),e(i,[2,75]),e(i,[2,76]),e(i,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},e(U,[2,35]),e(U,[2,36]),e(U,[2,37]),e(U,[2,38]),e(U,[2,39]),e(U,[2,40]),e(U,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},e(se,[2,25]),e(Q,[2,45]),e(ie,[2,79]),e(J,[2,81]),e(i,[2,31]),e(i,[2,42]),e(te,[2,32]),e(te,[2,33],{15:[1,152]}),e(de,[2,10]),e(te,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},ve=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[}])/,/^(?:[^}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return e}();ee.lexer=ve;function ne(){this.yy={}}return ne.prototype=ee,ee.Parser=ne,new ne}(),Mo.parser=Mo;const _j=Mo,ij=e=>e.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null;let Ue=[],Kt=[""],se="global",Be="",Qe=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],To=[],Sc="",Mc=!1,hc=4,uc=2;const kb=function(){return x6},Ob=function(e){let n=Me(e,t());x6=n},bb=function(e,t,n){O.parseDirective(this,e,t,n)},mb=function(e,t,n,s,o,i,a,r,c){if(e==null||t===void 0||t===null||n===void 0||n===null||s===void 0||s===null)return;let l={};const d=To.find(e=>e.from===t&&e.to===n);if(d?l=d:To.push(l),l.type=e,l.from=t,l.to=n,l.label={text:s},o==null)l.techn={text:""};else if(typeof o=="object"){let[e,t]=Object.entries(o)[0];l[e]={text:t}}else l.techn={text:o};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[e,t]=Object.entries(i)[0];l[e]={text:t}}else l.descr={text:i};if(typeof a=="object"){let[e,t]=Object.entries(a)[0];l[e]=t}else l.sprite=a;if(typeof r=="object"){let[e,t]=Object.entries(r)[0];l[e]=t}else l.tags=r;if(typeof c=="object"){let[e,t]=Object.entries(c)[0];l[e]=t}else l.link=c;l.wrap=Vt()},db=function(e,t,n,s,o,i,a){if(t===null||n===null)return;let r={};const c=Ue.find(e=>e.alias===t);if(c&&t===c.alias?r=c:(r.alias=t,Ue.push(r)),n==null?r.label={text:""}:r.label={text:n},s==null)r.descr={text:""};else if(typeof s=="object"){let[e,t]=Object.entries(s)[0];r[e]={text:t}}else r.descr={text:s};if(typeof o=="object"){let[e,t]=Object.entries(o)[0];r[e]=t}else r.sprite=o;if(typeof i=="object"){let[e,t]=Object.entries(i)[0];r[e]=t}else r.tags=i;if(typeof a=="object"){let[e,t]=Object.entries(a)[0];r[e]=t}else r.link=a;r.typeC4Shape={text:e},r.parentBoundary=se,r.wrap=Vt()},cb=function(e,t,n,s,o,i,a,r){if(t===null||n===null)return;let c={};const l=Ue.find(e=>e.alias===t);if(l&&t===l.alias?c=l:(c.alias=t,Ue.push(c)),n==null?c.label={text:""}:c.label={text:n},s==null)c.techn={text:""};else if(typeof s=="object"){let[e,t]=Object.entries(s)[0];c[e]={text:t}}else c.techn={text:s};if(o==null)c.descr={text:""};else if(typeof o=="object"){let[e,t]=Object.entries(o)[0];c[e]={text:t}}else c.descr={text:o};if(typeof i=="object"){let[e,t]=Object.entries(i)[0];c[e]=t}else c.sprite=i;if(typeof a=="object"){let[e,t]=Object.entries(a)[0];c[e]=t}else c.tags=a;if(typeof r=="object"){let[e,t]=Object.entries(r)[0];c[e]=t}else c.link=r;c.wrap=Vt(),c.typeC4Shape={text:e},c.parentBoundary=se},ib=function(e,t,n,s,o,i,a,r){if(t===null||n===null)return;let c={};const l=Ue.find(e=>e.alias===t);if(l&&t===l.alias?c=l:(c.alias=t,Ue.push(c)),n==null?c.label={text:""}:c.label={text:n},s==null)c.techn={text:""};else if(typeof s=="object"){let[e,t]=Object.entries(s)[0];c[e]={text:t}}else c.techn={text:s};if(o==null)c.descr={text:""};else if(typeof o=="object"){let[e,t]=Object.entries(o)[0];c[e]={text:t}}else c.descr={text:o};if(typeof i=="object"){let[e,t]=Object.entries(i)[0];c[e]=t}else c.sprite=i;if(typeof a=="object"){let[e,t]=Object.entries(a)[0];c[e]=t}else c.tags=a;if(typeof r=="object"){let[e,t]=Object.entries(r)[0];c[e]=t}else c.link=r;c.wrap=Vt(),c.typeC4Shape={text:e},c.parentBoundary=se},ob=function(e,t,n,s,o){if(e===null||t===null)return;let i={};const a=Qe.find(t=>t.alias===e);if(a&&e===a.alias?i=a:(i.alias=e,Qe.push(i)),t==null?i.label={text:""}:i.label={text:t},n==null)i.type={text:"system"};else if(typeof n=="object"){let[e,t]=Object.entries(n)[0];i[e]={text:t}}else i.type={text:n};if(typeof s=="object"){let[e,t]=Object.entries(s)[0];i[e]=t}else i.tags=s;if(typeof o=="object"){let[e,t]=Object.entries(o)[0];i[e]=t}else i.link=o;i.parentBoundary=se,i.wrap=Vt(),Be=se,se=e,Kt.push(Be)},l5=function(e,t,n,s,o){if(e===null||t===null)return;let i={};const a=Qe.find(t=>t.alias===e);if(a&&e===a.alias?i=a:(i.alias=e,Qe.push(i)),t==null?i.label={text:""}:i.label={text:t},n==null)i.type={text:"container"};else if(typeof n=="object"){let[e,t]=Object.entries(n)[0];i[e]={text:t}}else i.type={text:n};if(typeof s=="object"){let[e,t]=Object.entries(s)[0];i[e]=t}else i.tags=s;if(typeof o=="object"){let[e,t]=Object.entries(o)[0];i[e]=t}else i.link=o;i.parentBoundary=se,i.wrap=Vt(),Be=se,se=e,Kt.push(Be)},T9=function(e,t,n,s,o,i,a,r){if(t===null||n===null)return;let c={};const l=Qe.find(e=>e.alias===t);if(l&&t===l.alias?c=l:(c.alias=t,Qe.push(c)),n==null?c.label={text:""}:c.label={text:n},s==null)c.type={text:"node"};else if(typeof s=="object"){let[e,t]=Object.entries(s)[0];c[e]={text:t}}else c.type={text:s};if(o==null)c.descr={text:""};else if(typeof o=="object"){let[e,t]=Object.entries(o)[0];c[e]={text:t}}else c.descr={text:o};if(typeof a=="object"){let[e,t]=Object.entries(a)[0];c[e]=t}else c.tags=a;if(typeof r=="object"){let[e,t]=Object.entries(r)[0];c[e]=t}else c.link=r;c.nodeType=e,c.parentBoundary=se,c.wrap=Vt(),Be=se,se=t,Kt.push(Be)},A9=function(){se=Be,Kt.pop(),Be=Kt.pop(),Kt.push(Be)},E9=function(e,t,n,s,o,i,a,r,c,l,d){let u=Ue.find(e=>e.alias===t);if(u===void 0&&(u=Qe.find(e=>e.alias===t),u===void 0))return;if(n!=null)if(typeof n=="object"){let[e,t]=Object.entries(n)[0];u[e]=t}else u.bgColor=n;if(s!=null)if(typeof s=="object"){let[e,t]=Object.entries(s)[0];u[e]=t}else u.fontColor=s;if(o!=null)if(typeof o=="object"){let[e,t]=Object.entries(o)[0];u[e]=t}else u.borderColor=o;if(i!=null)if(typeof i=="object"){let[e,t]=Object.entries(i)[0];u[e]=t}else u.shadowing=i;if(a!=null)if(typeof a=="object"){let[e,t]=Object.entries(a)[0];u[e]=t}else u.shape=a;if(r!=null)if(typeof r=="object"){let[e,t]=Object.entries(r)[0];u[e]=t}else u.sprite=r;if(c!=null)if(typeof c=="object"){let[e,t]=Object.entries(c)[0];u[e]=t}else u.techn=c;if(l!=null)if(typeof l=="object"){let[e,t]=Object.entries(l)[0];u[e]=t}else u.legendText=l;if(d!=null)if(typeof d=="object"){let[e,t]=Object.entries(d)[0];u[e]=t}else u.legendSprite=d},C9=function(e,t,n,s,o,i,a){const r=To.find(e=>e.from===t&&e.to===n);if(r===void 0)return;if(s!=null)if(typeof s=="object"){let[e,t]=Object.entries(s)[0];r[e]=t}else r.textColor=s;if(o!=null)if(typeof o=="object"){let[e,t]=Object.entries(o)[0];r[e]=t}else r.lineColor=o;if(i!=null)if(typeof i=="object"){let[e,t]=Object.entries(i)[0];r[e]=parseInt(t)}else r.offsetX=parseInt(i);if(a!=null)if(typeof a=="object"){let[e,t]=Object.entries(a)[0];r[e]=parseInt(t)}else r.offsetY=parseInt(a)},v9=function(e,t,n){let s=hc,o=uc;if(typeof t=="object"){const e=Object.values(t)[0];s=parseInt(e)}else s=parseInt(t);if(typeof n=="object"){const e=Object.values(n)[0];o=parseInt(e)}else o=parseInt(n);s>=1&&(hc=s),o>=1&&(uc=o)},g9=function(){return hc},p9=function(){return uc},f9=function(){return se},h9=function(){return Be},$6=function(e){return e==null?Ue:Ue.filter(t=>t.parentBoundary===e)},d9=function(e){return Ue.find(t=>t.alias===e)},c9=function(e){return Object.keys($6(e))},a9=function(e){return e==null?Qe:Qe.filter(t=>t.parentBoundary===e)},s9=function(){return To},t9=function(){return Sc},e9=function(e){Mc=e},Vt=function(){return Mc},Xv=function(){Ue=[],Qe=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Be="",se="global",Kt=[""],To=[],Kt=[""],Sc="",Mc=!1,hc=4,uc=2},Gv={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},Yv={FILLED:0,OPEN:1},qv={LEFTOF:0,RIGHTOF:1,OVER:2},Kv=function(e){let n=Me(e,t());Sc=n},np={addPersonOrSystem:db,addPersonOrSystemBoundary:ob,addContainer:cb,addContainerBoundary:l5,addComponent:ib,addDeploymentNode:T9,popBoundaryParseStack:A9,addRel:mb,updateElStyle:E9,updateRelStyle:C9,updateLayoutConfig:v9,autoWrap:Vt,setWrap:e9,getC4ShapeArray:$6,getC4Shape:d9,getC4ShapeKeys:c9,getBoundarys:a9,getCurrentBoundaryParse:f9,getParentBoundaryParse:h9,getRels:s9,getTitle:t9,getC4Type:kb,getC4ShapeInRow:g9,getC4BoundaryInRow:p9,setAccTitle:Oe,getAccTitle:Fe,getAccDescription:Pe,setAccDescription:De,parseDirective:bb,getConfig:()=>t().c4,clear:Xv,LINETYPE:Gv,ARROWTYPE:Yv,PLACEMENT:qv,setTitle:Kv,setC4Type:Ob},Dc=function(e,t){const n=e.append("rect");if(n.attr("x",t.x),n.attr("y",t.y),n.attr("fill",t.fill),n.attr("stroke",t.stroke),n.attr("width",t.width),n.attr("height",t.height),n.attr("rx",t.rx),n.attr("ry",t.ry),t.attrs!=="undefined"&&t.attrs!==null)for(let e in t.attrs)n.attr(e,t.attrs[e]);return t.class!=="undefined"&&n.attr("class",t.class),n},op=function(e,t,n,s,o,i){const a=e.append("image");a.attr("width",t),a.attr("height",n),a.attr("x",s),a.attr("y",o);let r=i.startsWith("data:image/png;base64")?i:ht(i);a.attr("xlink:href",r)},Wv=(e,t,n)=>{const s=e.append("g");let o=0;for(let e of t){let r=e.textColor?e.textColor:"#444444",c=e.lineColor?e.lineColor:"#444444",l=e.offsetX?parseInt(e.offsetX):0,d=e.offsetY?parseInt(e.offsetY):0,i="";if(o===0){let t=s.append("line");t.attr("x1",e.startPoint.x),t.attr("y1",e.startPoint.y),t.attr("x2",e.endPoint.x),t.attr("y2",e.endPoint.y),t.attr("stroke-width","1"),t.attr("stroke",c),t.style("fill","none"),e.type!=="rel_b"&&t.attr("marker-end","url("+i+"#arrowhead)"),(e.type==="birel"||e.type==="rel_b")&&t.attr("marker-start","url("+i+"#arrowend)"),o=-1}else{let t=s.append("path");t.attr("fill","none").attr("stroke-width","1").attr("stroke",c).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",e.startPoint.x).replaceAll("starty",e.startPoint.y).replaceAll("controlx",e.startPoint.x+(e.endPoint.x-e.startPoint.x)/2-(e.endPoint.x-e.startPoint.x)/4).replaceAll("controly",e.startPoint.y+(e.endPoint.y-e.startPoint.y)/2).replaceAll("stopx",e.endPoint.x).replaceAll("stopy",e.endPoint.y)),e.type!=="rel_b"&&t.attr("marker-end","url("+i+"#arrowhead)"),(e.type==="birel"||e.type==="rel_b")&&t.attr("marker-start","url("+i+"#arrowend)")}let a=n.messageFont();It(n)(e.label.text,s,Math.min(e.startPoint.x,e.endPoint.x)+Math.abs(e.endPoint.x-e.startPoint.x)/2+l,Math.min(e.startPoint.y,e.endPoint.y)+Math.abs(e.endPoint.y-e.startPoint.y)/2+d,e.label.width,e.label.height,{fill:r},a),e.techn&&e.techn.text!==""&&(a=n.messageFont(),It(n)("["+e.techn.text+"]",s,Math.min(e.startPoint.x,e.endPoint.x)+Math.abs(e.endPoint.x-e.startPoint.x)/2+l,Math.min(e.startPoint.y,e.endPoint.y)+Math.abs(e.endPoint.y-e.startPoint.y)/2+n.messageFontSize+5+d,Math.max(e.label.width,e.techn.width),e.techn.height,{fill:r,"font-style":"italic"},a))}},$v=function(e,t,n){const o=e.append("g");let r=t.bgColor?t.bgColor:"none",c=t.borderColor?t.borderColor:"#444444",i=t.fontColor?t.fontColor:"black",a={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};t.nodeType&&(a={"stroke-width":1});let l={x:t.x,y:t.y,fill:r,stroke:c,width:t.width,height:t.height,rx:2.5,ry:2.5,attrs:a};Dc(o,l);let s=n.boundaryFont();s.fontWeight="bold",s.fontSize=s.fontSize+2,s.fontColor=i,It(n)(t.label.text,o,t.x,t.y+t.label.Y,t.width,t.height,{fill:"#444444"},s),t.type&&t.type.text!==""&&(s=n.boundaryFont(),s.fontColor=i,It(n)(t.type.text,o,t.x,t.y+t.type.Y,t.width,t.height,{fill:"#444444"},s)),t.descr&&t.descr.text!==""&&(s=n.boundaryFont(),s.fontSize=s.fontSize-2,s.fontColor=i,It(n)(t.descr.text,o,t.x,t.y+t.descr.Y,t.width,t.height,{fill:"#444444"},s))},Bv=function(e,t,n){let c=t.bgColor?t.bgColor:n[t.typeC4Shape.text+"_bg_color"],r=t.borderColor?t.borderColor:n[t.typeC4Shape.text+"_border_color"],a=t.fontColor?t.fontColor:"#FFFFFF",l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(t.typeC4Shape.text){case"person":l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const s=e.append("g");s.attr("class","person-man");const i=gp();switch(t.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":i.x=t.x,i.y=t.y,i.fill=c,i.width=t.width,i.height=t.height,i.style="stroke:"+r+";stroke-width:0.5;",i.rx=2.5,i.ry=2.5,Dc(s,i);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":s.append("path").attr("fill",c).attr("stroke-width","0.5").attr("stroke",r).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2).replaceAll("height",t.height)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",r).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":s.append("path").attr("fill",c).attr("stroke-width","0.5").attr("stroke",r).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("width",t.width).replaceAll("half",t.height/2)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",r).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",t.x+t.width).replaceAll("starty",t.y).replaceAll("half",t.height/2));break}let d=yv(n,t.typeC4Shape.text);switch(s.append("text").attr("fill",a).attr("font-family",d.fontFamily).attr("font-size",d.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",t.typeC4Shape.width).attr("x",t.x+t.width/2-t.typeC4Shape.width/2).attr("y",t.y+t.typeC4Shape.Y).text("<<"+t.typeC4Shape.text+">>"),t.typeC4Shape.text){case"person":case"external_person":op(s,48,48,t.x+t.width/2-24,t.y+t.image.Y,l);break}let o=n[t.typeC4Shape.text+"Font"]();return o.fontWeight="bold",o.fontSize=o.fontSize+2,o.fontColor=a,It(n)(t.label.text,s,t.x,t.y+t.label.Y,t.width,t.height,{fill:a},o),o=n[t.typeC4Shape.text+"Font"](),o.fontColor=a,t.thchn&&t.thchn.text!==""?It(n)(t.thchn.text,s,t.x,t.y+t.thchn.Y,t.width,t.height,{fill:a,"font-style":"italic"},o):t.type&&t.type.text!==""&&It(n)(t.type.text,s,t.x,t.y+t.type.Y,t.width,t.height,{fill:a,"font-style":"italic"},o),t.descr&&t.descr.text!==""&&(o=n.personFont(),o.fontColor=a,It(n)(t.descr.text,s,t.x,t.y+t.descr.Y,t.width,t.height,{fill:a},o)),t.height},Iv=function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},Dv=function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},Av=function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},kv=function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},Ev=function(e){e.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},xv=function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Ov=function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},wv=function(e){const n=e.append("defs"),t=n.append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);t.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),t.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},gp=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},yv=(e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),It=function(){function n(t,n,s,o,i,a,r){const c=n.append("text").attr("x",s+i/2).attr("y",o+a/2+5).style("text-anchor","middle").text(t);e(c,r)}function t(t,n,s,o,i,a,r,c){const{fontSize:l,fontFamily:u,fontWeight:m}=c,d=t.split(h.lineBreakRegex);for(let t=0;t<d.length;t++){const c=t*l-l*(d.length-1)/2,a=n.append("text").attr("x",s+i/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",l).style("font-weight",m).style("font-family",u);a.append("tspan").attr("dy",c).text(d[t]).attr("alignment-baseline","mathematical"),e(a,r)}}function s(n,s,o,i,a,r,c,l){const d=s.append("switch"),h=d.append("foreignObject").attr("x",o).attr("y",i).attr("width",a).attr("height",r),u=h.append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,d,o,i,a,r,c,l),e(u,c)}function e(e,t){for(const n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),dt={drawRect:Dc,drawBoundary:$v,drawC4Shape:Bv,drawRels:Wv,drawImage:op,insertArrowHead:kv,insertArrowEnd:Ev,insertArrowFilledHead:xv,insertDynamicNumber:Ov,insertArrowCrossHead:wv,insertDatabaseIcon:Iv,insertComputerIcon:Dv,insertClockIcon:Av,getNoteRect:gp,sanitizeUrl:ht};let ac=0,ic=0,wp=4,Bc=2;Mo.yy=np;let l={};class Cp{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Uc(e.db.getConfig())}setData(e,t,n,s){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=t,this.nextData.starty=this.data.starty=n,this.nextData.stopy=this.data.stopy=s}updateVal(e,t,n,s){e[t]===void 0?e[t]=n:e[t]=s(n,e[t])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let t=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,s=t+e.width,n=this.nextData.starty+e.margin*2,o=n+e.height;(t>=this.data.widthLimit||s>=this.data.widthLimit||this.nextData.cnt>wp)&&(t=this.nextData.startx+e.margin+l.nextLinePaddingX,n=this.nextData.stopy+e.margin*2,this.nextData.stopx=s=t+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=o=n+e.height,this.nextData.cnt=1),e.x=t,e.y=n,this.updateVal(this.data,"startx",t,Math.min),this.updateVal(this.data,"starty",n,Math.min),this.updateVal(this.data,"stopx",s,Math.max),this.updateVal(this.data,"stopy",o,Math.max),this.updateVal(this.nextData,"startx",t,Math.min),this.updateVal(this.nextData,"starty",n,Math.min),this.updateVal(this.nextData,"stopx",s,Math.max),this.updateVal(this.nextData,"stopy",o,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Uc(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}}const Uc=function(e){V(l,e),e.fontFamily&&(l.personFontFamily=l.systemFontFamily=l.messageFontFamily=e.fontFamily),e.fontSize&&(l.personFontSize=l.systemFontSize=l.messageFontSize=e.fontSize),e.fontWeight&&(l.personFontWeight=l.systemFontWeight=l.messageFontWeight=e.fontWeight)},Ro=(e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),ec=e=>({fontFamily:e.boundaryFontFamily,fontSize:e.boundaryFontSize,fontWeight:e.boundaryFontWeight}),ov=e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight});function Te(e,t,n,s,o){if(!t[e].width)if(n)t[e].text=Oh(t[e].text,o,s),t[e].textLines=t[e].text.split(h.lineBreakRegex).length,t[e].width=o,t[e].height=_d(t[e].text,s);else{let n=t[e].text.split(h.lineBreakRegex);t[e].textLines=n.length;let o=0;t[e].height=0,t[e].width=0;for(const i of n)t[e].width=Math.max(ot(i,s),t[e].width),o=_d(i,s),t[e].height=t[e].height+o}}const Fp=function(e,t,n){t.x=n.data.startx,t.y=n.data.starty,t.width=n.data.stopx-n.data.startx,t.height=n.data.stopy-n.data.starty,t.label.y=l.c4ShapeMargin-35;let o=t.wrap&&l.wrap,s=ec(l);s.fontSize=s.fontSize+2,s.fontWeight="bold";let i=ot(t.label.text,s);Te("label",t,o,s,i),dt.drawBoundary(e,t,l)},Tp=function(e,t,n,s){let o=0;for(const m of s){o=0;const i=n[m];let a=Ro(l,i.typeC4Shape.text);switch(a.fontSize=a.fontSize-2,i.typeC4Shape.width=ot("<<"+i.typeC4Shape.text+">>",a),i.typeC4Shape.height=a.fontSize+2,i.typeC4Shape.Y=l.c4ShapePadding,o=i.typeC4Shape.Y+i.typeC4Shape.height-4,i.image={width:0,height:0,Y:0},i.typeC4Shape.text){case"person":case"external_person":i.image.width=48,i.image.height=48,i.image.Y=o,o=i.image.Y+i.image.height;break}i.sprite&&(i.image.width=48,i.image.height=48,i.image.Y=o,o=i.image.Y+i.image.height);let r=i.wrap&&l.wrap,c=l.width-l.c4ShapePadding*2,d=Ro(l,i.typeC4Shape.text);if(d.fontSize=d.fontSize+2,d.fontWeight="bold",Te("label",i,r,d,c),i.label.Y=o+8,o=i.label.Y+i.label.height,i.type&&i.type.text!==""){i.type.text="["+i.type.text+"]";let e=Ro(l,i.typeC4Shape.text);Te("type",i,r,e,c),i.type.Y=o+5,o=i.type.Y+i.type.height}else if(i.techn&&i.techn.text!==""){i.techn.text="["+i.techn.text+"]";let e=Ro(l,i.techn.text);Te("techn",i,r,e,c),i.techn.Y=o+5,o=i.techn.Y+i.techn.height}let h=o,u=i.label.width;if(i.descr&&i.descr.text!==""){let e=Ro(l,i.typeC4Shape.text);Te("descr",i,r,e,c),i.descr.Y=o+20,o=i.descr.Y+i.descr.height,u=Math.max(i.label.width,i.descr.width),h=o-i.descr.textLines*5}u=u+l.c4ShapePadding,i.width=Math.max(i.width||l.width,u,l.width),i.height=Math.max(i.height||l.height,h,l.height),i.margin=i.margin||l.c4ShapeMargin,e.insert(i),dt.drawC4Shape(t,i,l)}e.bumpLastMargin(l.c4ShapeMargin)};class Ae{constructor(e,t){this.x=e,this.y=t}}let Dp=function(e,t){let n=e.x,s=e.y,i=t.x,a=t.y,c=n+e.width/2,l=s+e.height/2,d=Math.abs(n-i),u=Math.abs(s-a),r=u/d,h=e.height/e.width,o=null;return s==a&&n<i?o=new Ae(n+e.width,l):s==a&&n>i?o=new Ae(n,l):n==i&&s<a?o=new Ae(c,s+e.height):n==i&&s>a&&(o=new Ae(c,s)),n>i&&s<a?h>=r?o=new Ae(n,l+r*e.width/2):o=new Ae(c-d/u*e.height/2,s+e.height):n<i&&s<a?h>=r?o=new Ae(n+e.width,l+r*e.width/2):o=new Ae(c+d/u*e.height/2,s+e.height):n<i&&s>a?h>=r?o=new Ae(n+e.width,l-r*e.width/2):o=new Ae(c+e.height/2*d/u,s):n>i&&s>a&&(h>=r?o=new Ae(n,l-e.width/2*r):o=new Ae(c-e.height/2*d/u,s)),o},ev=function(e,t){let n={x:0,y:0};n.x=t.x+t.width/2,n.y=t.y+t.height/2;let s=Dp(e,n);n.x=e.x+e.width/2,n.y=e.y+e.height/2;let o=Dp(t,n);return{startPoint:s,endPoint:o}};const J7=function(e,t,n,s){let o=0;for(let e of t){o=o+1;let r=e.wrap&&l.wrap,i=ov(l),d=s.db.getC4Type();d==="C4Dynamic"&&(e.label.text=o+": "+e.label.text);let a=ot(e.label.text,i);Te("label",e,r,i,a),e.techn&&e.techn.text!==""&&(a=ot(e.techn.text,i),Te("techn",e,r,i,a)),e.descr&&e.descr.text!==""&&(a=ot(e.descr.text,i),Te("descr",e,r,i,a));let u=n(e.from),h=n(e.to),c=ev(u,h);e.startPoint=c.startPoint,e.endPoint=c.endPoint}dt.drawRels(e,t,l)};function Rp(e,t,n,s,o){let i=new Cp(o);i.data.widthLimit=n.data.widthLimit/Math.min(Bc,s.length);for(let[u,a]of s.entries()){let r=0;a.image={width:0,height:0,Y:0},a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=r,r=a.image.Y+a.image.height);let d=a.wrap&&l.wrap,c=ec(l);if(c.fontSize=c.fontSize+2,c.fontWeight="bold",Te("label",a,d,c,i.data.widthLimit),a.label.Y=r+8,r=a.label.Y+a.label.height,a.type&&a.type.text!==""){a.type.text="["+a.type.text+"]";let e=ec(l);Te("type",a,d,e,i.data.widthLimit),a.type.Y=r+5,r=a.type.Y+a.type.height}if(a.descr&&a.descr.text!==""){let e=ec(l);e.fontSize=e.fontSize-2,Te("descr",a,d,e,i.data.widthLimit),a.descr.Y=r+20,r=a.descr.Y+a.descr.height}if(u==0||u%Bc===0){let e=n.data.startx+l.diagramMarginX,t=n.data.stopy+l.diagramMarginY+r;i.setData(e,e,t,t)}else{let e=i.data.stopx!==i.data.startx?i.data.stopx+l.diagramMarginX:i.data.startx,t=i.data.starty;i.setData(e,e,t,t)}i.name=a.alias;let f=o.db.getC4ShapeArray(a.alias),h=o.db.getC4ShapeKeys(a.alias);h.length>0&&Tp(i,e,f,h),t=a.alias;let m=o.db.getBoundarys(t);m.length>0&&Rp(e,t,i,m,o),a.alias!=="global"&&Fp(e,a,i),n.data.stopy=Math.max(i.data.stopy+l.c4ShapeMargin,n.data.stopy),n.data.stopx=Math.max(i.data.stopx+l.c4ShapeMargin,n.data.stopx),ac=Math.max(ac,n.data.stopx),ic=Math.max(ic,n.data.stopy)}}const Z7=function(n,s,o,a){l=t().c4;const h=t().securityLevel;let f;h==="sandbox"&&(f=i("#i"+s));const b=i(h==="sandbox"?f.nodes()[0].contentDocument.body:"body");let m=a.db;a.db.setWrap(l.wrap),wp=m.getC4ShapeInRow(),Bc=m.getC4BoundaryInRow(),e.debug(`C:${JSON.stringify(l,null,2)}`);const r=h==="sandbox"?b.select(`[id="${s}"]`):i(`[id="${s}"]`);dt.insertComputerIcon(r),dt.insertDatabaseIcon(r),dt.insertClockIcon(r);let d=new Cp(a);d.setData(l.diagramMarginX,l.diagramMarginX,l.diagramMarginY,l.diagramMarginY),d.data.widthLimit=screen.availWidth,ac=l.diagramMarginX,ic=l.diagramMarginY;const u=a.db.getTitle();let j=a.db.getBoundarys("");Rp(r,"",d,j,a),dt.insertArrowHead(r),dt.insertArrowEnd(r),dt.insertArrowCrossHead(r),dt.insertArrowFilledHead(r),J7(r,a.db.getRels(),a.db.getC4Shape,a),d.data.stopx=ac,d.data.stopy=ic;const c=d.data;let y=c.stopy-c.starty,p=y+2*l.diagramMarginY,_=c.stopx-c.startx;const g=_+2*l.diagramMarginX;u&&r.append("text").text(u).attr("x",(c.stopx-c.startx)/2-4*l.diagramMarginX).attr("y",c.starty+l.diagramMarginY),Ve(r,p,g,l.useMaxWidth);const v=u?60:0;r.attr("viewBox",c.startx-l.diagramMarginX+" -"+(l.diagramMarginY+v)+" "+g+" "+(p+v)),e.debug(`models:`,c)},Hp={drawPersonOrSystemArray:Tp,drawBoundary:Fp,setConf:Uc,draw:Z7};Qr=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},U=[1,3],h=[1,7],f=[1,8],g=[1,9],p=[1,10],c=[1,13],W=[1,12],u=[1,16,25],$=[1,20],V=[1,32],k=[1,33],I=[1,34],H=[1,36],R=[1,39],A=[1,37],D=[1,38],z=[1,44],T=[1,45],F=[1,40],M=[1,41],S=[1,42],L=[1,43],o=[1,48],s=[1,49],n=[1,50],i=[1,51],t=[16,25],v=[1,65],l=[1,66],y=[1,67],j=[1,68],b=[1,69],w=[1,70],O=[1,71],N=[1,80],a=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],x=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],P=[5,8,9,10,11,16,19,23,25],m=[54,88,89,90,91],r=[54,65,66,88,89,90,91],B=[54,60,61,62,63,64,88,89,90,91],d=[16,25,32],_=[1,107],C={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 5:o.setDirection("TB");break;case 6:o.setDirection("BT");break;case 7:o.setDirection("RL");break;case 8:o.setDirection("LR");break;case 12:o.parseDirective("%%{","open_directive");break;case 13:o.parseDirective(a[c],"type_directive");break;case 14:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 15:o.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=a[c];break;case 22:this.$=a[c-1]+a[c];break;case 23:case 24:this.$=a[c-1]+"~"+a[c];break;case 25:o.addRelation(a[c]);break;case 26:a[c-1].title=o.cleanupLabel(a[c]),o.addRelation(a[c-1]);break;case 35:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 36:case 37:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 38:o.addClass(a[c]);break;case 39:o.addClass(a[c-2]),o.setCssClass(a[c-2],a[c]);break;case 40:o.addClass(a[c-3]),o.addMembers(a[c-3],a[c-1]);break;case 41:o.addClass(a[c-5]),o.setCssClass(a[c-5],a[c-3]),o.addMembers(a[c-5],a[c-1]);break;case 42:o.addAnnotation(a[c],a[c-2]);break;case 43:this.$=[a[c]];break;case 44:a[c].push(a[c-1]),this.$=a[c];break;case 45:break;case 46:o.addMember(a[c-1],o.cleanupLabel(a[c]));break;case 47:break;case 48:break;case 49:this.$={id1:a[c-2],id2:a[c],relation:a[c-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:a[c-3],id2:a[c],relation:a[c-1],relationTitle1:a[c-2],relationTitle2:"none"};break;case 51:this.$={id1:a[c-3],id2:a[c],relation:a[c-2],relationTitle1:"none",relationTitle2:a[c-1]};break;case 52:this.$={id1:a[c-4],id2:a[c],relation:a[c-2],relationTitle1:a[c-3],relationTitle2:a[c-1]};break;case 53:o.addNote(a[c],a[c-1]);break;case 54:o.addNote(a[c]);break;case 55:this.$={type1:a[c-2],type2:a[c],lineType:a[c-1]};break;case 56:this.$={type1:"none",type2:a[c],lineType:a[c-1]};break;case 57:this.$={type1:a[c-1],type2:"none",lineType:a[c]};break;case 58:this.$={type1:"none",type2:"none",lineType:a[c]};break;case 59:this.$=o.relationType.AGGREGATION;break;case 60:this.$=o.relationType.EXTENSION;break;case 61:this.$=o.relationType.COMPOSITION;break;case 62:this.$=o.relationType.DEPENDENCY;break;case 63:this.$=o.relationType.LOLLIPOP;break;case 64:this.$=o.lineType.LINE;break;case 65:this.$=o.lineType.DOTTED_LINE;break;case 66:case 72:this.$=a[c-2],o.setClickEvent(a[c-1],a[c]);break;case 67:case 73:this.$=a[c-3],o.setClickEvent(a[c-2],a[c-1]),o.setTooltip(a[c-2],a[c]);break;case 68:case 76:this.$=a[c-2],o.setLink(a[c-1],a[c]);break;case 69:this.$=a[c-3],o.setLink(a[c-2],a[c-1],a[c]);break;case 70:case 78:this.$=a[c-3],o.setLink(a[c-2],a[c-1]),o.setTooltip(a[c-2],a[c]);break;case 71:case 79:this.$=a[c-4],o.setLink(a[c-3],a[c-2],a[c]),o.setTooltip(a[c-3],a[c-1]);break;case 74:this.$=a[c-3],o.setClickEvent(a[c-2],a[c-1],a[c]);break;case 75:this.$=a[c-4],o.setClickEvent(a[c-3],a[c-2],a[c-1]),o.setTooltip(a[c-3],a[c]);break;case 77:this.$=a[c-3],o.setLink(a[c-2],a[c-1],a[c]);break;case 80:o.setCssClass(a[c-1],a[c]);break}},table:[{3:1,4:2,5:U,6:4,7:5,8:h,9:f,10:g,11:p,12:6,13:11,19:c,23:W},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:U,6:4,7:5,8:h,9:f,10:g,11:p,12:6,13:11,19:c,23:W},{1:[2,9]},e(u,[2,5]),e(u,[2,6]),e(u,[2,7]),e(u,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:$},e([17,22],[2,13]),{6:31,7:30,8:h,9:f,10:g,11:p,13:11,19:c,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:V,41:k,43:I,44:H,49:R,51:A,52:D,55:z,57:T,67:F,68:M,70:S,74:L,88:o,89:s,90:n,91:i},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},e(t,[2,25],{32:[1,57]}),e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),e(t,[2,30]),e(t,[2,31]),e(t,[2,32]),e(t,[2,33]),e(t,[2,34]),{40:[1,58]},{42:[1,59]},e(t,[2,37]),e(t,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:v,61:l,62:y,63:j,64:b,65:w,66:O}),{27:72,28:46,29:47,88:o,89:s,90:n,91:i},e(t,[2,47]),e(t,[2,48]),{28:73,88:o,89:s,90:n},{27:74,28:46,29:47,88:o,89:s,90:n,91:i},{27:75,28:46,29:47,88:o,89:s,90:n,91:i},{27:76,28:46,29:47,88:o,89:s,90:n,91:i},{54:[1,77]},{27:78,28:46,29:47,88:o,89:s,90:n,91:i},{54:N,56:79},e(a,[2,20],{28:46,29:47,27:81,30:[1,82],88:o,89:s,90:n,91:i}),e(a,[2,21],{30:[1,83]}),e(x,[2,94]),e(x,[2,95]),e(x,[2,96]),e([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),e(P,[2,10]),{15:84,22:$},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:h,9:f,10:g,11:p,13:11,19:c,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:V,41:k,43:I,44:H,49:R,51:A,52:D,55:z,57:T,67:F,68:M,70:S,74:L,88:o,89:s,90:n,91:i},e(t,[2,26]),e(t,[2,35]),e(t,[2,36]),{27:86,28:46,29:47,54:[1,87],88:o,89:s,90:n,91:i},{53:88,58:63,59:64,60:v,61:l,62:y,63:j,64:b,65:w,66:O},e(t,[2,46]),{59:89,65:w,66:O},e(m,[2,58],{58:90,60:v,61:l,62:y,63:j,64:b}),e(r,[2,59]),e(r,[2,60]),e(r,[2,61]),e(r,[2,62]),e(r,[2,63]),e(B,[2,64]),e(B,[2,65]),e(t,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:o,89:s,90:n},{54:N,56:99},e(t,[2,54]),e(t,[2,98]),e(a,[2,22]),e(a,[2,23]),e(a,[2,24]),{16:[1,100]},{25:[2,19]},e(d,[2,49]),{27:101,28:46,29:47,88:o,89:s,90:n,91:i},{27:102,28:46,29:47,54:[1,103],88:o,89:s,90:n,91:i},e(m,[2,57],{58:104,60:v,61:l,62:y,63:j,64:b}),e(m,[2,56]),{28:105,88:o,89:s,90:n},{47:106,51:_},{27:108,28:46,29:47,88:o,89:s,90:n,91:i},e(t,[2,66],{54:[1,109]}),e(t,[2,68],{54:[1,111],69:[1,110]}),e(t,[2,72],{54:[1,112],72:[1,113]}),e(t,[2,76],{54:[1,115],69:[1,114]}),e(t,[2,80]),e(t,[2,53]),e(P,[2,11]),e(d,[2,51]),e(d,[2,50]),{27:116,28:46,29:47,88:o,89:s,90:n,91:i},e(m,[2,55]),e(t,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:_},e(t,[2,42]),e(t,[2,67]),e(t,[2,69]),e(t,[2,70],{69:[1,120]}),e(t,[2,73]),e(t,[2,74],{54:[1,121]}),e(t,[2,77]),e(t,[2,78],{69:[1,122]}),e(d,[2,52]),{47:123,51:_},e(t,[2,40]),{48:[2,44]},e(t,[2,71]),e(t,[2,75]),e(t,[2,79]),{48:[1,124]},e(t,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},K=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 27:break;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 39:this.popState();break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 42:this.popState();break;case 43:return"STR";case 44:this.begin("bqstring");break;case 45:this.popState();break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 48:this.popState();break;case 49:return 73;case 50:this.begin("callback_name");break;case 51:this.popState();break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 54:this.popState();break;case 55:return 72;case 56:return 69;case 57:return 69;case 58:return 69;case 59:return 69;case 60:return 61;case 61:return 61;case 62:return 63;case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:return"EQUALS";case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[}])/,/^(?:[^}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};return e}();C.lexer=K;function E(){this.yy={}}return E.prototype=C,C.Parser=E,new E}(),Qr.parser=Qr;const Bp=Qr,G7=(e,t)=>{var n;return((n=t?.class)==null?void 0:n.defaultRenderer)!=="dagre-wrapper"&&e.match(/^\s*classDiagram/)!==null},K7=(e,t)=>{var n;return e.match(/^\s*classDiagram/)!==null&&((n=t?.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"||e.match(/^\s*classDiagram-v2/)!==null},Xc="classid-";let Qc=[],M={},Ur=[],Yp=0,Ko=[];const qo=e=>h.sanitizeText(e,t()),P7=function(e,t,n){O.parseDirective(this,e,t,n)},Yo=function(e){let n="",s=e;if(e.indexOf("~")>0){let o=e.split("~");s=o[0],n=h.sanitizeText(o[1],t())}return{className:s,type:n}},ol=function(e){let t=Yo(e);if(M[t.className]!==void 0)return;M[t.className]={id:t.className,type:t.type,cssClasses:[],methods:[],members:[],annotations:[],domId:Xc+t.className+"-"+Yp},Yp++},eg=function(e){const t=Object.keys(M);for(const n of t)if(M[n].id===e)return M[n].domId},L7=function(){Qc=[],M={},Ur=[],Ko=[],Ko.push(_g),Ne()},N7=function(e){return M[e]},D7=function(){return M},z7=function(){return Qc},F7=function(){return Ur},M7=function(n){e.debug("Adding relation: "+JSON.stringify(n)),ol(n.id1),ol(n.id2),n.id1=Yo(n.id1).className,n.id2=Yo(n.id2).className,n.relationTitle1=h.sanitizeText(n.relationTitle1.trim(),t()),n.relationTitle2=h.sanitizeText(n.relationTitle2.trim(),t()),Qc.push(n)},S7=function(e,t){const n=Yo(e).className;M[n].annotations.push(t)},cg=function(e,t){const s=Yo(e).className,n=M[s];if(typeof t=="string"){const e=t.trim();e.startsWith("<<")&&e.endsWith(">>")?n.annotations.push(qo(e.substring(2,e.length-2))):e.indexOf(")")>0?n.methods.push(qo(e)):e&&n.members.push(qo(e))}},e7=function(e,t){Array.isArray(t)&&(t.reverse(),t.forEach(t=>cg(e,t)))},J5=function(e,t){const n={id:`note${Ur.length}`,class:t,text:e};Ur.push(n)},Q5=function(e){return e.substring(0,1)===":"?h.sanitizeText(e.substr(1).trim(),t()):qo(e.trim())},rl=function(e,t){e.split(",").forEach(function(e){let n=e;e[0].match(/\d/)&&(n=Xc+n),M[n]!==void 0&&M[n].cssClasses.push(t)})},G5=function(e,n){const s=t();e.split(",").forEach(function(e){n!==void 0&&(M[e].tooltip=h.sanitizeText(n,s))})},K5=function(e){return M[e].tooltip},U5=function(e,n,s){const o=t();e.split(",").forEach(function(e){let t=e;e[0].match(/\d/)&&(t=Xc+t),M[t]!==void 0&&(M[t].link=f.formatUrl(n,o),o.securityLevel==="sandbox"?M[t].linkTarget="_top":typeof s=="string"?M[t].linkTarget=qo(s):M[t].linkTarget="_blank")}),rl(e,"clickable")},W5=function(e,t,n){e.split(",").forEach(function(e){V5(e,t,n),M[e].haveCallback=!0}),rl(e,"clickable")},V5=function(e,n,s){const a=t();let o=e,i=eg(o);if(a.securityLevel!=="loose")return;if(n===void 0)return;if(M[o]!==void 0){let e=[];if(typeof s=="string"){e=s.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<e.length;n++){let t=e[n].trim();t.charAt(0)==='"'&&t.charAt(t.length-1)==='"'&&(t=t.substr(1,t.length-2)),e[n]=t}}e.length===0&&e.push(i),Ko.push(function(){const t=document.querySelector(`[id="${i}"]`);t!==null&&t.addEventListener("click",function(){f.runFunc(n,...e)},!1)})}},B5=function(e){Ko.forEach(function(t){t(e)})},P5={LINE:0,DOTTED_LINE:1},D5={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},_g=function(e){let t=i(".mermaidTooltip");(t._groups||t)[0][0]===null&&(t=i("body").append("div").attr("class","mermaidTooltip").style("opacity",0));const n=i(e).select("svg"),s=n.selectAll("g.node");s.on("mouseover",function(){const n=i(this),s=n.attr("title");if(s===null)return;const e=this.getBoundingClientRect();t.transition().duration(200).style("opacity",".9"),t.text(n.attr("title")).style("left",window.scrollX+e.left+(e.right-e.left)/2+"px").style("top",window.scrollY+e.top-14+document.body.scrollTop+"px"),t.html(t.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){t.transition().duration(500).style("opacity",0);const e=i(this);e.classed("hover",!1)})};Ko.push(_g);let wg="TB";const z5=()=>wg,F5=e=>{wg=e},js={parseDirective:P7,setAccTitle:Oe,getAccTitle:Fe,getAccDescription:Pe,setAccDescription:De,getConfig:()=>t().class,addClass:ol,bindFunctions:B5,clear:L7,getClass:N7,getClasses:D7,getNotes:F7,addAnnotation:S7,addNote:J5,getRelations:z7,addRelation:M7,getDirection:z5,setDirection:F5,addMember:cg,addMembers:e7,cleanupLabel:Q5,lineType:P5,relationType:D5,setClickEvent:W5,setCssClass:rl,setLink:U5,getTooltip:K5,setTooltip:G5,lookUpDomId:eg,setDiagramTitle:pt,getDiagramTitle:yt};function rt(e){return e!=null&&typeof e=="object"}kg="[object Symbol]";function _n(e){return typeof e=="symbol"||rt(e)&&zn(e)==kg}function ks(e,t){for(var n=-1,s=e==null?0:e.length,o=Array(s);++n<s;)o[n]=t(e[n],n,e);return o}Mg=Array.isArray;const N=Mg;Tg=1/0,_l=ye?ye.prototype:void 0,wl=_l?_l.toString:void 0;function Ng(e){if(typeof e=="string")return e;if(N(e))return ks(e,Ng)+"";if(_n(e))return wl?wl.call(e):"";var t=e+"";return t=="0"&&1/e==-Tg?"-0":t}Lg=/\s/;function E5(e){for(var t=e.length;t--&&Lg.test(e.charAt(t)););return t}Pg=/^\s+/;function C5(e){return e&&e.slice(0,E5(e)+1).replace(Pg,"")}Ml=0/0,Bg=/^[-+]0x[0-9a-f]+$/i,Vg=/^0b[01]+$/i,$g=/^0o[0-7]+$/i,Wg=parseInt;function w5(e){if(typeof e=="number")return e;if(_n(e))return Ml;if(je(e)){var n,t=typeof e.valueOf=="function"?e.valueOf():e;e=je(t)?t+"":t}return typeof e!="string"?e===0?e:+e:(e=C5(e),n=Vg.test(e),n||$g.test(e)?Wg(e.slice(2),n?2:8):Bg.test(e)?Ml:+e)}Ll=1/0,F1=17976931348623157e292;function dr(e){if(!e)return e===0?e:0;if(e=w5(e),e===Ll||e===-Ll){var t=e<0?-1:1;return t*F1}return e===e?e:0}function g5(e){var t=dr(e),n=t%1;return t===t?n?t-n:t:0}function ln(e){return e}Qg=Ln(We,"WeakMap");const Bl=Qg;Vl=Object.create,e5=function(){function e(){}return function(t){if(!je(t))return{};if(Vl)return Vl(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const p5=e5;function f5(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function h5(){}function o5(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}i5=800,a5=16,r5=Date.now;function yE(e){var t=0,n=0;return function(){var s=r5(),o=a5-(s-n);if(n=s,o>0){if(++t>=i5)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Ms(e){return function(){return e}}c5=function(){try{var e=Ln(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Ba=c5;s5=Ba?function(e,t){return Ba(e,"toString",{configurable:!0,enumerable:!1,value:Ms(t),writable:!0})}:ln;const m5=s5;n5=yE(m5);const t5=n5;function Gg(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e)===!1)break;return e}function Kg(e,t,n,s){for(var i=e.length,o=n+(s?1:-1);s?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function b5(e){return e!==e}function j5(e,t,n){for(var s=n-1,o=e.length;++s<o;)if(e[s]===t)return s;return-1}function y5(e,t,n){return t===t?j5(e,t,n):Kg(e,b5,n)}function _5(e,t){var n=e==null?0:e.length;return!!n&&y5(e,t,0)>-1}Ug=9007199254740991,Ig=/^(?:0|[1-9]\d*)$/;function La(e,t){var n=typeof e;return t=t??Ug,!!t&&(n=="number"||n!="symbol"&&Ig.test(e))&&e>-1&&e%1==0&&e<t}function Na(e,t,n){t=="__proto__"&&Ba?Ba(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}Rg=Object.prototype,Ag=Rg.hasOwnProperty;function Da(e,t,n){var s=e[t];(!Ag.call(e,t)||!bs(s,n)||n===void 0&&!(t in e))&&Na(e,t,n)}function ai(e,t,n,s){a=!n,n||(n={});for(var o,i,a,r=-1,c=t.length;++r<c;)o=t[r],i=s?s(n[o],e[o],o,n,e):void 0,i===void 0&&(i=e[o]),a?Na(n,o,i):Da(n,o,i);return n}Od=Math.max;function xg(e,t,n){return t=Od(t===void 0?e.length-1:t,0),function(){for(var o,i=arguments,s=-1,a=Od(i.length-t,0),r=Array(a);++s<a;)r[s]=i[t+s];for(s=-1,o=Array(t+1);++s<t;)o[s]=i[s];return o[t]=n(r),f5(e,this,o)}}function Fa(e,t){return t5(xg(e,t,ln),e+"")}Og=9007199254740991;function xd(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Og}function Gt(e){return e!=null&&xd(e.length)&&!Yn(e)}function ri(e,t,n){if(!je(n))return!1;var s=typeof t;return!!(s=="number"?Gt(n)&&La(t,n.length):s=="string"&&t in n)&&bs(n[t],e)}function R5(e){return Fa(function(t,n){var a,i=-1,s=n.length,o=s>1?n[s-1]:void 0,r=s>2?n[2]:void 0,o=e.length>3&&typeof o=="function"?(s--,o):void 0;for(r&&ri(n[0],n[1],r)&&(o=s<3?void 0:o,s=1),t=Object(t);++i<s;)a=n[i],a&&e(t,a,i,o);return t})}jg=Object.prototype;function ka(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||jg;return e===n}function I5(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}bg="[object Arguments]";function vg(e){return rt(e)&&zn(e)==bg}zd=Object.prototype,gg=zd.hasOwnProperty,pg=zd.propertyIsEnumerable,fg=vg(function(){return arguments}())?vg:function(e){return rt(e)&&gg.call(e,"callee")&&!pg.call(e,"callee")};const ss=fg;function Y5(){return!1}Hd=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Id=Hd&&typeof module=="object"&&module&&!module.nodeType&&module,ug=Id&&Id.exports===Hd,Vd=ug?We.Buffer:void 0,dg=Vd?Vd.isBuffer:void 0,lg=dg||Y5;const ts=lg;var n7="[object Arguments]",s7="[object Array]",o7="[object Boolean]",i7="[object Date]",a7="[object Error]",r7="[object Function]",c7="[object Map]",l7="[object Number]",d7="[object Object]",u7="[object RegExp]",h7="[object Set]",m7="[object String]",f7="[object WeakMap]",p7="[object ArrayBuffer]",g7="[object DataView]",v7="[object Float32Array]",b7="[object Float64Array]",j7="[object Int8Array]",y7="[object Int16Array]",_7="[object Int32Array]",w7="[object Uint8Array]",O7="[object Uint8ClampedArray]",x7="[object Uint16Array]",C7="[object Uint32Array]",_={};_[v7]=_[b7]=_[j7]=_[y7]=_[_7]=_[w7]=_[O7]=_[x7]=_[C7]=!0,_[n7]=_[s7]=_[p7]=_[o7]=_[g7]=_[i7]=_[a7]=_[r7]=_[c7]=_[l7]=_[d7]=_[u7]=_[h7]=_[m7]=_[f7]=!1;function k7(e){return rt(e)&&xd(e.length)&&!!_[zn(e)]}function pa(e){return function(t){return e(t)}}Kd=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qn=Kd&&typeof module=="object"&&module&&!module.nodeType&&module,ig=qn&&qn.exports===Kd,ua=ig&&z2.process,og=function(){try{var e=qn&&qn.require&&qn.require("util").types;return e||ua&&ua.binding&&ua.binding("util")}catch{}}();const Kn=og;Jd=Kn&&Kn.isTypedArray,tg=Jd?pa(Jd):k7;const aa=tg;Qp=Object.prototype,Xp=Qp.hasOwnProperty;function Gp(e,t){var n,s=N(e),o=!s&&ss(e),i=!s&&!o&&ts(e),r=!s&&!o&&!i&&aa(e),c=s||o||i||r,a=c?I5(e.length,String):[],l=a.length;for(n in e)(t||Xp.call(e,n))&&!(c&&(n=="length"||i&&(n=="offset"||n=="parent")||r&&(n=="buffer"||n=="byteLength"||n=="byteOffset")||La(n,l)))&&a.push(n);return a}function qp(e,t){return function(n){return e(t(n))}}Kp=qp(Object.keys,Object);const $7=Kp;Up=Object.prototype,Wp=Up.hasOwnProperty;function $p(e){if(!ka(e))return $7(e);var t,n=[];for(t in Object(e))Wp.call(e,t)&&t!="constructor"&&n.push(t);return n}function ve(e){return Gt(e)?Gp(e):$p(e)}function Y7(e){var n,t=[];if(e!=null)for(n in Object(e))t.push(n);return t}Vp=Object.prototype,Ip=Vp.hasOwnProperty;function Q7(e){if(!je(e))return Y7(e);var t,s=ka(e),n=[];for(t in e)t=="constructor"&&(s||!Ip.call(e,t))||n.push(t);return n}function Rn(e){return Gt(e)?Gp(e,!0):Q7(e)}Lp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Np=/^\w*$/;function nu(e,t){if(N(e))return!1;var n=typeof e;return!!(n=="number"||n=="symbol"||n=="boolean"||e==null||_n(e))||Np.test(e)||!Lp.test(e)||t!=null&&e in Object(t)}zp=500;function sv(e){var t=zs(e,function(e){return n.size===zp&&n.clear(),e}),n=t.cache;return t}Sp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kp=/\\(\\)?/g,Ep=sv(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Sp,function(e,n,s,o){t.push(s?o.replace(kp,"$1"):n||e)}),t});const rv=Ep;function xp(e){return e==null?"":Ng(e)}function ea(e,t){return N(e)?e:nu(e,t)?[e]:rv(xp(e))}jp=1/0;function ci(e){if(typeof e=="string"||_n(e))return e;var t=e+"";return t=="0"&&1/e==-jp?"-0":t}function Zi(e,t){t=ea(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[ci(t[n++])];return n&&n==s?e:void 0}function mv(e,t,n){var s=e==null?void 0:Zi(e,t);return s===void 0?n:s}function ru(e,t){for(var n=-1,s=t.length,o=e.length;++n<s;)e[o+n]=t[n];return e}uu=ye?ye.isConcatSpreadable:void 0;function gv(e){return N(e)||ss(e)||!!(uu&&e&&e[uu])}function qi(e,t,n,s,o){var i,a=-1,r=e.length;for(n||(n=gv),o||(o=[]);++a<r;)i=e[a],t>0&&n(i)?t>1?qi(i,t-1,n,s,o):ru(o,i):s||(o[o.length]=i);return o}function Un(e){var t=e==null?0:e.length;return t?qi(e,1):[]}function jv(e){return t5(xg(e,void 0,Un),e+"")}vp=qp(Object.getPrototypeOf,Object);const fu=vp;pp="[object Object]",fp=Function.prototype,mp=Object.prototype,wu=fp.toString,hp=mp.hasOwnProperty,up=wu.call(Object);function dp(e){if(!rt(e)||zn(e)!=pp)return!1;var t,n=fu(e);return n===null||(t=hp.call(n,"constructor")&&n.constructor,typeof t=="function"&&t instanceof t&&wu.call(t)==up)}function Sv(e,t,n,s){var o=-1,i=e==null?0:e.length;for(s&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function Mv(){this.__data__=new bt,this.size=0}function Fv(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Tv(e){return this.__data__.get(e)}function zv(e){return this.__data__.has(e)}lp=200;function Nv(e,t){var s,n=this.__data__;if(n instanceof bt){if(s=n.__data__,!io||s.length<lp-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new Dt(s)}return n.set(e,t),this.size=n.size,this}function qe(e){var t=this.__data__=new bt(e);this.size=t.size}qe.prototype.clear=Mv,qe.prototype.delete=Fv,qe.prototype.get=Tv,qe.prototype.has=zv,qe.prototype.set=Nv;function Rv(e,t){return e&&ai(t,ve(t),e)}function Pv(e,t){return e&&ai(t,Rn(t),e)}Nu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ru=Nu&&typeof module=="object"&&module&&!module.nodeType&&module,rp=Ru&&Ru.exports===Nu,Hu=rp?We.Buffer:void 0,Vu=Hu?Hu.allocUnsafe:void 0;function ip(e,t){if(t)return e.slice();var n=e.length,s=Vu?Vu(n):new e.constructor(n);return e.copy(s),s}function sp(e,t){for(var s,n=-1,i=e==null?0:e.length,a=0,o=[];++n<i;)s=e[n],t(s,n,e)&&(o[a++]=s);return o}function tp(){return[]}ep=Object.prototype,J6=ep.propertyIsEnumerable,Xu=Object.getOwnPropertySymbols,Q6=Xu?function(e){return e==null?[]:(e=Object(e),sp(Xu(e),function(t){return J6.call(e,t)}))}:tp;const Ju=Q6;function Zv(e,t){return ai(e,Ju(e),t)}X6=Object.getOwnPropertySymbols,G6=X6?function(e){for(var t=[];e;)ru(t,Ju(e)),e=fu(e);return t}:tp;const Y6=G6;function n9(e,t){return ai(e,Y6(e),t)}function q6(e,t,n){var s=t(e);return N(e)?s:ru(s,n(e))}function e1(e){return q6(e,ve,Ju)}function i9(e){return q6(e,Rn,Y6)}K6=Ln(We,"DataView");const t1=K6;U6=Ln(We,"Promise");const s1=U6;W6=Ln(We,"Set");const Qn=W6;var V6="[object Map]",m9="[object Object]",B6="[object Promise]",I6="[object Set]",H6="[object WeakMap]",P6="[object DataView]",b9=on(t1),j9=on(io),y9=on(s1),_9=on(Qn),w9=on(Bl),Mn=zn;(t1&&Mn(new t1(new ArrayBuffer(1)))!=P6||io&&Mn(new io)!=V6||s1&&Mn(s1.resolve())!=B6||Qn&&Mn(new Qn)!=I6||Bl&&Mn(new Bl)!=H6)&&(Mn=function(e){var t=zn(e),n=t==m9?e.constructor:void 0,s=n?on(n):"";if(s)switch(s){case b9:return P6;case j9:return V6;case y9:return B6;case _9:return I6;case w9:return H6}return t});const os=Mn;R6=Object.prototype,L6=R6.hasOwnProperty;function k9(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&L6.call(e,"index")&&(t.index=e.index,t.input=e.input),t}N6=We.Uint8Array;const Oi=N6;function d1(e){var t=new e.constructor(e.byteLength);return new Oi(t).set(new Oi(e)),t}function F9(e,t){var n=t?d1(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}D6=/\w*$/;function z9(e){var t=new e.constructor(e.source,D6.exec(e));return t.lastIndex=e.lastIndex,t}u1=ye?ye.prototype:void 0,h1=u1?u1.valueOf:void 0;function L9(e){return h1?Object(h1.call(e)):{}}function z6(e,t){var n=t?d1(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var P9="[object Boolean]",H9="[object Date]",I9="[object Map]",B9="[object Number]",V9="[object RegExp]",$9="[object Set]",W9="[object String]",U9="[object Symbol]",K9="[object ArrayBuffer]",q9="[object DataView]",Y9="[object Float32Array]",G9="[object Float64Array]",X9="[object Int8Array]",Q9="[object Int16Array]",Z9="[object Int32Array]",J9="[object Uint8Array]",eb="[object Uint8ClampedArray]",tb="[object Uint16Array]",nb="[object Uint32Array]";function sb(e,t,n){var s=e.constructor;switch(t){case K9:return d1(e);case P9:case H9:return new s(+e);case q9:return F9(e,n);case Y9:case G9:case X9:case Q9:case Z9:case J9:case eb:case tb:case nb:return z6(e,n);case I9:return new s;case B9:case W9:return new s(e);case V9:return z9(e);case $9:return new s;case U9:return L9(e)}}function T6(e){return typeof e.constructor=="function"&&!ka(e)?p5(fu(e)):{}}F6="[object Map]";function ab(e){return rt(e)&&os(e)==F6}b1=Kn&&Kn.isMap,M6=b1?pa(b1):ab;const lb=M6;S6="[object Set]";function ub(e){return rt(e)&&os(e)==S6}y1=Kn&&Kn.isSet,A6=y1?pa(y1):ub;const fb=A6;var S,q,X,pb=1,gb=2,vb=4,qg,M1,fi,ht,D1,N1,$1,U1,J1,n0,ba,P0,G0,Ar,nc,_r,Zu,mi,Qi,$m,Wm,L8,U8,jl,bl,Mr,jo,ll,Nr,wo,a6,Z6,st,cp,bp,_p,Pp,Zd,Xd,ha,ag,rg,Td,Ra,Pa,ii,nd,td,Ql,Gl,hn,ei,Jg,Zg,un,Xg,Yg,Hl,mr,Pl,Dl,Sl,wr,Qo,Dg,zg,Dn,Fg,Sg,fl,Fr,Rs,Hr,$3,Ld,xs,oo,_a,L3,ke,N3,z3,ne,ga,Qd,la,ra,j3,ia,l3,su,ou,na,au,no,i3,o3,n3,Q2,X2,G2,V2,H2,P2,L2,F2,is,q1,Y1,G1,X1,Q1,Z1,mt,a4,r4,c4,p4,g4,v4,b4,v1,O4,k4,D4,N4,P4,B4,V4,$4,p1,m1,G4,Q4,yi,s0,o0,i0,c0,l0,h0,m0,g0,v0,Et,Ws,c1,r1,Us,ki,x0,n1,E0,k0,A0,Qu,Gu,Bu,Iu,kn,Lu,v2,b2,j2,y2,_2,T2,D2,N2,R2,pu,I2,B2,Zn,W2,U2,q2,Y2,mu,s3,cu,r3,c3,d3,u3,h3,m3,f3,p3,g3,y3,x3,C3,E3,A3,S3,F3,R3,P3,W3,eh,rd,ad,id,Ih,Bh,Vh,Ya,mo,An,Yl,ge,Bn,cl,Xr,Mo,x6,Qr,kg,Mg,Tg,_l,wl,Lg,Pg,Ml,Bg,Vg,$g,Wg,Ll,F1,Qg,Vl,e5,i5,a5,r5,c5,s5,n5,Ug,Ig,Rg,Ag,Od,Og,jg,bg,zd,gg,pg,fg,Hd,Id,ug,Vd,dg,lg,Kd,qn,ig,ua,og,Jd,tg,Qp,Xp,Kp,Up,Wp,Vp,Ip,Lp,Np,zp,Sp,kp,Ep,jp,uu,vp,pp,fp,mp,wu,hp,up,lp,Nu,Ru,rp,Hu,Vu,ep,J6,Xu,Q6,X6,G6,K6,U6,W6,R6,L6,N6,D6,u1,h1,F6,b1,M6,S6,y1,A6,k6="[object Arguments]",jb="[object Array]",yb="[object Boolean]",_b="[object Date]",wb="[object Error]",E6="[object Function]",xb="[object GeneratorFunction]",Cb="[object Map]",Eb="[object Number]",C6="[object Object]",Ab="[object RegExp]",Sb="[object Set]",Mb="[object String]",Fb="[object Symbol]",Tb="[object WeakMap]",O6,w6,_6,j6,p6,f6,u6,d6,l6,o6,s6,Qf,Gf,Yf,Kf,Uf,jc,$f,Vf,Rf,Lf,Ff,Mf,Sf,Af,kf,Ef,Of,wf,_f,yf,bf,gf,pf,ff,mf,uf,df,lf,Xt,Rc,tf,D8,T8,M8,A8,E8,x8,w8,y8,Zm,fr,Ti,xh,Ua,Er,Tr,zr,Br,mh,hh,Zr,cc,Hc,Ic,oc,Gr,Dr,sr,Ui,zb="[object ArrayBuffer]",Db="[object DataView]",Nb="[object Float32Array]",Lb="[object Float64Array]",Rb="[object Int8Array]",Pb="[object Int16Array]",Hb="[object Int32Array]",Ib="[object Uint8Array]",Bb="[object Uint8ClampedArray]",Vb="[object Uint16Array]",$b="[object Uint32Array]",y={};y[k6]=y[jb]=y[zb]=y[Db]=y[yb]=y[_b]=y[Nb]=y[Lb]=y[Rb]=y[Pb]=y[Hb]=y[Cb]=y[Eb]=y[C6]=y[Ab]=y[Sb]=y[Mb]=y[Fb]=y[Ib]=y[Bb]=y[Vb]=y[$b]=!0,y[wb]=y[E6]=y[Tb]=!1;function di(e,t,n,s,o,i){var a,r,d,u,h,m,f,c=t&pb,l=t&gb,p=t&vb;if(n&&(a=o?n(e,s,o,i):n(e)),a!==void 0)return a;if(!je(e))return e;if(d=N(e),d){if(a=k9(e),!c)return o5(e,a)}else{if(r=os(e),u=r==E6||r==xb,ts(e))return ip(e,c);if(r==C6||r==k6||u&&!o){if(a=l||u?{}:T6(e),!c)return l?n9(e,Pv(a,e)):Zv(e,Rv(a,e))}else{if(!y[r])return o?e:{};a=sb(e,r,c)}}return i||(i=new qe),h=i.get(e),h||(i.set(e,a),fb(e)?e.forEach(function(s){a.add(di(s,t,n,s,e,i))}):lb(e)&&e.forEach(function(s,o){a.set(o,di(s,t,n,o,e,i))}),f=p?l?i9:e1:l?Rn:ve,m=d?void 0:f(e),Gg(m||e,function(s,o){m&&(o=s,s=e[o]),Da(a,o,di(s,t,n,o,e,i))}),a)}O6=4;function qb(e){return di(e,O6)}w6=1,_6=4;function Xb(e){return di(e,w6|_6)}j6="__lodash_hash_undefined__";function Zb(e){return this.__data__.set(e,j6),this}function Jb(e){return this.__data__.has(e)}function Is(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Dt;++t<n;)this.add(e[t])}Is.prototype.add=Is.prototype.push=Zb,Is.prototype.has=Jb;function tj(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}function v6(e,t){return e.has(t)}p6=1,f6=2;function m6(e,t,n,s,o,i){var a,c,u,h,f,p=n&p6,d=e.length,g=t.length;if(d!=g&&!(p&&g>d))return!1;if(u=i.get(e),h=i.get(t),u&&h)return u==t&&h==e;var r=-1,l=!0,m=n&f6?new Is:void 0;for(i.set(e,t),i.set(t,e);++r<d;){if(a=e[r],c=t[r],s&&(f=p?s(c,a,r,t,e,i):s(a,c,r,e,t,i)),f!==void 0){if(f)continue;l=!1;break}if(m){if(!tj(t,function(e,t){if(!v6(m,t)&&(a===e||o(a,e,n,s,i)))return m.push(t)})){l=!1;break}}else if(a!==c&&!o(a,c,n,s,i)){l=!1;break}}return i.delete(e),i.delete(t),l}function aj(e){var n=-1,t=Array(e.size);return e.forEach(function(e,s){t[++n]=[s,e]}),t}function k1(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t}var cj=1,lj=2,dj="[object Boolean]",uj="[object Date]",hj="[object Error]",mj="[object Map]",fj="[object Number]",pj="[object RegExp]",gj="[object Set]",vj="[object String]",bj="[object Symbol]",jj="[object ArrayBuffer]",yj="[object DataView]",h6=ye?ye.prototype:void 0,A1=h6?h6.valueOf:void 0;function Oj(e,t,n,s,o,i,a){switch(n){case yj:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case jj:return e.byteLength==t.byteLength&&!!i(new Oi(e),new Oi(t));case dj:case uj:case fj:return bs(+e,+t);case hj:return e.name==t.name&&e.message==t.message;case pj:case vj:return e==t+"";case mj:var c,l,d,r=aj;case gj:return l=s&cj,r||(r=k1),!(e.size!=t.size&&!l)&&(c=a.get(e),c?c==t:(s|=lj,a.set(e,t),d=m6(r(e),r(t),s,o,i,a),a.delete(e),d));case bj:if(A1)return A1.call(e)==A1.call(t)}return!1}u6=1,d6=Object.prototype,l6=d6.hasOwnProperty;function kj(e,t,n,s,o,i){var a,r,c,l,d,u,h,m,p,g,v,f=n&u6,j=e1(e),b=j.length,_=e1(t),y=_.length;if(b!=y&&!f)return!1;for(h=b;h--;)if(a=j[h],!(f?a in t:l6.call(t,a)))return!1;if(g=i.get(e),p=i.get(t),g&&p)return g==t&&p==e;for(r=!0,i.set(e,t),i.set(t,e),m=f;++h<b;){if(a=j[h],u=e[a],d=t[a],s&&(v=f?s(d,u,a,t,e,i):s(u,d,a,e,t,i)),!(v===void 0?u===d||o(u,d,n,s,i):v)){r=!1;break}m||(m=a=="constructor")}return r&&!m&&(l=e.constructor,c=t.constructor,l!=c&&"constructor"in e&&"constructor"in t&&!(typeof l=="function"&&l instanceof l&&typeof c=="function"&&c instanceof c)&&(r=!1)),i.delete(e),i.delete(t),r}var Aj=1,c6="[object Arguments]",r6="[object Array]",nr="[object Object]",Tj=Object.prototype,i6=Tj.hasOwnProperty;function Dj(e,t,n,s,o,i){var u,h,m,f,c=N(e),p=N(t),a=c?r6:os(e),r=p?r6:os(t),a=a==c6?nr:a,r=r==c6?nr:r,l=a==nr,g=r==nr,d=a==r;if(d&&ts(e)){if(!ts(t))return!1;c=!0,l=!1}return d&&!l?(i||(i=new qe),c||aa(e)?m6(e,t,n,s,o,i):Oj(e,t,a,n,s,o,i)):!(n&Aj)&&(u=l&&i6.call(e,"__wrapped__"),h=g&&i6.call(t,"__wrapped__"),u||h)?(m=u?e.value():e,f=h?t.value():t,i||(i=new qe),o(m,f,n,s,i)):!!d&&(i||(i=new qe),kj(e,t,n,s,o,i))}function C1(e,t,n,s,o){return e===t||(e==null||t==null||!rt(e)&&!rt(t)?e!==e&&t!==t:Dj(e,t,n,s,C1,o))}o6=1,s6=2;function Pj(e,t,n,s){var o,c,l,i=n.length,d=i,u=!s;if(e==null)return!d;for(e=Object(e);i--;)if(o=n[i],u&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1;for(;++i<d;){o=n[i];var a=o[0],r=e[a],h=o[1];if(u&&o[2]){if(r===void 0&&!(a in e))return!1}else if(c=new qe,s&&(l=s(r,h,a,e,t,c)),!(l===void 0?C1(h,r,o6|s6,s,c):l))return!1}return!0}function n6(e){return e===e&&!je(e)}function Ij(e){for(var s,o,t=ve(e),n=t.length;n--;)s=t[n],o=e[s],t[n]=[s,o,n6(o)];return t}function e6(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}}function Vj(e){var t=Ij(e);return t.length==1&&t[0][2]?e6(t[0][0],t[0][1]):function(n){return n===e||Pj(n,e,t)}}function $j(e,t){return e!=null&&t in Object(e)}function Jf(e,t,n){t=ea(t,e);for(var o,i=-1,s=t.length,a=!1;++i<s;){if(o=ci(t[i]),!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++i!=s?a:(s=e==null?0:e.length,!!s&&xd(s)&&La(o,s)&&(N(e)||ss(e)))}function Zf(e,t){return e!=null&&Jf(e,t,$j)}Qf=1,Gf=2;function Yj(e,t){return nu(e)&&n6(t)?e6(ci(e),t):function(n){var s=mv(n,e);return s===void 0&&s===t?Zf(n,e):C1(t,s,Qf|Gf)}}function Gj(e){return function(t){return t?.[e]}}function Xj(e){return function(t){return Zi(t,e)}}function Qj(e){return nu(e)?Gj(ci(e)):Xj(e)}function $t(e){return typeof e=="function"?e:e==null?ln:typeof e=="object"?N(e)?Yj(e[0],e[1]):Vj(e):Qj(e)}function Jj(e){return function(t,n,s){for(var o,c=-1,i=Object(t),a=s(t),r=a.length;r--;)if(o=a[e?r:++c],n(i[o],o,i)===!1)break;return t}}Yf=Jj();const o1=Yf;function qf(e,t){return e&&o1(e,t,ve)}function sy(e,t){return function(n,s){if(n==null)return n;if(!Gt(n))return e(n,s);for(var i=n.length,o=t?i:-1,a=Object(n);t?o--:++o<i;)if(s(a[o],o,a)===!1)break;return n}}Kf=sy(qf);const Ji=Kf;Uf=function(){return We.Date.now()};const Wf=Uf;jc=Object.prototype,$f=jc.hasOwnProperty,Vf=Fa(function(e,t){e=Object(e);var n,o,i,a,r,d,c=-1,s=t.length,l=s>2?t[2]:void 0;for(l&&ri(t[0],t[1],l)&&(s=1);++c<s;)for(o=t[c],i=Rn(o),a=-1,d=i.length;++a<d;)n=i[a],r=e[n],(r===void 0||bs(r,jc[n])&&!$f.call(e,n))&&(e[n]=o[n]);return e});const ls=Vf;function bd(e,t,n){(n!==void 0&&!bs(e[t],n)||n===void 0&&!(t in e))&&Na(e,t,n)}function Bf(e){return rt(e)&&Gt(e)}function gd(e,t){if(t==="constructor"&&typeof e[t]=="function")return;if(t=="__proto__")return;return e[t]}function py(e){return ai(e,Rn(e))}function gy(e,t,n,s,o,i,a){var c,d,l=gd(e,n),r=gd(t,n),m=a.get(r);if(m){bd(e,n,m);return}if(c=i?i(l,r,n+"",e,t,a):void 0,d=c===void 0,d){var u=N(r),h=!u&&ts(r),f=!u&&!h&&aa(r);c=r,u||h||f?N(l)?c=l:Bf(l)?c=o5(l):h?(d=!1,c=ip(r,!0)):f?(d=!1,c=z6(r,!0)):c=[]:dp(r)||ss(r)?(c=l,ss(l)?c=py(l):(!je(l)||Yn(l))&&(c=T6(r))):d=!1}d&&(a.set(r,c),o(c,r,s,i,a),a.delete(r)),bd(e,n,c)}function Hf(e,t,n,s,o){if(e===t)return;o1(t,function(i,a){if(o||(o=new qe),je(i))gy(e,t,a,n,Hf,s,o);else{var r=s?s(gd(e,a),i,a+"",e,t,o):void 0;r===void 0&&(r=i),bd(e,a,r)}},Rn)}function by(e,t,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(n(t,e[s]))return!0;return!1}function Xa(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Pf(e){return typeof e=="function"?e:ln}function o(e,t){var n=N(e)?Gg:Ji;return n(e,Pf(t))}function wy(e,t){var n=[];return Ji(e,function(e,s,o){t(e,s,o)&&n.push(e)}),n}function Rt(e,t){var n=N(e)?sp:wy;return n(e,$t(t))}function xy(e){return function(t,n,s){var o,a,i=Object(t);return Gt(t)||(a=$t(n),t=ve(t),n=function(e){return a(i[e],e,i)}),o=e(t,n,s),o>-1?i[a?t[o]:o]:void 0}}Rf=Math.max;function Ey(e,t,n){var s,o=e==null?0:e.length;return o?(s=n==null?0:g5(n),s<0&&(s=Rf(o+s,0)),Kg(e,$t(t),s)):-1}Lf=xy(Ey);const Kl=Lf;function Nf(e,t){var s=-1,n=Gt(e)?Array(e.length):[];return Ji(e,function(e,o,i){n[++s]=t(e,o,i)}),n}function z(e,t){var n=N(e)?ks:Nf;return n(e,$t(t))}function Fy(e,t){return e==null?e:o1(e,Pf(t),Rn)}function Ty(e,t){return e>t}Ff=Object.prototype,Mf=Ff.hasOwnProperty;function Ny(e,t){return e!=null&&Mf.call(e,t)}function p(e,t){return e!=null&&Jf(e,t,Ny)}function Ry(e,t){return ks(t,function(t){return e[t]})}function Tt(e){return e==null?[]:Ry(e,ve(e))}Sf="[object Map]",Af="[object Set]",kf=Object.prototype,Ef=kf.hasOwnProperty;function gs(e){if(e==null)return!0;if(Gt(e)&&(N(e)||typeof e=="string"||typeof e.splice=="function"||ts(e)||aa(e)||ss(e)))return!e.length;var n,t=os(e);if(t==Sf||t==Af)return!e.size;if(ka(e))return!$p(e).length;for(n in e)if(Ef.call(e,n))return!1;return!0}function k(e){return e===void 0}function xf(e,t){return e<t}function Ir(e,t){var n={};return t=$t(t),qf(e,function(e,s,o){Na(n,s,t(e,s,o))}),n}function nl(e,t,n){for(var s,o,i,r,a=-1,c=e.length;++a<c;)o=e[a],s=t(o),s!=null&&(i===void 0?s===s&&!_n(s):n(s,i))&&(i=s,r=o);return r}function xn(e){return e&&e.length?nl(e,ln,Ty):void 0}Of=R5(function(e,t,n){Hf(e,t,n)});const tl=Of;function Wo(e){return e&&e.length?nl(e,ln,xf):void 0}function el(e,t){return e&&e.length?nl(e,$t(t),xf):void 0}function Jy(e,t,n,s){if(!je(e))return e;t=ea(t,e);for(var o,a,c,r=-1,l=t.length,d=l-1,i=e;i!=null&&++r<l;){if(o=ci(t[r]),a=n,o==="__proto__"||o==="constructor"||o==="prototype")return e;r!=d&&(c=i[o],a=s?s(c,o,i):void 0,a===void 0&&(a=je(c)?c:La(t[r+1])?[]:{})),Da(i,o,a),i=i[o]}return e}function e_(e,t,n){for(var s,o,i=-1,r=t.length,a={};++i<r;)s=t[i],o=Zi(e,s),n(o,s)&&Jy(a,ea(s,e),o);return a}function t_(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function n_(e,t){if(e!==t){var a=e!==void 0,r=e===null,n=e===e,s=_n(e),c=t!==void 0,l=t===null,o=t===t,i=_n(t);if(!l&&!i&&!s&&e>t||s&&c&&o&&!l&&!i||r&&c&&o||!a&&o||!n)return 1;if(!r&&!s&&!i&&e<t||i&&a&&n&&!r&&!s||l&&a&&n||!c&&n||!o)return-1}return 0}function s_(e,t,n){for(var o,a,s=-1,i=e.criteria,r=t.criteria,c=i.length,l=n.length;++s<c;)if(o=n_(i[s],r[s]),o)return s>=l?o:(a=n[s],o*(a=="desc"?-1:1));return e.index-t.index}function o_(e,t,n){t.length?t=ks(t,function(e){return N(e)?function(t){return Zi(t,e.length===1?e[0]:e)}:e}):t=[ln];var s,o=-1;return t=ks(t,pa($t)),s=Nf(e,function(e){var i=ks(t,function(t){return t(e)});return{criteria:i,index:++o,value:e}}),t_(s,function(e,t){return s_(e,t,n)})}function i_(e,t){return e_(e,t,function(t,n){return Zf(e,n)})}wf=jv(function(e,t){return e==null?{}:i_(e,t)});const Vo=wf;_f=Math.ceil,yf=Math.max;function d_(e,t,n,s){for(var a=-1,o=yf(_f((t-e)/(n||1)),0),i=Array(o);o--;)i[s?o:++a]=e,e+=n;return i}function u_(e){return function(t,n,s){return s&&typeof s!="number"&&ri(t,n,s)&&(n=s=void 0),t=dr(t),n===void 0?(n=t,t=0):n=dr(n),s=s===void 0?t<n?1:-1:dr(s),d_(t,n,s,e)}}bf=u_();const On=bf;function f_(e,t,n,s,o){return o(e,function(e,o,i){n=s?(s=!1,e):t(n,e,o,i)}),n}function Io(e,t,n){var s=N(e)?Sv:f_,o=arguments.length<3;return s(e,$t(t),n,o,Ji)}gf=Fa(function(e,t){if(e==null)return[];var n=t.length;return n>1&&ri(e,t[0],t[1])?t=[]:n>2&&ri(t[0],t[1],t[2])&&(t=[t[0]]),o_(e,qi(t,1),[])});const Ho=gf;pf=1/0,ff=Qn&&1/k1(new Qn([,-0]))[1]==pf?function(e){return new Qn(e)}:h5;const y_=ff;mf=200;function w_(e,t,n){var o,i,l,d,u=-1,r=_5,h=e.length,c=!0,a=[],s=a;if(n)c=!1,r=by;else if(h>=mf){if(l=t?null:y_(e),l)return k1(l);c=!1,r=v6,s=new Is}else s=t?[]:a;outer:for(;++u<h;)if(o=e[u],i=t?t(o):o,o=n||o!==0?o:0,c&&i===i){for(d=s.length;d--;)if(s[d]===i)continue outer;t&&s.push(i),a.push(o)}else r(s,i,n)||(s!==a&&s.push(i),a.push(o));return a}uf=Fa(function(e){return w_(qi(e,1,Bf,!0))});const x_=uf;df=0;function qr(e){var t=++df;return xp(e)+t}function k_(e,t,n){for(var i,s=-1,a=e.length,r=t.length,o={};++s<a;)i=s<r?t[s]:void 0,n(o,e[s],i);return o}function A_(e,t){return k_(e||[],t||[],Da)}lf="\0",Xt="\0",Rc="";class D{constructor(e={}){this._isDirected=!p(e,"directed")||e.directed,this._isMultigraph=!!p(e,"multigraph")&&e.multigraph,this._isCompound=!!p(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Ms(void 0),this._defaultEdgeLabelFn=Ms(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Xt]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return Yn(e)||(e=Ms(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return ve(this._nodes)}sources(){var e=this;return Rt(this.nodes(),function(t){return gs(e._in[t])})}sinks(){var e=this;return Rt(this.nodes(),function(t){return gs(e._out[t])})}setNodes(e,t){var s=arguments,n=this;return o(e,function(e){s.length>1?n.setNode(e,t):n.setNode(e)}),this}setNode(e,t){return p(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=Xt,this._children[e]={},this._children[Xt][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return p(this._nodes,e)}removeNode(e){var n,t=this;return p(this._nodes,e)&&(n=function(e){t.removeEdge(t._edgeObjs[e])},delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],o(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),o(ve(this._in[e]),n),delete this._in[e],delete this._preds[e],o(ve(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount),this}setParent(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(k(t))t=Xt;else{t+="";for(var n=t;!k(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if(t!==Xt)return t}}children(e){if(k(e)&&(e=Xt),this._isCompound){{var t=this._children[e];if(t)return ve(t)}}else if(e===Xt)return this.nodes();else if(this.hasNode(e))return[]}predecessors(e){var t=this._preds[e];if(t)return ve(t)}successors(e){var t=this._sucs[e];if(t)return ve(t)}neighbors(e){var t=this.predecessors(e);if(t)return x_(t,this.successors(e))}isLeaf(e){var t;return this.isDirected()?t=this.successors(e):t=this.neighbors(e),t.length===0}filterNodes(e){var n,s,t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph()),s=this,o(this._nodes,function(n,s){e(s)&&t.setNode(s,n)}),o(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,s.edge(e))}),n={};function i(e){var o=s.parent(e);return o===void 0||t.hasNode(o)?(n[e]=o,o):o in n?n[o]:i(o)}return this._isCompound&&o(t.nodes(),function(e){t.setParent(e,i(e))}),t}setDefaultEdgeLabel(e){return Yn(e)||(e=Ms(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return Tt(this._edgeObjs)}setPath(e,t){var n=this,s=arguments;return Io(e,function(e,o){return s.length>1?n.setEdge(e,o,t):n.setEdge(e,o),o}),this}setEdge(){var e,t,n,o,i,a,r=!1,s=arguments[0];if(typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,k(n)||(n=""+n),o=Do(this._isDirected,e,t,n),p(this._edgeLabels,o))return r&&(this._edgeLabels[o]=a),this;if(!k(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");return this.setNode(e),this.setNode(t),this._edgeLabels[o]=r?a:this._defaultEdgeLabelFn(e,t,n),i=L_(this._isDirected,e,t,n),e=i.v,t=i.w,Object.freeze(i),this._edgeObjs[o]=i,cf(this._preds[t],e),cf(this._sucs[e],t),this._in[t][o]=i,this._out[e][o]=i,this._edgeCount++,this}edge(e,t,n){var s=arguments.length===1?Cc(this._isDirected,arguments[0]):Do(this._isDirected,e,t,n);return this._edgeLabels[s]}hasEdge(e,t,n){var s=arguments.length===1?Cc(this._isDirected,arguments[0]):Do(this._isDirected,e,t,n);return p(this._edgeLabels,s)}removeEdge(e,t,n){var s=arguments.length===1?Cc(this._isDirected,arguments[0]):Do(this._isDirected,e,t,n),o=this._edgeObjs[s];return o&&(e=o.v,t=o.w,delete this._edgeLabels[s],delete this._edgeObjs[s],rf(this._preds[t],e),rf(this._sucs[e],t),delete this._in[t][s],delete this._out[e][s],this._edgeCount--),this}inEdges(e,t){var n,s=this._in[e];if(s)return n=Tt(s),t?Rt(n,function(e){return e.v===t}):n}outEdges(e,t){var n,s=this._out[e];if(s)return n=Tt(s),t?Rt(n,function(e){return e.w===t}):n}nodeEdges(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}}D.prototype._nodeCount=0,D.prototype._edgeCount=0;function cf(e,t){e[t]?e[t]++:e[t]=1}function rf(e,t){--e[t]||delete e[t]}function Do(e,t,n,s){var a,o=""+t,i=""+n;return!e&&o>i&&(a=o,o=i,i=a),o+Rc+i+Rc+(k(s)?lf:s)}function L_(e,t,n,s){var a,r,o=""+t,i=""+n;return!e&&o>i&&(r=o,o=i,i=r),a={v:o,w:i},s&&(a.name=s),a}function Cc(e,t){return Do(e,t.v,t.w,t.name)}class P_{constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var t=this._sentinel,e=t._prev;if(e!==t)return nf(e),e}enqueue(e){var t=this._sentinel;e._prev&&e._next&&nf(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){for(var t=[],n=this._sentinel,e=n._prev;e!==n;)t.push(JSON.stringify(e,I_)),e=e._prev;return"["+t.join(", ")+"]"}}function nf(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function I_(e,t){if(e!=="_next"&&e!=="_prev")return t}tf=Ms(1);function V_(e,t){if(e.nodeCount()<=1)return[];var n=U_(e,t||tf),s=$_(n.graph,n.buckets,n.zeroIdx);return Un(z(s,function(t){return e.outEdges(t.v,t.w)}))}function $_(e,t,n){for(var s,o,i=[],a=t[t.length-1],r=t[0];e.nodeCount();){for(;s=r.dequeue();)yc(e,t,n,s);for(;s=a.dequeue();)yc(e,t,n,s);if(e.nodeCount())for(o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){i=i.concat(yc(e,t,n,s,!0));break}}return i}function yc(e,t,n,s,i){var a=i?[]:void 0;return o(e.inEdges(s.v),function(s){var r=e.edge(s),o=e.node(s.v);i&&a.push({v:s.v,w:s.w}),o.out-=r,_c(t,n,o)}),o(e.outEdges(s.v),function(s){var i=e.edge(s),a=s.w,o=e.node(a);o.in-=i,_c(t,n,o)}),e.removeNode(s.v),a}function U_(e,t){var a,r,n=new D,s=0,i=0;return o(e.nodes(),function(e){n.setNode(e,{v:e,in:0,out:0})}),o(e.edges(),function(e){var a=n.edge(e.v,e.w)||0,o=t(e),r=a+o;n.setEdge(e.v,e.w,r),i=Math.max(i,n.node(e.v).out+=o),s=Math.max(s,n.node(e.w).in+=o)}),a=On(i+s+3).map(function(){return new P_}),r=s+1,o(n.nodes(),function(e){_c(a,r,n.node(e))}),{graph:n,buckets:a,zeroIdx:r}}function _c(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function q_(e){var t=e.graph().acyclicer==="greedy"?V_(e,n(e)):Y_(e);o(t,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,qr("rev"))});function n(e){return function(t){return e.edge(t).weight}}}function Y_(e){var n=[],t={},s={};function i(a){if(p(s,a))return;s[a]=!0,t[a]=!0,o(e.outEdges(a),function(e){p(t,e.w)?n.push(e):i(e.w)}),delete t[a]}return o(e.nodes(),i),n}function G_(e){o(e.edges(),function(t){var s,n=e.edge(t);n.reversed&&(e.removeEdge(t),s=n.forwardName,delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,s))})}function Cs(e,t,n,s){var o;do o=qr(s);while(e.hasNode(o))return n.dummy=t,e.setNode(o,n),o}function Q_(e){var t=(new D).setGraph(e.graph());return o(e.nodes(),function(n){t.setNode(n,e.node(n))}),o(e.edges(),function(n){var s=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:s.weight+o.weight,minlen:Math.max(s.minlen,o.minlen)})}),t}function ef(e){var t=new D({multigraph:e.isMultigraph()}).setGraph(e.graph());return o(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),o(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function J8(e,t){var a,r,c=e.x,l=e.y,n=t.x-c,s=t.y-l,o=e.width/2,i=e.height/2;if(!n&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*o>Math.abs(n)*i?(s<0&&(i=-i),a=i*n/s,r=i):(n<0&&(o=-o),a=o,r=o*s/n),{x:c+a,y:l+r}}function mc(e){var t=z(On(Q8(e)+1),function(){return[]});return o(e.nodes(),function(n){var s=e.node(n),o=s.rank;k(o)||(t[o][s.order]=n)}),t}function tw(e){var t=Wo(z(e.nodes(),function(t){return e.node(t).rank}));o(e.nodes(),function(n){var s=e.node(n);p(s,"rank")&&(s.rank-=t)})}function nw(e){var n,s,i=Wo(z(e.nodes(),function(t){return e.node(t).rank})),t=[];o(e.nodes(),function(n){var s=e.node(n).rank-i;t[s]||(t[s]=[]),t[s].push(n)}),n=0,s=e.graph().nodeRankFactor,o(t,function(t,i){k(t)&&i%s!==0?--n:n&&o(t,function(t){e.node(t).rank+=n})})}function Z8(e,t,n,s){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=s),Cs(e,"border",o,t)}function Q8(e){return xn(z(e.nodes(),function(t){var n=e.node(t).rank;if(!k(n))return n}))}function iw(e,t){var n={lhs:[],rhs:[]};return o(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n}function aw(e,t){var n=Wf();try{return t()}finally{console.log(e+" time: "+(Wf()-n)+"ms")}}function rw(e,t){return t()}function cw(e){function t(n){if(a=e.children(n),s=e.node(n),a.length&&o(a,t),p(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var s,a,i=s.minRank,r=s.maxRank+1;i<r;++i)X8(e,"borderLeft","_bl",n,s,i),X8(e,"borderRight","_br",n,s,i)}}o(e.children(),t)}function X8(e,t,n,s,o,i){var c={width:0,height:0,rank:i,borderType:t},r=o[t][i-1],a=Cs(e,"border",c,n);o[t][i]=a,e.setParent(a,s),r&&e.setEdge(r,a,{weight:1})}function dw(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Y8(e)}function uw(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&fw(e),(t==="lr"||t==="rl")&&(gw(e),Y8(e))}function Y8(e){o(e.nodes(),function(t){q8(e.node(t))}),o(e.edges(),function(t){q8(e.edge(t))})}function q8(e){var t=e.width;e.width=e.height,e.height=t}function fw(e){o(e.nodes(),function(t){Nc(e.node(t))}),o(e.edges(),function(t){var n=e.edge(t);o(n.points,Nc),p(n,"y")&&Nc(n)})}function Nc(e){e.y=-e.y}function gw(e){o(e.nodes(),function(t){Ol(e.node(t))}),o(e.edges(),function(t){var n=e.edge(t);o(n.points,Ol),p(n,"x")&&Ol(n)})}function Ol(e){var t=e.x;e.x=e.y,e.y=t}function bw(e){var a,n=Cs(e,"root",{},"_root"),s=yw(e),i=xn(Tt(s))-1,t=2*i+1;e.graph().nestingRoot=n,o(e.edges(),function(n){e.edge(n).minlen*=t}),a=_w(e)+1,o(e.children(),function(o){W8(e,n,t,a,i,s,o)}),e.graph().nodeRankFactor=t}function W8(e,t,n,s,i,a,r){var c,l,d,u=e.children(r);if(!u.length){r!==t&&e.setEdge(t,r,{weight:0,minlen:n});return}c=Z8(e,"_bt"),l=Z8(e,"_bb"),d=e.node(r),e.setParent(c,r),d.borderTop=c,e.setParent(l,r),d.borderBottom=l,o(u,function(o){W8(e,t,n,s,i,a,o);var d=e.node(o),u=d.borderTop?d.borderTop:o,h=d.borderBottom?d.borderBottom:o,m=d.borderTop?s:2*s,f=u!==h?1:i-a[r]+1;e.setEdge(c,u,{weight:m,minlen:f,nestingEdge:!0}),e.setEdge(h,l,{weight:m,minlen:f,nestingEdge:!0})}),e.parent(r)||e.setEdge(t,c,{weight:0,minlen:i+a[r]})}function yw(e){var t={};function n(s,i){var a=e.children(s);a&&a.length&&o(a,function(e){n(e,i+1)}),t[s]=i}return o(e.children(),function(e){n(e,1)}),t}function _w(e){return Io(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function ww(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,o(e.edges(),function(t){var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}function Ow(e,t,n){var i,s={};o(n,function(n){for(var a,r,o=e.parent(n);o;){if(a=e.parent(o),a?(r=s[a],s[a]=o):(r=i,i=o),r&&r!==o){t.setEdge(r,o);return}o=a}})}function xw(e,t,n){var i=Cw(e),s=new D({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});return o(e.nodes(),function(a){var r=e.node(a),c=e.parent(a);(r.rank===t||r.minRank<=t&&t<=r.maxRank)&&(s.setNode(a),s.setParent(a,c||i),o(e[n](a),function(t){var n=t.v===a?t.w:t.v,o=s.edge(n,a),i=k(o)?0:o.weight;s.setEdge(n,a,{weight:e.edge(t).weight+i})}),p(r,"minRank")&&s.setNode(a,{borderLeft:r.borderLeft[t],borderRight:r.borderRight[t]}))}),s}function Cw(e){for(var t;e.hasNode(t=qr("_root")););return t}function Ew(e,t){for(var s=0,n=1;n<t.length;++n)s+=kw(e,t[n-1],t[n]);return s}function kw(e,t,n){for(var i,a,r,c=A_(n,z(n,function(e,t){return t})),l=Un(z(t,function(t){return Ho(z(e.outEdges(t),function(t){return{pos:c[t.w],weight:e.edge(t).weight}}),"pos")})),s=1;s<n.length;)s<<=1;return r=2*s-1,s-=1,i=z(new Array(r),function(){return 0}),a=0,o(l.forEach(function(e){var n,t=e.pos+s;for(i[t]+=e.weight,n=0;t>0;)t%2&&(n+=i[t+1]),t=t-1>>1,i[t]+=e.weight;a+=e.weight*n})),a}function Aw(e){var a,t={},n=Rt(e.nodes(),function(t){return!e.children(t).length}),r=xn(z(n,function(t){return e.node(t).rank})),s=z(On(r+1),function(){return[]});function i(n){if(p(t,n))return;t[n]=!0;var a=e.node(n);s[a.rank].push(n),o(e.successors(n),i)}return a=Ho(n,function(t){return e.node(t).rank}),o(a,i),s}function Sw(e,t){return z(t,function(t){var n,s=e.inEdges(t);return s.length?(n=Io(s,function(t,n){var s=e.edge(n),o=e.node(n.v);return{sum:t.sum+s.weight*o.order,weight:t.weight+s.weight}},{sum:0,weight:0}),{v:t,barycenter:n.sum/n.weight,weight:n.weight}):{v:t}})}function Mw(e,t){var s,n={};return o(e,function(e,t){var s=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};k(e.barycenter)||(s.barycenter=e.barycenter,s.weight=e.weight)}),o(t.edges(),function(e){var t=n[e.v],s=n[e.w];!k(t)&&!k(s)&&(s.indegree++,t.out.push(n[e.w]))}),s=Rt(n,function(e){return!e.indegree}),Fw(s)}function Fw(e){var t,n=[];function s(e){return function(t){if(t.merged)return;(k(t.barycenter)||k(e.barycenter)||t.barycenter>=e.barycenter)&&Tw(e,t)}}function i(t){return function(n){n.in.push(t),--n.indegree===0&&e.push(n)}}for(;e.length;)t=e.pop(),n.push(t),o(t.in.reverse(),s(t)),o(t.out,i(t));return z(Rt(n,function(e){return!e.merged}),function(e){return Vo(e,["vs","i","barycenter","weight"])})}function Tw(e,t){var s=0,n=0;e.weight&&(s+=e.barycenter*e.weight,n+=e.weight),t.weight&&(s+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=s/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}function zw(e,t){var a,r=iw(e,function(e){return p(e,"barycenter")}),c=r.lhs,l=Ho(r.rhs,function(e){return-e.i}),s=[],d=0,i=0,n=0;return c.sort(Nw(!!t)),n=$8(s,l,n),o(c,function(e){n+=e.vs.length,s.push(e.vs),d+=e.barycenter*e.weight,i+=e.weight,n=$8(s,l,n)}),a={vs:Un(s)},i&&(a.barycenter=d/i,a.weight=i),a}function $8(e,t,n){for(var s;t.length&&(s=Xa(t)).i<=n;)t.pop(),e.push(s.vs),n++;return n}function Nw(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}function V8(e,t,n,s){if(c=e.children(t),r=e.node(t),a=r?r.borderLeft:void 0,l=r?r.borderRight:void 0,d={},a&&(c=Rt(c,function(e){return e!==a&&e!==l})),u=Sw(e,c),o(u,function(t){if(e.children(t.v).length){var o=V8(e,t.v,n,s);d[t.v]=o,p(o,"barycenter")&&Pw(t,o)}}),h=Mw(u,n),Rw(h,d),i=zw(h,s),a&&(i.vs=Un([a,i.vs,l]),e.predecessors(a).length)){var i,a,r,c,l,d,u,h,m=e.node(e.predecessors(a)[0]),f=e.node(e.predecessors(l)[0]);p(i,"barycenter")||(i.barycenter=0,i.weight=0),i.barycenter=(i.barycenter*i.weight+m.order+f.order)/(i.weight+2),i.weight+=2}return i}function Rw(e,t){o(e,function(e){e.vs=Un(e.vs.map(function(e){return t[e]?t[e].vs:e}))})}function Pw(e,t){k(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}function Hw(e){var n,s,o,i,r,a=Q8(e),c=B8(e,On(1,a+1),"inEdges"),l=B8(e,On(a-1,-1,-1),"outEdges"),t=Aw(e);I8(e,t),o=Number.POSITIVE_INFINITY;for(n=0,s=0;s<4;++n,++s)Bw(n%2?c:l,n%4>=2),t=mc(e),i=Ew(e,t),i<o&&(s=0,r=Xb(t),o=i);I8(e,r)}function B8(e,t,n){return z(t,function(t){return xw(e,t,n)})}function Bw(e,t){var n=new D;o(e,function(e){var i=e.graph().root,s=V8(e,i,n,t);o(s.vs,function(t,n){e.node(t).order=n}),Ow(e,n,s.vs)})}function I8(e,t){o(t,function(t){o(t,function(t,n){e.node(t).order=n})})}function $w(e){var t=Uw(e);o(e.graph().dummyChains,function(n){for(var a=e.node(n),r=a.edgeObj,l=Ww(e,t,r.v,r.w),i=l.path,d=l.lca,s=0,o=i[s],c=!0;n!==r.w;){if(a=e.node(n),c){for(;(o=i[s])!==d&&e.node(o).maxRank<a.rank;)s++;o===d&&(c=!1)}if(!c){for(;s<i.length-1&&e.node(o=i[s+1]).minRank<=a.rank;)s++;o=i[s]}e.setParent(n,o),n=e.successors(n)[0]}})}function Ww(e,t,n,s){var i,a=[],r=[],c=Math.min(t[n].low,t[s].low),l=Math.max(t[n].lim,t[s].lim),o=n;do o=e.parent(o),a.push(o);while(o&&(t[o].low>c||l>t[o].lim))for(i=o,o=s;(o=e.parent(o))!==i;)r.push(o);return{path:a.concat(r.reverse()),lca:i}}function Uw(e){var t={},n=0;function s(i){var a=n;o(e.children(i),s),t[i]={low:a,lim:n++}}return o(e.children(),s),t}function Kw(e,t){var n={};function s(t,s){var i=0,a=0,r=t.length,c=Xa(s);return o(s,function(t,l){var d=Yw(e,t),u=d?e.node(d).order:r;(d||t===c)&&(o(s.slice(a,l+1),function(t){o(e.predecessors(t),function(s){var o=e.node(s),a=o.order;(a<i||u<a)&&!(o.dummy&&e.node(t).dummy)&&H8(n,s,t)})}),a=l+1,i=u)}),s}return Io(t,s),n}function qw(e,t){var n={};function s(t,s,i,a,r){var c;o(On(s,i),function(s){c=t[s],e.node(c).dummy&&o(e.predecessors(c),function(t){var s=e.node(t);s.dummy&&(s.order<a||s.order>r)&&H8(n,t,c)})})}function i(t,n){var i,r=-1,a=0;return o(n,function(o,c){if(e.node(o).dummy==="border"){var l=e.predecessors(o);l.length&&(i=e.node(l[0]).order,s(n,a,c,r,i),a=c,r=i)}s(n,a,n.length,i,t.length)}),n}return Io(t,i),n}function Yw(e,t){if(e.node(t).dummy)return Kl(e.predecessors(t),function(t){return e.node(t).dummy})}function H8(e,t,n){if(t>n){var s,o=t;t=n,n=o}s=e[t],s||(e[t]=s={}),s[n]=!0}function Xw(e,t,n){if(t>n){var s=t;t=n,n=s}return p(e[t],n)}function Qw(e,t,n,s){var a={},i={},r={};return o(t,function(e){o(e,function(e,t){a[e]=e,i[e]=e,r[e]=t})}),o(t,function(e){var t=-1;o(e,function(e){if(o=s(e),o.length){o=Ho(o,function(e){return r[e]}),l=(o.length-1)/2;for(var o,c,l,d=Math.floor(l),u=Math.ceil(l);d<=u;++d)c=o[d],i[e]===e&&t<r[c]&&!Xw(n,e,c)&&(i[c]=e,i[e]=a[e]=a[c],t=r[c])}})}),{root:a,align:i}}function Zw(e,t,n,s,i){var r={},a=Jw(e,t,n,i),l=i?"borderLeft":"borderRight";function c(e,t){for(var s=a.nodes(),n=s.pop(),o={};n;)o[n]?e(n):(o[n]=!0,s.push(n),s=s.concat(t(n))),n=s.pop()}function d(e){r[e]=a.inEdges(e).reduce(function(e,t){return Math.max(e,r[t.v]+a.edge(t))},0)}function u(t){var n=a.outEdges(t).reduce(function(e,t){return Math.min(e,r[t.w]-a.edge(t))},Number.POSITIVE_INFINITY),s=e.node(t);n!==Number.POSITIVE_INFINITY&&s.borderType!==l&&(r[t]=Math.max(r[t],n))}return c(d,a.predecessors.bind(a)),c(u,a.successors.bind(a)),o(s,function(e){r[e]=r[n[e]]}),r}function Jw(e,t,n,s){var i=new D,a=e.graph(),r=oO(a.nodesep,a.edgesep,s);return o(t,function(t){var s;o(t,function(t){if(o=n[t],i.setNode(o),s){var o,a=n[s],c=i.edge(a,o);i.setEdge(a,o,Math.max(r(e,t,s),c||0))}s=t})}),i}function eO(e,t){return el(Tt(t),function(t){var n=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return Fy(t,function(t,o){var i=iO(e,o)/2;n=Math.max(t+i,n),s=Math.min(t-i,s)}),n-s})}function tO(e,t){var n=Tt(t),s=Wo(n),i=xn(n);o(["u","d"],function(n){o(["l","r"],function(o){var r,c,l=n+o,a=e[l];if(a===t)return;c=Tt(a),r=o==="l"?s-Wo(c):i-xn(c),r&&(e[l]=Ir(a,function(e){return e+r}))})})}function nO(e,t){return Ir(e.ul,function(n,s){if(t)return e[t.toLowerCase()][s];var o=Ho(z(e,s));return(o[1]+o[2])/2})}function sO(e){var t,i,n=mc(e),a=tl(Kw(e,n),qw(e,n)),s={};return o(["u","d"],function(i){t=i==="u"?n:Tt(n).reverse(),o(["l","r"],function(n){n==="r"&&(t=z(t,function(e){return Tt(e).reverse()}));var c=(i==="u"?e.predecessors:e.successors).bind(e),r=Qw(e,t,a,c),o=Zw(e,t,r.root,r.align,n==="r");n==="r"&&(o=Ir(o,function(e){return-e})),s[i+n]=o})}),i=eO(e,s),tO(s,i),nO(s,e.graph().align)}function oO(e,t,n){return function(s,o,i){var a,c=s.node(o),l=s.node(i),r=0;if(r+=c.width/2,p(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=-c.width/2;break;case"r":a=c.width/2;break}if(a&&(r+=n?a:-a),a=0,r+=(c.dummy?t:e)/2,r+=(l.dummy?t:e)/2,r+=l.width/2,p(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2;break}return a&&(r+=n?a:-a),a=0,r}}function iO(e,t){return e.node(t).width}function aO(e){e=ef(e),rO(e),o(sO(e),function(t,n){e.node(n).x=t})}function rO(e){var n=mc(e),s=e.graph().ranksep,t=0;o(n,function(n){var i=xn(z(n,function(t){return e.node(t).height}));o(n,function(n){e.node(n).y=t+i/2}),t+=i+s})}function Ss(e,t){var n=t&&t.debugTiming?aw:rw;n("layout",function(){var t=n("  buildLayoutGraph",function(){return jO(e)});n("  runLayout",function(){lO(t,n)}),n("  updateInputGraph",function(){dO(e,t)})})}function lO(e,t){t("    makeSpaceForEdgeLabels",function(){yO(e)}),t("    removeSelfEdges",function(){SO(e)}),t("    acyclic",function(){q_(e)}),t("    nestingGraph.run",function(){bw(e)}),t("    rank",function(){ax(ef(e))}),t("    injectEdgeLabelProxies",function(){_O(e)}),t("    removeEmptyRanks",function(){nw(e)}),t("    nestingGraph.cleanup",function(){ww(e)}),t("    normalizeRanks",function(){tw(e)}),t("    assignRankMinMax",function(){wO(e)}),t("    removeEdgeLabelProxies",function(){OO(e)}),t("    normalize.run",function(){DO(e)}),t("    parentDummyChains",function(){$w(e)}),t("    addBorderSegments",function(){cw(e)}),t("    order",function(){Hw(e)}),t("    insertSelfEdges",function(){MO(e)}),t("    adjustCoordinateSystem",function(){dw(e)}),t("    position",function(){aO(e)}),t("    positionSelfEdges",function(){FO(e)}),t("    removeBorderNodes",function(){AO(e)}),t("    normalize.undo",function(){LO(e)}),t("    fixupEdgeLabelCoords",function(){EO(e)}),t("    undoCoordinateSystem",function(){uw(e)}),t("    translateGraph",function(){xO(e)}),t("    assignNodeIntersects",function(){CO(e)}),t("    reversePoints",function(){kO(e)}),t("    acyclic.undo",function(){G_(e)})}function dO(e,t){o(e.nodes(),function(n){var s=e.node(n),o=t.node(n);s&&(s.x=o.x,s.y=o.y,t.children(n).length&&(s.width=o.width,s.height=o.height))}),o(e.edges(),function(n){var o=e.edge(n),s=t.edge(n);o.points=s.points,p(s,"x")&&(o.x=s.x,o.y=s.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}D8=["nodesep","edgesep","ranksep","marginx","marginy"],T8={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},M8=["acyclicer","ranker","rankdir","align"],A8=["width","height"],E8={width:0,height:0},x8=["minlen","weight","width","height","labeloffset"],w8={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},y8=["labelpos"];function jO(e){var t=new D({multigraph:!0,compound:!0}),n=cd(e.graph());return t.setGraph(tl({},T8,Xl(n,D8),Vo(n,M8))),o(e.nodes(),function(n){var s=cd(e.node(n));t.setNode(n,ls(Xl(s,A8),E8)),t.setParent(n,e.parent(n))}),o(e.edges(),function(n){var s=cd(e.edge(n));t.setEdge(n,tl({},w8,Xl(s,x8),Vo(s,y8)))}),t}function yO(e){var t=e.graph();t.ranksep/=2,o(e.edges(),function(n){var s=e.edge(n);s.minlen*=2,s.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?s.width+=s.labeloffset:s.height+=s.labeloffset)})}function _O(e){o(e.edges(),function(t){var n,o,i,s=e.edge(t);s.width&&s.height&&(n=e.node(t.v),o=e.node(t.w),i={rank:(o.rank-n.rank)/2+n.rank,e:t},Cs(e,"edge-proxy",i,"_ep"))})}function wO(e){var t=0;o(e.nodes(),function(n){var s=e.node(n);s.borderTop&&(s.minRank=e.node(s.borderTop).rank,s.maxRank=e.node(s.borderBottom).rank,t=xn(t,s.maxRank))}),e.graph().maxRank=t}function OO(e){o(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function xO(e){var t=Number.POSITIVE_INFINITY,i=0,n=Number.POSITIVE_INFINITY,a=0,s=e.graph(),r=s.marginx||0,c=s.marginy||0;function l(e){var s=e.x,o=e.y,r=e.width,c=e.height;t=Math.min(t,s-r/2),i=Math.max(i,s+r/2),n=Math.min(n,o-c/2),a=Math.max(a,o+c/2)}o(e.nodes(),function(t){l(e.node(t))}),o(e.edges(),function(t){var n=e.edge(t);p(n,"x")&&l(n)}),t-=r,n-=c,o(e.nodes(),function(s){var o=e.node(s);o.x-=t,o.y-=n}),o(e.edges(),function(s){var i=e.edge(s);o(i.points,function(e){e.x-=t,e.y-=n}),p(i,"x")&&(i.x-=t),p(i,"y")&&(i.y-=n)}),s.width=i-t+r,s.height=a-n+c}function CO(e){o(e.edges(),function(t){var s,o,n=e.edge(t),i=e.node(t.v),a=e.node(t.w);n.points?(s=n.points[0],o=n.points[n.points.length-1]):(n.points=[],s=a,o=i),n.points.unshift(J8(i,s)),n.points.push(J8(a,o))})}function EO(e){o(e.edges(),function(t){var n=e.edge(t);if(p(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function kO(e){o(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function AO(e){o(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),s=e.node(n.borderTop),i=e.node(n.borderBottom),o=e.node(Xa(n.borderLeft)),a=e.node(Xa(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-s.y),n.x=o.x+n.width/2,n.y=s.y+n.height/2}}),o(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function SO(e){o(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function MO(e){var t=mc(e);o(t,function(t){var n=0;o(t,function(t,s){var i=e.node(t);i.order=s+n,o(i.selfEdges,function(t){Cs(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:s+ ++n,e:t.e,label:t.label},"_se")}),delete i.selfEdges})})}function FO(e){o(e.nodes(),function(t){var s,o,i,a,r,n=e.node(t);n.dummy==="selfedge"&&(a=e.node(n.e.v),s=a.x+a.width/2,o=a.y,i=n.x-s,r=a.height/2,e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:s+2*i/3,y:o-r},{x:s+5*i/6,y:o-r},{x:s+i,y:o},{x:s+5*i/6,y:o+r},{x:s+2*i/3,y:o+r}],n.label.x=n.x,n.label.y=n.y)})}function Xl(e,t){return Ir(Vo(e,t),Number)}function cd(e){var t={};return o(e,function(e,n){t[n.toLowerCase()]=e}),t}function DO(e){e.graph().dummyChains=[],o(e.edges(),function(t){NO(e,t)})}function NO(e,t){var o,a,r,i=t.v,s=e.node(i).rank,c=t.w,l=e.node(c).rank,d=t.name,n=e.edge(t),u=n.labelRank;if(l===s+1)return;e.removeEdge(t);for(r=0,++s;s<l;++r,++s)n.points=[],o={width:0,height:0,edgeLabel:n,edgeObj:t,rank:s},a=Cs(e,"edge",o,"_d"),s===u&&(o.width=n.width,o.height=n.height,o.dummy="edge-label",o.labelpos=n.labelpos),e.setEdge(i,a,{weight:n.weight},d),r===0&&e.graph().dummyChains.push(a),i=a;e.setEdge(i,c,{weight:n.weight},d)}function LO(e){o(e.graph().dummyChains,function(t){var o,n=e.node(t),s=n.edgeLabel;for(e.setEdge(n.edgeObj,s);n.dummy;)o=e.successors(t)[0],e.removeNode(t),s.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(s.x=n.x,s.y=n.y,s.width=n.width,s.height=n.height),t=o,n=e.node(t)})}function fd(e){var t={};function n(s){var o,i=e.node(s);return p(t,s)?i.rank:(t[s]=!0,o=Wo(z(e.outEdges(s),function(t){return n(t.w)-e.edge(t).minlen})),(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),i.rank=o)}o(e.sources(),n)}function co(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}function p8(e){var n,s,t=new D({directed:!1}),o=e.nodes()[0],i=e.nodeCount();for(t.setNode(o,{});IO(t,e)<i;)n=BO(t,e),s=t.hasNode(n.v)?co(e,n):-co(e,n),VO(t,e,s);return t}function IO(e,t){function n(s){o(t.nodeEdges(s),function(o){var a=o.v,i=s===a?o.w:a;!e.hasNode(i)&&!co(t,o)&&(e.setNode(i,{}),e.setEdge(s,i,{}),n(i))})}return o(e.nodes(),n),e.nodeCount()}function BO(e,t){return el(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return co(t,n)})}function VO(e,t,n){o(e.nodes(),function(e){t.node(e).rank+=n})}function $O(){}$O.prototype=new Error;function f8(e,t,n){N(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),s=[],a={};return o(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);m8(e,t,n==="post",a,i,s)}),s}function m8(e,t,n,s,i,a){p(s,t)||(s[t]=!0,n||a.push(t),o(i(t),function(t){m8(e,t,n,s,i,a)}),n&&a.push(t))}function KO(e,t){return f8(e,t,"post")}function qO(e,t){return f8(e,t,"pre")}vn.initLowLimValues=Pd,vn.initCutValues=kd,vn.calcCutValue=u8,vn.leaveEdge=c8,vn.enterEdge=i8,vn.exchangeEdges=n8;function vn(e){e=Q_(e),fd(e);var n,s,t=p8(e);for(Pd(t),kd(t,e);n=c8(t);)s=i8(t,e,n),n8(t,e,n,s)}function kd(e,t){var n=KO(e,e.nodes()),n=n.slice(0,n.length-1);o(n,function(n){XO(e,t,n)})}function XO(e,t,n){var s=e.node(n),o=s.parent;e.edge(n,o).cutvalue=u8(e,t,n)}function u8(e,t,n){var c=e.node(n),i=c.parent,r=!0,a=t.edge(n,i),s=0;return a||(r=!1,a=t.edge(i,n)),s=a.weight,o(t.nodeEdges(n),function(o){var c,l,d,u=o.v===n,a=u?o.w:o.v;a!==i&&(c=u===r,l=t.edge(o).weight,s+=c?l:-l,ox(e,n,a)&&(d=e.edge(n,a).cutvalue,s+=c?-d:d))}),s}function Pd(e,t){arguments.length<2&&(t=e.nodes()[0]),d8(e,{},1,t)}function d8(e,t,n,s,i){var r=n,a=e.node(s);return t[s]=!0,o(e.neighbors(s),function(o){p(t,o)||(n=d8(e,t,n,o,s))}),a.low=r,a.lim=n++,i?a.parent=i:delete a.parent,n}function c8(e){return Kl(e.edges(),function(t){return e.edge(t).cutvalue<0})}function i8(e,t,n){var s,o,r,c,l,i=n.v,a=n.w;return t.hasEdge(i,a)||(i=n.w,a=n.v),r=e.node(i),c=e.node(a),s=r,o=!1,r.lim>c.lim&&(s=c,o=!0),l=Rt(t.edges(),function(t){return o===Jm(e,e.node(t.v),s)&&o!==Jm(e,e.node(t.w),s)}),el(l,function(e){return co(t,e)})}function n8(e,t,n,s){var o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(s.v,s.w,{}),Pd(e),kd(e,t),sx(e,t)}function sx(e,t){var s=Kl(e.nodes(),function(e){return!t.node(e).parent}),n=qO(e,s),n=n.slice(1);o(n,function(n){var o=e.node(n).parent,s=t.edge(n,o),i=!1;s||(s=t.edge(o,n),i=!0),t.node(n).rank=t.node(o).rank+(i?s.minlen:-s.minlen)})}function ox(e,t,n){return e.hasEdge(t,n)}function Jm(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}function ax(e){switch(e.graph().ranker){case"network-simplex":Qm(e);break;case"tight-tree":cx(e);break;case"longest-path":Zm(e);break;default:Qm(e)}}Zm=fd;function cx(e){fd(e),p8(e)}function Qm(e){vn(e)}let Xm=0;const ux=function(t,n,s,o,i){const u=function(e){switch(e){case i.db.relationType.AGGREGATION:return"aggregation";case i.db.relationType.EXTENSION:return"extension";case i.db.relationType.COMPOSITION:return"composition";case i.db.relationType.DEPENDENCY:return"dependency";case i.db.relationType.LOLLIPOP:return"lollipop"}};n.points=n.points.filter(e=>!Number.isNaN(e.y));const j=n.points,b=cs().x(function(e){return e.x}).y(function(e){return e.y}).curve(Vn),r=t.append("path").attr("d",b(j)).attr("id","edge"+Xm).attr("class","relation");let a="";o.arrowMarkerAbsolute&&(a=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,a=a.replace(/\(/g,"\\("),a=a.replace(/\)/g,"\\)")),s.relation.lineType==1&&r.attr("class","relation dashed-line"),s.relation.lineType==10&&r.attr("class","relation dotted-line"),s.relation.type1!=="none"&&r.attr("marker-start","url("+a+"#"+u(s.relation.type1)+"Start)"),s.relation.type2!=="none"&&r.attr("marker-end","url("+a+"#"+u(s.relation.type2)+"End)");let d,l;const c=n.points.length;let h=f.calcLabelPosition(n.points);d=h.x,l=h.y;let m,p,g,v;if(c%2!==0&&c>1){let t=f.calcCardinalityPosition(s.relation.type1!=="none",n.points,n.points[0]),o=f.calcCardinalityPosition(s.relation.type2!=="none",n.points,n.points[c-1]);e.debug("cardinality_1_point "+JSON.stringify(t)),e.debug("cardinality_2_point "+JSON.stringify(o)),m=t.x,p=t.y,g=o.x,v=o.y}if(s.title!==void 0){const n=t.append("g").attr("class","classLabel"),i=n.append("text").attr("class","label").attr("x",d).attr("y",l).attr("fill","red").attr("text-anchor","middle").text(s.title);window.label=i;const e=i.node().getBBox();n.insert("rect",":first-child").attr("class","box").attr("x",e.x-o.padding/2).attr("y",e.y-o.padding/2).attr("width",e.width+o.padding).attr("height",e.height+o.padding)}if(e.info("Rendering relation "+JSON.stringify(s)),s.relationTitle1!==void 0&&s.relationTitle1!=="none"){const e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type1").attr("x",m).attr("y",p).attr("fill","black").attr("font-size","6").text(s.relationTitle1)}if(s.relationTitle2!==void 0&&s.relationTitle2!=="none"){const e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type2").attr("x",g).attr("y",v).attr("fill","black").attr("font-size","6").text(s.relationTitle2)}Xm++},hx=function(t,n,s,o){e.debug("Rendering class ",n,s);const p=n.id,u={id:p,label:n.id,width:0,height:0},a=t.append("g").attr("id",o.db.lookUpDomId(p)).attr("class","classGroup");let r;n.link?r=a.append("svg:a").attr("xlink:href",n.link).attr("target",n.linkTarget).append("text").attr("y",s.textHeight+s.padding).attr("x",0):r=a.append("text").attr("y",s.textHeight+s.padding).attr("x",0);let i=!0;n.annotations.forEach(function(e){const t=r.append("tspan").text("\xAB"+e+"\xBB");i||t.attr("dy",s.textHeight),i=!1});let f=n.id;n.type!==void 0&&n.type!==""&&(f+="<"+n.type+">");const _=r.append("tspan").text(f).attr("class","title");i||_.attr("dy",s.textHeight);const c=r.node().getBBox().height,v=a.append("line").attr("x1",0).attr("y1",s.padding+c+s.dividerMargin/2).attr("y2",s.padding+c+s.dividerMargin/2),g=a.append("text").attr("x",s.padding).attr("y",c+s.dividerMargin+s.textHeight).attr("fill","white").attr("class","classText");i=!0,n.members.forEach(function(e){Km(g,e,i,s),i=!1});const h=g.node().getBBox(),j=a.append("line").attr("x1",0).attr("y1",s.padding+c+s.dividerMargin+h.height).attr("y2",s.padding+c+s.dividerMargin+h.height),b=a.append("text").attr("x",s.padding).attr("y",c+2*s.dividerMargin+h.height+s.textHeight).attr("fill","white").attr("class","classText");i=!0,n.methods.forEach(function(e){Km(b,e,i,s),i=!1});const d=a.node().getBBox();var m=" ";n.cssClasses.length>0&&(m=m+n.cssClasses.join(" "));const y=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",d.width+2*s.padding).attr("height",d.height+s.padding+.5*s.dividerMargin).attr("class",m),l=y.node().getBBox().width;return r.node().childNodes.forEach(function(e){e.setAttribute("x",(l-e.getBBox().width)/2)}),n.tooltip&&r.insert("title").text(n.tooltip),v.attr("x2",l),j.attr("x2",l),u.width=l,u.height=d.height+s.padding+.5*s.dividerMargin,u},mx=function(t,n,s){e.debug("Rendering note ",n,s);const l=n.id,i={id:l,text:n.text,width:0,height:0},a=t.append("g").attr("id",l).attr("class","classGroup");let d=a.append("text").attr("y",s.textHeight+s.padding).attr("x",0);const r=JSON.parse(`"${n.text}"`).split(`
`);r.forEach(function(t){e.debug(`Adding line: ${t}`),d.append("tspan").text(t).attr("class","title").attr("dy",s.textHeight)});const c=a.node().getBBox(),h=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",c.width+2*s.padding).attr("height",c.height+r.length*s.textHeight+s.padding+.5*s.dividerMargin),u=h.node().getBBox().width;return d.node().childNodes.forEach(function(e){e.setAttribute("x",(u-e.getBBox().width)/2)}),i.width=u,i.height=c.height+r.length*s.textHeight+s.padding+.5*s.dividerMargin,i},Gi=function(e){const s=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,o=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let n=e.match(s),t=e.match(o);return n&&!t?px(n):t?gx(t):vx(e)},px=function(e){let n="",t="";try{let s=e[1]?e[1].trim():"",o=e[2]?e[2].trim():"",i=e[3]?qt(e[3].trim()):"",a=e[4]?e[4].trim():"",r=e[5]?e[5].trim():"";t=s+o+i+" "+a,n=Uu(r)}catch{t=e}return{displayText:t,cssStyle:n}},gx=function(e){let n="",t="";try{let s=e[1]?e[1].trim():"",o=e[2]?e[2].trim():"",i=e[3]?qt(e[3].trim()):"",a=e[4]?e[4].trim():"",r=e[5]?" : "+qt(e[5]).trim():"";t=s+o+"("+i+")"+r,n=Uu(a)}catch{t=e}return{displayText:t,cssStyle:n}},vx=function(e){let o="",i="",n="",s=e.indexOf("("),t=e.indexOf(")");if(s>1&&t>s&&t<=e.length){let c="",a="",r=e.substring(0,1);r.match(/\w/)?a=e.substring(0,s).trim():(r.match(/[#+~-]/)&&(c=r),a=e.substring(1,s).trim());const l=e.substring(s+1,t);e.substring(t+1,1),i=Uu(e.substring(t+1,t+2)),o=c+a+"("+qt(l.trim())+")",t<e.length&&(n=e.substring(t+2).trim(),n!==""&&(n=" : "+qt(n),o+=n))}else o=qt(e);return{displayText:o,cssStyle:i}},Km=function(e,t,n,s){let o=Gi(t);const i=e.append("tspan").attr("x",s.padding).text(o.displayText);o.cssStyle!==""&&i.attr("style",o.cssStyle),n||i.attr("dy",s.textHeight)},Uu=function(e){switch(e){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},i1={drawClass:hx,drawEdge:ux,drawNote:mx,parseMember:Gi};let xi={};const wi=20,Vs=function(e){const t=Object.entries(xi).find(t=>t[1].label===e);if(t)return t[0]},xx=function(e){e.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),e.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Cx=function(n,s,o,a){const d=t().class;xi={},e.info("Rendering diagram "+n);const f=t().securityLevel;let m;f==="sandbox"&&(m=i("#i"+s));const h=i(f==="sandbox"?m.nodes()[0].contentDocument.body:"body"),c=h.select(`[id='${s}']`);xx(c);const r=new D({multigraph:!0});r.setGraph({isMultiGraph:!0}),r.setDefaultEdgeLabel(function(){return{}});const u=a.db.getClasses(),b=Object.keys(u);for(const n of b){const s=u[n],t=i1.drawClass(c,s,d,a);xi[t.id]=t,r.setNode(t.id,t),e.info("Org height: "+t.height)}const j=a.db.getRelations();j.forEach(function(t){e.info("tjoho"+Vs(t.id1)+Vs(t.id2)+JSON.stringify(t)),r.setEdge(Vs(t.id1),Vs(t.id2),{relation:t},t.title||"DEFAULT")});const y=a.db.getNotes();y.forEach(function(t){e.debug(`Adding note: ${JSON.stringify(t)}`);const n=i1.drawNote(c,t,d,a);xi[n.id]=n,r.setNode(n.id,n),t.class&&t.class in u&&r.setEdge(t.id,Vs(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),Ss(r),r.nodes().forEach(function(t){t!==void 0&&r.node(t)!==void 0&&(e.debug("Node "+t+": "+JSON.stringify(r.node(t))),h.select("#"+(a.db.lookUpDomId(t)||t)).attr("transform","translate("+(r.node(t).x-r.node(t).width/2)+","+(r.node(t).y-r.node(t).height/2)+" )"))}),r.edges().forEach(function(t){t!==void 0&&r.edge(t)!==void 0&&(e.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(r.edge(t))),i1.drawEdge(c,r.edge(t),r.edge(t).relation,d,a))});const l=c.node().getBBox(),p=l.width+wi*2,g=l.height+wi*2;Ve(c,g,p,d.useMaxWidth);const v=`${l.x-wi} ${l.y-wi} ${p} ${g}`;e.debug(`viewBox ${v}`),c.attr("viewBox",v)},Ex={draw:Cx};function xt(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Ax(e),edges:Sx(e)};return k(e.graph())||(t.value=qb(e.graph())),t}function Ax(e){return z(e.nodes(),function(t){var s=e.node(t),o=e.parent(t),n={v:t};return k(s)||(n.value=s),k(o)||(n.parent=o),n})}function Sx(e){return z(e.edges(),function(t){var s=e.edge(t),n={v:t.v,w:t.w};return k(t.name)||(n.name=t.name),k(s)||(n.value=s),n})}const Mx=(e,t,n,s)=>{t.forEach(t=>{Ix[t](e,n,s)})},Fx=(t,n,s)=>{e.trace("Making markers for ",s),t.append("defs").append("marker").attr("id",n+"-extensionStart").attr("class","marker extension "+n).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",n+"-extensionEnd").attr("class","marker extension "+n).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},Tx=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-compositionStart").attr("class","marker composition "+t).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},zx=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},Dx=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Nx=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},Lx=(e,t)=>{e.append("marker").attr("id",t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},Rx=(e,t)=>{e.append("marker").attr("id",t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},Px=(e,t)=>{e.append("marker").attr("id",t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},Hx=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},Ix={extension:Fx,composition:Tx,aggregation:zx,dependency:Dx,lollipop:Nx,point:Lx,circle:Rx,cross:Px,barb:Hx},Bx=Mx;function Vx(e,t){t&&e.attr("style",t)}function $x(e){const n=i(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),t=n.append("xhtml:div"),s=e.label,o=e.isNode?"nodeLabel":"edgeLabel";return t.html('<span class="'+o+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+s+"</span>"),Vx(t,e.labelStyle),t.style("display","inline-block"),t.style("white-space","nowrap"),t.attr("xmlns","http://www.w3.org/1999/xhtml"),n.node()}const Wx=(n,s,o,i)=>{let a=n||"";if(typeof a=="object"&&(a=a[0]),K(t().flowchart.htmlLabels)){a=a.replace(/\\n|\n/g,"<br />"),e.info("vertexText"+a);const t={isNode:i,label:g1(a).replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`),labelStyle:s.replace("fill:","color:")};let n=$x(t);return n}const c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("style",s.replace("color:","fill:"));let r=[];typeof a=="string"?r=a.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(a)?r=a:r=[];for(const t of r){const e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","0"),o?e.setAttribute("class","title-row"):e.setAttribute("class","row"),e.textContent=t.trim(),c.appendChild(e)}return c},le=Wx,Q=(e,n,s,o)=>{let r;s?r=s:r="node default";const u=e.insert("g").attr("class",r).attr("id",n.domId||n.id),c=u.insert("g").attr("class","label").attr("style",n.labelStyle);let l;n.labelText===void 0?l="":l=typeof n.labelText=="string"?n.labelText:n.labelText[0];const d=c.node().appendChild(le(Me(g1(l),t()),n.labelStyle,!1,o));let a=d.getBBox();if(K(t().flowchart.htmlLabels)){const t=d.children[0],e=i(d);a=t.getBoundingClientRect(),e.attr("width",a.width),e.attr("height",a.height)}const h=n.padding/2;return c.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),{shapeSvg:u,bbox:a,halfPadding:h,label:c}},T=(e,t)=>{const n=t.node().getBBox();e.width=n.width,e.height=n.height};function Ct(e,t,n,s){return e.insert("polygon",":first-child").attr("points",s.map(function(e){return e.x+","+e.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+n/2+")")}let b={},Xe={},Hm={};const Zx=()=>{Xe={},Hm={},b={}},za=(t,n)=>(e.trace("In isDecendant",n," ",t," = ",Xe[n].includes(t)),!!Xe[n].includes(t)),eC=(t,n)=>(e.info("Decendants of ",n," is ",Xe[n]),e.info("Edge is ",t),t.v!==n&&t.w!==n&&(Xe[n]?Xe[n].includes(t.v)||za(t.v,n)||za(t.w,n)||Xe[n].includes(t.w):(e.debug("Tilt, ",n,",not in decendants"),!1))),Pm=(t,n,s,o)=>{e.warn("Copying children of ",t,"root",o,"data",n.node(t),o);const i=n.children(t)||[];t!==o&&i.push(t),e.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach(i=>{if(n.children(i).length>0)Pm(i,n,s,o);else{const r=n.node(i);e.info("cp ",i," to ",o," with parent ",t),s.setNode(i,r),o!==n.parent(i)&&(e.warn("Setting parent",i,n.parent(i)),s.setParent(i,n.parent(i))),t!==o&&i!==t?(e.debug("Setting parent",i,t),s.setParent(i,t)):(e.info("In copy ",t,"root",o,"data",n.node(t),o),e.debug("Not Setting parent for node=",i,"cluster!==rootId",t!==o,"node!==clusterId",i!==t));const a=n.edges(i);e.debug("Copying Edges",a),a.forEach(i=>{e.info("Edge",i);const a=n.edge(i.v,i.w,i.name);e.info("Edge data",a,o);try{eC(i,o)?(e.info("Copying as ",i.v,i.w,a,i.name),s.setEdge(i.v,i.w,a,i.name),e.info("newGraph edges ",s.edges(),s.edge(s.edges()[0]))):e.info("Skipping copy of edge ",i.v,"-->",i.w," rootId: ",o," clusterId:",t)}catch(t){e.error(t)}})}e.debug("Removing node",i),n.removeNode(i)})},Rm=(e,t)=>{const s=t.children(e);let n=[...s];for(const o of s)Hm[o]=e,n=[...n,...Rm(o,t)];return n},Eo=(t,n)=>{e.trace("Searching",t);const s=n.children(t);if(e.trace("Searching children of id ",t,s),s.length<1)return e.trace("This is a valid node",t),t;for(const i of s){const o=Eo(i,n);if(o)return e.trace("Found replacement for",t," => ",o),o}},fc=e=>b[e]?b[e].externalConnections&&b[e]?b[e].id:e:e,iC=(t,n)=>{if(!t||n>10){e.debug("Opting out, no graph ");return}e.debug("Opting in, graph "),t.nodes().forEach(function(n){const s=t.children(n);s.length>0&&(e.warn("Cluster identified",n," Replacement id in edges: ",Eo(n,t)),Xe[n]=Rm(n,t),b[n]={id:Eo(n,t),clusterData:t.node(n)})}),t.nodes().forEach(function(n){const s=t.children(n),o=t.edges();s.length>0?(e.debug("Cluster identified",n,Xe),o.forEach(t=>{if(t.v!==n&&t.w!==n){const s=za(t.v,n),o=za(t.w,n);s^o&&(e.warn("Edge: ",t," leaves cluster ",n),e.warn("Decendants of XXX ",n,": ",Xe[n]),b[n].externalConnections=!0)}})):e.debug("Not a cluster ",n,Xe)}),t.edges().forEach(function(n){const s=t.edge(n);e.warn("Edge "+n.v+" -> "+n.w+": "+JSON.stringify(n)),e.warn("Edge "+n.v+" -> "+n.w+": "+JSON.stringify(t.edge(n)));let o=n.v,i=n.w;if(e.warn("Fix XXX",b,"ids:",n.v,n.w,"Translating: ",b[n.v]," --- ",b[n.w]),b[n.v]&&b[n.w]&&b[n.v]===b[n.w]){e.warn("Fixing and trixing link to self - removing XXX",n.v,n.w,n.name),e.warn("Fixing and trixing - removing XXX",n.v,n.w,n.name),o=fc(n.v),i=fc(n.w),t.removeEdge(n.v,n.w,n.name);const a=n.w+"---"+n.v;t.setNode(a,{domId:a,id:a,labelStyle:"",labelText:s.label,padding:0,shape:"labelRect",style:""});const r=JSON.parse(JSON.stringify(s)),c=JSON.parse(JSON.stringify(s));r.label="",r.arrowTypeEnd="none",c.label="",r.fromCluster=n.v,c.toCluster=n.v,t.setEdge(o,a,r,n.name+"-cyclic-special"),t.setEdge(a,i,c,n.name+"-cyclic-special")}else(b[n.v]||b[n.w])&&(e.warn("Fixing and trixing - removing XXX",n.v,n.w,n.name),o=fc(n.v),i=fc(n.w),t.removeEdge(n.v,n.w,n.name),o!==n.v&&(s.fromCluster=n.v),i!==n.w&&(s.toCluster=n.w),e.warn("Fix Replacing with XXX",o,i,n.name),t.setEdge(o,i,s,n.name))}),e.warn("Adjusted Graph",xt(t)),Lm(t,0),e.trace(b)},Lm=(t,n)=>{if(e.warn("extractor - ",n,xt(t),t.children("D")),n>10){e.error("Bailing out");return}let s=t.nodes(),o=!1;for(const e of s){const n=t.children(e);o=o||n.length>0}if(!o){e.debug("Done, no node has children",t.nodes());return}e.debug("Nodes = ",s,n);for(const o of s)if(e.debug("Extracting node",o,b,b[o]&&!b[o].externalConnections,!t.parent(o),t.node(o),t.children("D")," Depth ",n),b[o])if(!b[o].externalConnections&&t.children(o)&&t.children(o).length>0){e.warn("Cluster without external connections, without a parent and with children",o,n);const a=t.graph();let s=a.rankdir==="TB"?"LR":"TB";b[o]&&b[o].clusterData&&b[o].clusterData.dir&&(s=b[o].clusterData.dir,e.warn("Fixing dir",b[o].clusterData.dir,s));const i=new D({multigraph:!0,compound:!0}).setGraph({rankdir:s,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});e.warn("Old graph before copy",xt(t)),Pm(o,t,i,o),t.setNode(o,{clusterNode:!0,id:o,clusterData:b[o].clusterData,labelText:b[o].labelText,graph:i}),e.warn("New graph after copy node: (",o,")",xt(i)),e.debug("Old graph after copy",xt(t))}else e.warn("Cluster ** ",o," **not meeting the criteria !externalConnections:",!b[o].externalConnections," no parent: ",!t.parent(o)," children ",t.children(o)&&t.children(o).length>0,t.children("D"),n),e.debug(b);else e.debug("Not a cluster",o,n);s=t.nodes(),e.warn("New list of nodes",s);for(const i of s){const o=t.node(i);e.warn(" Now next level",i,o),o.clusterNode&&Lm(o.graph,n+1)}},Nm=(e,t)=>{if(t.length===0)return[];let n=Object.assign(t);return t.forEach(t=>{const s=e.children(t),o=Nm(e,s);n=[...n,...o]}),n},cC=e=>Nm(e,e.children());function lC(e,t){return e.intersect(t)}function Dm(e,t,n,s){var o,i=e.x,a=e.y,r=i-s.x,c=a-s.y,d=Math.sqrt(t*t*c*c+n*n*r*r),l=Math.abs(t*n*r/d);return s.x<i&&(l=-l),o=Math.abs(t*n*c/d),s.y<a&&(o=-o),{x:i+l,y:a+o}}function uC(e,t,n){return Dm(e,t,t,n)}function hC(e,t,n,s){var o,i,a,r,c,l,m,f,v,b,h=t.y-e.y,d=e.x-t.x,u=t.x*e.y-e.x*t.y,g=h*n.x+d*n.y+u,p=h*s.x+d*s.y+u;if(g!==0&&p!==0&&zm(g,p))return;if(a=s.y-n.y,r=n.x-s.x,c=s.x*n.y-n.x*s.y,m=a*e.x+r*e.y+c,f=a*t.x+r*t.y+c,m!==0&&f!==0&&zm(m,f))return;if(i=h*r-a*d,i===0)return;return l=Math.abs(i/2),o=d*c-r*u,v=o<0?(o-l)/i:(o+l)/i,o=a*u-h*c,b=o<0?(o-l)/i:(o+l)/i,{x:v,y:b}}function zm(e,t){return e*t>0}function fC(e,t,n){var s,r,c,l,d,u,h=e.x,m=e.y,o=[],i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(e){i=Math.min(i,e.x),a=Math.min(a,e.y)}):(i=Math.min(i,t.x),a=Math.min(a,t.y)),r=h-e.width/2-i,c=m-e.height/2-a;for(s=0;s<t.length;s++)l=t[s],d=t[s<t.length-1?s+1:0],u=hC(e,n,{x:r+l.x,y:c+l.y},{x:r+d.x,y:c+d.y}),u&&o.push(u);return o.length?(o.length>1&&o.sort(function(e,t){var s=e.x-n.x,o=e.y-n.y,i=Math.sqrt(s*s+o*o),a=t.x-n.x,r=t.y-n.y,c=Math.sqrt(a*a+r*r);return i<c?-1:i===c?0:1}),o[0]):e}const pC=(e,t)=>{var a,r,c=e.x,l=e.y,n=t.x-c,s=t.y-l,o=e.width/2,i=e.height/2;return Math.abs(s)*o>Math.abs(n)*i?(s<0&&(i=-i),a=s===0?0:i*n/s,r=i):(n<0&&(o=-o),a=o,r=n===0?0:o*s/n),{x:c+a,y:l+r}},No=pC,x={node:lC,circle:uC,ellipse:Dm,polygon:fC,rect:No},bC=(t,n)=>{const{shapeSvg:o,bbox:s,halfPadding:i}=Q(t,n,"node "+n.classes,!0);e.info("Classes = ",n.classes);const a=o.insert("rect",":first-child");return a.attr("rx",n.rx).attr("ry",n.ry).attr("x",-s.width/2-i).attr("y",-s.height/2-i).attr("width",s.width+n.padding).attr("height",s.height+n.padding),T(n,a),n.intersect=function(e){return x.rect(n,e)},o},jC=bC,yC=(t,n)=>{const{shapeSvg:o,bbox:i}=Q(t,n,void 0,!0),c=i.width+n.padding,l=i.height+n.padding,s=c+l,a=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}];e.info("Question main (Circle)");const r=Ct(o,s,s,a);return r.attr("style",n.style),T(n,r),n.intersect=function(t){return e.warn("Intersect called"),x.polygon(n,a,t)},o},_C=(e,t)=>{const s=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),n=28,o=[{x:0,y:n/2},{x:n/2,y:0},{x:0,y:-n/2},{x:-n/2,y:0}],i=s.insert("polygon",":first-child").attr("points",o.map(function(e){return e.x+","+e.y}).join(" "));return i.attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),t.width=28,t.height=28,t.intersect=function(e){return x.circle(t,14,e)},s},wC=(e,t)=>{const{shapeSvg:i,bbox:a}=Q(e,t,void 0,!0),l=4,n=a.height+t.padding,s=n/l,o=a.width+2*s+t.padding,r=[{x:s,y:0},{x:o-s,y:0},{x:o,y:-n/2},{x:o-s,y:-n},{x:s,y:-n},{x:0,y:-n/2}],c=Ct(i,o,n,r);return c.attr("style",t.style),T(t,c),t.intersect=function(e){return x.polygon(t,r,e)},i},OC=(e,t)=>{const{shapeSvg:o,bbox:i}=Q(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:-n/2,y:0},{x:s,y:0},{x:s,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}],r=Ct(o,s,n,a);return r.attr("style",t.style),t.width=s+n,t.height=n,t.intersect=function(e){return x.polygon(t,a,e)},o},xC=(e,t)=>{const{shapeSvg:o,bbox:i}=Q(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:-2*n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:n/6,y:-n}],r=Ct(o,s,n,a);return r.attr("style",t.style),T(t,r),t.intersect=function(e){return x.polygon(t,a,e)},o},CC=(e,t)=>{const{shapeSvg:o,bbox:i}=Q(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:2*n/6,y:0},{x:s+n/6,y:0},{x:s-2*n/6,y:-n},{x:-n/6,y:-n}],r=Ct(o,s,n,a);return r.attr("style",t.style),T(t,r),t.intersect=function(e){return x.polygon(t,a,e)},o},EC=(e,t)=>{const{shapeSvg:o,bbox:i}=Q(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:-2*n/6,y:0},{x:s+2*n/6,y:0},{x:s-n/6,y:-n},{x:n/6,y:-n}],r=Ct(o,s,n,a);return r.attr("style",t.style),T(t,r),t.intersect=function(e){return x.polygon(t,a,e)},o},kC=(e,t)=>{const{shapeSvg:o,bbox:i}=Q(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:-2*n/6,y:-n}],r=Ct(o,s,n,a);return r.attr("style",t.style),T(t,r),t.intersect=function(e){return x.polygon(t,a,e)},o},AC=(e,t)=>{const{shapeSvg:o,bbox:i}=Q(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:0,y:0},{x:s+n/2,y:0},{x:s,y:-n/2},{x:s+n/2,y:-n},{x:0,y:-n}],r=Ct(o,s,n,a);return r.attr("style",t.style),T(t,r),t.intersect=function(e){return x.polygon(t,a,e)},o},SC=(e,t)=>{const{shapeSvg:a,bbox:r}=Q(e,t,void 0,!0),o=r.width+t.padding,s=o/2,n=s/(2.5+o/50),i=r.height+n+t.padding,c="M 0,"+n+" a "+s+","+n+" 0,0,0 "+o+" 0 a "+s+","+n+" 0,0,0 "+-o+" 0 l 0,"+i+" a "+s+","+n+" 0,0,0 "+o+" 0 l 0,"+-i,l=a.attr("label-offset-y",n).insert("path",":first-child").attr("style",t.style).attr("d",c).attr("transform","translate("+-o/2+","+-(i/2+n)+")");return T(t,l),t.intersect=function(e){const o=x.rect(t,e),i=o.x-t.x;if(s!=0&&(Math.abs(i)<t.width/2||Math.abs(i)==t.width/2&&Math.abs(o.y-t.y)>t.height/2-n)){let a=n*n*(1-i*i/(s*s));a!=0&&(a=Math.sqrt(a)),a=n-a,e.y-t.y>0&&(a=-a),o.y+=a}return o},a},MC=(t,n)=>{const{shapeSvg:i,bbox:s,halfPadding:a}=Q(t,n,"node "+n.classes,!0);e.trace("Classes = ",n.classes);const o=i.insert("rect",":first-child"),r=s.width+n.padding,c=s.height+n.padding;if(o.attr("class","basic label-container").attr("style",n.style).attr("rx",n.rx).attr("ry",n.ry).attr("x",-s.width/2-a).attr("y",-s.height/2-a).attr("width",r).attr("height",c),n.props){const t=new Set(Object.keys(n.props));n.props.borders&&(Tm(o,n.props.borders,r,c),t.delete("borders")),t.forEach(t=>{e.warn(`Unknown node property ${t}`)})}return T(n,o),n.intersect=function(e){return x.rect(n,e)},i},FC=(t,n)=>{const{shapeSvg:s}=Q(t,n,"label",!0);e.trace("Classes = ",n.classes);const o=s.insert("rect",":first-child"),i=0,a=0;if(o.attr("width",i).attr("height",a),s.attr("class","label edgeLabel"),n.props){const t=new Set(Object.keys(n.props));n.props.borders&&(Tm(o,n.props.borders,i,a),t.delete("borders")),t.forEach(t=>{e.warn(`Unknown node property ${t}`)})}return T(n,o),n.intersect=function(e){return x.rect(n,e)},s};function Tm(t,n,s,o){const r=[],i=e=>{r.push(e,0)},a=e=>{r.push(0,e)};n.includes("t")?(e.debug("add top border"),i(s)):a(s),n.includes("r")?(e.debug("add right border"),i(o)):a(o),n.includes("b")?(e.debug("add bottom border"),i(s)):a(s),n.includes("l")?(e.debug("add left border"),i(o)):a(o),t.attr("stroke-dasharray",r.join(" "))}const zC=(n,s)=>{let f;s.classes?f="node "+s.classes:f="node default";const l=n.insert("g").attr("class",f).attr("id",s.domId||s.id),g=l.insert("rect",":first-child"),v=l.insert("line"),d=l.insert("g").attr("class","label"),r=s.labelText.flat?s.labelText.flat():s.labelText;let u="";typeof r=="object"?u=r[0]:u=r,e.info("Label text abc79",u,r,typeof r=="object");const h=d.node().appendChild(le(u,s.labelStyle,!0,!0));let o={width:0,height:0};if(K(t().flowchart.htmlLabels)){const t=h.children[0],e=i(h);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}e.info("Text 2",r);const m=r.slice(1,r.length);let c=h.getBBox();const p=d.node().appendChild(le(m.join?m.join("<br/>"):m,s.labelStyle,!0,!0));if(K(t().flowchart.htmlLabels)){const t=p.children[0],e=i(p);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}const a=s.padding/2;return i(p).attr("transform","translate( "+(o.width>c.width?0:(c.width-o.width)/2)+", "+(c.height+a+5)+")"),i(h).attr("transform","translate( "+(o.width<c.width?0:-(c.width-o.width)/2)+", "+0+")"),o=d.node().getBBox(),d.attr("transform","translate("+-o.width/2+", "+(-o.height/2-a+3)+")"),g.attr("class","outer title-state").attr("x",-o.width/2-a).attr("y",-o.height/2-a).attr("width",o.width+s.padding).attr("height",o.height+s.padding),v.attr("class","divider").attr("x1",-o.width/2-a).attr("x2",o.width/2+a).attr("y1",-o.height/2-a+c.height+a).attr("y2",-o.height/2-a+c.height+a),T(s,g),s.intersect=function(e){return x.rect(s,e)},l},DC=(e,t)=>{const{shapeSvg:s,bbox:o}=Q(e,t,void 0,!0),n=o.height+t.padding,i=o.width+n/4+t.padding,a=s.insert("rect",":first-child").attr("style",t.style).attr("rx",n/2).attr("ry",n/2).attr("x",-i/2).attr("y",-n/2).attr("width",i).attr("height",n);return T(t,a),t.intersect=function(e){return x.rect(t,e)},s},NC=(t,n)=>{const{shapeSvg:i,bbox:s,halfPadding:o}=Q(t,n,void 0,!0),a=i.insert("circle",":first-child");return a.attr("style",n.style).attr("rx",n.rx).attr("ry",n.ry).attr("r",s.width/2+o).attr("width",s.width+n.padding).attr("height",s.height+n.padding),e.info("Circle main"),T(n,a),n.intersect=function(t){return e.info("Circle intersect",n,s.width/2+o,t),x.circle(n,s.width/2+o,t)},i},LC=(t,n)=>{const{shapeSvg:a,bbox:s,halfPadding:i}=Q(t,n,void 0,!0),o=5,r=a.insert("g",":first-child"),c=r.insert("circle"),l=r.insert("circle");return c.attr("style",n.style).attr("rx",n.rx).attr("ry",n.ry).attr("r",s.width/2+i+o).attr("width",s.width+n.padding+o*2).attr("height",s.height+n.padding+o*2),l.attr("style",n.style).attr("rx",n.rx).attr("ry",n.ry).attr("r",s.width/2+i).attr("width",s.width+n.padding).attr("height",s.height+n.padding),e.info("DoubleCircle main"),T(n,c),n.intersect=function(t){return e.info("DoubleCircle intersect",n,s.width/2+i+o,t),x.circle(n,s.width/2+i+o,t)},a},RC=(e,t)=>{const{shapeSvg:o,bbox:i}=Q(e,t,void 0,!0),n=i.width+t.padding,s=i.height+t.padding,a=[{x:0,y:0},{x:n,y:0},{x:n,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],r=Ct(o,n,s,a);return r.attr("style",t.style),T(t,r),t.intersect=function(e){return x.polygon(t,a,e)},o},PC=(e,t)=>{const n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),s=n.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),T(t,s),t.intersect=function(e){return x.circle(t,7,e)},n},Fm=(e,t,n)=>{const i=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s=70,o=10;n==="LR"&&(s=10,o=70);const a=i.append("rect").attr("x",-1*s/2).attr("y",-1*o/2).attr("width",s).attr("height",o).attr("class","fork-join");return T(t,a),t.height=t.height+t.padding/2,t.width=t.width+t.padding/2,t.intersect=function(e){return x.rect(t,e)},i},IC=(e,t)=>{const n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),o=n.insert("circle",":first-child"),s=n.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),o.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),T(t,s),t.intersect=function(e){return x.circle(t,7,e)},n},BC=(e,n)=>{const r=n.padding/2,d=4,c=8;let v;n.classes?v="node "+n.classes:v="node default";const h=e.insert("g").attr("class",v).attr("id",n.domId||n.id),b=h.insert("rect",":first-child"),C=h.insert("line"),_=h.insert("line");let s=0,o=d;const f=h.insert("g").attr("class","label");let a=0;const w=n.classData.annotations&&n.classData.annotations[0],O=n.classData.annotations[0]?"\xAB"+n.classData.annotations[0]+"\xBB":"",p=f.node().appendChild(le(O,n.labelStyle,!0,!0));let u=p.getBBox();if(K(t().flowchart.htmlLabels)){const t=p.children[0],e=i(p);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}n.classData.annotations[0]&&(o+=u.height+d,s+=u.width);let g=n.classData.id;n.classData.type!==void 0&&n.classData.type!==""&&(t().flowchart.htmlLabels?g+="&lt;"+n.classData.type+"&gt;":g+="<"+n.classData.type+">");const m=f.node().appendChild(le(g,n.labelStyle,!0,!0));i(m).attr("class","classTitle");let l=m.getBBox();if(K(t().flowchart.htmlLabels)){const t=m.children[0],e=i(m);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}o+=l.height+d,l.width>s&&(s=l.width);const j=[];n.classData.members.forEach(e=>{const c=Gi(e);let l=c.displayText;t().flowchart.htmlLabels&&(l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const r=f.node().appendChild(le(l,c.cssStyle?c.cssStyle:n.labelStyle,!0,!0));let a=r.getBBox();if(K(t().flowchart.htmlLabels)){const t=r.children[0],e=i(r);a=t.getBoundingClientRect(),e.attr("width",a.width),e.attr("height",a.height)}a.width>s&&(s=a.width),o+=a.height+d,j.push(r)}),o+=c;const y=[];if(n.classData.methods.forEach(e=>{const c=Gi(e);let l=c.displayText;t().flowchart.htmlLabels&&(l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const r=f.node().appendChild(le(l,c.cssStyle?c.cssStyle:n.labelStyle,!0,!0));let a=r.getBBox();if(K(t().flowchart.htmlLabels)){const t=r.children[0],e=i(r);a=t.getBoundingClientRect(),e.attr("width",a.width),e.attr("height",a.height)}a.width>s&&(s=a.width),o+=a.height+d,y.push(r)}),o+=c,w){let e=(s-u.width)/2;i(p).attr("transform","translate( "+(-1*s/2+e)+", "+-1*o/2+")"),a=u.height+d}let E=(s-l.width)/2;return i(m).attr("transform","translate( "+(-1*s/2+E)+", "+(-1*o/2+a)+")"),a+=l.height+d,C.attr("class","divider").attr("x1",-s/2-r).attr("x2",s/2+r).attr("y1",-o/2-r+c+a).attr("y2",-o/2-r+c+a),a+=c,j.forEach(e=>{i(e).attr("transform","translate( "+-s/2+", "+(-1*o/2+a+c/2)+")"),a+=l.height+d}),a+=c,_.attr("class","divider").attr("x1",-s/2-r).attr("x2",s/2+r).attr("y1",-o/2-r+c+a).attr("y2",-o/2-r+c+a),a+=c,y.forEach(e=>{i(e).attr("transform","translate( "+-s/2+", "+(-1*o/2+a)+")"),a+=l.height+d}),b.attr("class","outer title-state").attr("x",-s/2-r).attr("y",-(o/2)-r).attr("width",s+n.padding).attr("height",o+n.padding),T(n,b),n.intersect=function(e){return x.rect(n,e)},h},Mm={question:yC,rect:MC,labelRect:FC,rectWithTitle:zC,choice:_C,circle:NC,doublecircle:LC,stadium:DC,hexagon:wC,rect_left_inv_arrow:OC,lean_right:xC,lean_left:CC,trapezoid:EC,inv_trapezoid:kC,rect_right_inv_arrow:AC,cylinder:SC,start:PC,end:IC,note:jC,subroutine:RC,fork:Fm,join:Fm,class_box:BC};let ws={};const WC=(e,n,s)=>{let i,o;if(n.link){let a;t().securityLevel==="sandbox"?a="_top":n.linkTarget&&(a=n.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",n.link).attr("target",a),o=Mm[n.shape](i,n,s)}else o=Mm[n.shape](e,n,s),i=o;n.tooltip&&o.attr("title",n.tooltip),n.class&&o.attr("class","node default "+n.class),ws[n.id]=i,n.haveCallback&&ws[n.id].attr("class",ws[n.id].attr("class")+" clickable")},UC=(e,t)=>{ws[t.id]=e},KC=()=>{ws={}},Sm=t=>{const n=ws[t.id];e.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const o=8,s=t.diff||0;return t.clusterNode?n.attr("transform","translate("+(t.x+s-t.width/2)+", "+(t.y-t.height/2-o)+")"):n.attr("transform","translate("+t.x+", "+t.y+")"),s},YC=(n,s)=>{e.trace("Creating subgraph rect for ",s.id,s);const r=n.insert("g").attr("class","cluster"+(s.class?" "+s.class:"")).attr("id",s.id),l=r.insert("rect",":first-child"),d=r.insert("g").attr("class","cluster-label"),c=d.node().appendChild(le(s.labelText,s.labelStyle,void 0,!0));let o=c.getBBox();if(K(t().flowchart.htmlLabels)){const t=c.children[0],e=i(c);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}const a=0*s.padding,m=a/2,u=s.width<=o.width+a?o.width+a:s.width;s.width<=o.width+a?s.diff=(o.width-s.width)/2-s.padding/2:s.diff=-s.padding/2,e.trace("Data ",s,JSON.stringify(s)),l.attr("style",s.style).attr("rx",s.rx).attr("ry",s.ry).attr("x",s.x-u/2).attr("y",s.y-s.height/2-m).attr("width",u).attr("height",s.height+a),d.attr("transform","translate("+(s.x-o.width/2)+", "+(s.y-s.height/2)+")");const h=l.node().getBBox();return s.width=h.width,s.height=h.height,s.intersect=function(e){return No(s,e)},r},GC=(e,t)=>{const s=e.insert("g").attr("class","note-cluster").attr("id",t.id),o=s.insert("rect",":first-child"),n=0*t.padding,i=n/2;o.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-i).attr("y",t.y-t.height/2-i).attr("width",t.width+n).attr("height",t.height+n).attr("fill","none");const a=o.node().getBBox();return t.width=a.width,t.height=a.height,t.intersect=function(e){return No(t,e)},s},XC=(e,n)=>{const a=e.insert("g").attr("class",n.classes).attr("id",n.id),d=a.insert("rect",":first-child"),u=a.insert("g").attr("class","cluster-label"),h=a.append("rect"),r=u.node().appendChild(le(n.labelText,n.labelStyle,void 0,!0));let s=r.getBBox();if(K(t().flowchart.htmlLabels)){const t=r.children[0],e=i(r);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s=r.getBBox();const o=0*n.padding,c=o/2,l=n.width<=s.width+n.padding?s.width+n.padding:n.width;n.width<=s.width+n.padding?n.diff=(s.width+n.padding*0-n.width)/2:n.diff=-n.padding/2,d.attr("class","outer").attr("x",n.x-l/2-c).attr("y",n.y-n.height/2-c).attr("width",l+o).attr("height",n.height+o),h.attr("class","inner").attr("x",n.x-l/2-c).attr("y",n.y-n.height/2-c+s.height-1).attr("width",l+o).attr("height",n.height+o-s.height-3),u.attr("transform","translate("+(n.x-s.width/2)+", "+(n.y-n.height/2-n.padding/3+(K(t().flowchart.htmlLabels)?5:3))+")");const m=d.node().getBBox();return n.height=m.height,n.intersect=function(e){return No(n,e)},a},QC=(e,t)=>{const s=e.insert("g").attr("class",t.classes).attr("id",t.id),o=s.insert("rect",":first-child"),n=0*t.padding,a=n/2;o.attr("class","divider").attr("x",t.x-t.width/2-a).attr("y",t.y-t.height/2).attr("width",t.width+n).attr("height",t.height+n);const i=o.node().getBBox();return t.width=i.width,t.height=i.height,t.diff=-t.padding/2,t.intersect=function(e){return No(t,e)},s},ZC={rect:YC,roundedWithTitle:XC,noteGroup:GC,divider:QC};let Am={};const eE=(t,n)=>{e.trace("Inserting cluster");const s=n.shape||"rect";Am[n.id]=ZC[s](t,n)},tE=()=>{Am={}};let $r={},G={};const oE=()=>{$r={},G={}},iE=(e,n)=>{const a=le(n.label,n.labelStyle),r=e.insert("g").attr("class","edgeLabel"),c=r.insert("g").attr("class","label");c.node().appendChild(a);let o=a.getBBox();if(K(t().flowchart.htmlLabels)){const t=a.children[0],e=i(a);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}c.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),$r[n.id]=r,n.width=o.width,n.height=o.height;let s;if(n.startLabelLeft){const t=le(n.startLabelLeft,n.labelStyle),o=e.insert("g").attr("class","edgeTerminals"),i=o.insert("g").attr("class","inner");s=i.node().appendChild(t);const a=t.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),G[n.id]||(G[n.id]={}),G[n.id].startLeft=o,Pr(s,n.startLabelLeft)}if(n.startLabelRight){const t=le(n.startLabelRight,n.labelStyle),o=e.insert("g").attr("class","edgeTerminals"),i=o.insert("g").attr("class","inner");s=o.node().appendChild(t),i.node().appendChild(t);const a=t.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),G[n.id]||(G[n.id]={}),G[n.id].startRight=o,Pr(s,n.startLabelRight)}if(n.endLabelLeft){const t=le(n.endLabelLeft,n.labelStyle),o=e.insert("g").attr("class","edgeTerminals"),i=o.insert("g").attr("class","inner");s=i.node().appendChild(t);const a=t.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),o.node().appendChild(t),G[n.id]||(G[n.id]={}),G[n.id].endLeft=o,Pr(s,n.endLabelLeft)}if(n.endLabelRight){const t=le(n.endLabelRight,n.labelStyle),o=e.insert("g").attr("class","edgeTerminals"),i=o.insert("g").attr("class","inner");s=i.node().appendChild(t);const a=t.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),o.node().appendChild(t),G[n.id]||(G[n.id]={}),G[n.id].endRight=o,Pr(s,n.endLabelRight)}};function Pr(e,n){t().flowchart.htmlLabels&&e&&(e.style.width=n.length*9+"px",e.style.height="12px")}const rE=(t,n)=>{e.info("Moving label abc78 ",t.id,t.label,$r[t.id]);let s=n.updatedPath?n.updatedPath:n.originalPath;if(t.label){const a=$r[t.id];let o=t.x,i=t.y;if(s){const a=f.calcLabelPosition(s);e.info("Moving label "+t.label+" from (",o,",",i,") to (",a.x,",",a.y,") abc78"),n.updatedPath&&(o=a.x,i=a.y)}a.attr("transform","translate("+o+", "+i+")")}if(t.startLabelLeft){const o=G[t.id].startLeft;let e=t.x,n=t.y;if(s){const o=f.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",s);e=o.x,n=o.y}o.attr("transform","translate("+e+", "+n+")")}if(t.startLabelRight){const o=G[t.id].startRight;let e=t.x,n=t.y;if(s){const o=f.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",s);e=o.x,n=o.y}o.attr("transform","translate("+e+", "+n+")")}if(t.endLabelLeft){const o=G[t.id].endLeft;let e=t.x,n=t.y;if(s){const o=f.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",s);e=o.x,n=o.y}o.attr("transform","translate("+e+", "+n+")")}if(t.endLabelRight){const o=G[t.id].endRight;let e=t.x,n=t.y;if(s){const o=f.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",s);e=o.x,n=o.y}o.attr("transform","translate("+e+", "+n+")")}},cE=(e,t)=>{const n=e.x,s=e.y,o=Math.abs(t.x-n),i=Math.abs(t.y-s),a=e.width/2,r=e.height/2;return o>=a||i>=r},lE=(t,n,s)=>{e.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(n)}
  insidePoint : ${JSON.stringify(s)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const c=t.x,u=t.y,f=Math.abs(c-s.x),r=t.width/2;let o=s.x<n.x?r-f:r+f;const h=t.height/2,a=Math.abs(n.y-s.y),i=Math.abs(n.x-s.x);if(Math.abs(u-n.y)*r>Math.abs(c-n.x)*h){let r=s.y<n.y?n.y-h-u:u-h-n.y;o=i*r/a;const t={x:s.x<n.x?s.x+o:s.x-i+o,y:s.y<n.y?s.y+a-r:s.y-a+r};return o===0&&(t.x=n.x,t.y=n.y),i===0&&(t.x=n.x),a===0&&(t.y=n.y),e.warn(`abc89 topp/bott calc, Q ${a}, q ${r}, R ${i}, r ${o}`,t),t}s.x<n.x?o=n.x-r-c:o=c-r-n.x;let m=a*o/i,l=s.x<n.x?s.x+i-o:s.x-i+o,d=s.y<n.y?s.y+m:s.y-m;return e.warn(`sides calc abc89, Q ${a}, q ${m}, R ${i}, r ${o}`,{_x:l,_y:d}),o===0&&(l=n.x,d=n.y),i===0&&(l=n.x),a===0&&(d=n.y),{x:l,y:d}},km=(t,n)=>{e.warn("abc88 cutPathAtIntersect",t,n);let s=[],o=t[0],i=!1;return t.forEach(t=>{if(e.info("abc88 checking point",t,n),!cE(n,t)&&!i){const a=lE(n,o,t);e.warn("abc88 inside",t,o,a),e.warn("abc88 intersection",a);let r=!1;s.forEach(e=>{r=r||e.x===a.x&&e.y===a.y}),s.some(e=>e.x===a.x&&e.y===a.y)?e.warn("abc88 no intersect",a,s):s.push(a),i=!0}else e.warn("abc88 outside",t,o),o=t,i||s.push(t)}),e.warn("abc88 returning points",s),s},uE=function(n,s,o,i,a,r){let d=o.points,m=!1;const g=r.node(s.v);var h=r.node(s.w);e.info("abc88 InsertEdge: ",o),h.intersect&&g.intersect&&(d=d.slice(1,o.points.length-1),d.unshift(g.intersect(d[0])),e.info("Last point",d[d.length-1],h,h.intersect(d[d.length-1])),d.push(h.intersect(d[d.length-1]))),o.toCluster&&(e.info("to cluster abc88",i[o.toCluster]),d=km(o.points,i[o.toCluster].node),m=!0),o.fromCluster&&(e.info("from cluster abc88",i[o.fromCluster]),d=km(d.reverse(),i[o.fromCluster].node).reverse(),m=!0);const v=d.filter(e=>!Number.isNaN(e.y));let f;a==="graph"||a==="flowchart"?f=o.curve||Vn:f=Vn;const b=cs().x(function(e){return e.x}).y(function(e){return e.y}).curve(f);let u;switch(o.thickness){case"normal":u="edge-thickness-normal";break;case"thick":u="edge-thickness-thick";break;default:u=""}switch(o.pattern){case"solid":u+=" edge-pattern-solid";break;case"dotted":u+=" edge-pattern-dotted";break;case"dashed":u+=" edge-pattern-dashed";break}const l=n.append("path").attr("d",b(v)).attr("id",o.id).attr("class"," "+u+(o.classes?" "+o.classes:"")).attr("style",o.style);let c="";switch((t().flowchart.arrowMarkerAbsolute||t().state.arrowMarkerAbsolute)&&(c=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,c=c.replace(/\(/g,"\\("),c=c.replace(/\)/g,"\\)")),e.info("arrowTypeStart",o.arrowTypeStart),e.info("arrowTypeEnd",o.arrowTypeEnd),o.arrowTypeStart){case"arrow_cross":l.attr("marker-start","url("+c+"#"+a+"-crossStart)");break;case"arrow_point":l.attr("marker-start","url("+c+"#"+a+"-pointStart)");break;case"arrow_barb":l.attr("marker-start","url("+c+"#"+a+"-barbStart)");break;case"arrow_circle":l.attr("marker-start","url("+c+"#"+a+"-circleStart)");break;case"aggregation":l.attr("marker-start","url("+c+"#"+a+"-aggregationStart)");break;case"extension":l.attr("marker-start","url("+c+"#"+a+"-extensionStart)");break;case"composition":l.attr("marker-start","url("+c+"#"+a+"-compositionStart)");break;case"dependency":l.attr("marker-start","url("+c+"#"+a+"-dependencyStart)");break;case"lollipop":l.attr("marker-start","url("+c+"#"+a+"-lollipopStart)");break}switch(o.arrowTypeEnd){case"arrow_cross":l.attr("marker-end","url("+c+"#"+a+"-crossEnd)");break;case"arrow_point":l.attr("marker-end","url("+c+"#"+a+"-pointEnd)");break;case"arrow_barb":l.attr("marker-end","url("+c+"#"+a+"-barbEnd)");break;case"arrow_circle":l.attr("marker-end","url("+c+"#"+a+"-circleEnd)");break;case"aggregation":l.attr("marker-end","url("+c+"#"+a+"-aggregationEnd)");break;case"extension":l.attr("marker-end","url("+c+"#"+a+"-extensionEnd)");break;case"composition":l.attr("marker-end","url("+c+"#"+a+"-compositionEnd)");break;case"dependency":l.attr("marker-end","url("+c+"#"+a+"-dependencyEnd)");break;case"lollipop":l.attr("marker-end","url("+c+"#"+a+"-lollipopEnd)");break}let p={};return m&&(p.updatedPath=d),p.originalPath=o.points,p},Em=(t,n,s,o)=>{e.info("Graph in recursive render: XXX",xt(n),o);const a=n.graph().rankdir;e.trace("Dir in recursive render - dir:",a);const i=t.insert("g").attr("class","root");n.nodes()?e.info("Recursive render XXX",n.nodes()):e.info("No nodes found for",n),n.edges().length>0&&e.trace("Recursive edges",n.edge(n.edges()[0]));const l=i.insert("g").attr("class","clusters"),d=i.insert("g").attr("class","edgePaths"),u=i.insert("g").attr("class","edgeLabels"),r=i.insert("g").attr("class","nodes");n.nodes().forEach(function(t){const i=n.node(t);if(o!==void 0){const s=JSON.parse(JSON.stringify(o.clusterData));e.info("Setting data for cluster XXX (",t,") ",s,o),n.setNode(o.id,s),n.parent(t)||(e.trace("Setting parent",t,o.id),n.setParent(t,o.id,s))}if(e.info("(Insert) Node XXX"+t+": "+JSON.stringify(n.node(t))),i&&i.clusterNode){e.info("Cluster identified",t,i.width,n.node(t));const a=Em(r,i.graph,s,n.node(t)),o=a.elem;T(i,o),i.diff=a.diff||0,e.info("Node bounds (abc123)",t,i,i.width,i.x,i.y),UC(o,i),e.warn("Recursive render complete ",o,i)}else n.children(t).length>0?(e.info("Cluster - the non recursive path XXX",t,i.id,i,n),e.info(Eo(i.id,n)),b[i.id]={id:Eo(i.id,n),node:i}):(e.info("Node - the non recursive path",t,i.id,i),WC(r,n.node(t),a))}),n.edges().forEach(function(t){const s=n.edge(t.v,t.w,t.name);e.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),e.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(n.edge(t))),e.info("Fix",b,"ids:",t.v,t.w,"Translateing: ",b[t.v],b[t.w]),iE(u,s)}),n.edges().forEach(function(t){e.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))}),e.info("#############################################"),e.info("###                Layout                 ###"),e.info("#############################################"),e.info(n),Ss(n),e.info("Graph after layout:",xt(n));let c=0;return cC(n).forEach(function(t){const s=n.node(t);e.info("Position "+t+": "+JSON.stringify(n.node(t))),e.info("Position "+t+": ("+s.x,","+s.y,") width: ",s.width," height: ",s.height),s&&s.clusterNode?Sm(s):n.children(t).length>0?(eE(l,s),b[s.id].node=s):Sm(s)}),n.edges().forEach(function(t){const o=n.edge(t);e.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(o),o);const i=uE(d,t,o,b,s,n);rE(o,i)}),n.nodes().forEach(function(t){const s=n.node(t);e.info(t,s.type,s.diff),s.type==="group"&&(c=s.diff)}),{elem:i,diff:c}},yl=(t,n,s,o,i)=>{Bx(t,s,o,i),KC(),oE(),tE(),Zx(),e.warn("Graph at first:",xt(n)),iC(n),e.warn("Graph after:",xt(n)),Em(t,n,o)},Om=e=>h.sanitizeText(e,t());let _m={dividerMargin:10,padding:5,textHeight:10};const gE=function(n,s,o,i){const a=Object.keys(n);e.info("keys:",a),e.info(n),a.forEach(function(o){const a=n[o];let r="";a.cssClasses.length>0&&(r=r+" "+a.cssClasses.join(" "));const c={labelStyle:""};let u=a.text!==void 0?a.text:a.id,l=0,d="";switch(a.type){case"class":d="class_box";break;default:d="class_box"}s.setNode(a.id,{labelStyle:c.labelStyle,shape:d,labelText:Om(u),classData:a,rx:l,ry:l,class:r,style:c.style,id:a.id,domId:a.domId,tooltip:i.db.getTooltip(a.id)||"",haveCallback:a.haveCallback,link:a.link,width:a.type==="group"?500:void 0,type:a.type,padding:t().flowchart.padding}),e.info("setNode",{labelStyle:c.labelStyle,shape:d,labelText:u,rx:l,ry:l,class:r,style:c.style,id:a.id,width:a.type==="group"?500:void 0,type:a.type,padding:t().flowchart.padding})})},vE=function(n,s,o,i){e.info(n),n.forEach(function(n,a){const c=n;let f="";const l={labelStyle:"",style:""};let u=c.text,d=0,h="note";if(s.setNode(c.id,{labelStyle:l.labelStyle,shape:h,labelText:Om(u),noteData:c,rx:d,ry:d,class:f,style:l.style,id:c.id,domId:c.id,tooltip:"",type:"note",padding:t().flowchart.padding}),e.info("setNode",{labelStyle:l.labelStyle,shape:h,labelText:u,rx:d,ry:d,style:l.style,id:c.id,type:"note",padding:t().flowchart.padding}),!c.class||!(c.class in i))return;const m=o+a,r={};r.classes="relation",r.pattern="dotted",r.id=`edgeNote${m}`,r.arrowhead="none",e.info(`Note edge: ${JSON.stringify(r)}, ${JSON.stringify(c)}`),r.startLabelRight="",r.endLabelLeft="",r.arrowTypeStart="none",r.arrowTypeEnd="none";let p="fill:none",g="";r.style=p,r.labelStyle=g,r.curve=Ke(_m.curve,pe),s.setEdge(c.id,c.class,r,m)})},bE=function(n,s){const i=t().flowchart;let o=0;n.forEach(function(a){o++;const r={};r.classes="relation",r.pattern=a.relation.lineType==1?"dashed":"solid",r.id="id"+o,a.type==="arrow_open"?r.arrowhead="none":r.arrowhead="normal",e.info(r,a),r.startLabelRight=a.relationTitle1==="none"?"":a.relationTitle1,r.endLabelLeft=a.relationTitle2==="none"?"":a.relationTitle2,r.arrowTypeStart=ym(a.relation.type1),r.arrowTypeEnd=ym(a.relation.type2);let c="",l="";if(a.style!==void 0){const e=nn(a.style);c=e.style,l=e.labelStyle}else c="fill:none";r.style=c,r.labelStyle=l,a.interpolate!==void 0?r.curve=Ke(a.interpolate,pe):n.defaultInterpolate!==void 0?r.curve=Ke(n.defaultInterpolate,pe):r.curve=Ke(i.curve,pe),a.text=a.title,a.text===void 0?a.style!==void 0&&(r.arrowheadStyle="fill: #333"):(r.arrowheadStyle="fill: #333",r.labelpos="c",t().flowchart.htmlLabels?(r.labelType="html",r.label='<span class="edgeLabel">'+a.text+"</span>"):(r.labelType="text",r.label=a.text.replace(h.lineBreakRegex,`
`),a.style===void 0&&(r.style=r.style||"stroke: #333; stroke-width: 1.5px;fill:none"),r.labelStyle=r.labelStyle.replace("color:","fill:"))),s.setEdge(a.id1,a.id2,r,o)})},jE=function(e){const t=Object.keys(e);t.forEach(function(t){_m[t]=e[t]})},d5=function(n,s,o,a){e.info("Drawing class - ",s);const r=t().flowchart,l=t().securityLevel;e.info("config:",r);const g=r.nodeSpacing||50,v=r.rankSpacing||50,c=new D({multigraph:!0,compound:!0}).setGraph({rankdir:a.db.getDirection(),nodesep:g,ranksep:v,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),h=a.db.getClasses(),d=a.db.getRelations(),b=a.db.getNotes();e.info(d),gE(h,c,s,a),bE(d,c),vE(b,c,d.length+1,h);let u;l==="sandbox"&&(u=i("#i"+s));const m=i(l==="sandbox"?u.nodes()[0].contentDocument.body:"body"),p=m.select(`[id="${s}"]`),j=m.select("#"+s+" g");if(yl(j,c,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",s),f.insertTitle(p,"classTitleText",r.titleTopMargin,a.db.getDiagramTitle()),Lr(c,p,r.diagramPadding,r.useMaxWidth),!r.htmlLabels){const e=l==="sandbox"?u.nodes()[0].contentDocument:document,t=e.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const s of t){const o=s.getBBox(),n=e.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("rx",0),n.setAttribute("ry",0),n.setAttribute("width",o.width),n.setAttribute("height",o.height),s.insertBefore(n,s.firstChild)}}};function ym(e){let t;switch(e){case 0:t="aggregation";break;case 1:t="extension";break;case 2:t="composition";break;case 3:t="dependency";break;case 4:t="lollipop";break;default:t="none"}return t}const wE={setConf:jE,draw:d5};fr=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},O=[1,2],s=[1,5],t=[6,9,11,23,25,27,29,30,31,49],w=[1,17],y=[1,18],v=[1,19],h=[1,20],c=[1,21],i=[1,22],g=[1,25],u=[1,30],l=[1,31],m=[1,32],f=[1,33],p=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],d=[1,45],o=[30,31,46,47],b=[4,6,9,11,23,25,27,29,30,31,49],j=[42,43,44,45],n=[22,37],_=[1,64],r={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 1:break;case 3:this.$=[];break;case 4:a[c-1].push(a[c]),this.$=a[c-1];break;case 5:case 6:this.$=a[c];break;case 7:case 8:this.$=[];break;case 12:o.addEntity(a[c-4]),o.addEntity(a[c-2]),o.addRelationship(a[c-4],a[c],a[c-2],a[c-3]);break;case 13:o.addEntity(a[c-3]),o.addAttributes(a[c-3],a[c-1]);break;case 14:o.addEntity(a[c-2]);break;case 15:o.addEntity(a[c]);break;case 16:case 17:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 18:case 19:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 20:case 41:this.$=a[c];break;case 21:case 39:case 40:this.$=a[c].replace(/"/g,"");break;case 22:this.$=[a[c]];break;case 23:a[c].push(a[c-1]),this.$=a[c];break;case 24:this.$={attributeType:a[c-1],attributeName:a[c]};break;case 25:this.$={attributeType:a[c-2],attributeName:a[c-1],attributeKeyType:a[c]};break;case 26:this.$={attributeType:a[c-2],attributeName:a[c-1],attributeComment:a[c]};break;case 27:this.$={attributeType:a[c-3],attributeName:a[c-2],attributeKeyType:a[c-1],attributeComment:a[c]};break;case 28:case 29:case 30:this.$=a[c];break;case 31:this.$=a[c].replace(/"/g,"");break;case 32:this.$={cardA:a[c],relType:a[c-1],cardB:a[c-2]};break;case 33:this.$=o.Cardinality.ZERO_OR_ONE;break;case 34:this.$=o.Cardinality.ZERO_OR_MORE;break;case 35:this.$=o.Cardinality.ONE_OR_MORE;break;case 36:this.$=o.Cardinality.ONLY_ONE;break;case 37:this.$=o.Identification.NON_IDENTIFYING;break;case 38:this.$=o.Identification.IDENTIFYING;break;case 42:o.parseDirective("%%{","open_directive");break;case 43:o.parseDirective(a[c],"type_directive");break;case 44:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 45:o.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:O,7:3,12:4,49:s},{1:[3]},e(t,[2,3],{5:6}),{3:7,4:O,7:3,12:4,49:s},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:w,25:y,27:v,29:h,30:c,31:i,49:s},{1:[2,2]},{14:23,15:[1,24],52:g},e([15,52],[2,43]),e(t,[2,8],{1:[2,1]}),e(t,[2,4]),{7:15,10:26,12:4,17:16,23:w,25:y,27:v,29:h,30:c,31:i,49:s},e(t,[2,6]),e(t,[2,7]),e(t,[2,11]),e(t,[2,15],{18:27,40:29,20:[1,28],42:u,43:l,44:m,45:f}),{24:[1,34]},{26:[1,35]},{28:[1,36]},e(t,[2,19]),e(p,[2,20]),e(p,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},e(t,[2,5]),{17:40,30:c,31:i},{21:41,22:[1,42],32:43,33:44,37:d},{41:46,46:[1,47],47:[1,48]},e(o,[2,33]),e(o,[2,34]),e(o,[2,35]),e(o,[2,36]),e(t,[2,16]),e(t,[2,17]),e(t,[2,18]),e(b,[2,9]),{14:49,52:g},{52:[2,44]},{15:[1,50]},{22:[1,51]},e(t,[2,14]),{21:52,22:[2,22],32:43,33:44,37:d},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:u,43:l,44:m,45:f},e(j,[2,37]),e(j,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},e(t,[2,13]),{22:[2,23]},e(n,[2,24],{35:61,36:62,38:[1,63],39:_}),e([22,37,38,39],[2,29]),e([30,31],[2,32]),e(b,[2,10]),e(t,[2,12]),e(t,[2,39]),e(t,[2,40]),e(t,[2,41]),e(n,[2,25],{36:65,39:_}),e(n,[2,26]),e([22,37,39],[2,30]),e(n,[2,31]),e(n,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},x=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 21:break;case 22:return 38;case 23:return 37;case 24:return 37;case 25:return 39;case 26:break;case 27:return this.popState(),22;case 28:return n.yytext[0];case 29:return 42;case 30:return 44;case 31:return 44;case 32:return 44;case 33:return 42;case 34:return 42;case 35:return 43;case 36:return 43;case 37:return 43;case 38:return 43;case 39:return 43;case 40:return 44;case 41:return 43;case 42:return 44;case 43:return 45;case 44:return 45;case 45:return 45;case 46:return 45;case 47:return 42;case 48:return 43;case 49:return 44;case 50:return 46;case 51:return 47;case 52:return 47;case 53:return 46;case 54:return 46;case 55:return 46;case 56:return 30;case 57:return n.yytext[0];case 58:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9-_[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};return e}();r.lexer=x;function a(){this.yy={}}return a.prototype=r,r.Parser=a,new a}(),fr.parser=fr;const xE=fr,CE=e=>e.match(/^\s*erDiagram/)!==null;let ti={},l1=[];const AE={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},SE={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},ME=function(e,t,n){O.parseDirective(this,e,t,n)},bm=function(t){return ti[t]===void 0&&(ti[t]={attributes:[]},e.info("Added new entity :",t)),ti[t]},TE=()=>ti,zE=function(t,n){let o=bm(t),s;for(s=n.length-1;s>=0;s--)o.attributes.push(n[s]),e.debug("Added attribute ",n[s].attributeName)},DE=function(t,n,s,o){let i={entityA:t,roleA:n,entityB:s,relSpec:o};l1.push(i),e.debug("Added new relationship :",i)},NE=()=>l1,LE=function(){ti={},l1=[],Ne()},RE={Cardinality:AE,Identification:SE,parseDirective:ME,getConfig:()=>t().er,addEntity:bm,addAttributes:zE,getEntities:TE,addRelationship:DE,getRelationships:NE,clear:LE,setAccTitle:Oe,getAccTitle:Fe,setAccDescription:De,getAccDescription:Pe,setDiagramTitle:pt,getDiagramTitle:yt},Bt={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},HE=function(e,t){let n;e.append("defs").append("marker").attr("id",Bt.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",Bt.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),n=e.append("defs").append("marker").attr("id",Bt.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M9,0 L9,18"),n=e.append("defs").append("marker").attr("id",Bt.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M21,0 L21,18"),e.append("defs").append("marker").attr("id",Bt.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",Bt.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),n=e.append("defs").append("marker").attr("id",Bt.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),n=e.append("defs").append("marker").attr("id",Bt.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},Ht={ERMarkers:Bt,insertMarkers:HE};let Ci;const VE=new Uint8Array(16);function $E(){if(!Ci&&(Ci=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ci))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ci(VE)}const Y=[];for(let e=0;e<256;++e)Y.push((e+256).toString(16).slice(1));function UE(e,t=0){return(Y[e[t+0]]+Y[e[t+1]]+Y[e[t+2]]+Y[e[t+3]]+"-"+Y[e[t+4]]+Y[e[t+5]]+"-"+Y[e[t+6]]+Y[e[t+7]]+"-"+Y[e[t+8]]+Y[e[t+9]]+"-"+Y[e[t+10]]+Y[e[t+11]]+Y[e[t+12]]+Y[e[t+13]]+Y[e[t+14]]+Y[e[t+15]]).toLowerCase()}const KE=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hm={randomUUID:KE};function YE(e,t,n){if(hm.randomUUID&&!t&&!e)return hm.randomUUID();e=e||{};const s=e.random||(e.rng||$E)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return UE(s)}const GE=/[^\dA-Za-z](\W)*/g;let P={},li=new Map;const ZE=function(e){const t=Object.keys(e);for(const n of t)P[n]=e[n]},JE=(e,n,s)=>{const i=P.entityPadding/3,o=P.entityPadding/3,p=P.fontSize*.85,c=n.node().getBBox(),v=[];let d=!1,l=!1,u=0,h=0,m=0,f=0,g=c.height+i*2,j=1;s.forEach(e=>{e.attributeKeyType!==void 0&&(d=!0),e.attributeComment!==void 0&&(l=!0)}),s.forEach(s=>{const r=`${n.node().id}-attr-${j}`;let o=0;const w=qt(s.attributeType),c=e.append("text").classed("er entityLabel",!0).attr("id",`${r}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",t().fontFamily).style("font-size",p+"px").text(w),b=e.append("text").classed("er entityLabel",!0).attr("id",`${r}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",t().fontFamily).style("font-size",p+"px").text(s.attributeName),a={};a.tn=c,a.nn=b;const y=c.node().getBBox(),_=b.node().getBBox();if(u=Math.max(u,y.width),h=Math.max(h,_.width),o=Math.max(y.height,_.height),d){const n=e.append("text").classed("er entityLabel",!0).attr("id",`${r}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",t().fontFamily).style("font-size",p+"px").text(s.attributeKeyType||"");a.kn=n;const i=n.node().getBBox();m=Math.max(m,i.width),o=Math.max(o,i.height)}if(l){const n=e.append("text").classed("er entityLabel",!0).attr("id",`${r}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",t().fontFamily).style("font-size",p+"px").text(s.attributeComment||"");a.cn=n;const i=n.node().getBBox();f=Math.max(f,i.width),o=Math.max(o,i.height)}a.height=o,v.push(a),g+=o+i*2,j+=1});let r=4;d&&(r+=2),l&&(r+=2);const b=u+h+m+f,a={width:Math.max(P.minEntityWidth,Math.max(c.width+P.entityPadding*2,b+o*r)),height:s.length>0?g:Math.max(P.minEntityHeight,c.height+P.entityPadding*2)};if(s.length>0){const p=Math.max(0,(a.width-b-o*r)/(r/2));n.attr("transform","translate("+a.width/2+","+(i+c.height/2)+")");let t=c.height+i*2,s="attributeBoxOdd";v.forEach(n=>{const r=t+i+n.height/2;n.tn.attr("transform","translate("+o+","+r+")");const c=e.insert("rect","#"+n.tn.node().id).classed(`er ${s}`,!0).attr("x",0).attr("y",t).attr("width",u+o*2+p).attr("height",n.height+i*2),g=parseFloat(c.attr("x"))+parseFloat(c.attr("width"));n.nn.attr("transform","translate("+(g+o)+","+r+")");const v=e.insert("rect","#"+n.nn.node().id).classed(`er ${s}`,!0).attr("x",g).attr("y",t).attr("width",h+o*2+p).attr("height",n.height+i*2);let a=parseFloat(v.attr("x"))+parseFloat(v.attr("width"));if(d){n.kn.attr("transform","translate("+(a+o)+","+r+")");const c=e.insert("rect","#"+n.kn.node().id).classed(`er ${s}`,!0).attr("x",a).attr("y",t).attr("width",m+o*2+p).attr("height",n.height+i*2);a=parseFloat(c.attr("x"))+parseFloat(c.attr("width"))}l&&(n.cn.attr("transform","translate("+(a+o)+","+r+")"),e.insert("rect","#"+n.cn.node().id).classed(`er ${s}`,"true").attr("x",a).attr("y",t).attr("width",f+o*2+p).attr("height",n.height+i*2)),t+=n.height+i*2,s=s==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else a.height=Math.max(P.minEntityHeight,g),n.attr("transform","translate("+a.width/2+","+a.height/2+")");return a},ek=function(e,n,s){const i=Object.keys(n);let o;return i.forEach(function(i){const a=rk(i,"entity");li.set(i,a);const r=e.append("g").attr("id",a);o=o===void 0?a:o;const c="text-"+a,d=r.append("text").classed("er entityLabel",!0).attr("id",c).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",t().fontFamily).style("font-size",P.fontSize+"px").text(i),{width:u,height:h}=JE(r,d,n[i].attributes),m=r.insert("rect","#"+c).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",u).attr("height",h),l=m.node().getBBox();s.setNode(a,{width:l.width,height:l.height,shape:"rect",id:a})}),o},tk=function(e,t){t.nodes().forEach(function(n){n!==void 0&&t.node(n)!==void 0&&e.select("#"+n).attr("transform","translate("+(t.node(n).x-t.node(n).width/2)+","+(t.node(n).y-t.node(n).height/2)+" )")})},lm=function(e){return(e.entityA+e.roleA+e.entityB).replace(/\s/g,"")},sk=function(e,t){return e.forEach(function(e){t.setEdge(li.get(e.entityA),li.get(e.entityB),{relationship:e},lm(e))}),e};let cm=0;const ik=function(e,n,s,o,i){cm++;const u=s.edge(li.get(n.entityA),li.get(n.entityB),lm(n)),h=cs().x(function(e){return e.x}).y(function(e){return e.y}).curve(Vn),r=e.insert("path","#"+o).classed("er relationshipLine",!0).attr("d",h(u.points)).style("stroke",P.stroke).style("fill","none");n.relSpec.relType===i.db.Identification.NON_IDENTIFYING&&r.attr("stroke-dasharray","8,8");let a="";switch(P.arrowMarkerAbsolute&&(a=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,a=a.replace(/\(/g,"\\("),a=a.replace(/\)/g,"\\)")),n.relSpec.cardA){case i.db.Cardinality.ZERO_OR_ONE:r.attr("marker-end","url("+a+"#"+Ht.ERMarkers.ZERO_OR_ONE_END+")");break;case i.db.Cardinality.ZERO_OR_MORE:r.attr("marker-end","url("+a+"#"+Ht.ERMarkers.ZERO_OR_MORE_END+")");break;case i.db.Cardinality.ONE_OR_MORE:r.attr("marker-end","url("+a+"#"+Ht.ERMarkers.ONE_OR_MORE_END+")");break;case i.db.Cardinality.ONLY_ONE:r.attr("marker-end","url("+a+"#"+Ht.ERMarkers.ONLY_ONE_END+")");break}switch(n.relSpec.cardB){case i.db.Cardinality.ZERO_OR_ONE:r.attr("marker-start","url("+a+"#"+Ht.ERMarkers.ZERO_OR_ONE_START+")");break;case i.db.Cardinality.ZERO_OR_MORE:r.attr("marker-start","url("+a+"#"+Ht.ERMarkers.ZERO_OR_MORE_START+")");break;case i.db.Cardinality.ONE_OR_MORE:r.attr("marker-start","url("+a+"#"+Ht.ERMarkers.ONE_OR_MORE_START+")");break;case i.db.Cardinality.ONLY_ONE:r.attr("marker-start","url("+a+"#"+Ht.ERMarkers.ONLY_ONE_START+")");break}const m=r.node().getTotalLength(),c=r.node().getPointAtLength(m*.5),d="rel"+cm,f=e.append("text").classed("er relationshipLabel",!0).attr("id",d).attr("x",c.x).attr("y",c.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",t().fontFamily).style("font-size",P.fontSize+"px").text(n.roleA),l=f.node().getBBox();e.insert("rect","#"+d).classed("er relationshipLabelBox",!0).attr("x",c.x-l.width/2).attr("y",c.y-l.height/2).attr("width",l.width).attr("height",l.height)},ak=function(n,s,o,a){P=t().er,e.info("Drawing ER diagram");const u=t().securityLevel;let h;u==="sandbox"&&(h=i("#i"+s));const g=i(u==="sandbox"?h.nodes()[0].contentDocument.body:"body"),r=g.select(`[id='${s}']`);Ht.insertMarkers(r,P);let c;c=new D({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:P.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const v=ek(r,a.db.getEntities(),c),b=sk(a.db.getRelationships(),c);Ss(c),tk(r,c),b.forEach(function(e){ik(r,e,c,v,a)});const l=P.diagramPadding;f.insertTitle(r,"entityTitleText",P.titleTopMargin,a.db.getDiagramTitle());const d=r.node().getBBox(),m=d.width+l*2,p=d.height+l*2;Ve(r,p,m,P.useMaxWidth),r.attr("viewBox",`${d.x-l} ${d.y-l} ${m} ${p}`)};function rk(e="",t=""){const n=e.replace(GE,"");return`${rm(t)}${rm(n)}${YE()}`}function rm(e=""){return e.length>0?`${e}-`:""}const lk={setConf:ZE,draw:ak};Ti=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},tt=[1,9],Me=[1,7],Be=[1,6],Ve=[1,8],je=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],$e=[2,10],We=[1,20],Ie=[1,21],He=[1,22],Pe=[1,23],xe=[1,30],Le=[1,32],Ne=[1,33],De=[1,34],re=[1,62],de=[1,48],ne=[1,52],ze=[1,36],Te=[1,37],Fe=[1,38],Se=[1,39],Ae=[1,40],fe=[1,56],ve=[1,63],se=[1,51],le=[1,53],pe=[1,55],ie=[1,59],ae=[1,60],Re=[1,41],Oe=[1,42],Ce=[1,43],Ee=[1,44],ge=[1,61],he=[1,50],ue=[1,54],ce=[1,57],me=[1,58],oe=[1,49],et=[1,66],we=[1,71],D=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],K=[1,75],W=[1,74],U=[1,76],ke=[20,21,23,81,82],P=[1,99],a=[1,104],c=[1,107],m=[1,108],I=[1,101],h=[1,106],u=[1,109],H=[1,102],d=[1,114],l=[1,113],n=[1,103],r=[1,105],t=[1,110],i=[1,111],o=[1,112],s=[1,115],Ye=[20,21,22,23,81,82],R=[20,21,22,23,53,81,82],L=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],z=[20,21,23],Xe=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Ge=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],_e=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],E=[1,149],k=[1,157],T=[1,158],F=[1,159],M=[1,160],S=[1,144],A=[1,145],N=[1,141],g=[1,152],C=[1,153],x=[1,154],O=[1,155],w=[1,156],_=[1,161],p=[1,162],y=[1,147],j=[1,150],b=[1,146],v=[1,143],Ue=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ze=[1,165],ye=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],f=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],nt=[12,21,22,24],Qe=[22,106],q=[1,250],Y=[1,245],Q=[1,246],ee=[1,254],$=[1,251],V=[1,248],te=[1,247],J=[1,249],Z=[1,252],X=[1,253],G=[1,255],be=[1,273],Je=[20,21,23,106],B=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],qe={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(t,n,s,o,i,a){var l,c=a.length-1;switch(i){case 5:o.parseDirective("%%{","open_directive");break;case 6:o.parseDirective(a[c],"type_directive");break;case 7:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 8:o.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(a[c])||a[c].length>0)&&a[c-1].push(a[c]),this.$=a[c-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=a[c];break;case 19:o.setDirection("TB"),this.$="TB";break;case 20:o.setDirection(a[c-1]),this.$=a[c-1];break;case 35:this.$=a[c-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=o.addSubGraph(a[c-6],a[c-1],a[c-4]);break;case 42:this.$=o.addSubGraph(a[c-3],a[c-1],a[c-3]);break;case 43:this.$=o.addSubGraph(void 0,a[c-1],void 0);break;case 45:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 46:case 47:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 51:o.addLink(a[c-2].stmt,a[c],a[c-1]),this.$={stmt:a[c],nodes:a[c].concat(a[c-2].nodes)};break;case 52:o.addLink(a[c-3].stmt,a[c-1],a[c-2]),this.$={stmt:a[c-1],nodes:a[c-1].concat(a[c-3].nodes)};break;case 53:this.$={stmt:a[c-1],nodes:a[c-1]};break;case 54:this.$={stmt:a[c],nodes:a[c]};break;case 55:this.$=[a[c]];break;case 56:this.$=a[c-4].concat(a[c]);break;case 57:this.$=[a[c-2]],o.setClass(a[c-2],a[c]);break;case 58:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"square");break;case 59:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"doublecircle");break;case 60:this.$=a[c-5],o.addVertex(a[c-5],a[c-2],"circle");break;case 61:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"ellipse");break;case 62:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"stadium");break;case 63:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"subroutine");break;case 64:this.$=a[c-7],o.addVertex(a[c-7],a[c-1],"rect",void 0,void 0,void 0,Object.fromEntries([[a[c-5],a[c-3]]]));break;case 65:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"cylinder");break;case 66:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"round");break;case 67:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"diamond");break;case 68:this.$=a[c-5],o.addVertex(a[c-5],a[c-2],"hexagon");break;case 69:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"odd");break;case 70:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"trapezoid");break;case 71:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"inv_trapezoid");break;case 72:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"lean_right");break;case 73:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"lean_left");break;case 74:this.$=a[c],o.addVertex(a[c]);break;case 75:a[c-1].text=a[c],this.$=a[c-1];break;case 76:case 77:a[c-2].text=a[c-1],this.$=a[c-2];break;case 78:this.$=a[c];break;case 79:l=o.destructLink(a[c],a[c-2]),this.$={type:l.type,stroke:l.stroke,length:l.length,text:a[c-1]};break;case 80:l=o.destructLink(a[c]),this.$={type:l.type,stroke:l.stroke,length:l.length};break;case 81:this.$=a[c-1];break;case 83:case 97:case 153:this.$=a[c-1]+""+a[c];break;case 98:case 99:this.$=a[c-4],o.addClass(a[c-2],a[c]);break;case 100:this.$=a[c-4],o.setClass(a[c-2],a[c]);break;case 101:case 109:this.$=a[c-1],o.setClickEvent(a[c-1],a[c]);break;case 102:case 110:this.$=a[c-3],o.setClickEvent(a[c-3],a[c-2]),o.setTooltip(a[c-3],a[c]);break;case 103:this.$=a[c-2],o.setClickEvent(a[c-2],a[c-1],a[c]);break;case 104:this.$=a[c-4],o.setClickEvent(a[c-4],a[c-3],a[c-2]),o.setTooltip(a[c-4],a[c]);break;case 105:case 111:this.$=a[c-1],o.setLink(a[c-1],a[c]);break;case 106:case 112:this.$=a[c-3],o.setLink(a[c-3],a[c-2]),o.setTooltip(a[c-3],a[c]);break;case 107:case 113:this.$=a[c-3],o.setLink(a[c-3],a[c-2],a[c]);break;case 108:case 114:this.$=a[c-5],o.setLink(a[c-5],a[c-4],a[c]),o.setTooltip(a[c-5],a[c-2]);break;case 115:this.$=a[c-4],o.addVertex(a[c-2],void 0,void 0,a[c]);break;case 116:case 118:this.$=a[c-4],o.updateLink(a[c-2],a[c]);break;case 117:this.$=a[c-4],o.updateLink([a[c-2]],a[c]);break;case 119:this.$=a[c-8],o.updateLinkInterpolate([a[c-6]],a[c-2]),o.updateLink([a[c-6]],a[c]);break;case 120:this.$=a[c-8],o.updateLinkInterpolate(a[c-6],a[c-2]),o.updateLink(a[c-6],a[c]);break;case 121:this.$=a[c-6],o.updateLinkInterpolate([a[c-4]],a[c]);break;case 122:this.$=a[c-6],o.updateLinkInterpolate(a[c-4],a[c]);break;case 123:case 125:this.$=[a[c]];break;case 124:case 126:a[c-2].push(a[c]),this.$=a[c-2];break;case 128:this.$=a[c-1]+a[c];break;case 150:this.$=a[c];break;case 151:this.$=a[c-1]+""+a[c];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:tt,16:4,21:Me,22:Be,24:Ve},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:tt,16:4,21:Me,22:Be,24:Ve},e(je,$e,{17:11}),{7:12,13:[1,13]},{16:14,21:Me,22:Be,24:Ve},{16:15,21:Me,22:Be,24:Ve},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:We,21:Ie,22:He,23:Pe,32:24,33:25,34:26,35:27,36:28,37:29,38:xe,43:31,44:Le,46:Ne,48:De,50:35,51:45,52:re,54:46,66:de,67:ne,86:ze,87:Te,88:Fe,89:Se,90:Ae,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,118:Re,119:Oe,120:Ce,121:Ee,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{8:64,10:[1,65],15:et},e([10,15],[2,6]),e(je,[2,17]),e(je,[2,18]),e(je,[2,19]),{20:[1,68],21:[1,69],22:we,27:67,30:70},e(D,[2,11]),e(D,[2,12]),e(D,[2,13]),e(D,[2,14]),e(D,[2,15]),e(D,[2,16]),{9:72,20:K,21:W,23:U,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:K,21:W,23:U},{9:81,20:K,21:W,23:U},{9:82,20:K,21:W,23:U},{9:83,20:K,21:W,23:U},{9:84,20:K,21:W,23:U},{9:86,20:K,21:W,22:[1,85],23:U},e(D,[2,44]),{45:[1,87]},{47:[1,88]},e(D,[2,47]),e(ke,[2,54],{30:89,22:we}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:P,52:a,66:c,67:m,84:[1,97],91:I,97:96,98:[1,94],100:[1,95],105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},e(D,[2,158]),e(D,[2,159]),e(D,[2,160]),e(D,[2,161]),e(Ye,[2,55],{53:[1,116]}),e(R,[2,74],{116:129,40:[1,117],52:re,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:de,67:ne,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,122:ge,123:he,124:ue,125:ce,126:me,127:oe}),e(L,[2,150]),e(L,[2,175]),e(L,[2,176]),e(L,[2,177]),e(L,[2,178]),e(L,[2,179]),e(L,[2,180]),e(L,[2,181]),e(L,[2,182]),e(L,[2,183]),e(L,[2,184]),e(L,[2,185]),e(L,[2,186]),e(L,[2,187]),e(L,[2,188]),e(L,[2,189]),e(L,[2,190]),{9:130,20:K,21:W,23:U},{11:131,14:[1,132]},e(z,[2,8]),e(je,[2,20]),e(je,[2,26]),e(je,[2,27]),{21:[1,133]},e(Xe,[2,34],{30:134,22:we}),e(D,[2,35]),{50:135,51:45,52:re,54:46,66:de,67:ne,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,122:ge,123:he,124:ue,125:ce,126:me,127:oe},e(Ge,[2,48]),e(Ge,[2,49]),e(Ge,[2,50]),e(_e,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:E,24:k,26:T,38:F,39:139,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),e(D,[2,36]),e(D,[2,37]),e(D,[2,38]),e(D,[2,39]),e(D,[2,40]),{22:E,24:k,26:T,38:F,39:163,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(Ue,$e,{17:164}),e(D,[2,45]),e(D,[2,46]),e(ke,[2,53],{52:Ze}),{26:P,52:a,66:c,67:m,91:I,97:166,102:[1,167],105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},{95:[1,168],103:169,105:[1,170]},{26:P,52:a,66:c,67:m,91:I,95:[1,171],97:172,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},{26:P,52:a,66:c,67:m,91:I,97:173,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},e(z,[2,101],{22:[1,174],99:[1,175]}),e(z,[2,105],{22:[1,176]}),e(z,[2,109],{115:100,117:178,22:[1,177],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,122:n,123:r,124:t,125:i,126:o,127:s}),e(z,[2,111],{22:[1,179]}),e(ye,[2,152]),e(ye,[2,154]),e(ye,[2,155]),e(ye,[2,156]),e(ye,[2,157]),e(f,[2,162]),e(f,[2,163]),e(f,[2,164]),e(f,[2,165]),e(f,[2,166]),e(f,[2,167]),e(f,[2,168]),e(f,[2,169]),e(f,[2,170]),e(f,[2,171]),e(f,[2,172]),e(f,[2,173]),e(f,[2,174]),{52:re,54:180,66:de,67:ne,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{22:E,24:k,26:T,38:F,39:181,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:182,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:184,42:M,52:a,57:[1,183],66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:185,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:186,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:187,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{66:[1,188]},{22:E,24:k,26:T,38:F,39:189,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:190,42:M,52:a,66:c,67:m,71:[1,191],73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:192,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:193,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:194,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(L,[2,151]),e(nt,[2,3]),{8:195,15:et},{15:[2,7]},e(je,[2,28]),e(Xe,[2,33]),e(ke,[2,51],{30:196,22:we}),e(_e,[2,75],{22:[1,197]}),{22:[1,198]},{22:E,24:k,26:T,38:F,39:199,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,73:S,81:A,82:[1,200],83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(f,[2,82]),e(f,[2,84]),e(f,[2,140]),e(f,[2,141]),e(f,[2,142]),e(f,[2,143]),e(f,[2,144]),e(f,[2,145]),e(f,[2,146]),e(f,[2,147]),e(f,[2,148]),e(f,[2,149]),e(f,[2,85]),e(f,[2,86]),e(f,[2,87]),e(f,[2,88]),e(f,[2,89]),e(f,[2,90]),e(f,[2,91]),e(f,[2,92]),e(f,[2,93]),e(f,[2,94]),e(f,[2,95]),{9:203,20:K,21:W,22:E,23:U,24:k,26:T,38:F,40:[1,202],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{18:18,19:19,20:We,21:Ie,22:He,23:Pe,32:24,33:25,34:26,35:27,36:28,37:29,38:xe,42:[1,204],43:31,44:Le,46:Ne,48:De,50:35,51:45,52:re,54:46,66:de,67:ne,86:ze,87:Te,88:Fe,89:Se,90:Ae,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,118:Re,119:Oe,120:Ce,121:Ee,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{22:we,30:205},{22:[1,206],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,115:100,117:178,122:n,123:r,124:t,125:i,126:o,127:s},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},e(Qe,[2,123]),{22:[1,211]},{22:[1,212],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,115:100,117:178,122:n,123:r,124:t,125:i,126:o,127:s},{22:[1,213],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,115:100,117:178,122:n,123:r,124:t,125:i,126:o,127:s},{84:[1,214]},e(z,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},e(ye,[2,153]),{84:[1,219],101:[1,220]},e(Ye,[2,57],{116:129,52:re,66:de,67:ne,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,122:ge,123:he,124:ue,125:ce,126:me,127:oe}),{22:E,24:k,26:T,38:F,41:[1,221],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,56:[1,222],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:223,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,58:[1,224],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,60:[1,225],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,62:[1,226],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,64:[1,227],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{67:[1,228]},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,70:[1,229],73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,72:[1,230],73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:231,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,41:[1,232],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,73:S,75:[1,233],77:[1,234],81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,73:S,75:[1,236],77:[1,235],81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{9:237,20:K,21:W,23:U},e(ke,[2,52],{52:Ze}),e(_e,[2,77]),e(_e,[2,76]),{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,68:[1,238],73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(_e,[2,79]),e(f,[2,83]),{22:E,24:k,26:T,38:F,39:239,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(Ue,$e,{17:240}),e(D,[2,43]),{51:241,52:re,54:46,66:de,67:ne,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{22:q,66:Y,67:Q,86:ee,96:242,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:256,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:257,102:$,104:[1,258],105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:259,102:$,104:[1,260],105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{105:[1,261]},{22:q,66:Y,67:Q,86:ee,96:262,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:263,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{26:P,52:a,66:c,67:m,91:I,97:264,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},e(z,[2,102]),{84:[1,265]},e(z,[2,106],{22:[1,266]}),e(z,[2,107]),e(z,[2,110]),e(z,[2,112],{22:[1,267]}),e(z,[2,113]),e(R,[2,58]),e(R,[2,59]),{22:E,24:k,26:T,38:F,42:M,52:a,58:[1,268],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(R,[2,66]),e(R,[2,61]),e(R,[2,62]),e(R,[2,63]),{66:[1,269]},e(R,[2,65]),e(R,[2,67]),{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,72:[1,270],73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(R,[2,69]),e(R,[2,70]),e(R,[2,72]),e(R,[2,71]),e(R,[2,73]),e(nt,[2,4]),e([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:E,24:k,26:T,38:F,41:[1,271],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{18:18,19:19,20:We,21:Ie,22:He,23:Pe,32:24,33:25,34:26,35:27,36:28,37:29,38:xe,42:[1,272],43:31,44:Le,46:Ne,48:De,50:35,51:45,52:re,54:46,66:de,67:ne,86:ze,87:Te,88:Fe,89:Se,90:Ae,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,118:Re,119:Oe,120:Ce,121:Ee,122:ge,123:he,124:ue,125:ce,126:me,127:oe},e(Ye,[2,56]),e(z,[2,115],{106:be}),e(Je,[2,125],{108:274,22:q,66:Y,67:Q,86:ee,102:$,105:V,109:te,110:J,111:Z,112:X,113:G}),e(B,[2,127]),e(B,[2,129]),e(B,[2,130]),e(B,[2,131]),e(B,[2,132]),e(B,[2,133]),e(B,[2,134]),e(B,[2,135]),e(B,[2,136]),e(B,[2,137]),e(B,[2,138]),e(B,[2,139]),e(z,[2,116],{106:be}),e(z,[2,117],{106:be}),{22:[1,275]},e(z,[2,118],{106:be}),{22:[1,276]},e(Qe,[2,124]),e(z,[2,98],{106:be}),e(z,[2,99],{106:be}),e(z,[2,100],{115:100,117:178,26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,122:n,123:r,124:t,125:i,126:o,127:s}),e(z,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:K,21:W,23:U},e(D,[2,42]),{22:q,66:Y,67:Q,86:ee,102:$,105:V,107:283,108:244,109:te,110:J,111:Z,112:X,113:G},e(B,[2,128]),{26:P,52:a,66:c,67:m,91:I,97:284,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},{26:P,52:a,66:c,67:m,91:I,97:285,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},e(z,[2,108]),e(z,[2,114]),e(R,[2,60]),{22:E,24:k,26:T,38:F,39:286,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(R,[2,68]),e(Ue,$e,{17:287}),e(Je,[2,126],{108:274,22:q,66:Y,67:Q,86:ee,102:$,105:V,109:te,110:J,111:Z,112:X,113:G}),e(z,[2,121],{115:100,117:178,22:[1,288],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,122:n,123:r,124:t,125:i,126:o,127:s}),e(z,[2,122],{115:100,117:178,22:[1,289],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,122:n,123:r,124:t,125:i,126:o,127:s}),{22:E,24:k,26:T,38:F,41:[1,290],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{18:18,19:19,20:We,21:Ie,22:He,23:Pe,32:24,33:25,34:26,35:27,36:28,37:29,38:xe,42:[1,291],43:31,44:Le,46:Ne,48:De,50:35,51:45,52:re,54:46,66:de,67:ne,86:ze,87:Te,88:Fe,89:Se,90:Ae,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,118:Re,119:Oe,120:Ce,121:Ee,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{22:q,66:Y,67:Q,86:ee,96:292,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:293,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},e(R,[2,64]),e(D,[2,41]),e(z,[2,119],{106:be}),e(z,[2,120],{106:be})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},st=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return t.lex.firstGraph()&&this.begin("dir"),24;case 36:return t.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:return 101;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return this.popState(),25;case 44:return this.popState(),26;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:return 82;case 67:return 82;case 68:return 82;case 69:return 81;case 70:return 81;case 71:return 81;case 72:return 59;case 73:return 60;case 74:return 61;case 75:return 62;case 76:return 63;case 77:return 64;case 78:return 65;case 79:return 69;case 80:return 70;case 81:return 55;case 82:return 56;case 83:return 109;case 84:return 112;case 85:return 127;case 86:return 124;case 87:return 113;case 88:return 125;case 89:return 125;case 90:return 114;case 91:return 73;case 92:return 92;case 93:return"SEP";case 94:return 91;case 95:return 66;case 96:return 75;case 97:return 74;case 98:return 77;case 99:return 76;case 100:return 122;case 101:return 123;case 102:return 68;case 103:return 57;case 104:return 58;case 105:return 40;case 106:return 41;case 107:return 71;case 108:return 72;case 109:return 133;case 110:return 21;case 111:return 22;case 112:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[}])/,/^(?:[^}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112],inclusive:!0}}};return e}();qe.lexer=st;function Ke(){this.yy={}}return Ke.prototype=qe,qe.Parser=Ke,new Ke}(),Ti.parser=Ti;const im=Ti,hk=(e,t)=>{var n;return((n=t?.flowchart)==null?void 0:n.defaultRenderer)!=="dagre-wrapper"&&e.match(/^\s*graph/)!==null},mk=(e,t)=>{var n;return((n=t?.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"&&e.match(/^\s*graph/)!==null||e.match(/^\s*flowchart/)!==null},fk="flowchart-";let nm=0,Fu=t(),w={},In=[],fs={},Lt=[],ui={},tu={},ca=0,Yd=!0,Je,wa,Ca=[];const Sa=e=>h.sanitizeText(e,Fu),Sk=function(e,t,n){O.parseDirective(this,e,t,n)},Ha=function(e){const t=Object.keys(w);for(const n of t)if(w[n].id===e)return w[n].domId;return e},Fk=function(e,n,s,o,i,a,r={}){let l,c=e;if(c===void 0)return;if(c.trim().length===0)return;w[c]===void 0&&(w[c]={id:c,domId:fk+c+"-"+nm,styles:[],classes:[]}),nm++,n!==void 0?(Fu=t(),l=Sa(n.trim()),l[0]==='"'&&l[l.length-1]==='"'&&(l=l.substring(1,l.length-1)),w[c].text=l):w[c].text===void 0&&(w[c].text=e),s!==void 0&&(w[c].type=s),o!=null&&o.forEach(function(e){w[c].styles.push(e)}),i!=null&&i.forEach(function(e){w[c].classes.push(e)}),a!==void 0&&(w[c].dir=a),w[c].props===void 0?w[c].props=r:r!==void 0&&Object.assign(w[c].props,r)},Tk=function(e,t,n,s){let i=e,a=t;const o={start:i,end:a,type:void 0,text:""};s=n.text,s!==void 0&&(o.text=Sa(s.trim()),o.text[0]==='"'&&o.text[o.text.length-1]==='"'&&(o.text=o.text.substring(1,o.text.length-1))),n!==void 0&&(o.type=n.type,o.stroke=n.stroke,o.length=n.length),In.push(o)},zk=function(e,t,n,s){let o,i;for(o=0;o<e.length;o++)for(i=0;i<t.length;i++)Tk(e[o],t[i],n,s)},Dk=function(e,t){e.forEach(function(e){e==="default"?In.defaultInterpolate=t:In[e].interpolate=t})},Nk=function(e,t){e.forEach(function(e){e==="default"?In.defaultStyle=t:(f.isSubstringInArray("fill",t)===-1&&t.push("fill:none"),In[e].style=t)})},Lk=function(e,t){fs[e]===void 0&&(fs[e]={id:e,styles:[],textStyles:[]}),t!=null&&t.forEach(function(t){if(t.match("color")){const n=t.replace("fill","bgFill"),s=n.replace("color","fill");fs[e].textStyles.push(s)}fs[e].styles.push(t)})},Rk=function(e){Je=e,Je.match(/.*</)&&(Je="RL"),Je.match(/.*\^/)&&(Je="BT"),Je.match(/.*>/)&&(Je="LR"),Je.match(/.*v/)&&(Je="TB")},vd=function(e,t){e.split(",").forEach(function(e){let n=e;w[n]!==void 0&&w[n].classes.push(t),ui[n]!==void 0&&ui[n].classes.push(t)})},Hk=function(e,t){e.split(",").forEach(function(e){t!==void 0&&(tu[wa==="gen-1"?Ha(e):e]=Sa(t))})},Ik=function(e,n,s){let i=Ha(e);if(t().securityLevel!=="loose")return;if(n===void 0)return;let o=[];if(typeof s=="string"){o=s.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<o.length;t++){let e=o[t].trim();e.charAt(0)==='"'&&e.charAt(e.length-1)==='"'&&(e=e.substr(1,e.length-2)),o[t]=e}}o.length===0&&o.push(e),w[e]!==void 0&&(w[e].haveCallback=!0,Ca.push(function(){const e=document.querySelector(`[id="${i}"]`);e!==null&&e.addEventListener("click",function(){f.runFunc(n,...o)},!1)}))},Bk=function(e,t,n){e.split(",").forEach(function(e){w[e]!==void 0&&(w[e].link=f.formatUrl(t,Fu),w[e].linkTarget=n)}),vd(e,"clickable")},Vk=function(e){return tu[e]},$k=function(e,t,n){e.split(",").forEach(function(e){Ik(e,t,n)}),vd(e,"clickable")},Wk=function(e){Ca.forEach(function(t){t(e)})},Uk=function(){return Je.trim()},Kk=function(){return w},qk=function(){return In},Yk=function(){return fs},Th=function(e){let t=i(".mermaidTooltip");(t._groups||t)[0][0]===null&&(t=i("body").append("div").attr("class","mermaidTooltip").style("opacity",0));const n=i(e).select("svg"),s=n.selectAll("g.node");s.on("mouseover",function(){const n=i(this),s=n.attr("title");if(s===null)return;const e=this.getBoundingClientRect();t.transition().duration(200).style("opacity",".9"),t.text(n.attr("title")).style("left",window.scrollX+e.left+(e.right-e.left)/2+"px").style("top",window.scrollY+e.top-14+document.body.scrollTop+"px"),t.html(t.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){t.transition().duration(500).style("opacity",0);const e=i(this);e.classed("hover",!1)})};Ca.push(Th);const Xk=function(e="gen-1"){w={},fs={},In=[],Ca=[Th],Lt=[],ui={},ca=0,tu=[],Yd=!0,wa=e,Ne()},Qk=e=>{wa=e||"gen-1"},Zk=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},Jk=function(t,n,s){let a=t.trim(),r=s;t===s&&s.match(/\s/)&&(a=void 0);function c(e){const t={boolean:{},number:{},string:{}},n=[];let s;const o=e.filter(function(e){const o=typeof e;return e.stmt&&e.stmt==="dir"?(s=e.value,!1):e.trim()!==""&&(o in t?!t[o].hasOwnProperty(e)&&(t[o][e]=!0):!n.includes(e)&&n.push(e))});return{nodeList:o,dir:s}}let o=[];const{nodeList:l,dir:d}=c(o.concat.apply(o,n));if(o=l,wa==="gen-1")for(let e=0;e<o.length;e++)o[e]=Ha(o[e]);a=a||"subGraph"+ca,r=r||"",r=Sa(r),ca=ca+1;const i={id:a,nodes:o,title:r.trim(),classes:[],dir:d};return e.info("Adding",i.id,i.nodes,i.dir),i.nodes=kh(i,Lt).nodes,Lt.push(i),ui[a]=i,a},eA=function(e){for(const[t,n]of Lt.entries())if(n.id===e)return t;return-1};let oi=-1;const Mh=[],Sh=function(e,t){const o=Lt[t].nodes;if(oi=oi+1,oi>2e3)return;if(Mh[oi]=t,Lt[t].id===e)return{result:!0,count:0};let n=0,s=1;for(;n<o.length;){const t=eA(o[n]);if(t>=0){const n=Sh(e,t);if(n.result)return{result:!0,count:s+n.count};s=s+n.count}n=n+1}return{result:!1,count:s}},oA=function(e){return Mh[e]},iA=function(){oi=-1,Lt.length>0&&Sh("none",Lt.length-1)},aA=function(){return Lt},rA=()=>!!Yd&&(Yd=!1,!0),cA=e=>{let t=e.trim(),n="arrow_open";switch(t[0]){case"<":n="arrow_point",t=t.slice(1);break;case"x":n="arrow_cross",t=t.slice(1);break;case"o":n="arrow_circle",t=t.slice(1);break}let s="normal";return t.includes("=")&&(s="thick"),t.includes(".")&&(s="dotted"),{type:n,stroke:s}},lA=(e,t)=>{const s=t.length;let n=0;for(let o=0;o<s;++o)t[o]===e&&++n;return n},dA=e=>{const s=e.trim();let n=s.slice(0,-1),t="arrow_open";switch(s.slice(-1)){case"x":t="arrow_cross",s[0]==="x"&&(t="double_"+t,n=n.slice(1));break;case">":t="arrow_point",s[0]==="<"&&(t="double_"+t,n=n.slice(1));break;case"o":t="arrow_circle",s[0]==="o"&&(t="double_"+t,n=n.slice(1));break}let o="normal",i=n.length-1;n[0]==="="&&(o="thick");let a=lA(".",n);return a&&(o="dotted",i=a),{type:t,stroke:o,length:i}},uA=(e,t)=>{const s=dA(e);let n;if(t){if(n=cA(t),n.stroke!==s.stroke)return{type:"INVALID",stroke:"INVALID"};if(n.type==="arrow_open")n.type=s.type;else{if(n.type!==s.type)return{type:"INVALID",stroke:"INVALID"};n.type="double_"+n.type}return n.type==="double_arrow"&&(n.type="double_arrow_point"),n.length=s.length,n}return s},Ah=(e,t)=>{let n=!1;return e.forEach(e=>{const s=e.nodes.indexOf(t);s>=0&&(n=!0)}),n},kh=(e,t)=>{const n=[];return e.nodes.forEach((s,o)=>{Ah(t,s)||n.push(e.nodes[o])}),{nodes:n}},kt={parseDirective:Sk,defaultConfig:()=>hs.flowchart,setAccTitle:Oe,getAccTitle:Fe,getAccDescription:Pe,setAccDescription:De,addVertex:Fk,lookUpDomId:Ha,addLink:zk,updateLinkInterpolate:Dk,updateLink:Nk,addClass:Lk,setDirection:Rk,setClass:vd,setTooltip:Hk,getTooltip:Vk,setClickEvent:$k,setLink:Bk,bindFunctions:Wk,getDirection:Uk,getVertices:Kk,getEdges:qk,getClasses:Yk,clear:Xk,setGen:Qk,defaultStyle:Zk,addSubGraph:Jk,getDepthFirstPos:oA,indexNodes:iA,getSubGraphs:aA,destructLink:uA,lex:{firstGraph:rA},exists:Ah,makeUniq:kh,setDiagramTitle:pt,getDiagramTitle:yt};function Eh(e,t){return!!e.children(t).length}function Ch(e){return md(e.v)+":"+md(e.w)+":"+md(e.name)}xh=/:/g;function md(e){return e?String(e).replace(xh,"\\:"):""}function Ze(e,t){t&&e.attr("style",t)}function wh(e,t,n){t&&e.attr("class",t).attr("class",n+" "+e.attr("class"))}function Ge(e,t){var n,s=t.graph();return dp(s)&&(n=s.transition,Yn(n))?n(e):e}Ua={normal:xA,vee:CA,undirected:EA};function OA(e){Ua=e}function xA(e,t,n,s){var i=e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),o=i.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");Ze(o,n[s+"Style"]),n[s+"Class"]&&o.attr("class",n[s+"Class"])}function CA(e,t,n,s){var i=e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),o=i.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");Ze(o,n[s+"Style"]),n[s+"Class"]&&o.attr("class",n[s+"Class"])}function EA(e,t,n,s){var i=e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),o=i.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");Ze(o,n[s+"Style"]),n[s+"Class"]&&o.attr("class",n[s+"Class"])}function ld(e,t){var s,i,o=e.append("foreignObject").attr("width","100000"),n=o.append("xhtml:div");switch(n.attr("xmlns","http://www.w3.org/1999/xhtml"),s=t.label,typeof s){case"function":n.insert(s);break;case"object":n.insert(function(){return s});break;default:n.html(s)}return Ze(n,t.labelStyle),n.style("display","inline-block"),n.style("white-space","nowrap"),i=n.node().getBoundingClientRect(),o.attr("width",i.width).attr("height",i.height),o}function AA(e,t){var n=e;return n.node().appendChild(t.label),Ze(n,t.labelStyle),n}function SA(e,t){for(var n=e.append("text"),o=MA(t.label).split(`
`),s=0;s<o.length;s++)n.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(o[s]);return Ze(n,t.labelStyle),n}function MA(e){for(var t,n="",s=!1,o=0;o<e.length;++o)if(t=e[o],s){switch(t){case"n":n+=`
`;break;default:n+=t}s=!1}else t==="\\"?s=!0:n+=t;return n}function bc(e,t,n){var o,i,a=t.label,s=e.append("g");switch(t.labelType==="svg"?AA(s,t):typeof a!="string"||t.labelType==="html"?ld(s,t):SA(s,t),o=s.node().getBBox(),n){case"top":i=-t.height/2;break;case"bottom":i=t.height/2-o.height;break;default:i=-o.height/2}return s.attr("transform","translate("+-o.width/2+","+i+")"),s}Er=function(e,t){var s,o=t.nodes().filter(function(e){return Eh(t,e)}),n=e.selectAll("g.cluster").data(o,function(e){return e});return Ge(n.exit(),t).style("opacity",0).remove(),s=n.enter().append("g").attr("class","cluster").attr("id",function(e){var n=t.node(e);return n.id}).style("opacity",0).each(function(e){var s,n=t.node(e),o=i(this);i(this).append("rect"),s=o.append("g").attr("class","label"),bc(s,n,n.clusterLabelPos)}),n=n.merge(s),n=Ge(n,t).style("opacity",1),n.selectAll("rect").each(function(e){var n=t.node(e),s=i(this);Ze(s,n.style)}),n};function zA(e){Er=e}let ml=function(e,t){var s,n=e.selectAll("g.edgeLabel").data(t.edges(),function(e){return Ch(e)}).classed("update",!0);return n.exit().remove(),n.enter().append("g").classed("edgeLabel",!0).style("opacity",0),n=e.selectAll("g.edgeLabel"),n.each(function(e){var n,s,o,a=i(this);a.select(".label").remove(),n=t.edge(e),s=bc(a,t.edge(e),0).classed("label",!0),o=s.node().getBBox(),n.labelId&&s.attr("id",n.labelId),p(n,"width")||(n.width=o.width),p(n,"height")||(n.height=o.height)}),n.exit?s=n.exit():s=n.selectAll(null),Ge(s,t).style("opacity",0).remove(),n};function NA(e){ml=e}function _h(e,t){return e.intersect(t)}Tr=function(e,t,n){var s,o=e.selectAll("g.edgePath").data(t.edges(),function(e){return Ch(e)}).classed("update",!0),a=$A(o,t);return WA(o,t),s=o.merge!==void 0?o.merge(a):o,Ge(s,t).style("opacity",1),s.each(function(e){var s=i(this),n=t.edge(e);n.elem=this,n.id&&s.attr("id",n.id),wh(s,n.class,(s.classed("update")?"update ":"")+"edgePath")}),s.selectAll("path.path").each(function(e){var s,n=t.edge(e);n.arrowheadId=qr("arrowhead"),s=i(this).attr("marker-end",function(){return"url("+HA(location.href,n.arrowheadId)+")"}).style("fill","none"),Ge(s,t).attr("d",function(e){return IA(t,e)}),Ze(s,n.style)}),s.selectAll("defs *").remove(),s.selectAll("defs").each(function(e){var s=t.edge(e),o=n[s.arrowhead];o(i(this),s.arrowheadId,s,"arrowhead")}),s};function PA(e){Tr=e}function HA(e,t){var n=e.split("#")[0];return n+"#"+t}function IA(e,t){var s=e.edge(t),o=e.node(t.v),i=e.node(t.w),n=s.points.slice(1,s.points.length-1);return n.unshift(_h(o,n[0])),n.push(_h(i,n[n.length-1])),jh(s,n)}function jh(e,t){var n=(cs||bp.line)().x(function(e){return e.x}).y(function(e){return e.y});return(n.curve||n.interpolate)(e.curve),n(t)}function VA(e){var t=e.getBBox(),n=e.ownerSVGElement.getScreenCTM().inverse().multiply(e.getScreenCTM()).translate(t.width/2,t.height/2);return{x:n.e,y:n.f}}function $A(e,t){var n=e.enter().append("g").attr("class","edgePath").style("opacity",0);return n.append("path").attr("class","path").attr("d",function(e){var n=t.edge(e),s=t.node(e.v).elem,o=On(n.points.length).map(function(){return VA(s)});return jh(n,o)}),n.append("defs"),n}function WA(e,t){var n=e.exit();Ge(n,t).style("opacity",0).remove()}zr=function(e,t,n){var o,a=t.nodes().filter(function(e){return!Eh(t,e)}),s=e.selectAll("g.node").data(a,function(e){return e}).classed("update",!0);return s.exit().remove(),s.enter().append("g").attr("class","node").style("opacity",0),s=e.selectAll("g.node"),s.each(function(e){var o,r,c,l,d,u,h,s=t.node(e),a=i(this);wh(a,s.class,(a.classed("update")?"update ":"")+"node"),a.select("g.label").remove(),r=a.append("g").attr("class","label"),u=bc(r,s),h=n[s.shape],o=Vo(u.node().getBBox(),"width","height"),s.elem=this,s.id&&a.attr("id",s.id),s.labelId&&r.attr("id",s.labelId),p(s,"width")&&(o.width=s.width),p(s,"height")&&(o.height=s.height),o.width+=s.paddingLeft+s.paddingRight,o.height+=s.paddingTop+s.paddingBottom,r.attr("transform","translate("+(s.paddingLeft-s.paddingRight)/2+","+(s.paddingTop-s.paddingBottom)/2+")"),c=i(this),c.select(".label-container").remove(),l=h(c,o,s).classed("label-container",!0),Ze(l,s.style),d=l.node().getBBox(),s.width=d.width,s.height=d.height}),s.exit?o=s.exit():o=s.selectAll(null),Ge(o,t).style("opacity",0).remove(),s};function KA(e){zr=e}function qA(e,t){var n=e.filter(function(){return!i(this).classed("update")});function s(e){var n=t.node(e);return"translate("+n.x+","+n.y+")"}n.attr("transform",s),Ge(e,t).style("opacity",1).attr("transform",s),Ge(n.selectAll("rect"),t).attr("width",function(e){return t.node(e).width}).attr("height",function(e){return t.node(e).height}).attr("x",function(e){var n=t.node(e);return-n.width/2}).attr("y",function(e){var n=t.node(e);return-n.height/2})}function YA(e,t){var s=e.filter(function(){return!i(this).classed("update")});function n(e){var n=t.edge(e);return p(n,"x")?"translate("+n.x+","+n.y+")":""}s.attr("transform",n),Ge(e,t).style("opacity",1).attr("transform",n)}function GA(e,t){var s=e.filter(function(){return!i(this).classed("update")});function n(e){var n=t.node(e);return"translate("+n.x+","+n.y+")"}s.attr("transform",n),Ge(e,t).style("opacity",1).attr("transform",n)}function gh(e,t,n,s){var o,i=e.x,a=e.y,r=i-s.x,c=a-s.y,d=Math.sqrt(t*t*c*c+n*n*r*r),l=Math.abs(t*n*r/d);return s.x<i&&(l=-l),o=Math.abs(t*n*c/d),s.y<a&&(o=-o),{x:i+l,y:a+o}}function QA(e,t,n){return gh(e,t,t,n)}function ZA(e,t,n,s){var o,i,a,r,c,l,m,f,v,b,h=t.y-e.y,d=e.x-t.x,u=t.x*e.y-e.x*t.y,g=h*n.x+d*n.y+u,p=h*s.x+d*s.y+u;if(g!==0&&p!==0&&ph(g,p))return;if(a=s.y-n.y,r=n.x-s.x,c=s.x*n.y-n.x*s.y,m=a*e.x+r*e.y+c,f=a*t.x+r*t.y+c,m!==0&&f!==0&&ph(m,f))return;if(i=h*r-a*d,i===0)return;return l=Math.abs(i/2),o=d*c-r*u,v=o<0?(o-l)/i:(o+l)/i,o=a*u-h*c,b=o<0?(o-l)/i:(o+l)/i,{x:v,y:b}}function ph(e,t){return e*t>0}function ut(e,t,n){var s,r,c,l,d,u,h=e.x,m=e.y,o=[],i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;t.forEach(function(e){i=Math.min(i,e.x),a=Math.min(a,e.y)}),r=h-e.width/2-i,c=m-e.height/2-a;for(s=0;s<t.length;s++)l=t[s],d=t[s<t.length-1?s+1:0],u=ZA(e,n,{x:r+l.x,y:c+l.y},{x:r+d.x,y:c+d.y}),u&&o.push(u);return o.length?(o.length>1&&o.sort(function(e,t){var s=e.x-n.x,o=e.y-n.y,i=Math.sqrt(s*s+o*o),a=t.x-n.x,r=t.y-n.y,c=Math.sqrt(a*a+r*r);return i<c?-1:i===c?0:1}),o[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",e),e)}function hl(e,t){var a,r,c=e.x,l=e.y,n=t.x-c,s=t.y-l,o=e.width/2,i=e.height/2;return Math.abs(s)*o>Math.abs(n)*i?(s<0&&(i=-i),a=s===0?0:i*n/s,r=i):(n<0&&(o=-o),a=o,r=n===0?0:o*s/n),{x:c+a,y:l+r}}Br={rect:oS,ellipse:iS,circle:aS,diamond:rS};function sS(e){Br=e}function oS(e,t,n){var s=e.insert("rect",":first-child").attr("rx",n.rx).attr("ry",n.ry).attr("x",-t.width/2).attr("y",-t.height/2).attr("width",t.width).attr("height",t.height);return n.intersect=function(e){return hl(n,e)},s}function iS(e,t,n){var s=t.width/2,o=t.height/2,i=e.insert("ellipse",":first-child").attr("x",-t.width/2).attr("y",-t.height/2).attr("rx",s).attr("ry",o);return n.intersect=function(e){return gh(n,s,o,e)},i}function aS(e,t,n){var s=Math.max(t.width,t.height)/2,o=e.insert("circle",":first-child").attr("x",-t.width/2).attr("y",-t.height/2).attr("r",s);return n.intersect=function(e){return QA(n,s,e)},o}function rS(e,t,n){var s=t.width*Math.SQRT2/2,o=t.height*Math.SQRT2/2,i=[{x:0,y:-o},{x:-s,y:0},{x:0,y:o},{x:s,y:0}],a=e.insert("polygon",":first-child").attr("points",i.map(function(e){return e.x+","+e.y}).join(" "));return n.intersect=function(e){return ut(n,i,e)},a}function cS(){var e=function(e,t){uS(t);var s,n=Uo(e,"output"),o=Uo(n,"clusters"),i=Uo(n,"edgePaths"),a=ml(Uo(n,"edgeLabels"),t),r=zr(Uo(n,"nodes"),t,Br);Ss(t),GA(r,t),YA(a,t),Tr(i,t,Ua),s=Er(o,t),qA(s,t),hS(t)};return e.createNodes=function(t){return arguments.length?(KA(t),e):zr},e.createClusters=function(t){return arguments.length?(zA(t),e):Er},e.createEdgeLabels=function(t){return arguments.length?(NA(t),e):ml},e.createEdgePaths=function(t){return arguments.length?(PA(t),e):Tr},e.shapes=function(t){return arguments.length?(sS(t),e):Br},e.arrows=function(t){return arguments.length?(OA(t),e):Ua},e}mh={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},hh={arrowhead:"normal",curve:pe};function uS(e){e.nodes().forEach(function(t){var n=e.node(t);!p(n,"label")&&!e.children(t).length&&(n.label=t),p(n,"paddingX")&&ls(n,{paddingLeft:n.paddingX,paddingRight:n.paddingX}),p(n,"paddingY")&&ls(n,{paddingTop:n.paddingY,paddingBottom:n.paddingY}),p(n,"padding")&&ls(n,{paddingLeft:n.padding,paddingRight:n.padding,paddingTop:n.padding,paddingBottom:n.padding}),ls(n,mh),o(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(e){n[e]=Number(n[e])}),p(n,"width")&&(n._prevWidth=n.width),p(n,"height")&&(n._prevHeight=n.height)}),e.edges().forEach(function(t){var n=e.edge(t);p(n,"label")||(n.label=""),ls(n,hh)})}function hS(e){o(e.nodes(),function(t){var n=e.node(t);p(n,"_prevWidth")?n.width=n._prevWidth:delete n.width,p(n,"_prevHeight")?n.height=n._prevHeight:delete n.height,delete n._prevWidth,delete n._prevHeight})}function Uo(e,t){var n=e.select("g."+t);return n.empty()&&(n=e.append("g").attr("class",t)),n}function uh(e,t,n){const i=t.width,a=t.height,s=(i+a)*.9,o=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}],r=zt(e,s,s,o);return n.intersect=function(e){return ut(n,o,e)},r}function dh(e,t,n){const r=4,s=t.height,o=s/r,i=t.width+2*o,a=[{x:o,y:0},{x:i-o,y:0},{x:i,y:-s/2},{x:i-o,y:-s},{x:o,y:-s},{x:0,y:-s/2}],c=zt(e,i,s,a);return n.intersect=function(e){return ut(n,a,e)},c}function lh(e,t,n){const o=t.width,s=t.height,i=[{x:-s/2,y:0},{x:o,y:0},{x:o,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}],a=zt(e,o,s,i);return n.intersect=function(e){return ut(n,i,e)},a}function rh(e,t,n){const o=t.width,s=t.height,i=[{x:-2*s/6,y:0},{x:o-s/6,y:0},{x:o+2*s/6,y:-s},{x:s/6,y:-s}],a=zt(e,o,s,i);return n.intersect=function(e){return ut(n,i,e)},a}function ih(e,t,n){const o=t.width,s=t.height,i=[{x:2*s/6,y:0},{x:o+s/6,y:0},{x:o-2*s/6,y:-s},{x:-s/6,y:-s}],a=zt(e,o,s,i);return n.intersect=function(e){return ut(n,i,e)},a}function oh(e,t,n){const o=t.width,s=t.height,i=[{x:-2*s/6,y:0},{x:o+2*s/6,y:0},{x:o-s/6,y:-s},{x:s/6,y:-s}],a=zt(e,o,s,i);return n.intersect=function(e){return ut(n,i,e)},a}function sh(e,t,n){const o=t.width,s=t.height,i=[{x:s/6,y:0},{x:o-s/6,y:0},{x:o+2*s/6,y:-s},{x:-2*s/6,y:-s}],a=zt(e,o,s,i);return n.intersect=function(e){return ut(n,i,e)},a}function nh(e,t,n){const o=t.width,s=t.height,i=[{x:0,y:0},{x:o+s/2,y:0},{x:o,y:-s/2},{x:o+s/2,y:-s},{x:0,y:-s}],a=zt(e,o,s,i);return n.intersect=function(e){return ut(n,i,e)},a}function th(e,t,n){const s=t.height,o=t.width+s/4,i=e.insert("rect",":first-child").attr("rx",s/2).attr("ry",s/2).attr("x",-o/2).attr("y",-s/2).attr("width",o).attr("height",s);return n.intersect=function(e){return hl(n,e)},i}function J3(e,t,n){const s=t.width,o=t.height,i=[{x:0,y:0},{x:s,y:0},{x:s,y:-o},{x:0,y:-o},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-o},{x:-8,y:-o},{x:-8,y:0}],a=zt(e,s,o,i);return n.intersect=function(e){return ut(n,i,e)},a}function Z3(e,t,n){const i=t.width,o=i/2,s=o/(2.5+i/50),a=t.height+s,r="M 0,"+s+" a "+o+","+s+" 0,0,0 "+i+" 0 a "+o+","+s+" 0,0,0 "+-i+" 0 l 0,"+a+" a "+o+","+s+" 0,0,0 "+i+" 0 l 0,"+-a,c=e.attr("label-offset-y",s).insert("path",":first-child").attr("d",r).attr("transform","translate("+-i/2+","+-(a/2+s)+")");return n.intersect=function(e){const t=hl(n,e),i=t.x-n.x;if(o!=0&&(Math.abs(i)<n.width/2||Math.abs(i)==n.width/2&&Math.abs(t.y-n.y)>n.height/2-s)){let a=s*s*(1-i*i/(o*o));a!=0&&(a=Math.sqrt(a)),a=s-a,e.y-n.y>0&&(a=-a),t.y+=a}return t},c}function CS(e){e.shapes().question=uh,e.shapes().hexagon=dh,e.shapes().stadium=th,e.shapes().subroutine=J3,e.shapes().cylinder=Z3,e.shapes().rect_left_inv_arrow=lh,e.shapes().lean_right=rh,e.shapes().lean_left=ih,e.shapes().trapezoid=oh,e.shapes().inv_trapezoid=sh,e.shapes().rect_right_inv_arrow=nh}function ES(e){e({question:uh}),e({hexagon:dh}),e({stadium:th}),e({subroutine:J3}),e({cylinder:Z3}),e({rect_left_inv_arrow:lh}),e({lean_right:rh}),e({lean_left:ih}),e({trapezoid:oh}),e({inv_trapezoid:sh}),e({rect_right_inv_arrow:nh})}function zt(e,t,n,s){return e.insert("polygon",":first-child").attr("points",s.map(function(e){return e.x+","+e.y}).join(" ")).attr("transform","translate("+-t/2+","+n/2+")")}const AS={addToRender:CS,addToRenderV2:ES},Q3={},MS=function(e){const t=Object.keys(e);for(const n of t)Q3[n]=e[n]},X3=function(n,s,o,a,r,c){const d=a?a.select(`[id="${o}"]`):i(`[id="${o}"]`),l=r||document,u=Object.keys(n);u.forEach(function(o){const a=n[o];let f="default";a.classes.length>0&&(f=a.classes.join(" "));const u=nn(a.styles);let p=a.text!==void 0?a.text:a.id,r;if(K(t().flowchart.htmlLabels)){const e={label:p.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)};r=ld(d,e).node(),r.parentNode.removeChild(r)}else{const e=l.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("style",u.labelStyle.replace("color:","fill:"));const t=p.split(h.lineBreakRegex);for(const s of t){const n=l.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.setAttribute("dy","1em"),n.setAttribute("x","1"),n.textContent=s,e.appendChild(n)}r=e}let m=0,i="";switch(a.type){case"round":m=5,i="rect";break;case"square":i="rect";break;case"diamond":i="question";break;case"hexagon":i="hexagon";break;case"odd":i="rect_left_inv_arrow";break;case"lean_right":i="lean_right";break;case"lean_left":i="lean_left";break;case"trapezoid":i="trapezoid";break;case"inv_trapezoid":i="inv_trapezoid";break;case"odd_right":i="rect_left_inv_arrow";break;case"circle":i="circle";break;case"ellipse":i="ellipse";break;case"stadium":i="stadium";break;case"subroutine":i="subroutine";break;case"cylinder":i="cylinder";break;case"group":i="rect";break;default:i="rect"}e.warn("Adding node",a.id,a.domId),s.setNode(c.db.lookUpDomId(a.id),{labelType:"svg",labelStyle:u.labelStyle,shape:i,label:r,rx:m,ry:m,class:f,style:u.style,id:c.db.lookUpDomId(a.id)})})},G3=function(e,n,s){let a=0,o,i;if(e.defaultStyle!==void 0){const t=nn(e.defaultStyle);o=t.style,i=t.labelStyle}e.forEach(function(r){a++;var u="L-"+r.start+"-"+r.end,m="LS-"+r.start,f="LE-"+r.end;const c={};r.type==="arrow_open"?c.arrowhead="none":c.arrowhead="normal";let l="",d="";if(r.style!==void 0){const e=nn(r.style);l=e.style,d=e.labelStyle}else switch(r.stroke){case"normal":l="fill:none",o!==void 0&&(l=o),i!==void 0&&(d=i);break;case"dotted":l="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":l=" stroke-width: 3.5px;fill:none";break}c.style=l,c.labelStyle=d,r.interpolate!==void 0?c.curve=Ke(r.interpolate,pe):e.defaultInterpolate!==void 0?c.curve=Ke(e.defaultInterpolate,pe):c.curve=Ke(Q3.curve,pe),r.text===void 0?r.style!==void 0&&(c.arrowheadStyle="fill: #333"):(c.arrowheadStyle="fill: #333",c.labelpos="c",K(t().flowchart.htmlLabels)?(c.labelType="html",c.label=`<span id="L-${u}" class="edgeLabel L-${m}' L-${f}" style="${c.labelStyle}">${r.text.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)}</span>`):(c.labelType="text",c.label=r.text.replace(h.lineBreakRegex,`
`),r.style===void 0&&(c.style=c.style||"stroke: #333; stroke-width: 1.5px;fill:none"),c.labelStyle=c.labelStyle.replace("color:","fill:"))),c.id=u,c.class=m+" "+f,c.minlen=r.length||1,n.setEdge(s.db.lookUpDomId(r.start),s.db.lookUpDomId(r.end),c,a)})},zS=function(t,n){e.info("Extracting classes"),n.db.clear();try{return n.parse(t),n.db.getClasses()}catch(t){return e.error(t),{}}},DS=function(n,s,o,a){e.info("Drawing flowchart"),a.db.clear();const{securityLevel:f,flowchart:h}=t();let v;f==="sandbox"&&(v=i("#i"+s));const p=i(f==="sandbox"?v.nodes()[0].contentDocument.body:"body"),l=f==="sandbox"?v.nodes()[0].contentDocument:document;try{a.parser.parse(n)}catch{e.debug("Parsing failed")}let b=a.db.getDirection();b===void 0&&(b="TD");const w=h.nodeSpacing||50,y=h.rankSpacing||50,u=new D({multigraph:!0,compound:!0}).setGraph({rankdir:b,nodesep:w,ranksep:y,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let r;const d=a.db.getSubGraphs();for(let e=d.length-1;e>=0;e--)r=d[e],a.db.addVertex(r.id,r.title,"group",void 0,r.classes);const m=a.db.getVertices();e.warn("Get vertices",m);const _=a.db.getEdges();let c=0;for(c=d.length-1;c>=0;c--){r=d[c],xl("cluster").append("text");for(let t=0;t<r.nodes.length;t++)e.warn("Setting subgraph",r.nodes[t],a.db.lookUpDomId(r.nodes[t]),a.db.lookUpDomId(r.id)),u.setParent(a.db.lookUpDomId(r.nodes[t]),a.db.lookUpDomId(r.id))}X3(m,u,s,p,l,a),G3(_,u,a);const g=new cS;AS.addToRender(g),g.arrows().none=function(t,n,s,o){const i=t.append("marker").attr("id",n).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),a=i.append("path").attr("d","M 0 0 L 0 0 L 0 0 z");Ze(a,s[o+"Style"])},g.arrows().normal=function(t,n){const s=t.append("marker").attr("id",n).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto");s.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const O=p.select(`[id="${s}"]`),j=p.select("#"+s+" g");g(j,u),j.selectAll("g.node").attr("title",function(){return a.db.getTooltip(this.id)}),a.db.indexNodes("subGraph"+c);for(c=0;c<d.length;c++)if(r=d[c],r.title!=="undefined"){const e=l.querySelectorAll("#"+s+' [id="'+a.db.lookUpDomId(r.id)+'"] rect'),t=l.querySelectorAll("#"+s+' [id="'+a.db.lookUpDomId(r.id)+'"]'),o=e[0].x.baseVal.value,c=e[0].y.baseVal.value,d=e[0].width.baseVal.value,u=i(t[0]),n=u.select(".label");n.attr("transform",`translate(${o+d/2}, ${c+14})`),n.attr("id",s+"Text");for(let e=0;e<r.classes.length;e++)t[0].classList.add(r.classes[e])}if(!h.htmlLabels){const e=l.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const n of e){const s=n.getBBox(),t=l.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("rx",0),t.setAttribute("ry",0),t.setAttribute("width",s.width),t.setAttribute("height",s.height),n.insertBefore(t,n.firstChild)}}Lr(u,O,h.diagramPadding,h.useMaxWidth);const x=Object.keys(m);x.forEach(function(e){const t=m[e];if(t.link){const n=p.select("#"+s+' [id="'+a.db.lookUpDomId(e)+'"]');if(n){const e=l.createElementNS("http://www.w3.org/2000/svg","a");e.setAttributeNS("http://www.w3.org/2000/svg","class",t.classes.join(" ")),e.setAttributeNS("http://www.w3.org/2000/svg","href",t.link),e.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),f==="sandbox"?e.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):t.linkTarget&&e.setAttributeNS("http://www.w3.org/2000/svg","target",t.linkTarget);const s=n.insert(function(){return e},":first-child"),o=n.select(".label-container");o&&s.append(function(){return o.node()});const i=n.select(".label");i&&s.append(function(){return i.node()})}}})},NS={setConf:MS,addVertices:X3,addEdges:G3,getClasses:zS,draw:DS},Y3={},RS=function(e){const t=Object.keys(e);for(const n of t)Y3[n]=e[n]},q3=function(n,s,o,i,a,r){const c=i.select(`[id="${o}"]`),l=Object.keys(n);l.forEach(function(o){const i=n[o];let p="default";i.classes.length>0&&(p=i.classes.join(" "));const d=nn(i.styles);let m=i.text!==void 0?i.text:i.id,f;if(K(t().flowchart.htmlLabels)){const e={label:m.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)};f=ld(c,e).node(),f.parentNode.removeChild(f)}else{const e=a.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("style",d.labelStyle.replace("color:","fill:"));const t=m.split(h.lineBreakRegex);for(const s of t){const n=a.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.setAttribute("dy","1em"),n.setAttribute("x","1"),n.textContent=s,e.appendChild(n)}f=e}let u=0,l="";switch(i.type){case"round":u=5,l="rect";break;case"square":l="rect";break;case"diamond":l="question";break;case"hexagon":l="hexagon";break;case"odd":l="rect_left_inv_arrow";break;case"lean_right":l="lean_right";break;case"lean_left":l="lean_left";break;case"trapezoid":l="trapezoid";break;case"inv_trapezoid":l="inv_trapezoid";break;case"odd_right":l="rect_left_inv_arrow";break;case"circle":l="circle";break;case"ellipse":l="ellipse";break;case"stadium":l="stadium";break;case"subroutine":l="subroutine";break;case"cylinder":l="cylinder";break;case"group":l="rect";break;case"doublecircle":l="doublecircle";break;default:l="rect"}s.setNode(i.id,{labelStyle:d.labelStyle,shape:l,labelText:m,rx:u,ry:u,class:p,style:d.style,id:i.id,link:i.link,linkTarget:i.linkTarget,tooltip:r.db.getTooltip(i.id)||"",domId:r.db.lookUpDomId(i.id),haveCallback:i.haveCallback,width:i.type==="group"?500:void 0,dir:i.dir,type:i.type,props:i.props,padding:t().flowchart.padding}),e.info("setNode",{labelStyle:d.labelStyle,shape:l,labelText:m,rx:u,ry:u,class:p,style:d.style,id:i.id,domId:r.db.lookUpDomId(i.id),width:i.type==="group"?500:void 0,type:i.type,dir:i.dir,props:i.props,padding:t().flowchart.padding})})},K3=function(t,n){e.info("abc78 edges = ",t);let r=0,o={},i,a;if(t.defaultStyle!==void 0){const e=nn(t.defaultStyle);i=e.style,a=e.labelStyle}t.forEach(function(s){r++;var f,p,l="L-"+s.start+"-"+s.end;o[l]===void 0?(o[l]=0,e.info("abc78 new entry",l,o[l])):(o[l]++,e.info("abc78 new entry",l,o[l]));let m=l+"-"+o[l];e.info("abc78 new link id to be used is",l,m,o[l]),f="LS-"+s.start,p="LE-"+s.end;const c={style:"",labelStyle:""};switch(c.minlen=s.length||1,s.type==="arrow_open"?c.arrowhead="none":c.arrowhead="normal",c.arrowTypeStart="arrow_open",c.arrowTypeEnd="arrow_open",s.type){case"double_arrow_cross":c.arrowTypeStart="arrow_cross";case"arrow_cross":c.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":c.arrowTypeStart="arrow_point";case"arrow_point":c.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":c.arrowTypeStart="arrow_circle";case"arrow_circle":c.arrowTypeEnd="arrow_circle";break}let d="",u="";switch(s.stroke){case"normal":d="fill:none;",i!==void 0&&(d=i),a!==void 0&&(u=a),c.thickness="normal",c.pattern="solid";break;case"dotted":c.thickness="normal",c.pattern="dotted",c.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":c.thickness="thick",c.pattern="solid",c.style="stroke-width: 3.5px;fill:none;";break}if(s.style!==void 0){const e=nn(s.style);d=e.style,u=e.labelStyle}c.style=c.style+=d,c.labelStyle=c.labelStyle+=u,s.interpolate!==void 0?c.curve=Ke(s.interpolate,pe):t.defaultInterpolate!==void 0?c.curve=Ke(t.defaultInterpolate,pe):c.curve=Ke(Y3.curve,pe),s.text===void 0?s.style!==void 0&&(c.arrowheadStyle="fill: #333"):(c.arrowheadStyle="fill: #333",c.labelpos="c"),c.labelType="text",c.label=s.text.replace(h.lineBreakRegex,`
`),s.style===void 0&&(c.style=c.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),c.labelStyle=c.labelStyle.replace("color:","fill:"),c.id=m,c.classes="flowchart-link "+f+" "+p,n.setEdge(s.start,s.end,c,r)})},IS=function(t,n){e.info("Extracting classes"),n.db.clear();try{return n.parse(t),n.db.getClasses()}catch{return}},BS=function(n,s,o,a){e.info("Drawing flowchart"),a.db.clear(),kt.setGen("gen-2"),a.parser.parse(n);let g=a.db.getDirection();g===void 0&&(g="TD");const{securityLevel:h,flowchart:c}=t(),w=c.nodeSpacing||50,_=c.rankSpacing||50;let v;h==="sandbox"&&(v=i("#i"+s));const b=i(h==="sandbox"?v.nodes()[0].contentDocument.body:"body"),m=h==="sandbox"?v.nodes()[0].contentDocument:document,d=new D({multigraph:!0,compound:!0}).setGraph({rankdir:g,nodesep:w,ranksep:_,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let r;const u=a.db.getSubGraphs();e.info("Subgraphs - ",u);for(let t=u.length-1;t>=0;t--)r=u[t],e.info("Subgraph - ",r),a.db.addVertex(r.id,r.title,"group",void 0,r.classes,r.dir);const p=a.db.getVertices(),j=a.db.getEdges();e.info(j);let l=0;for(l=u.length-1;l>=0;l--){r=u[l],xl("cluster").append("text");for(let t=0;t<r.nodes.length;t++)e.info("Setting up subgraphs",r.nodes[t],r.id),d.setParent(r.nodes[t],r.id)}q3(p,d,s,b,m,a),K3(j,d);const y=b.select(`[id="${s}"]`),O=b.select("#"+s+" g");if(yl(O,d,["point","circle","cross"],"flowchart",s),f.insertTitle(y,"flowchartTitleText",c.titleTopMargin,a.db.getDiagramTitle()),Lr(d,y,c.diagramPadding,c.useMaxWidth),a.db.indexNodes("subGraph"+l),!c.htmlLabels){const e=m.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const n of e){const s=n.getBBox(),t=m.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("rx",0),t.setAttribute("ry",0),t.setAttribute("width",s.width),t.setAttribute("height",s.height),n.insertBefore(t,n.firstChild)}}const x=Object.keys(p);x.forEach(function(e){const t=p[e];if(t.link){const n=i("#"+s+' [id="'+e+'"]');if(n){const e=m.createElementNS("http://www.w3.org/2000/svg","a");e.setAttributeNS("http://www.w3.org/2000/svg","class",t.classes.join(" ")),e.setAttributeNS("http://www.w3.org/2000/svg","href",t.link),e.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),h==="sandbox"?e.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):t.linkTarget&&e.setAttributeNS("http://www.w3.org/2000/svg","target",t.linkTarget);const s=n.insert(function(){return e},":first-child"),o=n.select(".label-container");o&&s.append(function(){return o.node()});const i=n.select(".label");i&&s.append(function(){return i.node()})}}})},Zc={setConf:RS,addVertices:q3,addEdges:K3,getClasses:IS,draw:BS};Zr=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},w=[1,3],n=[1,5],t=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],_=[1,15],h=[1,16],f=[1,17],r=[1,18],c=[1,19],l=[1,20],d=[1,21],u=[1,22],i=[1,23],m=[1,24],a=[1,25],p=[1,26],g=[1,27],v=[1,29],b=[1,31],j=[1,34],y=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],o={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 2:return a[c-1];case 3:this.$=[];break;case 4:a[c-1].push(a[c]),this.$=a[c-1];break;case 5:case 6:this.$=a[c];break;case 7:case 8:this.$=[];break;case 9:o.setDateFormat(a[c].substr(11)),this.$=a[c].substr(11);break;case 10:o.enableInclusiveEndDates(),this.$=a[c].substr(18);break;case 11:o.TopAxis(),this.$=a[c].substr(8);break;case 12:o.setAxisFormat(a[c].substr(11)),this.$=a[c].substr(11);break;case 13:o.setTickInterval(a[c].substr(13)),this.$=a[c].substr(13);break;case 14:o.setExcludes(a[c].substr(9)),this.$=a[c].substr(9);break;case 15:o.setIncludes(a[c].substr(9)),this.$=a[c].substr(9);break;case 16:o.setTodayMarker(a[c].substr(12)),this.$=a[c].substr(12);break;case 17:o.setDiagramTitle(a[c].substr(6)),this.$=a[c].substr(6);break;case 18:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 19:case 20:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 21:o.addSection(a[c].substr(8)),this.$=a[c].substr(8);break;case 23:o.addTask(a[c-1],a[c]),this.$="task";break;case 27:this.$=a[c-1],o.setClickEvent(a[c-1],a[c],null);break;case 28:this.$=a[c-2],o.setClickEvent(a[c-2],a[c-1],a[c]);break;case 29:this.$=a[c-2],o.setClickEvent(a[c-2],a[c-1],null),o.setLink(a[c-2],a[c]);break;case 30:this.$=a[c-3],o.setClickEvent(a[c-3],a[c-2],a[c-1]),o.setLink(a[c-3],a[c]);break;case 31:this.$=a[c-2],o.setClickEvent(a[c-2],a[c],null),o.setLink(a[c-2],a[c-1]);break;case 32:this.$=a[c-3],o.setClickEvent(a[c-3],a[c-1],a[c]),o.setLink(a[c-3],a[c-2]);break;case 33:this.$=a[c-1],o.setLink(a[c-1],a[c]);break;case 34:case 40:this.$=a[c-1]+" "+a[c];break;case 35:case 36:case 38:this.$=a[c-2]+" "+a[c-1]+" "+a[c];break;case 37:case 39:this.$=a[c-3]+" "+a[c-2]+" "+a[c-1]+" "+a[c];break;case 41:o.parseDirective("%%{","open_directive");break;case 42:o.parseDirective(a[c],"type_directive");break;case 43:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 44:o.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:w,30:4,40:n},{1:[3]},{3:6,4:2,5:w,30:4,40:n},e(t,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:_,13:h,14:f,15:r,16:c,17:l,18:d,19:u,20:i,21:m,23:a,25:p,26:g,27:28,28:v,30:4,35:b,40:n},{32:32,33:[1,33],43:j},e([33,43],[2,42]),e(t,[2,8],{1:[2,2]}),e(t,[2,4]),{4:30,10:35,12:_,13:h,14:f,15:r,16:c,17:l,18:d,19:u,20:i,21:m,23:a,25:p,26:g,27:28,28:v,30:4,35:b,40:n},e(t,[2,6]),e(t,[2,7]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),e(t,[2,17]),{22:[1,36]},{24:[1,37]},e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),{29:[1,38]},e(t,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},e(t,[2,5]),e(t,[2,18]),e(t,[2,19]),e(t,[2,23]),e(t,[2,27],{37:[1,44],38:[1,45]}),e(t,[2,33],{36:[1,46]}),e(y,[2,25]),{32:47,43:j},{43:[2,43]},e(t,[2,28],{38:[1,48]}),e(t,[2,29]),e(t,[2,31],{37:[1,49]}),{11:[1,50]},e(t,[2,30]),e(t,[2,32]),e(y,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},O=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 38;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 26:this.popState();break;case 27:return 37;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return e}();o.lexer=O;function s(){this.yy={}}return s.prototype=o,o.Parser=s,new s}(),Zr.parser=Zr;const WS=Zr,US=e=>e.match(/^\s*gantt/)!==null;let ft="",Yc="",Vc=void 0,Pc="",Lo=[],zo=[],xc={},Oc=[],hi=[],ms="";const V3=["active","done","crit","milestone"];let Cd=[],Fo=!1,Ec=!1,kc=0;const rM=function(e,t,n){O.parseDirective(this,e,t,n)},cM=function(){Oc=[],hi=[],ms="",Cd=[],dc=0,zc=void 0,lc=void 0,H=[],ft="",Yc="",Vc=void 0,Pc="",Lo=[],zo=[],Fo=!1,Ec=!1,kc=0,xc={},Ne()},lM=function(e){Yc=e},dM=function(){return Yc},uM=function(e){Vc=e},hM=function(){return Vc},mM=function(e){Pc=e},fM=function(){return Pc},pM=function(e){ft=e},gM=function(){Fo=!0},vM=function(){return Fo},bM=function(){Ec=!0},jM=function(){return Ec},yM=function(){return ft},_M=function(e){Lo=e.toLowerCase().split(/[\s,]+/)},wM=function(){return Lo},OM=function(e){zo=e.toLowerCase().split(/[\s,]+/)},xM=function(){return zo},CM=function(){return xc},EM=function(e){ms=e,Oc.push(e)},kM=function(){return Oc},AM=function(){let e=M3();const n=10;let t=0;for(;!e&&t<n;)e=M3(),t++;return hi=H,hi},B3=function(e,t,n,s){return!s.includes(e.format(t.trim()))&&(!!(e.isoWeekday()>=6&&n.includes("weekends"))||!!n.includes(e.format("dddd").toLowerCase())||n.includes(e.format(t.trim())))},I3=function(e,t,n,s){if(!n.length||e.manualEndTime)return;let o=Re(e.startTime,t,!0);o.add(1,"d");let i=Re(e.endTime,t,!0),a=FM(o,i,t,n,s);e.endTime=i.toDate(),e.renderEndTime=a},FM=function(e,t,n,s,o){let i=!1,a=null;for(;e<=t;)i||(a=t.toDate()),i=B3(e,n,s,o),i&&t.add(1,"d"),e.add(1,"d");return a},Ac=function(t,n,s){s=s.trim();const r=/^after\s+([\d\w- ]+)/,i=r.exec(s.trim());if(i!==null){let e=null;if(i[1].split(" ").forEach(function(t){let n=Ls(t);n!==void 0&&(e?n.endTime>e.endTime&&(e=n):e=n)}),e)return e.endTime;const t=new Date;return t.setHours(0,0,0,0),t}let a=Re(s,n.trim(),!0);if(a.isValid())return a.toDate();e.debug("Invalid date:"+s),e.debug("With date format:"+n.trim());const o=new Date(s);if(o===void 0||isNaN(o.getTime()))throw new Error("Invalid date:"+s);return o},H3=function(e){const t=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(e.trim());return t!==null?Re.duration(Number.parseFloat(t[1]),t[2]):Re.duration.invalid()},D3=function(e,t,n,s=!1){n=n.trim();let o=Re(n,t.trim(),!0);if(o.isValid())return s&&o.add(1,"d"),o.toDate();const i=Re(e),a=H3(n);return a.isValid()&&i.add(a),i.toDate()};let dc=0;const As=function(e){return e===void 0?(dc=dc+1,"task"+dc):e},RM=function(e,t){let i;t.substr(0,1)===":"?i=t.substr(1,t.length):i=t;const s=i.split(","),n={};w3(s,n,V3);for(let e=0;e<s.length;e++)s[e]=s[e].trim();let o="";switch(s.length){case 1:n.id=As(),n.startTime=e.endTime,o=s[0];break;case 2:n.id=As(),n.startTime=Ac(void 0,ft,s[0]),o=s[1];break;case 3:n.id=As(s[0]),n.startTime=Ac(void 0,ft,s[1]),o=s[2];break}return o&&(n.endTime=D3(n.startTime,ft,o,Fo),n.manualEndTime=Re(o,"YYYY-MM-DD",!0).isValid(),I3(n,ft,zo,Lo)),n},PM=function(e,t){let o;t.substr(0,1)===":"?o=t.substr(1,t.length):o=t;const n=o.split(","),s={};w3(n,s,V3);for(let e=0;e<n.length;e++)n[e]=n[e].trim();switch(n.length){case 1:s.id=As(),s.startTime={type:"prevTaskEnd",id:e},s.endTime={data:n[0]};break;case 2:s.id=As(),s.startTime={type:"getStartDate",startData:n[0]},s.endTime={data:n[1]};break;case 3:s.id=As(n[0]),s.startTime={type:"getStartDate",startData:n[1]},s.endTime={data:n[2]};break}return s};let zc,lc,H=[];const T3={},$M=function(e,t){const n={section:ms,type:ms,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:t},task:e,classes:[]},s=PM(lc,t);n.raw.startTime=s.startTime,n.raw.endTime=s.endTime,n.id=s.id,n.prevTaskId=lc,n.active=s.active,n.done=s.done,n.crit=s.crit,n.milestone=s.milestone,n.order=kc,kc++;const o=H.push(n);lc=n.id,T3[n.id]=o-1},Ls=function(e){const t=T3[e];return H[t]},UM=function(e,t){const n={section:ms,type:ms,description:e,task:e,classes:[]},s=RM(zc,t);n.startTime=s.startTime,n.endTime=s.endTime,n.id=s.id,n.active=s.active,n.done=s.done,n.crit=s.crit,n.milestone=s.milestone,zc=n,hi.push(n)},M3=function(){const t=function(e){const n=H[e];let t="";switch(H[e].raw.startTime.type){case"prevTaskEnd":{const e=Ls(n.prevTaskId);n.startTime=e.endTime;break}case"getStartDate":t=Ac(void 0,ft,H[e].raw.startTime.startData),t&&(H[e].startTime=t);break}return H[e].startTime&&(H[e].endTime=D3(H[e].startTime,ft,H[e].raw.endTime.data,Fo),H[e].endTime&&(H[e].processed=!0,H[e].manualEndTime=Re(H[e].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),I3(H[e],ft,zo,Lo))),H[e].processed};let e=!0;for(const[n,s]of H.entries())t(n),e=e&&s.processed;return e},qM=function(e,n){let s=n;t().securityLevel!=="loose"&&(s=ht(n)),e.split(",").forEach(function(e){let t=Ls(e);t!==void 0&&(O3(e,()=>{window.open(s,"_self")}),xc[e]=s)}),k3(e,"clickable")},k3=function(e,t){e.split(",").forEach(function(e){let n=Ls(e);n!==void 0&&n.classes.push(t)})},GM=function(e,n,s){if(t().securityLevel!=="loose")return;if(n===void 0)return;let o=[];if(typeof s=="string"){o=s.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<o.length;t++){let e=o[t].trim();e.charAt(0)==='"'&&e.charAt(e.length-1)==='"'&&(e=e.substr(1,e.length-2)),o[t]=e}}o.length===0&&o.push(e);let i=Ls(e);i!==void 0&&O3(e,()=>{f.runFunc(n,...o)})},O3=function(e,t){Cd.push(function(){const n=document.querySelector(`[id="${e}"]`);n!==null&&n.addEventListener("click",function(){t()})},function(){const n=document.querySelector(`[id="${e}-text"]`);n!==null&&n.addEventListener("click",function(){t()})})},QM=function(e,t,n){e.split(",").forEach(function(e){GM(e,t,n)}),k3(e,"clickable")},ZM=function(e){Cd.forEach(function(t){t(e)})},Lc={parseDirective:rM,getConfig:()=>t().gantt,clear:cM,setDateFormat:pM,getDateFormat:yM,enableInclusiveEndDates:gM,endDatesAreInclusive:vM,enableTopAxis:bM,topAxisEnabled:jM,setAxisFormat:lM,getAxisFormat:dM,setTickInterval:uM,getTickInterval:hM,setTodayMarker:mM,getTodayMarker:fM,setAccTitle:Oe,getAccTitle:Fe,setDiagramTitle:pt,getDiagramTitle:yt,setAccDescription:De,getAccDescription:Pe,addSection:EM,getSections:kM,getTasks:AM,addTask:$M,findTaskById:Ls,addTaskOrg:UM,setIncludes:_M,getIncludes:wM,setExcludes:OM,getExcludes:xM,setClickEvent:QM,setLink:qM,getLinks:CM,bindFunctions:ZM,parseDuration:H3,isInvalidDate:B3};function w3(e,t,n){let s=!0;for(;s;)s=!1,n.forEach(function(n){const o="^\\s*"+n+"\\s*$",i=new RegExp(o);e[0].match(i)&&(t[n]=!0,e.shift(1),s=!0)})}const tF=function(){e.debug("Something is calling, setConf, remove the call")};let wt;const sF=function(e,n,s,o){const a=t().gantt,u=t().securityLevel;let m;u==="sandbox"&&(m=i("#i"+n));const v=i(u==="sandbox"?m.nodes()[0].contentDocument.body:"body"),f=u==="sandbox"?m.nodes()[0].contentDocument:document,g=f.getElementById(n);wt=g.parentElement.offsetWidth,wt===void 0&&(wt=1200),a.useWidth!==void 0&&(wt=a.useWidth);const d=o.db.getTasks(),p=d.length*(a.barHeight+a.barGap)+2*a.topPadding;g.setAttribute("viewBox","0 0 "+wt+" "+p);const l=v.select(`[id="${n}"]`),r=tx().domain([PL(d,function(e){return e.startTime}),HL(d,function(e){return e.endTime})]).rangeRound([0,wt-a.leftPadding-a.rightPadding]);let c=[];for(const e of d)c.push(e.type);const b=c;c=E(c);function j(e,t){const s=e.startTime,o=t.startTime;let n=0;return s>o?n=1:s<o&&(n=-1),n}d.sort(j),y(d,wt,p),Ve(l,p,wt,a.useMaxWidth),l.append("text").text(o.db.getDiagramTitle()).attr("x",wt/2).attr("y",a.titleTopMargin).attr("class","titleText");function y(e,t,n){const l=a.barHeight,r=l+a.barGap,s=a.topPadding,i=a.leftPadding,d=Hg().domain([0,c.length]).range(["#00B9FA","#F95002"]).interpolate(yx);w(r,s,i,t,n,e,o.db.getExcludes(),o.db.getIncludes()),O(i,s,t,n),_(e,r,s,i,l,d,t),x(r,s),C(i,s,t,n)}function _(e,s,d,u,h,m,f){l.append("g").selectAll("rect").data(e).enter().append("rect").attr("x",0).attr("y",function(e,t){return t=e.order,t*s+d-2}).attr("width",function(){return f-a.rightPadding/2}).attr("height",s).attr("class",function(e){for(const[t,n]of c.entries())if(e.type===n)return"section section"+t%a.numberSectionStyles;return"section section0"});const p=l.append("g").selectAll("rect").data(e).enter(),g=o.db.getLinks();p.append("rect").attr("id",function(e){return e.id}).attr("rx",3).attr("ry",3).attr("x",function(e){return e.milestone?r(e.startTime)+u+.5*(r(e.endTime)-r(e.startTime))-.5*h:r(e.startTime)+u}).attr("y",function(e,t){return t=e.order,t*s+d}).attr("width",function(e){return e.milestone?h:r(e.renderEndTime||e.endTime)-r(e.startTime)}).attr("height",h).attr("transform-origin",function(e,t){return t=e.order,(r(e.startTime)+u+.5*(r(e.endTime)-r(e.startTime))).toString()+"px "+(t*s+d+.5*h).toString()+"px"}).attr("class",function(e){const o="task";let n="";e.classes.length>0&&(n=e.classes.join(" "));let s=0;for(const[t,n]of c.entries())e.type===n&&(s=t%a.numberSectionStyles);let t="";return e.active?e.crit?t+=" activeCrit":t=" active":e.done?e.crit?t=" doneCrit":t=" done":e.crit&&(t+=" crit"),t.length===0&&(t=" task"),e.milestone&&(t=" milestone "+t),t+=s,t+=" "+n,o+t}),p.append("text").attr("id",function(e){return e.id+"-text"}).text(function(e){return e.task}).attr("font-size",a.fontSize).attr("x",function(e){let t=r(e.startTime),n=r(e.renderEndTime||e.endTime);e.milestone&&(t+=.5*(r(e.endTime)-r(e.startTime))-.5*h),e.milestone&&(n=t+h);const s=this.getBBox().width;return s>n-t?n+s+1.5*a.leftPadding>f?t+u-5:n+u+5:(n-t)/2+t+u}).attr("y",function(e,t){return t=e.order,t*s+a.barHeight/2+(a.fontSize/2-2)+d}).attr("text-height",h).attr("class",function(e){const l=r(e.startTime);let i=r(e.endTime);e.milestone&&(i=l+h);const s=this.getBBox().width;let o="";e.classes.length>0&&(o=e.classes.join(" "));let n=0;for(const[t,s]of c.entries())e.type===s&&(n=t%a.numberSectionStyles);let t="";return e.active&&(e.crit?t="activeCritText"+n:t="activeText"+n),e.done?e.crit?t=t+" doneCritText"+n:t=t+" doneText"+n:e.crit&&(t=t+" critText"+n),e.milestone&&(t+=" milestoneText"),s>i-l?i+s+1.5*a.leftPadding>f?o+" taskTextOutsideLeft taskTextOutside"+n+" "+t:o+" taskTextOutsideRight taskTextOutside"+n+" "+t+" width-"+s:o+" taskText taskText"+n+" "+t+" width-"+s});const v=t().securityLevel;if(v==="sandbox"){let t;t=i("#i"+n);const e=t.nodes()[0].contentDocument;p.filter(function(e){return g[e.id]!==void 0}).each(function(t){var n,s=e.querySelector("#"+t.id),o=e.querySelector("#"+t.id+"-text");const i=s.parentNode;n=e.createElement("a"),n.setAttribute("xlink:href",g[t.id]),n.setAttribute("target","_top"),i.appendChild(n),n.appendChild(s),n.appendChild(o)})}}function w(e,t,n,s,i,c,d,u){const f=c.reduce((e,{startTime:t})=>e?Math.min(e,t):t,0),p=c.reduce((e,{endTime:t})=>e?Math.max(e,t):t,0),v=o.db.getDateFormat();if(!f||!p)return;const g=[];let h=null,m=Re(f);for(;m.valueOf()<=p;)o.db.isInvalidDate(m,v,d,u)?h?h.end=m.clone():h={start:m.clone(),end:m.clone()}:h&&(g.push(h),h=null),m.add(1,"d");const b=l.append("g").selectAll("rect").data(g).enter();b.append("rect").attr("id",function(e){return"exclude-"+e.start.format("YYYY-MM-DD")}).attr("x",function(e){return r(e.start)+n}).attr("y",a.gridLineStartPadding).attr("width",function(e){const t=e.end.clone().add(1,"day");return r(t)-r(e.start)}).attr("height",i-t-a.gridLineStartPadding).attr("transform-origin",function(t,s){return(r(t.start)+n+.5*(r(t.end)-r(t.start))).toString()+"px "+(s*e+.5*i).toString()+"px"}).attr("class","exclude-range")}function O(e,t,n,s){let i=JN(r).tickSize(-s+t+a.gridLineStartPadding).tickFormat(Hr(o.db.getAxisFormat()||a.axisFormat||"%Y-%m-%d"));const d=/^([1-9]\d*)(minute|hour|day|week|month)$/,c=d.exec(o.db.getTickInterval()||a.tickInterval);if(c!==null){const e=c[1],t=c[2];switch(t){case"minute":i.ticks(Za.every(e));break;case"hour":i.ticks(er.every(e));break;case"day":i.ticks(Fs.every(e));break;case"week":i.ticks(hn.every(e));break;case"month":i.ticks(hr.every(e));break}}if(l.append("g").attr("class","grid").attr("transform","translate("+e+", "+(s-50)+")").call(i).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),o.db.topAxisEnabled()||a.topAxis){let n=fL(r).tickSize(-s+t+a.gridLineStartPadding).tickFormat(Hr(o.db.getAxisFormat()||a.axisFormat||"%Y-%m-%d"));if(c!==null){const e=c[1],t=c[2];switch(t){case"minute":n.ticks(Za.every(e));break;case"hour":n.ticks(er.every(e));break;case"day":n.ticks(Fs.every(e));break;case"week":n.ticks(hn.every(e));break;case"month":n.ticks(hr.every(e));break}}l.append("g").attr("class","grid").attr("transform","translate("+e+", "+t+")").call(n).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function x(e,t){const n=[];let s=0;for(const[t,e]of c.entries())n[t]=[e,A(e,b)];l.append("g").selectAll("text").data(n).enter().append(function(e){const n=e[0].split(h.lineBreakRegex),s=-(n.length-1)/2,t=f.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("dy",s+"em");for(const[s,o]of n.entries()){const e=f.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttribute("alignment-baseline","central"),e.setAttribute("x","10"),s>0&&e.setAttribute("dy","1em"),e.textContent=o,t.appendChild(e)}return t}).attr("x",10).attr("y",function(o,i){if(i>0)for(let a=0;a<i;a++)return s+=n[i-1][1],o[1]*e/2+s*e+t;else return o[1]*e/2+t}).attr("font-size",a.sectionFontSize).attr("font-size",a.sectionFontSize).attr("class",function(e){for(const[t,n]of c.entries())if(e[0]===n)return"sectionTitle sectionTitle"+t%a.numberSectionStyles;return"sectionTitle"})}function C(e,t,n,s){const i=o.db.getTodayMarker();if(i==="off")return;const u=l.append("g").attr("class","today"),c=new Date,d=u.append("line");d.attr("x1",r(c)+e).attr("x2",r(c)+e).attr("y1",a.titleTopMargin).attr("y2",s-a.titleTopMargin).attr("class","today"),i!==""&&d.attr("style",i.replace(/,/g,";"))}function E(e){const t={},n=[];for(let s=0,o=e.length;s<o;++s)Object.prototype.hasOwnProperty.call(t,e[s])||(t[e[s]]=!0,n.push(e[s]));return n}function k(e){let t=e.length;const n={};for(;t;)n[e[--t]]=(n[e[t]]||0)+1;return n}function A(e,t){return k(t)[e]||0}},oF={setConf:tF,draw:sF};cc=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},t=[6,9,10],n={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(t,n,s,o,i,a){switch(a.length-1,i){case 1:return o;case 4:break;case 6:o.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},e(t,[2,3]),e(t,[2,4]),e(t,[2,5]),e(t,[2,6])],defaultActions:{4:[2,1]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},o=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return e}();n.lexer=o;function s(){this.yy={}}return s.prototype=n,n.Parser=s,new s}(),cc.parser=cc;const aF=cc;Hc="",Ic=!1;const lF=t=>{e.debug("Setting message to: "+t),Hc=t},dF=()=>Hc,uF=e=>{Ic=e},hF=()=>Ic,mF={setMessage:lF,getMessage:dF,setInfo:uF,getInfo:hF,clear:Ne},fF=(n,s,o)=>{try{e.debug(`Rendering info diagram
`+n);const r=t().securityLevel;let c;r==="sandbox"&&(c=i("#i"+s));const l=i(r==="sandbox"?c.nodes()[0].contentDocument.body:"body"),a=l.select("#"+s),d=a.append("g");d.append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+o),a.attr("height",100),a.attr("width",400)}catch(t){e.error("Error while rendering info diagram"),e.error(t.message)}},pF={draw:fF},gF=e=>e.match(/^\s*info/)!==null;oc=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},c=[1,4],s=[1,5],o=[1,6],i=[1,7],n=[1,9],a=[1,11,13,15,17,19,20,26,27,28,29],y=[2,5],d=[1,6,11,13,15,17,19,20,26,27,28,29],t=[26,27,28],h=[2,8],j=[1,18],b=[1,19],m=[1,20],f=[1,21],p=[1,22],g=[1,23],v=[1,28],r=[6,26,27,28,29],u={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 4:o.setShowData(!0);break;case 7:this.$=a[c-1];break;case 9:o.addSection(a[c-1],o.cleanupValue(a[c]));break;case 10:this.$=a[c].trim(),o.setDiagramTitle(this.$);break;case 11:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 12:case 13:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 14:o.addSection(a[c].substr(8)),this.$=a[c].substr(8);break;case 21:o.parseDirective("%%{","open_directive");break;case 22:o.parseDirective(a[c],"type_directive");break;case 23:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 24:o.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:c,21:8,26:s,27:o,28:i,29:n},{1:[3]},{3:10,4:2,5:3,6:c,21:8,26:s,27:o,28:i,29:n},{3:11,4:2,5:3,6:c,21:8,26:s,27:o,28:i,29:n},e(a,y,{7:12,8:[1,13]}),e(d,[2,18]),e(d,[2,19]),e(d,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},e(t,h,{21:8,9:16,10:17,5:24,1:[2,3],11:j,13:b,15:m,17:f,19:p,20:g,29:n}),e(a,y,{7:25}),{23:26,24:[1,27],32:v},e([24,32],[2,22]),e(a,[2,6]),{4:29,26:s,27:o,28:i},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,h,{21:8,9:16,10:17,5:24,1:[2,4],11:j,13:b,15:m,17:f,19:p,20:g,29:n}),e(r,[2,16]),{25:34,31:[1,35]},e(r,[2,24]),e(a,[2,7]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),{23:36,32:v},{32:[2,23]},e(r,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},_=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return e}();u.lexer=_;function l(){this.yy={}}return l.prototype=u,u.Parser=l,new l}(),oc.parser=oc;const bF=oc,jF=e=>{const t=e.match(/^\s*pie/)!==null||e.match(/^\s*bar/)!==null;return t};let sc={},Wc=!1;const wF=function(e,t,n){O.parseDirective(this,e,t,n)},OF=function(n,s){n=h.sanitizeText(n,t()),sc[n]===void 0&&(sc[n]=s,e.debug("Added new section :",n))},xF=()=>sc,CF=function(e){Wc=e},EF=function(){return Wc},kF=function(e){return e.substring(0,1)===":"?(e=e.substring(1).trim(),Number(e.trim())):Number(e.trim())},AF=function(){sc={},Wc=!1,Ne()},SF={parseDirective:wF,getConfig:()=>t().pie,addSection:OF,getSections:xF,cleanupValue:kF,clear:AF,setAccTitle:Oe,getAccTitle:Fe,setDiagramTitle:pt,getDiagramTitle:yt,setShowData:CF,getShowData:EF,getAccDescription:Pe,setAccDescription:De};let gt=t(),vt;const Co=450,zF=(n,s,o,a)=>{try{gt=t(),e.debug(`Rendering info diagram
`+n);const _=t().securityLevel;let w;_==="sandbox"&&(w=i("#i"+s));const C=i(_==="sandbox"?w.nodes()[0].contentDocument.body:"body"),E=_==="sandbox"?w.nodes()[0].contentDocument:document;a.db.clear(),a.parser.parse(n),e.debug("Parsed info diagram");const O=E.getElementById(s);vt=O.parentElement.offsetWidth,vt===void 0&&(vt=1200),gt.useWidth!==void 0&&(vt=gt.useWidth),gt.pie.useWidth!==void 0&&(vt=gt.pie.useWidth);const x=C.select("#"+s);Ve(x,Co,vt,gt.pie.useMaxWidth),O.setAttribute("viewBox","0 0 "+vt+" "+Co);var c,d,m,p,v,b,j,y=40,r=18,u=4,g=Math.min(vt,Co)/2-y,l=x.append("g").attr("transform","translate("+vt/2+","+Co/2+")"),h=a.db.getSections(),f=0;Object.keys(h).forEach(function(e){f+=h[e]});const o=gt.themeVariables;j=[o.pie1,o.pie2,o.pie3,o.pie4,o.pie5,o.pie6,o.pie7,o.pie8,o.pie9,o.pie10,o.pie11,o.pie12],c=mg().range(j),b=Object.entries(h).map(function(e,t){return{order:t,name:e[0],value:e[1]}}),v=ck().value(function(e){return e.value}).sort(function(e,t){return e.order-t.order}),d=v(b),p=Fl().innerRadius(0).outerRadius(g),l.selectAll("mySlices").data(d).enter().append("path").attr("d",p).attr("fill",function(e){return c(e.data.name)}).attr("class","pieCircle"),l.selectAll("mySlices").data(d).enter().append("text").text(function(e){return(e.data.value/f*100).toFixed(0)+"%"}).attr("transform",function(e){return"translate("+p.centroid(e)+")"}).style("text-anchor","middle").attr("class","slice"),l.append("text").text(a.db.getDiagramTitle()).attr("x",0).attr("y",-(Co-50)/2).attr("class","pieTitleText"),m=l.selectAll(".legend").data(c.domain()).enter().append("g").attr("class","legend").attr("transform",function(e,t){const n=r+u,s=n*c.domain().length/2,o=12*r,i=t*n-s;return"translate("+o+","+i+")"}),m.append("rect").attr("width",r).attr("height",r).style("fill",c).style("stroke",c),m.data(d).append("text").attr("x",r+u).attr("y",r-u).text(function(e){return a.db.getShowData()||gt.showData||gt.pie.showData?e.data.name+" ["+e.data.value+"]":e.data.name})}catch(t){e.error("Error while rendering info diagram"),e.error(t)}},DF={draw:zF};Gr=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},M=[1,3],s=[1,5],o=[1,6],i=[1,7],a=[1,8],w=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],x=[1,22],v=[2,13],g=[1,26],d=[1,27],u=[1,28],h=[1,29],m=[1,30],f=[1,31],p=[1,24],n=[1,32],r=[1,33],z=[1,36],j=[71,72],B=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],I=[1,56],H=[1,57],P=[1,58],R=[1,59],L=[1,60],N=[1,61],D=[1,62],c=[62,63],O=[1,74],l=[1,70],_=[1,71],y=[1,72],C=[1,73],b=[1,75],k=[1,79],E=[1,80],A=[1,77],S=[1,78],t=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],F={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 6:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 7:case 8:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 9:o.parseDirective("%%{","open_directive");break;case 10:o.parseDirective(a[c],"type_directive");break;case 11:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 12:o.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:o.addRequirement(a[c-3],a[c-4]);break;case 20:o.setNewReqId(a[c-2]);break;case 21:o.setNewReqText(a[c-2]);break;case 22:o.setNewReqRisk(a[c-2]);break;case 23:o.setNewReqVerifyMethod(a[c-2]);break;case 26:this.$=o.RequirementType.REQUIREMENT;break;case 27:this.$=o.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=o.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=o.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=o.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=o.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=o.RiskLevel.LOW_RISK;break;case 33:this.$=o.RiskLevel.MED_RISK;break;case 34:this.$=o.RiskLevel.HIGH_RISK;break;case 35:this.$=o.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=o.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=o.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=o.VerifyType.VERIFY_TEST;break;case 39:o.addElement(a[c-3]);break;case 40:o.setNewElementType(a[c-2]);break;case 41:o.setNewElementDocRef(a[c-2]);break;case 44:o.addRelationship(a[c-2],a[c],a[c-4]);break;case 45:o.addRelationship(a[c-2],a[c-4],a[c]);break;case 46:this.$=o.Relationships.CONTAINS;break;case 47:this.$=o.Relationships.COPIES;break;case 48:this.$=o.Relationships.DERIVES;break;case 49:this.$=o.Relationships.SATISFIES;break;case 50:this.$=o.Relationships.VERIFIES;break;case 51:this.$=o.Relationships.REFINES;break;case 52:this.$=o.Relationships.TRACES;break}},table:[{3:1,4:2,6:M,9:4,14:s,16:o,18:i,19:a},{1:[3]},{3:10,4:2,5:[1,9],6:M,9:4,14:s,16:o,18:i,19:a},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},e(w,[2,8]),{20:[2,9]},{3:16,4:2,6:M,9:4,14:s,16:o,18:i,19:a},{1:[2,2]},{4:21,5:x,7:17,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{11:34,12:[1,35],22:z},e([12,22],[2,10]),e(w,[2,6]),e(w,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:x,7:38,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{4:21,5:x,7:39,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{4:21,5:x,7:40,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{4:21,5:x,7:41,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{4:21,5:x,7:42,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},e(j,[2,26]),e(j,[2,27]),e(j,[2,28]),e(j,[2,29]),e(j,[2,30]),e(j,[2,31]),e(B,[2,55]),e(B,[2,56]),e(w,[2,4]),{13:51,21:[1,52]},e(w,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:I,65:H,66:P,67:R,68:L,69:N,70:D},{61:63,64:I,65:H,66:P,67:R,68:L,69:N,70:D},{11:64,22:z},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},e(c,[2,46]),e(c,[2,47]),e(c,[2,48]),e(c,[2,49]),e(c,[2,50]),e(c,[2,51]),e(c,[2,52]),{63:[1,68]},e(w,[2,5]),{5:O,29:69,30:l,33:_,35:y,37:C,39:b},{5:k,39:E,55:76,56:A,58:S},{32:81,71:n,72:r},{32:82,71:n,72:r},e(t,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:O,29:87,30:l,33:_,35:y,37:C,39:b},e(t,[2,25]),e(t,[2,39]),{31:[1,88]},{31:[1,89]},{5:k,39:E,55:90,56:A,58:S},e(t,[2,43]),e(t,[2,44]),e(t,[2,45]),{32:91,71:n,72:r},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},e(t,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},e(t,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:O,29:116,30:l,33:_,35:y,37:C,39:b},{5:O,29:117,30:l,33:_,35:y,37:C,39:b},{5:O,29:118,30:l,33:_,35:y,37:C,39:b},{5:O,29:119,30:l,33:_,35:y,37:C,39:b},{5:k,39:E,55:120,56:A,58:S},{5:k,39:E,55:121,56:A,58:S},e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),e(t,[2,23]),e(t,[2,40]),e(t,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},V=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return n.yytext=n.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n{<>\-=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return e}();F.lexer=V;function T(){this.yy={}}return T.prototype=F,F.Parser=T,new T}(),Gr.parser=Gr;const LF=Gr,RF=e=>e.match(/^\s*requirement(Diagram)?/)!==null;let sl=[],he={},_o={},en={},yo={};const $F={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},WF={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},UF={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},KF={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},qF=function(e,t,n){O.parseDirective(this,e,t,n)},YF=(e,t)=>(_o[e]===void 0&&(_o[e]={name:e,type:t,id:he.id,text:he.text,risk:he.risk,verifyMethod:he.verifyMethod}),he={},_o[e]),GF=()=>_o,XF=e=>{he!==void 0&&(he.id=e)},QF=e=>{he!==void 0&&(he.text=e)},ZF=e=>{he!==void 0&&(he.risk=e)},JF=e=>{he!==void 0&&(he.verifyMethod=e)},eT=t=>(yo[t]===void 0&&(yo[t]={name:t,type:en.type,docRef:en.docRef},e.info("Added new requirement: ",t)),en={},yo[t]),tT=()=>yo,nT=e=>{en!==void 0&&(en.type=e)},sT=e=>{en!==void 0&&(en.docRef=e)},oT=(e,t,n)=>{sl.push({type:e,src:t,dst:n})},iT=()=>sl,aT=()=>{sl=[],he={},_o={},en={},yo={},Ne()},rT={RequirementType:$F,RiskLevel:WF,VerifyType:UF,Relationships:KF,parseDirective:qF,getConfig:()=>t().req,addRequirement:YF,getRequirements:GF,setNewReqId:XF,setNewReqText:QF,setNewReqRisk:ZF,setNewReqVerifyMethod:JF,setAccTitle:Oe,getAccTitle:Fe,setAccDescription:De,getAccDescription:Pe,addElement:eT,getElements:tT,setNewElementType:nT,setNewElementDocRef:sT,addRelationship:oT,getRelationships:iT,clear:aT},dl={CONTAINS:"contains",ARROW:"arrow"},lT=(e,t)=>{let n=e.append("defs").append("marker").attr("id",dl.CONTAINS+"_line_ending").attr("refX",0).attr("refY",t.line_height/2).attr("markerWidth",t.line_height).attr("markerHeight",t.line_height).attr("orient","auto").append("g");n.append("circle").attr("cx",t.line_height/2).attr("cy",t.line_height/2).attr("r",t.line_height/2).attr("fill","none"),n.append("line").attr("x1",0).attr("x2",t.line_height).attr("y1",t.line_height/2).attr("y2",t.line_height/2).attr("stroke-width",1),n.append("line").attr("y1",0).attr("y2",t.line_height).attr("x1",t.line_height/2).attr("x2",t.line_height/2).attr("stroke-width",1),e.append("defs").append("marker").attr("id",dl.ARROW+"_line_ending").attr("refX",t.line_height).attr("refY",.5*t.line_height).attr("markerWidth",t.line_height).attr("markerHeight",t.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${t.line_height},${t.line_height/2}
      M${t.line_height},${t.line_height/2}
      L0,${t.line_height}`).attr("stroke-width",1)},e3={ReqMarkers:dl,insertLineEndings:lT};let E={},J2=0;const Z2=(e,t)=>e.insert("rect","#"+t).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",E.rect_min_width+"px").attr("height",E.rect_min_height+"px"),K2=(e,t,n)=>{let a=E.rect_min_width/2,s=e.append("text").attr("class","req reqLabel reqTitle").attr("id",t).attr("x",a).attr("y",E.rect_padding).attr("dominant-baseline","hanging"),o=0;n.forEach(e=>{o==0?s.append("tspan").attr("text-anchor","middle").attr("x",E.rect_min_width/2).attr("dy",0).text(e):s.append("tspan").attr("text-anchor","middle").attr("x",E.rect_min_width/2).attr("dy",E.line_height*.75).text(e),o++});let r=1.5*E.rect_padding,c=o*E.line_height*.75,i=r+c;return e.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",E.rect_min_width).attr("y1",i).attr("y2",i),{titleNode:s,y:i}},$2=(e,t,n,s)=>{let r=e.append("text").attr("class","req reqLabel").attr("id",t).attr("x",E.rect_padding).attr("y",s).attr("dominant-baseline","hanging"),i=0;const a=30;let o=[];return n.forEach(e=>{let t=e.length;for(;t>a&&i<3;){let n=e.substring(0,a);e=e.substring(a,e.length),t=e.length,o[o.length]=n,i++}if(i==3){let e=o[o.length-1];o[o.length-1]=e.substring(0,e.length-4)+"..."}else o[o.length]=e;i=0}),o.forEach(e=>{r.append("tspan").attr("x",E.rect_padding).attr("dy",E.line_height).text(e)}),r},gT=(e,t,n,s)=>{const r=t.node().getTotalLength(),o=t.node().getPointAtLength(r*.5),a="rel"+J2;J2++;const c=e.append("text").attr("class","req relationshipLabel").attr("id",a).attr("x",o.x).attr("y",o.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(s),i=c.node().getBBox();e.insert("rect","#"+a).attr("class","req reqLabelBox").attr("x",o.x-i.width/2).attr("y",o.y-i.height/2).attr("width",i.width).attr("height",i.height).attr("fill","white").attr("fill-opacity","85%")},vT=function(e,t,n,s,o){const a=n.edge(Ds(t.src),Ds(t.dst)),r=cs().x(function(e){return e.x}).y(function(e){return e.y}),i=e.insert("path","#"+s).attr("class","er relationshipLine").attr("d",r(a.points)).attr("fill","none");t.type==o.db.Relationships.CONTAINS?i.attr("marker-start","url("+h.getUrl(E.arrowMarkerAbsolute)+"#"+t.type+"_line_ending)"):(i.attr("stroke-dasharray","10,7"),i.attr("marker-end","url("+h.getUrl(E.arrowMarkerAbsolute)+"#"+e3.ReqMarkers.ARROW+"_line_ending)")),gT(e,i,E,`<<${t.type}>>`)},bT=(t,n,s)=>{Object.keys(t).forEach(o=>{let i=t[o];o=Ds(o),e.info("Added new requirement: ",o);const a=s.append("g").attr("id",o),c="req-"+o,l=Z2(a,c);let d=K2(a,o+"_title",[`<<${i.type}>>`,`${i.name}`]);$2(a,o+"_body",[`Id: ${i.id}`,`Text: ${i.text}`,`Risk: ${i.risk}`,`Verification: ${i.verifyMethod}`],d.y);const r=l.node().getBBox();n.setNode(o,{width:r.width,height:r.height,shape:"rect",id:o})})},jT=(e,t,n)=>{Object.keys(e).forEach(s=>{let r=e[s];const o=Ds(s),i=n.append("g").attr("id",o),a="element-"+o,l=Z2(i,a);let d=K2(i,a+"_title",[`<<Element>>`,`${s}`]);$2(i,a+"_body",[`Type: ${r.type||"Not Specified"}`,`Doc Ref: ${r.docRef||"None"}`],d.y);const c=l.node().getBBox();t.setNode(o,{width:c.width,height:c.height,shape:"rect",id:o})})},yT=(e,t)=>(e.forEach(function(e){let n=Ds(e.src),s=Ds(e.dst);t.setEdge(n,s,{relationship:e})}),e),_T=function(e,t){t.nodes().forEach(function(n){n!==void 0&&t.node(n)!==void 0&&(e.select("#"+n),e.select("#"+n).attr("transform","translate("+(t.node(n).x-t.node(n).width/2)+","+(t.node(n).y-t.node(n).height/2)+" )"))})},Ds=e=>e.replace(/\s/g,"").replace(/\./g,"_"),OT=(e,n,s,o)=>{E=t().requirement,o.db.clear(),o.parser.parse(e);const d=E.securityLevel;let u;d==="sandbox"&&(u=i("#i"+n));const p=i(d==="sandbox"?u.nodes()[0].contentDocument.body:"body"),a=p.select(`[id='${n}']`);e3.insertLineEndings(a,E);const r=new D({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:E.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let g=o.db.getRequirements(),v=o.db.getElements(),h=o.db.getRelationships();bT(g,r,a),jT(v,r,a),yT(h,r),Ss(r),_T(a,r),h.forEach(function(e){vT(a,e,r,n,o)});const c=E.rect_padding,l=a.node().getBBox(),m=l.width+c*2,f=l.height+c*2;Ve(a,f,m,E.useMaxWidth),a.attr("viewBox",`${l.x-c} ${l.y-c} ${m} ${f}`)},xT={draw:OT};Dr=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},z=[1,2],T=[1,3],F=[1,5],s=[1,7],o=[2,5],S=[1,15],M=[1,17],c=[1,18],l=[1,19],i=[1,21],u=[1,22],h=[1,23],m=[1,29],f=[1,30],p=[1,31],g=[1,32],v=[1,33],b=[1,34],j=[1,35],y=[1,36],_=[1,37],w=[1,38],O=[1,39],a=[1,40],C=[1,43],E=[1,44],k=[1,45],x=[1,46],d=[1,47],n=[1,48],R=[1,51],t=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],D=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],B=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],I=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],P=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],A=[67,68,69],r=[1,121],H=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],L={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 4:return o.apply(a[c]),a[c];case 5:this.$=[];break;case 6:a[c-1].push(a[c]),this.$=a[c-1];break;case 7:case 8:this.$=a[c];break;case 9:this.$=[];break;case 12:a[c-3].type="addParticipant",a[c-3].description=o.parseMessage(a[c-1]),this.$=a[c-3];break;case 13:a[c-1].type="addParticipant",this.$=a[c-1];break;case 14:a[c-3].type="addActor",a[c-3].description=o.parseMessage(a[c-1]),this.$=a[c-3];break;case 15:a[c-1].type="addActor",this.$=a[c-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(a[c-2]),sequenceIndexStep:Number(a[c-1]),sequenceVisible:!0,signalType:o.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(a[c-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:o.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:o.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:o.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:o.LINETYPE.ACTIVE_START,actor:a[c-1]};break;case 22:this.$={type:"activeEnd",signalType:o.LINETYPE.ACTIVE_END,actor:a[c-1]};break;case 28:o.setDiagramTitle(a[c].substring(6)),this.$=a[c].substring(6);break;case 29:o.setDiagramTitle(a[c].substring(7)),this.$=a[c].substring(7);break;case 30:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 31:case 32:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 33:a[c-1].unshift({type:"loopStart",loopText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.LOOP_START}),a[c-1].push({type:"loopEnd",loopText:a[c-2],signalType:o.LINETYPE.LOOP_END}),this.$=a[c-1];break;case 34:a[c-1].unshift({type:"rectStart",color:o.parseMessage(a[c-2]),signalType:o.LINETYPE.RECT_START}),a[c-1].push({type:"rectEnd",color:o.parseMessage(a[c-2]),signalType:o.LINETYPE.RECT_END}),this.$=a[c-1];break;case 35:a[c-1].unshift({type:"optStart",optText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.OPT_START}),a[c-1].push({type:"optEnd",optText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.OPT_END}),this.$=a[c-1];break;case 36:a[c-1].unshift({type:"altStart",altText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.ALT_START}),a[c-1].push({type:"altEnd",signalType:o.LINETYPE.ALT_END}),this.$=a[c-1];break;case 37:a[c-1].unshift({type:"parStart",parText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.PAR_START}),a[c-1].push({type:"parEnd",signalType:o.LINETYPE.PAR_END}),this.$=a[c-1];break;case 38:a[c-1].unshift({type:"criticalStart",criticalText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.CRITICAL_START}),a[c-1].push({type:"criticalEnd",signalType:o.LINETYPE.CRITICAL_END}),this.$=a[c-1];break;case 39:a[c-1].unshift({type:"breakStart",breakText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.BREAK_START}),a[c-1].push({type:"breakEnd",optText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.BREAK_END}),this.$=a[c-1];break;case 42:this.$=a[c-3].concat([{type:"option",optionText:o.parseMessage(a[c-1]),signalType:o.LINETYPE.CRITICAL_OPTION},a[c]]);break;case 44:this.$=a[c-3].concat([{type:"and",parText:o.parseMessage(a[c-1]),signalType:o.LINETYPE.PAR_AND},a[c]]);break;case 46:this.$=a[c-3].concat([{type:"else",altText:o.parseMessage(a[c-1]),signalType:o.LINETYPE.ALT_ELSE},a[c]]);break;case 47:this.$=[a[c-1],{type:"addNote",placement:a[c-2],actor:a[c-1].actor,text:a[c]}];break;case 48:a[c-2]=[].concat(a[c-1],a[c-1]).slice(0,2),a[c-2][0]=a[c-2][0].actor,a[c-2][1]=a[c-2][1].actor,this.$=[a[c-1],{type:"addNote",placement:o.PLACEMENT.OVER,actor:a[c-2].slice(0,2),text:a[c]}];break;case 49:this.$=[a[c-1],{type:"addLinks",actor:a[c-1].actor,text:a[c]}];break;case 50:this.$=[a[c-1],{type:"addALink",actor:a[c-1].actor,text:a[c]}];break;case 51:this.$=[a[c-1],{type:"addProperties",actor:a[c-1].actor,text:a[c]}];break;case 52:this.$=[a[c-1],{type:"addDetails",actor:a[c-1].actor,text:a[c]}];break;case 55:this.$=[a[c-2],a[c]];break;case 56:this.$=a[c];break;case 57:this.$=o.PLACEMENT.LEFTOF;break;case 58:this.$=o.PLACEMENT.RIGHTOF;break;case 59:this.$=[a[c-4],a[c-1],{type:"addMessage",from:a[c-4].actor,to:a[c-1].actor,signalType:a[c-3],msg:a[c]},{type:"activeStart",signalType:o.LINETYPE.ACTIVE_START,actor:a[c-1]}];break;case 60:this.$=[a[c-4],a[c-1],{type:"addMessage",from:a[c-4].actor,to:a[c-1].actor,signalType:a[c-3],msg:a[c]},{type:"activeEnd",signalType:o.LINETYPE.ACTIVE_END,actor:a[c-4]}];break;case 61:this.$=[a[c-3],a[c-1],{type:"addMessage",from:a[c-3].actor,to:a[c-1].actor,signalType:a[c-2],msg:a[c]}];break;case 62:this.$={type:"addParticipant",actor:a[c]};break;case 63:this.$=o.LINETYPE.SOLID_OPEN;break;case 64:this.$=o.LINETYPE.DOTTED_OPEN;break;case 65:this.$=o.LINETYPE.SOLID;break;case 66:this.$=o.LINETYPE.DOTTED;break;case 67:this.$=o.LINETYPE.SOLID_CROSS;break;case 68:this.$=o.LINETYPE.DOTTED_CROSS;break;case 69:this.$=o.LINETYPE.SOLID_POINT;break;case 70:this.$=o.LINETYPE.DOTTED_POINT;break;case 71:this.$=o.parseMessage(a[c].trim().substring(1));break;case 72:o.parseDirective("%%{","open_directive");break;case 73:o.parseDirective(a[c],"type_directive");break;case 74:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 75:o.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:z,5:T,6:4,7:F,11:6,79:s},{1:[3]},{3:8,4:z,5:T,6:4,7:F,11:6,79:s},{3:9,4:z,5:T,6:4,7:F,11:6,79:s},{3:10,4:z,5:T,6:4,7:F,11:6,79:s},e([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],o,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{13:49,14:[1,50],82:R},e([14,82],[2,73]),e(t,[2,6]),{6:41,10:52,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},e(t,[2,8]),e(t,[2,9]),{17:53,69:n},{17:54,69:n},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:n},{17:60,69:n},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},e(t,[2,28]),e(t,[2,29]),{35:[1,66]},{37:[1,67]},e(t,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},e(t,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:n},{17:89,69:n},{17:90,69:n},{17:91,69:n},e([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},e(t,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},e(t,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},e(t,[2,20]),{5:[1,102]},{5:[1,103]},e(t,[2,23]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),e(t,[2,27]),e(t,[2,30]),e(t,[2,31]),e(D,o,{8:104}),e(D,o,{8:105}),e(D,o,{8:106}),e(B,o,{44:107,8:108}),e(I,o,{46:109,8:110}),e(P,o,{48:111,8:112}),e(D,o,{8:113}),{17:116,67:[1,114],68:[1,115],69:n},e(A,[2,63]),e(A,[2,64]),e(A,[2,65]),e(A,[2,66]),e(A,[2,67]),e(A,[2,68]),e(A,[2,69]),e(A,[2,70]),{17:117,69:n},{17:119,57:118,69:n},{69:[2,57]},{69:[2,58]},{55:120,78:r},{55:122,78:r},{55:123,78:r},{55:124,78:r},e(H,[2,10]),{13:125,82:R},{82:[2,74]},{19:[1,126]},e(t,[2,13]),{19:[1,127]},e(t,[2,15]),{5:[1,128]},e(t,[2,18]),e(t,[2,19]),e(t,[2,21]),e(t,[2,22]),{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[1,129],41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[1,130],41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[1,131],41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{40:[1,132]},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[2,45],41:j,42:y,43:_,45:w,47:O,49:a,52:[1,133],53:C,58:E,59:k,60:x,61:d,69:n,79:s},{40:[1,134]},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[2,43],41:j,42:y,43:_,45:w,47:O,49:a,51:[1,135],53:C,58:E,59:k,60:x,61:d,69:n,79:s},{40:[1,136]},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[2,41],41:j,42:y,43:_,45:w,47:O,49:a,50:[1,137],53:C,58:E,59:k,60:x,61:d,69:n,79:s},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[1,138],41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{17:139,69:n},{17:140,69:n},{55:141,78:r},{55:142,78:r},{55:143,78:r},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},e(t,[2,17]),e(t,[2,33]),e(t,[2,34]),e(t,[2,35]),e(t,[2,36]),{19:[1,148]},e(t,[2,37]),{19:[1,149]},e(t,[2,38]),{19:[1,150]},e(t,[2,39]),{55:151,78:r},{55:152,78:r},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:n},e(H,[2,11]),e(t,[2,12]),e(t,[2,14]),e(B,o,{8:108,44:154}),e(I,o,{8:110,46:155}),e(P,o,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},V=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return n.yytext=n.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 52:return 5;case 53:return n.yytext=n.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 65:return 5;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^->:\n,;]+?([-]*[^->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^+\->:\n,;]+((?!(-x|--x|-\)|--\)))[-]*[^+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[)])/i,/^(?:--[)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};return e}();L.lexer=V;function N(){this.yy={}}return N.prototype=L,L.Parser=N,new N}(),Dr.parser=Dr;const ET=Dr,kT=e=>e.match(/^\s*sequenceDiagram/)!==null;let bo=void 0,Jt={},Ie=[],Sr=!1,gl;const zT=function(e,t,n){O.parseDirective(this,e,t,n)},vl=function(e,t,n,s){const o=Jt[e];if(o&&t===o.name&&n==null)return;(n==null||n.text==null)&&(n={text:t,wrap:null,type:s}),(s==null||n.text==null)&&(n={text:t,wrap:null,type:s}),Jt[e]={name:t,description:n.text,wrap:n.wrap===void 0&&ps()||!!n.wrap,prevActor:bo,links:{},properties:{},actorCnt:null,rectData:null,type:s||"participant"},bo&&Jt[bo]&&(Jt[bo].nextActor=e),bo=e},NT=e=>{let t,n=0;for(t=0;t<Ie.length;t++)Ie[t].type===fo.ACTIVE_START&&Ie[t].from.actor===e&&n++,Ie[t].type===fo.ACTIVE_END&&Ie[t].from.actor===e&&n--;return n},LT=function(e,t,n,s){Ie.push({from:e,to:t,message:n.text,wrap:n.wrap===void 0&&ps()||!!n.wrap,answer:s})},A=function(e,t,n={text:void 0,wrap:void 0},s){if(s===fo.ACTIVE_END){const t=NT(e.actor);if(t<1){let t=new Error("Trying to inactivate an inactive participant ("+e.actor+")");throw t.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},t}}return Ie.push({from:e,to:t,message:n.text,wrap:n.wrap===void 0&&ps()||!!n.wrap,type:s}),!0},PT=function(){return Ie},HT=function(){return Jt},vo=function(e){return Jt[e]},BT=function(){return Object.keys(Jt)},VT=function(){Sr=!0},$T=function(){Sr=!1},WT=()=>Sr,UT=function(e){gl=e},ps=()=>gl!==void 0?gl:t().sequence.wrap,qT=function(){Jt={},Ie=[],Sr=!1,Ne()},YT=function(t){const n=t.trim(),s={text:n.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:n.match(/^:?wrap:/)!==null||n.match(/^:?nowrap:/)===null&&void 0};return e.debug("parseMessage:",s),s},fo={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},XT={FILLED:0,OPEN:1},QT={LEFTOF:0,RIGHTOF:1,OVER:2},S2=function(e,t,n){({actor:e,placement:t,message:n.text,wrap:n.wrap===void 0&&ps()||!!n.wrap});const s=[].concat(e,e);Ie.push({from:s[0],to:s[1],message:n.text,wrap:n.wrap===void 0&&ps()||!!n.wrap,type:fo.NOTE,placement:t})},k2=function(n,s){const o=vo(n);try{let e=Me(s.text,t());e=e.replace(/&amp;/g,"&"),e=e.replace(/&equals;/g,"=");const n=JSON.parse(e);Cl(o,n)}catch(t){e.error("error while parsing actor link text",t)}},ez=function(n,s){const r=vo(n);try{const n={};let e=Me(s.text,t());var i,a,o=e.indexOf("@");e=e.replace(/&amp;/g,"&"),e=e.replace(/&equals;/g,"="),i=e.slice(0,o-1).trim(),a=e.slice(o+1).trim(),n[i]=a,Cl(r,n)}catch(t){e.error("error while parsing actor link text",t)}};function Cl(e,t){if(e.links==null)e.links=t;else for(let n in t)e.links[n]=t[n]}const C2=function(n,s){const o=vo(n);try{let e=Me(s.text,t());const n=JSON.parse(e);x2(o,n)}catch(t){e.error("error while parsing actor properties text",t)}};function x2(e,t){if(e.properties==null)e.properties=t;else for(let n in t)e.properties[n]=t[n]}const O2=function(t,n){const s=vo(t),o=document.getElementById(n.text);try{const t=o.innerHTML,e=JSON.parse(t);e.properties&&x2(s,e.properties),e.links&&Cl(s,e.links)}catch(t){e.error("error while parsing actor details text",t)}},iz=function(e,t){return e!==void 0&&e.properties!==void 0?e.properties[t]:void 0},g2=function(e){if(Array.isArray(e))e.forEach(function(e){g2(e)});else switch(e.type){case"sequenceIndex":Ie.push({from:void 0,to:void 0,message:{start:e.sequenceIndex,step:e.sequenceIndexStep,visible:e.sequenceVisible},wrap:!1,type:e.signalType});break;case"addParticipant":vl(e.actor,e.actor,e.description,"participant");break;case"addActor":vl(e.actor,e.actor,e.description,"actor");break;case"activeStart":A(e.actor,void 0,void 0,e.signalType);break;case"activeEnd":A(e.actor,void 0,void 0,e.signalType);break;case"addNote":S2(e.actor,e.placement,e.text);break;case"addLinks":k2(e.actor,e.text);break;case"addALink":ez(e.actor,e.text);break;case"addProperties":C2(e.actor,e.text);break;case"addDetails":O2(e.actor,e.text);break;case"addMessage":A(e.from,e.to,e.msg,e.signalType);break;case"loopStart":A(void 0,void 0,e.loopText,e.signalType);break;case"loopEnd":A(void 0,void 0,void 0,e.signalType);break;case"rectStart":A(void 0,void 0,e.color,e.signalType);break;case"rectEnd":A(void 0,void 0,void 0,e.signalType);break;case"optStart":A(void 0,void 0,e.optText,e.signalType);break;case"optEnd":A(void 0,void 0,void 0,e.signalType);break;case"altStart":A(void 0,void 0,e.altText,e.signalType);break;case"else":A(void 0,void 0,e.altText,e.signalType);break;case"altEnd":A(void 0,void 0,void 0,e.signalType);break;case"setAccTitle":Oe(e.text);break;case"parStart":A(void 0,void 0,e.parText,e.signalType);break;case"and":A(void 0,void 0,e.parText,e.signalType);break;case"parEnd":A(void 0,void 0,void 0,e.signalType);break;case"criticalStart":A(void 0,void 0,e.criticalText,e.signalType);break;case"option":A(void 0,void 0,e.optionText,e.signalType);break;case"criticalEnd":A(void 0,void 0,void 0,e.signalType);break;case"breakStart":A(void 0,void 0,e.breakText,e.signalType);break;case"breakEnd":A(void 0,void 0,void 0,e.signalType);break}},p2={addActor:vl,addMessage:LT,addSignal:A,addLinks:k2,addDetails:O2,addProperties:C2,autoWrap:ps,setWrap:UT,enableSequenceNumbers:VT,disableSequenceNumbers:$T,showSequenceNumbers:WT,getMessages:PT,getActors:HT,getActor:vo,getActorKeys:BT,getActorProperty:iz,getAccTitle:Fe,getDiagramTitle:yt,setDiagramTitle:pt,parseDirective:zT,getConfig:()=>t().sequence,clear:qT,parseMessage:YT,LINETYPE:fo,ARROWTYPE:XT,PLACEMENT:QT,addNote:S2,setAccTitle:Oe,apply:g2,setAccDescription:De,getAccDescription:Pe};let El=[];const lz=e=>{El.push(e)},m2=()=>{El.forEach(e=>{e()}),El=[]},vr=function(e,t){const n=e.append("rect");return n.attr("x",t.x),n.attr("y",t.y),n.attr("fill",t.fill),n.attr("stroke",t.stroke),n.attr("width",t.width),n.attr("height",t.height),n.attr("rx",t.rx),n.attr("ry",t.ry),t.class!==void 0&&n.attr("class",t.class),n},u2=(e,t)=>{lz(()=>{const n=document.querySelectorAll(e);if(n.length===0)return;n[0].addEventListener("mouseover",function(){bz("actor"+t+"_popup")}),n[0].addEventListener("mouseout",function(){jz("actor"+t+"_popup")})})},mz=function(e,t,n,s,o){if(t.links===void 0||t.links===null||Object.keys(t.links).length===0)return{height:0,width:0};const d=t.links,u=t.actorCnt,i=t.rectData;var c,l,h,p,f="none";o&&(f="block !important");const r=e.append("g");r.attr("id","actor"+u+"_popup"),r.attr("class","actorPopupMenu"),r.attr("display",f),u2("#actor"+u+"_popup",u),h="",i.class!==void 0&&(h=" "+i.class);let m=i.width>n?i.width:n;const a=r.append("rect");if(a.attr("class","actorPopupMenuPanel"+h),a.attr("x",i.x),a.attr("y",i.height),a.attr("fill",i.fill),a.attr("stroke",i.stroke),a.attr("width",m),a.attr("height",i.height),a.attr("rx",i.rx),a.attr("ry",i.ry),d!=null){c=20;for(let e in d)l=r.append("a"),p=ht(d[e]),l.attr("xlink:href",p),l.attr("target","_blank"),Bz(s)(e,l,i.x+10,i.height+c,m,20,{class:"actor"},s),c+=30}return a.attr("height",c),{height:i.height+c,width:m}},d2=function(e,t,n,s){const o=e.append("image");o.attr("x",t),o.attr("y",n);var i=ht(s);o.attr("xlink:href",i)},l2=function(e,t,n,s){const o=e.append("use");o.attr("x",t),o.attr("y",n);var i=ht(s);o.attr("xlink:href","#"+i)},gz=function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = 'block'; }"},vz=function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = 'none'; }"},bz=function(e){var t=document.getElementById(e);t!=null&&(t.style.display="block")},jz=function(e){var t=document.getElementById(e);t!=null&&(t.style.display="none")},us=function(e,t){let o=0,n=0;const r=t.text.split(h.lineBreakRegex);let a=[],i=0,s=()=>t.y;if(t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0)switch(t.valign){case"top":case"start":s=()=>Math.round(t.y+t.textMargin);break;case"middle":case"center":s=()=>Math.round(t.y+(o+n+t.textMargin)/2);break;case"bottom":case"end":s=()=>Math.round(t.y+(o+n+2*t.textMargin)-t.textMargin);break}if(t.anchor!==void 0&&t.textMargin!==void 0&&t.width!==void 0)switch(t.anchor){case"left":case"start":t.x=Math.round(t.x+t.textMargin),t.anchor="start",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"middle":case"center":t.x=Math.round(t.x+t.width/2),t.anchor="middle",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"right":case"end":t.x=Math.round(t.x+t.width-t.textMargin),t.anchor="end",t.dominantBaseline="middle",t.alignmentBaseline="middle";break}for(let[d,l]of r.entries()){t.textMargin!==void 0&&t.textMargin===0&&t.fontSize!==void 0&&(i=d*t.fontSize);const c=e.append("text");if(c.attr("x",t.x),c.attr("y",s()),t.anchor!==void 0&&c.attr("text-anchor",t.anchor).attr("dominant-baseline",t.dominantBaseline).attr("alignment-baseline",t.alignmentBaseline),t.fontFamily!==void 0&&c.style("font-family",t.fontFamily),t.fontSize!==void 0&&c.style("font-size",t.fontSize),t.fontWeight!==void 0&&c.style("font-weight",t.fontWeight),t.fill!==void 0&&c.attr("fill",t.fill),t.class!==void 0&&c.attr("class",t.class),t.dy!==void 0?c.attr("dy",t.dy):i!==0&&c.attr("dy",i),t.tspan){const e=c.append("tspan");e.attr("x",t.x),t.fill!==void 0&&e.attr("fill",t.fill),e.text(l)}else c.text(l);t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0&&(n+=(c._groups||c)[0][0].getBBox().height,o=n),a.push(c)}return a},c2=function(e,t){function s(e,t,n,s,o){return e+","+t+" "+(e+n)+","+t+" "+(e+n)+","+(t+s-o)+" "+(e+n-o*1.2)+","+(t+s)+" "+e+","+(t+s)}const n=e.append("polygon");return n.attr("points",s(t.x,t.y,t.width,t.height,7)),n.attr("class","labelBox"),t.y=t.y+t.height/2,us(e,t),n};let ct=-1;const a2=(e,t)=>{if(!e.selectAll)return;e.selectAll(".actor-line").attr("class","200").attr("y2",t-55)},xz=function(e,t,n){const a=t.x+t.width/2,r=e.append("g");var i,o=r;t.y===0&&(ct++,o.append("line").attr("id","actor"+ct).attr("x1",a).attr("y1",5).attr("x2",a).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),o=r.append("g"),t.actorCnt=ct,t.links!=null&&(o.attr("id","root-"+ct),u2("#root-"+ct,ct)));const s=ur();i="actor",t.properties!=null&&t.properties.class?i=t.properties.class:s.fill="#eaeaea",s.x=t.x,s.y=t.y,s.width=t.width,s.height=t.height,s.class=i,s.rx=3,s.ry=3;const c=vr(o,s);if(t.rectData=s,t.properties!=null&&t.properties.icon){const e=t.properties.icon.trim();e.charAt(0)==="@"?l2(o,s.x+s.width-20,s.y+10,e.substr(1)):d2(o,s.x+s.width-20,s.y+10,e)}i2(n)(t.description,o,s.x,s.y,s.width,s.height,{class:"actor"},n);let l=t.height;if(c.node){const e=c.node().getBBox();t.height=e.height,l=e.height}return l},Cz=function(e,t,n){const o=t.x+t.width/2;t.y===0&&(ct++,e.append("line").attr("id","actor"+ct).attr("x1",o).attr("y1",80).attr("x2",o).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const i=e.append("g");i.attr("class","actor-man");const s=ur();s.x=t.x,s.y=t.y,s.fill="#eaeaea",s.width=t.width,s.height=t.height,s.class="actor",s.rx=3,s.ry=3,i.append("line").attr("id","actor-man-torso"+ct).attr("x1",o).attr("y1",t.y+25).attr("x2",o).attr("y2",t.y+45),i.append("line").attr("id","actor-man-arms"+ct).attr("x1",o-18).attr("y1",t.y+33).attr("x2",o+18).attr("y2",t.y+33),i.append("line").attr("x1",o-18).attr("y1",t.y+60).attr("x2",o).attr("y2",t.y+45),i.append("line").attr("x1",o).attr("y1",t.y+45).attr("x2",o+16).attr("y2",t.y+60);const a=i.append("circle");a.attr("cx",t.x+t.width/2),a.attr("cy",t.y+10),a.attr("r",15),a.attr("width",t.width),a.attr("height",t.height);const r=i.node().getBBox();return t.height=r.height,i2(n)(t.description,i,s.x,s.y+35,s.width,s.height,{class:"actor"},n),t.height},Ez=function(e,t,n){switch(t.type){case"actor":return Cz(e,t,n);case"participant":return xz(e,t,n)}},kz=function(e){return e.append("g")},Az=function(e,t,n,s,o){const i=ur(),a=t.anchored;i.x=t.startx,i.y=t.starty,i.class="activation"+o%3,i.width=t.stopx-t.startx,i.height=n-t.starty,vr(a,i)},Sz=function(e,t,n,s){const{boxMargin:c,boxTextMargin:i,labelBoxHeight:f,labelBoxWidth:h,messageFontFamily:l,messageFontSize:d,messageFontWeight:u}=s,a=e.append("g"),r=function(e,t,n,s){return a.append("line").attr("x1",e).attr("y1",t).attr("x2",n).attr("y2",s).attr("class","loopLine")};r(t.startx,t.starty,t.stopx,t.starty),r(t.stopx,t.starty,t.stopx,t.stopy),r(t.startx,t.stopy,t.stopx,t.stopy),r(t.startx,t.starty,t.startx,t.stopy),t.sections!==void 0&&t.sections.forEach(function(e){r(t.startx,e.y,t.stopx,e.y).style("stroke-dasharray","3, 3")});let o=Rl();o.text=n,o.x=t.startx,o.y=t.starty,o.fontFamily=l,o.fontSize=d,o.fontWeight=u,o.anchor="middle",o.valign="middle",o.tspan=!1,o.width=h||50,o.height=f||20,o.textMargin=i,o.class="labelText",c2(a,o),o=Rl(),o.text=t.title,o.x=t.startx+h/2+(t.stopx-t.startx)/2,o.y=t.starty+c+i,o.anchor="middle",o.valign="middle",o.textMargin=i,o.class="loopText",o.fontFamily=l,o.fontSize=d,o.fontWeight=u,o.wrap=!0;let m=us(a,o);return t.sectionTitles!==void 0&&t.sectionTitles.forEach(function(e,n){if(e.message){o.text=e.message,o.x=t.startx+(t.stopx-t.startx)/2,o.y=t.sections[n].y+c+i,o.class="loopText",o.anchor="middle",o.valign="middle",o.tspan=!1,o.fontFamily=l,o.fontSize=d,o.fontWeight=u,o.wrap=t.wrap,m=us(a,o);let s=Math.round(m.map(e=>(e._groups||e)[0][0].getBBox().height).reduce((e,t)=>e+t));t.sections[n].height+=s-(c+i)}}),t.height=Math.round(t.stopy-t.starty),a},Mz=function(e,t){const n=vr(e,{x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,class:"rect"});n.lower()},Fz=function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},Tz=function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},zz=function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},Dz=function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},Nz=function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Lz=function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},Rz=function(e){const t=e.append("defs"),n=t.append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5);n.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},Rl=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},ur=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},i2=function(){function n(t,n,s,o,i,a,r){const c=n.append("text").attr("x",s+i/2).attr("y",o+a/2+5).style("text-anchor","middle").text(t);e(c,r)}function t(t,n,s,o,i,a,r,c){const{actorFontSize:l,actorFontFamily:m,actorFontWeight:f}=c;let u=l&&l.replace?l.replace("px",""):l;const d=t.split(h.lineBreakRegex);for(let t=0;t<d.length;t++){const h=t*u-u*(d.length-1)/2,c=n.append("text").attr("x",s+i/2).attr("y",o).style("text-anchor","middle").style("font-size",l).style("font-weight",f).style("font-family",m);c.append("tspan").attr("x",s+i/2).attr("dy",h).text(d[t]),c.attr("y",o+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),e(c,r)}}function s(n,s,o,i,a,r,c,l){const d=s.append("switch"),h=d.append("foreignObject").attr("x",o).attr("y",i).attr("width",a).attr("height",r),u=h.append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,d,o,i,a,r,c,l),e(u,c)}function e(e,t){for(const n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),Bz=function(){function n(t,n,s,o,i,a,r){const c=n.append("text").attr("x",s).attr("y",o).style("text-anchor","start").text(t);e(c,r)}function t(t,n,s,o,i,a,r,c){const{actorFontSize:l,actorFontFamily:u,actorFontWeight:m}=c,d=t.split(h.lineBreakRegex);for(let t=0;t<d.length;t++){const c=t*l-l*(d.length-1)/2,i=n.append("text").attr("x",s).attr("y",o).style("text-anchor","start").style("font-size",l).style("font-weight",m).style("font-family",u);i.append("tspan").attr("x",s).attr("dy",c).text(d[t]),i.attr("y",o+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),e(i,r)}}function s(n,s,o,i,a,r,c,l){const d=s.append("switch"),h=d.append("foreignObject").attr("x",o).attr("y",i).attr("width",a).attr("height",r),u=h.append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,d,o,i,a,r,c,l),e(u,c)}function e(e,t){for(const n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),C={drawRect:vr,drawText:us,drawLabel:c2,drawActor:Ez,drawPopup:mz,drawImage:d2,drawEmbeddedImage:l2,anchorElement:kz,drawActivation:Az,drawLoop:Sz,drawBackgroundRect:Mz,insertArrowHead:Dz,insertArrowFilledHead:Nz,insertSequenceNumber:Lz,insertArrowCrossHead:Rz,insertDatabaseIcon:Fz,insertComputerIcon:Tz,insertClockIcon:zz,getTextObj:Rl,getNoteRect:ur,popupMenu:gz,popdownMenu:vz,fixLifeLineHeights:a2,sanitizeUrl:ht};let n={};const a={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(e=>e.height||0))+(this.loops.length===0?0:this.loops.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.messages.length===0?0:this.messages.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.notes.length===0?0:this.notes.map(e=>e.height||0).reduce((e,t)=>e+t))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(e){this.actors.push(e)},addLoop:function(e){this.loops.push(e)},addMessage:function(e){this.messages.push(e)},addNote:function(e){this.notes.push(e)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,n2(t())},updateVal:function(e,t,n,s){e[t]===void 0?e[t]=n:e[t]=s(n,e[t])},updateBounds:function(e,t,s,o){const i=this;let r=0;function c(c){return function(d){r++;const u=i.sequenceItems.length-r+1;i.updateVal(d,"starty",t-u*n.boxMargin,Math.min),i.updateVal(d,"stopy",o+u*n.boxMargin,Math.max),i.updateVal(a.data,"startx",e-u*n.boxMargin,Math.min),i.updateVal(a.data,"stopx",s+u*n.boxMargin,Math.max),c==="activation"||(i.updateVal(d,"startx",e-u*n.boxMargin,Math.min),i.updateVal(d,"stopx",s+u*n.boxMargin,Math.max),i.updateVal(a.data,"starty",t-u*n.boxMargin,Math.min),i.updateVal(a.data,"stopy",o+u*n.boxMargin,Math.max))}}this.sequenceItems.forEach(c()),this.activations.forEach(c("activation"))},insert:function(e,t,n,s){const o=Math.min(e,n),i=Math.max(e,n),r=Math.min(t,s),c=Math.max(t,s);this.updateVal(a.data,"startx",o,Math.min),this.updateVal(a.data,"starty",r,Math.min),this.updateVal(a.data,"stopx",i,Math.max),this.updateVal(a.data,"stopy",c,Math.max),this.updateBounds(o,r,i,c)},newActivation:function(e,t,s){const o=s[e.from.actor],a=ir(e.from.actor).length||0,i=o.x+o.width/2+(a-1)*n.activationWidth/2;this.activations.push({startx:i,starty:this.verticalPos+2,stopx:i+n.activationWidth,stopy:void 0,actor:e.from.actor,anchored:C.anchorElement(t)})},endActivation:function(e){const t=this.activations.map(function(e){return e.actor}).lastIndexOf(e.from.actor);return this.activations.splice(t,1)[0]},createLoop:function(e={message:void 0,wrap:!1,width:void 0},t){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:e.message,wrap:e.wrap,width:e.width,height:0,fill:t}},newLoop:function(e={message:void 0,wrap:!1,width:void 0},t){this.sequenceItems.push(this.createLoop(e,t))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(e){const t=this.sequenceItems.pop();t.sections=t.sections||[],t.sectionTitles=t.sectionTitles||[],t.sections.push({y:a.getVerticalPos(),height:0}),t.sectionTitles.push(e),this.sequenceItems.push(t)},bumpVerticalPos:function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},Uz=function(e,t){a.bumpVerticalPos(n.boxMargin),t.height=n.boxMargin,t.starty=a.getVerticalPos();const o=C.getNoteRect();o.x=t.startx,o.y=t.starty,o.width=t.width||n.width,o.class="note";const r=e.append("g"),c=C.drawRect(r,o),s=C.getTextObj();s.x=t.startx,s.y=t.starty,s.width=o.width,s.dy="1em",s.text=t.message,s.class="noteText",s.fontFamily=n.noteFontFamily,s.fontSize=n.noteFontSize,s.fontWeight=n.noteFontWeight,s.anchor=n.noteAlign,s.textMargin=n.noteMargin,s.valign="center";const l=us(r,s),i=Math.round(l.map(e=>(e._groups||e)[0][0].getBBox().height).reduce((e,t)=>e+t));c.attr("height",i+2*n.noteMargin),t.height+=i+2*n.noteMargin,a.bumpVerticalPos(i+2*n.noteMargin),t.stopy=t.starty+i+2*n.noteMargin,t.stopx=t.startx+o.width,a.insert(t.startx,t.starty,t.stopx,t.stopy),a.models.addNote(t)},ns=e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),Xn=e=>({fontFamily:e.noteFontFamily,fontSize:e.noteFontSize,fontWeight:e.noteFontWeight}),Wl=e=>({fontFamily:e.actorFontFamily,fontSize:e.actorFontSize,fontWeight:e.actorFontWeight});function Gz(e,t){a.bumpVerticalPos(10);const{startx:i,stopx:r,message:l}=t,u=h.splitBreaks(l).length,c=f.calculateTextDimensions(l,ns(n)),d=c.height/u;t.height+=d,a.bumpVerticalPos(d);let o,s=c.height-10;const m=c.width;if(i===r){o=a.getVerticalPos()+s,n.rightAngles||(s+=n.boxMargin,o=a.getVerticalPos()+s),s+=30;const e=Math.max(m/2,n.width/2);a.insert(i-e,a.getVerticalPos()-10+s,r+e,a.getVerticalPos()+30+s)}else s+=n.boxMargin,o=a.getVerticalPos()+s,a.insert(i,o-10,r,o);return a.bumpVerticalPos(s),t.height+=s,t.stopy=t.starty+t.height,a.insert(t.fromBounds,t.starty,t.toBounds,t.stopy),o}const Xz=function(e,t,s,o){const{startx:r,stopx:d,starty:h,message:u,type:c,sequenceIndex:m,sequenceVisible:p}=t,g=f.calculateTextDimensions(u,ns(n)),a=C.getTextObj();a.x=r,a.y=h+10,a.width=d-r,a.class="messageText",a.dy="1em",a.text=u,a.fontFamily=n.messageFontFamily,a.fontSize=n.messageFontSize,a.fontWeight=n.messageFontWeight,a.anchor=n.messageAlign,a.valign="center",a.textMargin=n.wrapPadding,a.tspan=!1,us(e,a);const v=g.width;let i;r===d?n.rightAngles?i=e.append("path").attr("d",`M  ${r},${s} H ${r+Math.max(n.width/2,v/2)} V ${s+25} H ${r}`):i=e.append("path").attr("d","M "+r+","+s+" C "+(r+60)+","+(s-10)+" "+(r+60)+","+(s+30)+" "+r+","+(s+20)):(i=e.append("line"),i.attr("x1",r),i.attr("y1",s),i.attr("x2",d),i.attr("y2",s)),c===o.db.LINETYPE.DOTTED||c===o.db.LINETYPE.DOTTED_CROSS||c===o.db.LINETYPE.DOTTED_POINT||c===o.db.LINETYPE.DOTTED_OPEN?(i.style("stroke-dasharray","3, 3"),i.attr("class","messageLine1")):i.attr("class","messageLine0");let l="";n.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),i.attr("stroke-width",2),i.attr("stroke","none"),i.style("fill","none"),(c===o.db.LINETYPE.SOLID||c===o.db.LINETYPE.DOTTED)&&i.attr("marker-end","url("+l+"#arrowhead)"),(c===o.db.LINETYPE.SOLID_POINT||c===o.db.LINETYPE.DOTTED_POINT)&&i.attr("marker-end","url("+l+"#filled-head)"),(c===o.db.LINETYPE.SOLID_CROSS||c===o.db.LINETYPE.DOTTED_CROSS)&&i.attr("marker-end","url("+l+"#crosshead)"),(p||n.showSequenceNumbers)&&(i.attr("marker-start","url("+l+"#sequencenumber)"),e.append("text").attr("x",r).attr("y",s+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(m))},Ul=function(e,t,s,o,i,r){if(i.hideUnusedParticipants===!0){const e=new Set;r.forEach(t=>{e.add(t.from),e.add(t.to)}),s=s.filter(t=>e.has(t))}let l=0,d=0,c=0;for(const r of s){const i=t[r];i.width=i.width||n.width,i.height=Math.max(i.height||n.height,n.height),i.margin=i.margin||n.actorMargin,i.x=l+d,i.y=o;const u=C.drawActor(e,i,n);c=Math.max(c,u),a.insert(i.x,o,i.x+i.width,i.height),l+=i.width,d+=i.margin,a.models.addActor(i)}a.bumpVerticalPos(c)},s2=function(e,t,s,o){let i=0,a=0;for(const l of s){const r=t[l],d=iD(r),c=C.drawPopup(e,r,d,n,n.forceMenus,o);c.height>i&&(i=c.height),c.width+r.x>a&&(a=c.width+r.x)}return{maxHeight:i,maxWidth:a}},n2=function(e){V(n,e),e.fontFamily&&(n.actorFontFamily=n.noteFontFamily=n.messageFontFamily=e.fontFamily),e.fontSize&&(n.actorFontSize=n.noteFontSize=n.messageFontSize=e.fontSize),e.fontWeight&&(n.actorFontWeight=n.noteFontWeight=n.messageFontWeight=e.fontWeight)},ir=function(e){return a.activations.filter(function(t){return t.actor===e})},t2=function(e,t){const n=t[e],s=ir(e),o=s.reduce(function(e,t){return Math.min(e,t.startx)},n.x+n.width/2),i=s.reduce(function(e,t){return Math.max(e,t.stopx)},n.x+n.width/2);return[o,i]};function lt(t,s,o,i,r){a.bumpVerticalPos(o);let c=i;if(s.id&&s.message&&t[s.id]){const o=t[s.id].width,a=ns(n);s.message=f.wrapLabel(`[${s.message}]`,o-2*n.wrapPadding,a),s.width=o,s.wrap=!0;const l=f.calculateTextDimensions(s.message,a),r=Math.max(l.height,n.labelBoxHeight);c=i+r,e.debug(`${r} - ${s.message}`)}r(s),a.bumpVerticalPos(c)}const sD=function(s,o,r,c){const{securityLevel:p,sequence:z}=t();n=z;let w;p==="sandbox"&&(w=i("#i"+o));const T=i(p==="sandbox"?w.nodes()[0].contentDocument.body:"body"),F=p==="sandbox"?w.nodes()[0].contentDocument:document;a.init(),e.debug(c.db);const l=p==="sandbox"?T.select(`[id="${o}"]`):i(`[id="${o}"]`),h=c.db.getActors(),b=c.db.getActorKeys(),f=c.db.getMessages(),y=c.db.getDiagramTitle(),x=oD(h,f,c);n.height=aD(h,x),C.insertComputerIcon(l),C.insertDatabaseIcon(l),C.insertClockIcon(l),Ul(l,h,b,0,n,f);const d=lD(f,h,x,c);C.insertArrowHead(l),C.insertArrowCrossHead(l),C.insertArrowFilledHead(l),C.insertSequenceNumber(l);function S(e,t){const s=a.endActivation(e);s.starty+18>t&&(s.starty=t-6,t+=12),C.drawActivation(l,s,t,n,ir(e.from.actor).length),a.insert(s.startx,t-10,s.stopx,t)}let m=1,O=1;const k=[];f.forEach(function(t){let s,i,o;switch(t.type){case c.db.LINETYPE.NOTE:i=t.noteModel,Uz(l,i);break;case c.db.LINETYPE.ACTIVE_START:a.newActivation(t,l,h);break;case c.db.LINETYPE.ACTIVE_END:S(t,a.getVerticalPos());break;case c.db.LINETYPE.LOOP_START:lt(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.LOOP_END:s=a.endLoop(),C.drawLoop(l,s,"loop",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.RECT_START:lt(d,t,n.boxMargin,n.boxMargin,e=>a.newLoop(void 0,e.message));break;case c.db.LINETYPE.RECT_END:s=a.endLoop(),C.drawBackgroundRect(l,s),a.models.addLoop(s),a.bumpVerticalPos(s.stopy-a.getVerticalPos());break;case c.db.LINETYPE.OPT_START:lt(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.OPT_END:s=a.endLoop(),C.drawLoop(l,s,"opt",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.ALT_START:lt(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.ALT_ELSE:lt(d,t,n.boxMargin+n.boxTextMargin,n.boxMargin,e=>a.addSectionToLoop(e));break;case c.db.LINETYPE.ALT_END:s=a.endLoop(),C.drawLoop(l,s,"alt",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.PAR_START:lt(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.PAR_AND:lt(d,t,n.boxMargin+n.boxTextMargin,n.boxMargin,e=>a.addSectionToLoop(e));break;case c.db.LINETYPE.PAR_END:s=a.endLoop(),C.drawLoop(l,s,"par",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.AUTONUMBER:m=t.message.start||m,O=t.message.step||O,t.message.visible?c.db.enableSequenceNumbers():c.db.disableSequenceNumbers();break;case c.db.LINETYPE.CRITICAL_START:lt(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.CRITICAL_OPTION:lt(d,t,n.boxMargin+n.boxTextMargin,n.boxMargin,e=>a.addSectionToLoop(e));break;case c.db.LINETYPE.CRITICAL_END:s=a.endLoop(),C.drawLoop(l,s,"critical",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.BREAK_START:lt(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.BREAK_END:s=a.endLoop(),C.drawLoop(l,s,"break",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;default:try{o=t.msgModel,o.starty=a.getVerticalPos(),o.sequenceIndex=m,o.sequenceVisible=c.db.showSequenceNumbers();const e=Gz(l,o);k.push({messageModel:o,lineStartY:e}),a.models.addMessage(o)}catch(t){e.error("error while drawing message",t)}}[c.db.LINETYPE.SOLID_OPEN,c.db.LINETYPE.DOTTED_OPEN,c.db.LINETYPE.SOLID,c.db.LINETYPE.DOTTED,c.db.LINETYPE.SOLID_CROSS,c.db.LINETYPE.DOTTED_CROSS,c.db.LINETYPE.SOLID_POINT,c.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(m=m+O)}),k.forEach(e=>Xz(l,e.messageModel,e.lineStartY,c)),n.mirrorActors&&(a.bumpVerticalPos(n.boxMargin*2),Ul(l,h,b,a.getVerticalPos(),n,f),a.bumpVerticalPos(n.boxMargin),a2(l,a.getVerticalPos()));const g=s2(l,h,b,F),{bounds:u}=a.getBounds();e.debug("For line height fix Querying: #"+o+" .actor-line");const M=xl("#"+o+" .actor-line");M.attr("y2",u.stopy);let _=u.stopy-u.starty;_<g.maxHeight&&(_=g.maxHeight);let v=_+2*n.diagramMarginY;n.mirrorActors&&(v=v-n.boxMargin+n.bottomMarginAdj);let j=u.stopx-u.startx;j<g.maxWidth&&(j=g.maxWidth);const E=j+2*n.diagramMarginX;y&&l.append("text").text(y).attr("x",(u.stopx-u.startx)/2-2*n.diagramMarginX).attr("y",-25),Ve(l,v,E,n.useMaxWidth);const A=y?40:0;l.attr("viewBox",u.startx-n.diagramMarginX+" -"+(n.diagramMarginY+A)+" "+E+" "+(v+A)),e.debug(`models:`,a.models)};function oD(t,s,o){const i={};return s.forEach(function(e){if(t[e.to]&&t[e.from]){const s=t[e.to];if(e.placement===o.db.PLACEMENT.LEFTOF&&!s.prevActor)return;if(e.placement===o.db.PLACEMENT.RIGHTOF&&!s.nextActor)return;const c=e.placement!==void 0,r=!c,l=c?Xn(n):ns(n),d=e.wrap?f.wrapLabel(e.message,n.width-2*n.wrapPadding,l):e.message,u=f.calculateTextDimensions(d,l),a=u.width+2*n.wrapPadding;r&&e.from===s.nextActor?i[e.to]=Math.max(i[e.to]||0,a):r&&e.from===s.prevActor?i[e.from]=Math.max(i[e.from]||0,a):r&&e.from===e.to?(i[e.from]=Math.max(i[e.from]||0,a/2),i[e.to]=Math.max(i[e.to]||0,a/2)):e.placement===o.db.PLACEMENT.RIGHTOF?i[e.from]=Math.max(i[e.from]||0,a):e.placement===o.db.PLACEMENT.LEFTOF?i[s.prevActor]=Math.max(i[s.prevActor]||0,a):e.placement===o.db.PLACEMENT.OVER&&(s.prevActor&&(i[s.prevActor]=Math.max(i[s.prevActor]||0,a/2)),s.nextActor&&(i[e.from]=Math.max(i[e.from]||0,a/2)))}}),e.debug("maxMessageWidthPerActor:",i),i}const iD=function(e){let t=0;const s=Wl(n);for(const i in e.links){const a=f.calculateTextDimensions(i,s),o=a.width+2*n.wrapPadding+2*n.boxMargin;t<o&&(t=o)}return t};function aD(e,t){let s=0;Object.keys(e).forEach(t=>{const o=e[t];o.wrap&&(o.description=f.wrapLabel(o.description,n.width-2*n.wrapPadding,Wl(n)));const i=f.calculateTextDimensions(o.description,Wl(n));o.width=o.wrap?n.width:Math.max(n.width,i.width+2*n.wrapPadding),o.height=o.wrap?Math.max(i.height,n.height):n.height,s=Math.max(s,o.height)});for(const o in t){const s=e[o];if(!s)continue;const i=e[s.nextActor];if(!i)continue;const a=t[o],r=a+n.actorMargin-s.width/2-i.width/2;s.margin=Math.max(r,n.actorMargin)}return Math.max(s,n.height)}const rD=function(t,s,o){const c=s[t.from].x,l=s[t.to].x,a=t.wrap&&t.message;let r=f.calculateTextDimensions(a?f.wrapLabel(t.message,n.width,Xn(n)):t.message,Xn(n));const i={width:a?n.width:Math.max(n.width,r.width+2*n.noteMargin),height:0,startx:s[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===o.db.PLACEMENT.RIGHTOF?(i.width=a?Math.max(n.width,r.width):Math.max(s[t.from].width/2+s[t.to].width/2,r.width+2*n.noteMargin),i.startx=c+(s[t.from].width+n.actorMargin)/2):t.placement===o.db.PLACEMENT.LEFTOF?(i.width=a?Math.max(n.width,r.width+2*n.noteMargin):Math.max(s[t.from].width/2+s[t.to].width/2,r.width+2*n.noteMargin),i.startx=c-i.width+(s[t.from].width-n.actorMargin)/2):t.to===t.from?(r=f.calculateTextDimensions(a?f.wrapLabel(t.message,Math.max(n.width,s[t.from].width),Xn(n)):t.message,Xn(n)),i.width=a?Math.max(n.width,s[t.from].width):Math.max(s[t.from].width,n.width,r.width+2*n.noteMargin),i.startx=c+(s[t.from].width-i.width)/2):(i.width=Math.abs(c+s[t.from].width/2-(l+s[t.to].width/2))+n.actorMargin,i.startx=c<l?c+s[t.from].width/2-n.actorMargin/2:l+s[t.to].width/2-n.actorMargin/2),a&&(i.message=f.wrapLabel(t.message,i.width-2*n.wrapPadding,Xn(n))),e.debug(`NM:[${i.startx},${i.stopx},${i.starty},${i.stopy}:${i.width},${i.height}=${t.message}]`),i},cD=function(e,t,s){let a=!1;if([s.db.LINETYPE.SOLID_OPEN,s.db.LINETYPE.DOTTED_OPEN,s.db.LINETYPE.SOLID,s.db.LINETYPE.DOTTED,s.db.LINETYPE.SOLID_CROSS,s.db.LINETYPE.DOTTED_CROSS,s.db.LINETYPE.SOLID_POINT,s.db.LINETYPE.DOTTED_POINT].includes(e.type)&&(a=!0),!a)return{};const o=t2(e.from,t),i=t2(e.to,t),r=o[0]<=i[0]?1:0,c=o[0]<i[0]?0:1,l=[...o,...i],d=Math.abs(i[c]-o[r]);e.wrap&&e.message&&(e.message=f.wrapLabel(e.message,Math.max(d+2*n.wrapPadding,n.width),ns(n)));const u=f.calculateTextDimensions(e.message,ns(n));return{width:Math.max(e.wrap?0:u.width+2*n.wrapPadding,d+2*n.wrapPadding,n.width),height:0,startx:o[r],stopx:i[c],starty:0,stopy:0,message:e.message,type:e.type,wrap:e.wrap,fromBounds:Math.min.apply(null,l),toBounds:Math.max.apply(null,l)}},lD=function(t,s,o,i){const d={},l=[];let r,u,c;return t.forEach(function(e){switch(e.id=f.random({length:10}),e.type){case i.db.LINETYPE.LOOP_START:case i.db.LINETYPE.ALT_START:case i.db.LINETYPE.OPT_START:case i.db.LINETYPE.PAR_START:case i.db.LINETYPE.CRITICAL_START:case i.db.LINETYPE.BREAK_START:l.push({id:e.id,msg:e.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case i.db.LINETYPE.ALT_ELSE:case i.db.LINETYPE.PAR_AND:case i.db.LINETYPE.CRITICAL_OPTION:e.message&&(r=l.pop(),d[r.id]=r,d[e.id]=r,l.push(r));break;case i.db.LINETYPE.LOOP_END:case i.db.LINETYPE.ALT_END:case i.db.LINETYPE.OPT_END:case i.db.LINETYPE.PAR_END:case i.db.LINETYPE.CRITICAL_END:case i.db.LINETYPE.BREAK_END:r=l.pop(),d[r.id]=r;break;case i.db.LINETYPE.ACTIVE_START:{const t=s[e.from?e.from.actor:e.to.actor],i=ir(e.from?e.from.actor:e.to.actor).length,o=t.x+t.width/2+(i-1)*n.activationWidth/2,r={startx:o,stopx:o+n.activationWidth,actor:e.from.actor,enabled:!0};a.activations.push(r)}break;case i.db.LINETYPE.ACTIVE_END:{const t=a.activations.map(e=>e.actor).lastIndexOf(e.from.actor);delete a.activations.splice(t,1)[0]}break}const t=e.placement!==void 0;t?(u=rD(e,s,i),e.noteModel=u,l.forEach(e=>{r=e,r.from=Math.min(r.from,u.startx),r.to=Math.max(r.to,u.startx+u.width),r.width=Math.max(r.width,Math.abs(r.from-r.to))-n.labelBoxWidth})):(c=cD(e,s,i),e.msgModel=c,c.startx&&c.stopx&&l.length>0&&l.forEach(t=>{if(r=t,c.startx===c.stopx){const t=s[e.from],o=s[e.to];r.from=Math.min(t.x-c.width/2,t.x-t.width/2,r.from),r.to=Math.max(o.x+c.width/2,o.x+t.width/2,r.to),r.width=Math.max(r.width,Math.abs(r.to-r.from))-n.labelBoxWidth}else r.from=Math.min(c.startx,r.from),r.to=Math.max(c.stopx,r.to),r.width=Math.max(r.width,c.width)-n.labelBoxWidth}))}),a.activations=[],e.debug("Loop type widths:",d),d},e2={bounds:a,drawActors:Ul,drawActorsPopup:s2,setConf:n2,draw:sD};sr=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},l=[1,2],y=[1,3],h=[1,5],n=[1,7],A=[2,5],k=[1,15],S=[1,17],c=[1,21],i=[1,22],d=[1,23],u=[1,24],o=[1,37],m=[1,25],f=[1,26],p=[1,27],g=[1,28],v=[1,29],b=[1,32],j=[1,33],a=[1,34],_=[1,35],w=[1,36],O=[1,39],x=[1,40],C=[1,41],E=[1,42],s=[1,38],z=[1,45],t=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],r=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],M=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],D=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],F={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(t,n,s,o,i,a){var l,d,u,c=a.length-1;switch(i){case 4:return o.setRootDoc(a[c]),a[c];case 5:this.$=[];break;case 6:a[c]!="nl"&&(a[c-1].push(a[c]),this.$=a[c-1]);break;case 7:case 8:this.$=a[c];break;case 9:this.$="nl";break;case 12:this.$=a[c];break;case 13:const e=a[c-1];e.description=o.trimColon(a[c]),this.$=e;break;case 14:this.$={stmt:"relation",state1:a[c-2],state2:a[c]};break;case 15:const t=o.trimColon(a[c]);this.$={stmt:"relation",state1:a[c-3],state2:a[c-1],description:t};break;case 19:this.$={stmt:"state",id:a[c-3],type:"default",description:"",doc:a[c-1]};break;case 20:d=a[c],l=a[c-2].trim(),a[c].match(":")&&(u=a[c].split(":"),d=u[0],l=[l,u[1]]),this.$={stmt:"state",id:d,type:"default",description:l};break;case 21:this.$={stmt:"state",id:a[c-3],type:"default",description:a[c-5],doc:a[c-1]};break;case 22:this.$={stmt:"state",id:a[c],type:"fork"};break;case 23:this.$={stmt:"state",id:a[c],type:"join"};break;case 24:this.$={stmt:"state",id:a[c],type:"choice"};break;case 25:this.$={stmt:"state",id:o.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:a[c-1].trim(),note:{position:a[c-2].trim(),text:a[c].trim()}};break;case 30:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 31:case 32:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:a[c-1].trim(),classes:a[c].trim()};break;case 35:this.$={stmt:"applyClass",id:a[c-1].trim(),styleClass:a[c].trim()};break;case 38:o.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:o.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:o.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:o.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:a[c].trim(),type:"default",description:""};break;case 46:this.$={stmt:"state",id:a[c-2].trim(),classes:[a[c].trim()],type:"default",description:""};break;case 47:this.$={stmt:"state",id:a[c-2].trim(),classes:[a[c].trim()],type:"default",description:""};break;case 50:o.parseDirective("%%{","open_directive");break;case 51:o.parseDirective(a[c],"type_directive");break;case 52:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 53:o.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:l,5:y,6:4,7:h,45:6,60:n},{1:[3]},{3:8,4:l,5:y,6:4,7:h,45:6,60:n},{3:9,4:l,5:y,6:4,7:h,45:6,60:n},{3:10,4:l,5:y,6:4,7:h,45:6,60:n},e([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],A,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:k,5:S,6:30,9:14,10:16,11:18,12:19,13:20,16:c,17:i,19:d,22:u,24:o,25:m,26:f,27:p,28:g,29:v,32:31,33:b,35:j,37:a,38:_,42:w,45:6,50:O,51:x,52:C,53:E,56:s,60:n},{47:43,48:[1,44],63:z},e([48,63],[2,51]),e(t,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:c,17:i,19:d,22:u,24:o,25:m,26:f,27:p,28:g,29:v,32:31,33:b,35:j,37:a,38:_,42:w,45:6,50:O,51:x,52:C,53:E,56:s,60:n},e(t,[2,8]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12],{14:[1,47],15:[1,48]}),e(t,[2,16]),{18:[1,49]},e(t,[2,18],{20:[1,50]}),{23:[1,51]},e(t,[2,22]),e(t,[2,23]),e(t,[2,24]),e(t,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},e(t,[2,28]),e(t,[2,29]),{34:[1,56]},{36:[1,57]},e(t,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},e(r,[2,44],{57:[1,61]}),e(r,[2,45],{57:[1,62]}),e(t,[2,38]),e(t,[2,39]),e(t,[2,40]),e(t,[2,41]),e(M,[2,36]),{49:63,62:[1,64]},e(M,[2,53]),e(t,[2,7]),e(t,[2,13]),{13:65,24:o,56:s},e(t,[2,17]),e(D,A,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},e(t,[2,30]),e(t,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:z},{63:[2,52]},e(t,[2,14],{14:[1,76]}),{4:k,5:S,6:30,9:14,10:16,11:18,12:19,13:20,16:c,17:i,19:d,21:[1,77],22:u,24:o,25:m,26:f,27:p,28:g,29:v,32:31,33:b,35:j,37:a,38:_,42:w,45:6,50:O,51:x,52:C,53:E,56:s,60:n},e(t,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},e(t,[2,33]),e(t,[2,34]),e(t,[2,35]),e(r,[2,46]),e(r,[2,47]),e(M,[2,37]),e(t,[2,15]),e(t,[2,19]),e(D,A,{8:81}),e(t,[2,26]),e(t,[2,27]),{4:k,5:S,6:30,9:14,10:16,11:18,12:19,13:20,16:c,17:i,19:d,21:[1,82],22:u,24:o,25:m,26:f,27:p,28:g,29:v,32:31,33:b,35:j,37:a,38:_,42:w,45:6,50:O,51:x,52:C,53:E,56:s,60:n},e(t,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},N=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return 41;case 1:return 50;case 2:return 51;case 3:return 52;case 4:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:break;case 11:break;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:break;case 17:return this.pushState("SCALE"),17;case 18:return 18;case 19:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 25:this.popState();break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 34:return this.pushState("SCALE"),17;case 35:return 18;case 36:this.popState();break;case 37:this.pushState("STATE");break;case 38:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),25;case 39:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),26;case 40:return this.popState(),n.yytext=n.yytext.slice(0,-10).trim(),27;case 41:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),25;case 42:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),26;case 43:return this.popState(),n.yytext=n.yytext.slice(0,-10).trim(),27;case 44:return 50;case 45:return 51;case 46:return 52;case 47:return 53;case 48:this.begin("STATE_STRING");break;case 49:return this.popState(),this.pushState("STATE_ID"),"AS";case 50:return this.popState(),"ID";case 51:this.popState();break;case 52:return"STATE_DESCR";case 53:return 19;case 54:this.popState();break;case 55:return this.popState(),this.pushState("struct"),20;case 56:break;case 57:return this.popState(),21;case 58:break;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 64:break;case 65:return"NOTE_TEXT";case 66:return this.popState(),"ID";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),n.yytext=n.yytext.substr(2).trim(),31;case 69:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),31;case 70:return 7;case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return n.yytext=n.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 79:return 5;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};return e}();F.lexer=N;function T(){this.yy={}}return T.prototype=F,F.Parser=T,new T}(),sr.parser=sr;const J0=sr,mD=(e,t)=>{var n;return((n=t?.state)==null?void 0:n.defaultRenderer)!=="dagre-wrapper"&&e.match(/^\s*stateDiagram/)!==null},fD=(e,t)=>{var n;return e.match(/^\s*stateDiagram-v2/)!==null||!!(e.match(/^\s*stateDiagram/)&&((n=t?.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper")},Z0="LR",gD="TB",tr="state",Zl="relation",jD="classDef",yD="applyClass",uo="default",Y0="divider",hd="[*]",q0="start",K0=hd,W0="end",$0="color",V0="fill",SD="bgFill",MD=",";function B0(){return{}}let I0=Z0,Wa=[],lo=B0();const L0=()=>({relations:[],states:{},documents:{}});let Ia={root:L0()},te=Ia.root,ro=0,D0=0;const ID={LINE:0,DOTTED_LINE:1},BD={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},Ta=e=>JSON.parse(JSON.stringify(e)),$D=function(e,t,n){O.parseDirective(this,e,t,n)},WD=t=>{e.info("Setting root doc",t),Wa=t},UD=()=>Wa,Aa=(e,t,n)=>{if(t.stmt===Zl)Aa(e,t.state1,!0),Aa(e,t.state2,!1);else if(t.stmt===tr&&t.id==="[*]"&&(t.id=n?e.id+"_start":e.id+"_end",t.start=n),t.doc){const s=[];let n=[],e;for(e=0;e<t.doc.length;e++)if(t.doc[e].type===Y0){const o=Ta(t.doc[e]);o.doc=Ta(n),s.push(o),n=[]}else n.push(t.doc[e]);if(s.length>0&&n.length>0){const e={stmt:tr,id:bh(),type:"divider",doc:Ta(n)};s.push(Ta(e)),t.doc=s}t.doc.forEach(e=>Aa(t,e,!0))}},qD=()=>(Aa({id:"root"},{id:"root",doc:Wa},!0),{id:"root",doc:Wa}),YD=t=>{let n;t.doc?n=t.doc:n=t,e.info(n),M0(!0),e.info("Extract",n),n.forEach(e=>{switch(e.stmt){case tr:pn(e.id,e.type,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles);break;case Zl:_0(e.state1,e.state2,e.description);break;case jD:j0(e.id,e.classes);break;case yD:Rd(e.id,e.styleClass);break}})},pn=function(n,s=uo,o=null,i=null,a=null,r=null,c=null,l=null){if(te.states[n]===void 0?(e.info("Adding state ",n,i),te.states[n]={id:n,descriptions:[],type:s,doc:o,note:a,classes:[],styles:[],textStyles:[]}):(te.states[n].doc||(te.states[n].doc=o),te.states[n].type||(te.states[n].type=s)),i&&(e.info("Setting state description",n,i),typeof i=="string"&&Nd(n,i.trim()),typeof i=="object"&&i.forEach(e=>Nd(n,e.trim()))),a&&(te.states[n].note=a,te.states[n].note.text=h.sanitizeText(te.states[n].note.text,t())),r){e.info("Setting state classes",n,r);const t=typeof r=="string"?[r]:r;t.forEach(e=>Rd(n,e.trim()))}if(c){e.info("Setting state styles",n,c);const t=typeof c=="string"?[c]:c;t.forEach(e=>mN(n,e.trim()))}if(l){e.info("Setting state styles",n,c);const t=typeof l=="string"?[l]:l;t.forEach(e=>fN(n,e.trim()))}},M0=function(e){Ia={root:L0()},te=Ia.root,ro=0,lo=B0(),e||Ne()},ao=function(e){return te.states[e]},ZD=function(){return te.states},JD=function(){e.info("Documents = ",Ia)},eN=function(){return te.relations};function Sd(e=""){let t=e;return e===hd&&(ro++,t=`${q0}${ro}`),t}function Md(e="",t=uo){return e===hd?q0:t}function sN(e=""){let t=e;return e===K0&&(ro++,t=`${W0}${ro}`),t}function oN(e="",t=uo){return e===K0?W0:t}function iN(e,n,s){let o=Sd(e.id),a=Md(e.id,e.type),i=Sd(n.id),r=Md(n.id,n.type);pn(o,a,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),pn(i,r,n.doc,n.description,n.note,n.classes,n.styles,n.textStyles),te.relations.push({id1:o,id2:i,relationTitle:h.sanitizeText(s,t())})}const _0=function(e,n,s){if(typeof e=="object")iN(e,n,s);else{const o=Sd(e),a=Md(e),i=sN(n),r=oN(n);pn(o,a),pn(i,r),te.relations.push({id1:o,id2:i,title:h.sanitizeText(s,t())})}},Nd=function(e,n){const s=te.states[e],o=n.startsWith(":")?n.replace(":","").trim():n;s.descriptions.push(h.sanitizeText(o,t()))},cN=function(e){return e.substring(0,1)===":"?e.substr(2).trim():e.trim()},lN=()=>(D0++,"divider-id-"+D0),j0=function(e,t=""){lo[e]===void 0&&(lo[e]={id:e,styles:[],textStyles:[]});const n=lo[e];t!=null&&t.split(MD).forEach(e=>{const t=e.replace(/([^;]*);/,"$1").trim();if(e.match($0)){const e=t.replace(V0,SD),s=e.replace($0,V0);n.textStyles.push(s)}n.styles.push(t)})},uN=function(){return lo},Rd=function(e,t){e.split(",").forEach(function(e){let n=ao(e);if(n===void 0){const t=e.trim();pn(t),n=ao(t)}n.classes.push(t)})},mN=function(e,t){const n=ao(e);n!==void 0&&n.textStyles.push(t)},fN=function(e,t){const n=ao(e);n!==void 0&&n.textStyles.push(t)},pN=()=>I0,gN=e=>{I0=e},vN=e=>e&&e[0]===":"?e.substr(1).trim():e.trim(),St={parseDirective:$D,getConfig:()=>t().state,addState:pn,clear:M0,getState:ao,getStates:ZD,getRelations:eN,getClasses:uN,getDirection:pN,addRelation:_0,getDividerId:lN,setDirection:gN,cleanupLabel:cN,lineType:ID,relationType:BD,logDocuments:JD,getRootDoc:UD,setRootDoc:WD,getRootDocV2:qD,extract:YD,trimColon:vN,getAccTitle:Fe,setAccTitle:Oe,getAccDescription:Pe,setAccDescription:De,addStyleClass:j0,setCssClass:Rd,addDescription:Nd,setDiagramTitle:pt,getDiagramTitle:yt},$d={},yN=(e,t)=>{$d[e]=t},_N=e=>$d[e],f0=()=>Object.keys($d),ON=()=>f0().length,xN={get:_N,set:yN,keys:f0,size:ON},CN=e=>e.append("circle").attr("class","start-state").attr("r",t().state.sizeUnit).attr("cx",t().state.padding+t().state.sizeUnit).attr("cy",t().state.padding+t().state.sizeUnit),EN=e=>e.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",t().state.textHeight).attr("class","divider").attr("x2",t().state.textHeight*2).attr("y1",0).attr("y2",0),kN=(e,n)=>{const s=e.append("text").attr("x",2*t().state.padding).attr("y",t().state.textHeight+2*t().state.padding).attr("font-size",t().state.fontSize).attr("class","state-title").text(n.id),o=s.node().getBBox();return e.insert("rect",":first-child").attr("x",t().state.padding).attr("y",t().state.padding).attr("width",o.width+2*t().state.padding).attr("height",o.height+2*t().state.padding).attr("rx",t().state.radius),s},AN=(e,n)=>{const d=function(e,n,s){const o=e.append("tspan").attr("x",2*t().state.padding).text(n);s||o.attr("dy",t().state.textHeight)},u=e.append("text").attr("x",2*t().state.padding).attr("y",t().state.textHeight+1.3*t().state.padding).attr("font-size",t().state.fontSize).attr("class","state-title").text(n.descriptions[0]),o=u.node().getBBox(),s=o.height,i=e.append("text").attr("x",t().state.padding).attr("y",s+t().state.padding*.4+t().state.dividerMargin+t().state.textHeight).attr("class","state-description");let a=!0,r=!0;n.descriptions.forEach(function(e){a||(d(i,e,r),r=!1),a=!1});const h=e.append("line").attr("x1",t().state.padding).attr("y1",t().state.padding+s+t().state.dividerMargin/2).attr("y2",t().state.padding+s+t().state.dividerMargin/2).attr("class","descr-divider"),c=i.node().getBBox(),l=Math.max(c.width,o.width);return h.attr("x2",l+3*t().state.padding),e.insert("rect",":first-child").attr("x",t().state.padding).attr("y",t().state.padding).attr("width",l+2*t().state.padding).attr("height",c.height+s+2*t().state.padding).attr("rx",t().state.radius),e},SN=(e,n,s)=>{const c=t().state.padding,d=2*t().state.padding,m=e.node().getBBox(),i=m.width,l=m.x,u=e.append("text").attr("x",0).attr("y",t().state.titleShift).attr("font-size",t().state.fontSize).attr("class","state-title").text(n.id),f=u.node().getBBox(),r=f.width+d;let o=Math.max(r,i);o===i&&(o=o+d);let a;const h=e.node().getBBox();n.doc,a=l-c,r>i&&(a=(i-o)/2+c),Math.abs(l-h.x)<c&&r>i&&(a=l-(r-i)/2);const p=1-t().state.textHeight;return e.insert("rect",":first-child").attr("x",a).attr("y",p).attr("class",s?"alt-composit":"composit").attr("width",o).attr("height",h.height+t().state.textHeight+t().state.titleShift+1).attr("rx","0"),u.attr("x",a+c),r<=i&&u.attr("x",l+(o-d)/2-r/2+c),e.insert("rect",":first-child").attr("x",a).attr("y",t().state.titleShift-t().state.textHeight-t().state.padding).attr("width",o).attr("height",t().state.textHeight*3).attr("rx",t().state.radius),e.insert("rect",":first-child").attr("x",a).attr("y",t().state.titleShift-t().state.textHeight-t().state.padding).attr("width",o).attr("height",h.height+3+2*t().state.textHeight).attr("rx",t().state.radius),e},MN=e=>(e.append("circle").attr("class","end-state-outer").attr("r",t().state.sizeUnit+t().state.miniPadding).attr("cx",t().state.padding+t().state.sizeUnit+t().state.miniPadding).attr("cy",t().state.padding+t().state.sizeUnit+t().state.miniPadding),e.append("circle").attr("class","end-state-inner").attr("r",t().state.sizeUnit).attr("cx",t().state.padding+t().state.sizeUnit+2).attr("cy",t().state.padding+t().state.sizeUnit+2)),FN=(e,n)=>{let s=t().state.forkWidth,o=t().state.forkHeight;if(n.parentId){let e=s;s=o,o=e}return e.append("rect").style("stroke","black").style("fill","black").attr("width",s).attr("height",o).attr("x",t().state.padding).attr("y",t().state.padding)},TN=(e,n,s,o)=>{let a=0;const i=o.append("text");i.style("text-anchor","start"),i.attr("class","noteText");let r=e.replace(/\r\n/g,"<br/>");r=r.replace(/\n/g,"<br/>");const l=r.split(h.lineBreakRegex);let c=1.25*t().state.noteMargin;for(const o of l){const e=o.trim();if(e.length>0){const o=i.append("tspan");if(o.text(e),c===0){const e=o.node().getBBox();c+=e.height}a+=c,o.attr("x",n+t().state.noteMargin),o.attr("y",s+a+1.25*t().state.noteMargin)}}return{textWidth:i.node().getBBox().width,textHeight:a}},zN=(e,n)=>{n.attr("class","state-note");const s=n.append("rect").attr("x",0).attr("y",t().state.padding),o=n.append("g"),{textWidth:i,textHeight:a}=TN(e,0,0,o);return s.attr("height",a+2*t().state.noteMargin),s.attr("width",i+t().state.noteMargin*2),s},u0=function(e,n){const i=n.id,o={id:i,label:n.id,width:0,height:0},s=e.append("g").attr("id",i).attr("class","stateGroup");n.type==="start"&&CN(s),n.type==="end"&&MN(s),(n.type==="fork"||n.type==="join")&&FN(s,n),n.type==="note"&&zN(n.note.text,s),n.type==="divider"&&EN(s),n.type==="default"&&n.descriptions.length===0&&kN(s,n),n.type==="default"&&n.descriptions.length>0&&AN(s,n);const a=s.node().getBBox();return o.width=a.width+2*t().state.padding,o.height=a.height+2*t().state.padding,xN.set(i,o),o};let d0=0;const LN=function(n,s,o){const a=function(e){switch(e){case St.relationType.AGGREGATION:return"aggregation";case St.relationType.EXTENSION:return"extension";case St.relationType.COMPOSITION:return"composition";case St.relationType.DEPENDENCY:return"dependency"}};s.points=s.points.filter(e=>!Number.isNaN(e.y));const r=s.points,c=cs().x(function(e){return e.x}).y(function(e){return e.y}).curve(Vn),l=n.append("path").attr("d",c(r)).attr("id","edge"+d0).attr("class","transition");let i="";if(t().state.arrowMarkerAbsolute&&(i=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,i=i.replace(/\(/g,"\\("),i=i.replace(/\)/g,"\\)")),l.attr("marker-end","url("+i+"#"+a(St.relationType.DEPENDENCY)+"End)"),o.title!==void 0){const l=n.append("g").attr("class","stateLabel"),{x:d,y:r}=f.calcLabelPosition(s.points),a=h.getRows(o.title);let i=0;const m=[];let c=0,p=0;for(let t=0;t<=a.length;t++){const n=l.append("text").attr("text-anchor","middle").text(a[t]).attr("x",d).attr("y",r+i),s=n.node().getBBox();if(c=Math.max(c,s.width),p=Math.min(p,s.x),e.info(s.x,d,r+i),i===0){const t=n.node().getBBox();i=t.height,e.info("Title height",i,r)}m.push(n)}let u=i*a.length;if(a.length>1){const e=(a.length-1)*i*.5;m.forEach((t,n)=>t.attr("y",r+n*i-e)),u=i*a.length}const g=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",d-c/2-t().state.padding/2).attr("y",r-u/2-t().state.padding/2-3.5).attr("width",c+t().state.padding).attr("height",u+t().state.padding),e.info(g)}d0++};let be;const Wd={},HN=function(){},IN=function(e){e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},BN=function(n,s,o,a){be=t().state;const l=t().securityLevel;let d;l==="sandbox"&&(d=i("#i"+s));const u=i(l==="sandbox"?d.nodes()[0].contentDocument.body:"body"),p=l==="sandbox"?d.nodes()[0].contentDocument:document;e.debug("Rendering diagram "+n);const r=u.select(`[id='${s}']`);IN(r);const g=new D({multigraph:!0,compound:!0,rankdir:"RL"});g.setDefaultEdgeLabel(function(){return{}});const v=a.db.getRootDoc();r0(v,r,void 0,!1,u,p,a);const h=be.padding,c=r.node().getBBox(),m=c.width+h*2,f=c.height+h*2,b=m*1.75;Ve(r,f,b,be.useMaxWidth),r.attr("viewBox",`${c.x-be.padding}  ${c.y-be.padding} `+m+" "+f)},VN=e=>e?e.length*be.fontSizeFactor:1,r0=(t,n,s,o,i,a,r)=>{const c=new D({compound:!0,multigraph:!0});let u,l=!0;for(u=0;u<t.length;u++)if(t[u].stmt==="relation"){l=!1;break}s?c.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:l?1:be.edgeLengthFactor,nodeSep:l?1:50,isMultiGraph:!0}):c.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:l?1:be.edgeLengthFactor,nodeSep:l?1:50,ranker:"tight-tree",isMultiGraph:!0}),c.setDefaultEdgeLabel(function(){return{}}),r.db.extract(t);const p=r.db.getStates(),v=r.db.getRelations(),b=Object.keys(p);for(const l of b){const t=p[l];s&&(t.parentId=s);let e;if(t.doc){let s=n.append("g").attr("id",t.id).attr("class","stateGroup");e=r0(t.doc,s,t.id,!o,i,a,r);{s=SN(s,t,o);let n=s.node().getBBox();e.width=n.width,e.height=n.height+be.padding/2,Wd[t.id]={y:be.compositTitleSize}}}else e=u0(n,t);if(t.note){const o={descriptions:[],id:t.id+"-note",note:t.note,type:"note"},s=u0(n,o);t.note.position==="left of"?(c.setNode(e.id+"-note",s),c.setNode(e.id,e)):(c.setNode(e.id,e),c.setNode(e.id+"-note",s)),c.setParent(e.id,e.id+"-group"),c.setParent(e.id+"-note",e.id+"-group")}else c.setNode(e.id,e)}e.debug("Count=",c.nodeCount(),c);let g=0;v.forEach(function(t){g++,e.debug("Setting edge",t),c.setEdge(t.id1,t.id2,{relation:t,width:VN(t.title),height:be.labelHeight*h.getRows(t.title).length,labelpos:"c"},"id"+g)}),Ss(c),e.debug("Graph after layout",c.nodes());const d=n.node();c.nodes().forEach(function(t){if(t!==void 0&&c.node(t)!==void 0){e.warn("Node "+t+": "+JSON.stringify(c.node(t))),i.select("#"+d.id+" #"+t).attr("transform","translate("+(c.node(t).x-c.node(t).width/2)+","+(c.node(t).y+(Wd[t]?Wd[t].y:0)-c.node(t).height/2)+" )"),i.select("#"+d.id+" #"+t).attr("data-x-shift",c.node(t).x-c.node(t).width/2);const n=a.querySelectorAll("#"+d.id+" #"+t+" .divider");n.forEach(e=>{const n=e.parentElement;let s=0,t=0;n&&(n.parentElement&&(s=n.parentElement.getBBox().width),t=parseInt(n.getAttribute("data-x-shift"),10),Number.isNaN(t)&&(t=0)),e.setAttribute("x1",0-t+8),e.setAttribute("x2",s-t-8)})}else e.debug("No Node "+t+": "+JSON.stringify(c.node(t)))});let f=d.getBBox();c.edges().forEach(function(t){t!==void 0&&c.edge(t)!==void 0&&(e.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(c.edge(t))),LN(n,c.edge(t),c.edge(t).relation))}),f=d.getBBox();const m={id:s||"root",label:s||"root",width:0,height:0};return m.width=f.width+2*be.padding,m.height=f.height+2*be.padding,e.debug("Doc rendered",m,c),m},WN={setConf:HN,draw:BN},ma="rect",Gd="rectWithTitle",qN="start",YN="end",GN="divider",XN="roundedWithTitle",QN="note",ZN="noteGroup",Gn="statediagram",eL="state",tL=`${Gn}-${eL}`,t0="transition",sL="note",oL="note-edge",iL=`${t0} ${oL}`,aL=`${Gn}-${sL}`,rL="cluster",cL=`${Gn}-${rL}`,lL="cluster-alt",dL=`${Gn}-${lL}`,e0="parent",J4="note",mL="state",eu="----",pL=`${eu}${J4}`,X4=`${eu}${e0}`,Y4="fill:none",q4="fill: #333",K4="c",U4="text",W4="normal";let sa={},Wt=0;const xL=function(e){const t=Object.keys(e);for(const n of t)e[n]},CL=function(t,n){e.trace("Extracting classes"),n.db.clear();try{return n.parser.parse(t),n.db.extract(n.db.getRootDocV2()),n.db.getClasses()}catch(e){return e}};function EL(e){return e==null?"":e.classes?e.classes.join(" "):""}function du(e="",t=0,n="",s=eu){const o=n!==null&&n.length>0?`${s}${n}`:"";return`${mL}-${e}${o}-${t}`}const eo=(n,s,o,i,a,r)=>{const c=o.id,l=EL(i[c]);if(c!=="root"){let i=ma;o.start===!0&&(i=qN),o.start===!1&&(i=YN),o.type!==uo&&(i=o.type),sa[c]||(sa[c]={id:c,shape:i,description:h.sanitizeText(c,t()),classes:`${l} ${tL}`});const s=sa[c];o.description&&(Array.isArray(s.description)?(s.shape=Gd,s.description.push(o.description)):s.description.length>0?(s.shape=Gd,s.description===c?s.description=[o.description]:s.description=[s.description,o.description]):(s.shape=ma,s.description=o.description),s.description=h.sanitizeTextOrArray(s.description,t())),s.description.length===1&&s.shape===Gd&&(s.shape=ma),!s.type&&o.doc&&(e.info("Setting cluster for ",c,hu(o)),s.type="group",s.dir=hu(o),s.shape=o.type===Y0?GN:XN,s.classes=s.classes+" "+cL+" "+(r?dL:""));const a={labelStyle:"",shape:s.shape,labelText:s.description,classes:s.classes,style:"",id:c,dir:s.dir,domId:du(c,Wt),type:s.type,padding:15};if(o.note){const e={labelStyle:"",shape:QN,labelText:o.note.text,classes:aL,style:"",id:c+pL+"-"+Wt,domId:du(c,Wt,J4),type:s.type,padding:15},l={labelStyle:"",shape:ZN,labelText:o.note.text,classes:s.classes,style:"",id:c+X4,domId:du(c,Wt,e0),type:"group",padding:0};Wt++;const t=c+X4;n.setNode(t,l),n.setNode(e.id,e),n.setNode(c,a),n.setParent(c,t),n.setParent(e.id,t);let i=c,r=e.id;o.note.position==="left of"&&(i=e.id,r=c),n.setEdge(i,r,{arrowhead:"none",arrowType:"",style:Y4,labelStyle:"",classes:iL,arrowheadStyle:q4,labelpos:K4,labelType:U4,thickness:W4})}else n.setNode(c,a)}s&&s.id!=="root"&&(e.trace("Setting node ",c," to be child of its parent ",s.id),n.setParent(c,s.id)),o.doc&&(e.trace("Adding nodes children "),SL(n,o,o.doc,i,a,!r))},SL=(n,s,o,i,a,r)=>{e.trace("items",o),o.forEach(e=>{switch(e.stmt){case tr:eo(n,s,e,i,a,r);break;case uo:eo(n,s,e,i,a,r);break;case Zl:{eo(n,s,e.state1,i,a,r),eo(n,s,e.state2,i,a,r);const o={id:"edge"+Wt,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Y4,labelStyle:"",label:h.sanitizeText(e.description,t()),arrowheadStyle:q4,labelpos:K4,labelType:U4,thickness:W4,classes:t0};n.setEdge(e.state1.id,e.state2.id,o,Wt),Wt++}break}})},hu=(e,t=gD)=>{let n=t;if(e.doc)for(let t=0;t<e.doc.length;t++){const s=e.doc[t];s.stmt==="dir"&&(n=s.value)}return n},FL=function(n,s,o,a){e.info("Drawing state diagram (v2)",s),sa={};let y=a.db.getDirection();y===void 0&&(y=Z0);const{securityLevel:j,state:l}=t(),O=l.nodeSpacing||50,_=l.rankSpacing||50;e.info(a.db.getRootDocV2()),a.db.extract(a.db.getRootDocV2()),e.info(a.db.getRootDocV2());const x=a.db.getStates(),m=new D({multigraph:!0,compound:!0}).setGraph({rankdir:hu(a.db.getRootDocV2()),nodesep:O,ranksep:_,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});eo(m,void 0,a.db.getRootDocV2(),x,a.db,!0);let p;j==="sandbox"&&(p=i("#i"+s));const g=i(j==="sandbox"?p.nodes()[0].contentDocument.body:"body"),r=g.select(`[id="${s}"]`),w=g.select("#"+s+" g");yl(w,m,["barb"],Gn,s);const c=8;f.insertTitle(r,"statediagramTitleText",l.titleTopMargin,a.db.getDiagramTitle());const d=r.node().getBBox(),u=d.width+c*2,b=d.height+c*2;r.attr("class",Gn);const v=r.node().getBBox();Ve(r,b,u,l.useMaxWidth);const h=`${v.x-c} ${v.y-c} ${u} ${b}`;e.debug(`viewBox ${h}`),r.attr("viewBox",h);const C=document.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const t of C){const n=t.getBBox(),e=document.createElementNS("http://www.w3.org/2000/svg",ma);e.setAttribute("rx",0),e.setAttribute("ry",0),e.setAttribute("width",n.width),e.setAttribute("height",n.height),t.insertBefore(e,t.firstChild)}},TL={setConf:xL,getClasses:CL,draw:FL};Ui=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},m=[1,2],n=[1,5],t=[6,9,11,17,18,20,22,23,24,26],h=[1,15],a=[1,16],i=[1,17],r=[1,18],c=[1,19],l=[1,20],d=[1,24],u=[4,6,9,11,17,18,20,22,23,24,26],o={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 1:return a[c-1];case 3:this.$=[];break;case 4:a[c-1].push(a[c]),this.$=a[c-1];break;case 5:case 6:this.$=a[c];break;case 7:case 8:this.$=[];break;case 11:o.setDiagramTitle(a[c].substr(6)),this.$=a[c].substr(6);break;case 12:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 13:case 14:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 15:o.addSection(a[c].substr(8)),this.$=a[c].substr(8);break;case 16:o.addTask(a[c-1],a[c]),this.$="task";break;case 18:o.parseDirective("%%{","open_directive");break;case 19:o.parseDirective(a[c],"type_directive");break;case 20:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 21:o.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:m,7:3,12:4,26:n},{1:[3]},e(t,[2,3],{5:6}),{3:7,4:m,7:3,12:4,26:n},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:h,18:a,20:i,22:r,23:c,24:l,26:n},{1:[2,2]},{14:22,15:[1,23],29:d},e([15,29],[2,19]),e(t,[2,8],{1:[2,1]}),e(t,[2,4]),{7:21,10:25,12:4,17:h,18:a,20:i,22:r,23:c,24:l,26:n},e(t,[2,6]),e(t,[2,7]),e(t,[2,11]),{19:[1,26]},{21:[1,27]},e(t,[2,14]),e(t,[2,15]),{25:[1,28]},e(t,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},e(t,[2,5]),e(t,[2,12]),e(t,[2,13]),e(t,[2,16]),e(u,[2,9]),{14:32,29:d},{29:[2,20]},{11:[1,33]},e(u,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},f=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return e}();o.lexer=f;function s(){this.yy={}}return s.prototype=o,o.Parser=s,new s}(),Ui.parser=Ui;const DL=Ui,NL=e=>e.match(/^\s*journey/)!==null;let Jn="";const Ou=[],Js=[],Zs=[],IL=function(e,t,n){O.parseDirective(this,e,t,n)},BL=function(){Ou.length=0,Js.length=0,Jn="",Zs.length=0,Ne()},VL=function(e){Jn=e,Ou.push(e)},$L=function(){return Ou},WL=function(){let e=R4();const n=100;let t=0;for(;!e&&t<n;)e=R4(),t++;return Js.push(...Zs),Js},UL=function(){const e=[];Js.forEach(t=>{t.people&&e.push(...t.people)});const t=new Set(e);return[...t].sort()},KL=function(e,t){const n=t.substr(1).split(":");let s=0,o=[];n.length===1?(s=Number(n[0]),o=[]):(s=Number(n[0]),o=n[1].split(","));const i=o.map(e=>e.trim()),a={section:Jn,type:Jn,people:i,task:e,score:s};Zs.push(a)},qL=function(e){const t={section:Jn,type:Jn,description:e,task:e,classes:[]};Js.push(t)},R4=function(){const t=function(e){return Zs[e].processed};let e=!0;for(const[n,s]of Zs.entries())t(n),e=e&&s.processed;return e},GL=function(){return UL()},L4={parseDirective:IL,getConfig:()=>t().journey,clear:BL,setDiagramTitle:pt,getDiagramTitle:yt,setAccTitle:Oe,getAccTitle:Fe,setAccDescription:De,getAccDescription:Pe,addSection:VL,getSections:$L,getTasks:WL,addTask:KL,addTaskOrg:qL,getActors:GL},Pi=function(e,t){const n=e.append("rect");return n.attr("x",t.x),n.attr("y",t.y),n.attr("fill",t.fill),n.attr("stroke",t.stroke),n.attr("width",t.width),n.attr("height",t.height),n.attr("rx",t.rx),n.attr("ry",t.ry),t.class!==void 0&&n.attr("class",t.class),n},ZL=function(e,t){const n=15,o=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",n).attr("stroke-width",2).attr("overflow","visible"),s=e.append("g");s.append("circle").attr("cx",t.cx-n/3).attr("cy",t.cy-n/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",t.cx+n/3).attr("cy",t.cy-n/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function i(e){const s=Fl().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(n/2).outerRadius(n/2.2);e.append("path").attr("class","mouth").attr("d",s).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}function a(e){const s=Fl().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(n/2).outerRadius(n/2.2);e.append("path").attr("class","mouth").attr("d",s).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}function r(e){e.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return t.score>3?i(s):t.score<3?a(s):r(s),o},T4=function(e,t){const n=e.append("circle");return n.attr("cx",t.cx),n.attr("cy",t.cy),n.attr("class","actor-"+t.pos),n.attr("fill",t.fill),n.attr("stroke",t.stroke),n.attr("r",t.r),n.class!==void 0&&n.attr("class",n.class),t.title!==void 0&&n.append("title").text(t.title),n},F4=function(e,t){const o=t.text.replace(/<br\s*\/?>/gi," "),n=e.append("text");n.attr("x",t.x),n.attr("y",t.y),n.attr("class","legend"),n.style("text-anchor",t.anchor),t.class!==void 0&&n.attr("class",t.class);const s=n.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.text(o),n},tR=function(e,t){function s(e,t,n,s,o){return e+","+t+" "+(e+n)+","+t+" "+(e+n)+","+(t+s-o)+" "+(e+n-o*1.2)+","+(t+s)+" "+e+","+(t+s)}const n=e.append("polygon");n.attr("points",s(t.x,t.y,50,20,7)),n.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,F4(e,t)},nR=function(e,t,n){const o=e.append("g"),s=Tu();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=n.width,s.height=n.height,s.class="journey-section section-type-"+t.num,s.rx=3,s.ry=3,Pi(o,s),S4(n)(t.text,o,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+t.num},n,t.colour)};let M4=-1;const oR=function(e,t,n){const i=t.x+n.width/2,o=e.append("g");M4++;const r=300+5*30;o.append("line").attr("id","task"+M4).attr("x1",i).attr("y1",t.y).attr("x2",i).attr("y2",r).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),ZL(o,{cx:i,cy:300+(5-t.score)*30,score:t.score});const s=Tu();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=n.width,s.height=n.height,s.class="task task-type-"+t.num,s.rx=3,s.ry=3,Pi(o,s);let a=t.x+14;t.people.forEach(e=>{const n=t.actors[e].color,s={cx:a,cy:t.y,r:7,fill:n,stroke:"#000",title:e,pos:t.actors[e].position};T4(o,s),a+=10}),S4(n)(t.task,o,s.x,s.y,s.width,s.height,{class:"task"},n,t.colour)},iR=function(e,t){const n=Pi(e,{x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,class:"rect"});n.lower()},aR=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},Tu=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},S4=function(){function n(t,n,s,o,i,a,r,c){const l=n.append("text").attr("x",s+i/2).attr("y",o+a/2+5).style("font-color",c).style("text-anchor","middle").text(t);e(l,r)}function t(t,n,s,o,i,a,r,c,l){const{taskFontSize:d,taskFontFamily:h}=c,u=t.split(/<br\s*\/?>/gi);for(let t=0;t<u.length;t++){const m=t*d-d*(u.length-1)/2,c=n.append("text").attr("x",s+i/2).attr("y",o).attr("fill",l).style("text-anchor","middle").style("font-size",d).style("font-family",h);c.append("tspan").attr("x",s+i/2).attr("dy",m).text(u[t]),c.attr("y",o+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),e(c,r)}}function s(n,s,o,i,a,r,c,l){const d=s.append("switch"),h=d.append("foreignObject").attr("x",o).attr("y",i).attr("width",a).attr("height",r).attr("position","fixed"),u=h.append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,d,o,i,a,r,c,l),e(u,c)}function e(e,t){for(const n in t)n in t&&e.attr(n,t[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),lR=function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},Xs={drawRect:Pi,drawCircle:T4,drawSection:nR,drawText:F4,drawLabel:tR,drawTask:oR,drawBackgroundRect:iR,getTextObj:aR,getNoteRect:Tu,initGraphics:lR},uR=function(e){const t=Object.keys(e);t.forEach(function(t){zi[t]=e[t]})},Ft={};function mR(e){const s=t().journey;let n=60;Object.keys(Ft).forEach(t=>{const o=Ft[t].color,i={cx:20,cy:n,r:7,fill:o,stroke:"#000",pos:Ft[t].position};Xs.drawCircle(e,i);const a={x:40,y:n+7,fill:"#666",text:t,textMargin:s.boxTextMargin|5};Xs.drawText(e,a),n+=20})}const zi=t().journey,wn=zi.leftMargin,gR=function(e,n,s,o){const r=t().journey;o.db.clear(),o.parser.parse(e+`
`);const f=t().securityLevel;let m;f==="sandbox"&&(m=i("#i"+n));const g=i(f==="sandbox"?m.nodes()[0].contentDocument.body:"body");xe.init();const a=g.select("#"+n);Xs.initGraphics(a);const v=o.db.getTasks(),l=o.db.getDiagramTitle(),b=o.db.getActors();for(const e in Ft)delete Ft[e];let d=0;b.forEach(e=>{Ft[e]={color:r.actorColours[d%r.actorColours.length],position:d},d++}),mR(a),xe.insert(0,0,wn,Object.keys(Ft).length*50),yR(a,v,0);const c=xe.getBounds();l&&a.append("text").text(l).attr("x",wn).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const u=c.stopy-c.starty+2*r.diagramMarginY,h=wn+c.stopx+2*r.diagramMarginX;Ve(a,u,h,r.useMaxWidth),a.append("line").attr("x1",wn).attr("y1",r.height*4).attr("x2",h-wn-4).attr("y2",r.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const p=l?70:0;a.attr("viewBox",`${c.startx} -25 ${h} ${u+p}`),a.attr("preserveAspectRatio","xMinYMin meet"),a.attr("height",u+p+25)},xe={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(e,t,n,s){e[t]===void 0?e[t]=n:e[t]=s(n,e[t])},updateBounds:function(e,n,s,o){const a=t().journey,i=this;let r=0;function c(t){return function(l){r++;const d=i.sequenceItems.length-r+1;i.updateVal(l,"starty",n-d*a.boxMargin,Math.min),i.updateVal(l,"stopy",o+d*a.boxMargin,Math.max),i.updateVal(xe.data,"startx",e-d*a.boxMargin,Math.min),i.updateVal(xe.data,"stopx",s+d*a.boxMargin,Math.max),t==="activation"||(i.updateVal(l,"startx",e-d*a.boxMargin,Math.min),i.updateVal(l,"stopx",s+d*a.boxMargin,Math.max),i.updateVal(xe.data,"starty",n-d*a.boxMargin,Math.min),i.updateVal(xe.data,"stopy",o+d*a.boxMargin,Math.max))}}this.sequenceItems.forEach(c())},insert:function(e,t,n,s){const o=Math.min(e,n),i=Math.max(e,n),a=Math.min(t,s),r=Math.max(t,s);this.updateVal(xe.data,"startx",o,Math.min),this.updateVal(xe.data,"starty",a,Math.min),this.updateVal(xe.data,"stopx",i,Math.max),this.updateVal(xe.data,"stopy",r,Math.max),this.updateBounds(o,a,i,r)},bumpVerticalPos:function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},$u=zi.sectionFills,C4=zi.sectionColours,yR=function(e,n,s){const o=t().journey;let l="";const d=o.height*2+o.diagramMarginY,u=s+d;let i=0,a="#CCC",r="black",c=0;for(const[s,t]of n.entries()){if(l!==t.section){a=$u[i%$u.length],c=i%$u.length,r=C4[i%C4.length];const n={x:s*o.taskMargin+s*o.width+wn,y:50,text:t.section,fill:a,num:c,colour:r};Xs.drawSection(e,n,o),l=t.section,i++}const d=t.people.reduce((e,t)=>(Ft[t]&&(e[t]=Ft[t]),e),{});t.x=s*o.taskMargin+s*o.width+wn,t.y=u,t.width=o.diagramMarginX,t.height=o.diagramMarginY,t.colour=r,t.fill=a,t.num=c,t.actors=d,Xs.drawTask(e,t,o),xe.insert(t.x,t.y,t.x+t.width+o.taskMargin,300+5*30)}},x4={setConf:uR,draw:gR};let w4={};const OR=function(e){w4={...w4,...e}},xR=(t,n,s)=>{try{e.debug(`Renering svg for syntax error
`);const o=i("#"+n),t=o.append("g");t.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),t.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),t.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),t.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),t.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),t.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),t.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),t.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+s),o.attr("height",100),o.attr("width",500),o.attr("viewBox","768 0 912 512")}catch(t){e.error("Error while rendering info diagram"),e.error(kk(t))}},Wu={setConf:OR,draw:xR};let _4=!1;const Gs=()=>{if(_4)return;_4=!0,B("error",{db:{clear:()=>{}},styles:j8,renderer:Wu,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},e=>e.toLowerCase().trim()==="error"),B("c4",{parser:_j,db:np,renderer:Hp,styles:R8,init:e=>{Hp.setConf(e.c4)}},ij),B("class",{parser:Bp,db:js,renderer:Ex,styles:Oo,init:e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,js.clear()}},G7),B("classDiagram",{parser:Bp,db:js,renderer:wE,styles:Oo,init:e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,js.clear()}},K7),B("er",{parser:xE,db:RE,renderer:lk,styles:v8},CE),B("gantt",{parser:WS,db:Lc,renderer:oF,styles:O8},US),B("info",{parser:aF,db:mF,renderer:pF,styles:C8},gF),B("pie",{parser:bF,db:SF,renderer:DF,styles:k8},jF),B("requirement",{parser:LF,db:rT,renderer:xT,styles:S8},RF),B("sequence",{parser:ET,db:p2,renderer:e2,styles:F8,init:e=>{if(e.sequence||(e.sequence={}),e.sequence.arrowMarkerAbsolute=e.arrowMarkerAbsolute,"sequenceDiagram"in e)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");p2.setWrap(e.wrap),e2.setConf(e.sequence)}},kT),B("state",{parser:J0,db:St,renderer:WN,styles:Wr,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,St.clear()}},mD),B("stateDiagram",{parser:J0,db:St,renderer:TL,styles:Wr,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,St.clear()}},fD),B("journey",{parser:DL,db:L4,renderer:x4,styles:N8,init:e=>{x4.setConf(e.journey),L4.clear()}},NL),B("flowchart",{parser:im,db:kt,renderer:Zc,styles:Vr,init:e=>{e.flowchart||(e.flowchart={}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,NS.setConf(e.flowchart),kt.clear(),kt.setGen("gen-1")}},hk),B("flowchart-v2",{parser:im,db:kt,renderer:Zc,styles:Vr,init:e=>{e.flowchart||(e.flowchart={}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,t8({flowchart:{arrowMarkerAbsolute:e.arrowMarkerAbsolute}}),Zc.setConf(e.flowchart),kt.clear(),kt.setGen("gen-2")}},mk),B("gitGraph",{parser:ow,db:ay,renderer:Sj,styles:Cj},sw)};class Ku{constructor(n,s){__publicField(this,"type","graph"),__publicField(this,"parser"),__publicField(this,"renderer"),__publicField(this,"db"),__publicField(this,"detectTypeFailed",!1);var a,r;this.txt=n;const i=t();this.txt=n;try{this.type=_u(n,i)}catch(e){this.handleError(e,s),this.type="error",this.detectTypeFailed=!0}const o=G8(this.type);e.debug("Type "+this.type),this.db=o.db,(r=(a=this.db).clear)==null?void 0:r.call(a),this.renderer=o.renderer,this.parser=o.parser;const c=this.parser.parse.bind(this.parser);this.parser.parse=e=>c(oz(e,this.db)),this.parser.parser.yy=this.db,o.init&&(o.init(i),e.debug("Initialized diagram "+this.type,i)),this.txt+=`
`,this.parse(this.txt,s)}parse(e,t){var n,s;if(this.detectTypeFailed)return!1;try{return e=e+`
`,(s=(n=this.db).clear)==null?void 0:s.call(n),this.parser.parse(e),!0}catch(e){this.handleError(e,t)}return!1}handleError(e,t){if(t===void 0)throw e;if(dd(e)){t(e.str,e.hash);return}t(e)}getParser(){return this.parser}getType(){return this.type}}const qu=(e,n)=>{const s=_u(e,t());try{G8(s)}catch{const t=ZT(s);if(!t)throw new Error(`Diagram ${s} not found.`);return t().then(({diagram:t})=>(B(s,t,void 0),new Ku(e,n)))}return new Ku(e,n)},a1=Ku;function FR(e,t){gs(t)||e.attr("aria-roledescription",t)}function TR(e,t,n,s){if(e.insert===void 0)return;if(t||n){{if(n){const t="chart-desc-"+s;e.attr("aria-describedby",t),e.insert("desc",":first-child").attr("id",t).text(n)}if(t){const n="chart-title-"+s;e.attr("aria-labelledby",n),e.insert("title",":first-child").attr("id",n).text(t)}}}else return}const f1=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],y4="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",j4="sandbox",f4="loose",RR="http://www.w3.org/2000/svg",m4="http://www.w3.org/1999/xlink",u4="http://www.w3.org/1999/xhtml",IR="100%",BR="100%",VR="border:0;margin:0;",$R="margin:0",WR="allow-top-navigation-by-user-activation allow-popups",UR='The "iframe" tag is not supported by your browser.',d4=["foreignobject"],l4=["dominant-baseline"];function YR(e,t){Gs();const n=new a1(e,t);return n.parse(e,t)}async function GR(e,t){Gs();const n=await qu(e,t);return n.parse(e,t)}const i4=function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(e){return e.substring(0,e.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(e){return e.substring(0,e.length-1)}),t=t.replace(/#\w+;/g,function(e){const t=e.substring(1,e.length-1),n=/^\+?\d+$/.test(t);return n?"ﬂ\xB0\xB0"+t+"\xB6\xDF":"ﬂ\xB0"+t+"\xB6\xDF"}),t},g1=function(e){let t=e;return t=t.replace(/ﬂ°°/g,"&#"),t=t.replace(/ﬂ°/g,"&"),t=t.replace(/¶ß/g,";"),t},o4=(e,t,n=[])=>`
.${e} ${t} { ${n.join(" !important; ")} !important; }`,JR=(e,t,n={})=>{var o;let s="";if(e.themeCSS!==void 0&&(s+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(s+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(s+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),!gs(n)&&f1.includes(t)){const t=e.htmlLabels||((o=e.flowchart)==null?void 0:o.htmlLabels),i=["> *","span"],a=["rect","polygon","ellipse","circle","path"],r=t?i:a;for(const t in n){const e=n[t];gs(e.styles)||r.forEach(t=>{s+=o4(e.id,t,e.styles)}),gs(e.textStyles)||(s+=o4(e.id,"tspan",e.textStyles))}}return s},s4=(e,t,n,s)=>{const o=JR(e,t,n),i=Iw(t,o,e.themeVariables);return Al(_E(`${s}{${i}}`),hE)},n4=(e="",t,n)=>{let s=e;return!n&&!t&&(s=s.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),s=g1(s),s=s.replace(/<br>/g,"<br/>"),s},t4=(e="",t)=>{const n=t?t.viewBox.baseVal.height+"px":BR,s=btoa('<body style="'+$R+'">'+e+"</body>");return`<iframe style="width:${IR};height:${n};${VR}" src="data:text/html;base64,${s}" sandbox="${WR}">
  ${UR}
</iframe>`},ji=(e,t,n,s,o)=>{const i=e.append("div");i.attr("id",n),s&&i.attr("style",s);const a=i.append("svg").attr("id",t).attr("width","100%").attr("xmlns",RR);return o&&a.attr("xmlns:xlink",o),a.append("g"),e};function bi(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const K1=(e,t,n,s)=>{var o,i,a;(o=e.getElementById(t))==null?void 0:o.remove(),(i=e.getElementById(n))==null?void 0:i.remove(),(a=e.getElementById(s))==null?void 0:a.remove()},aP=function(n,s,o,a){var y,_,w,O,C;Gs(),Hs();const b=f.detectInit(s);b&&(En(b),ul(b));const d=t();e.debug(d),s.length>((O=d?.maxTextSize)!=null?O:5e4)&&(s=y4),s=s.replace(/\r\n?/g,`
`);const P="#"+n,m="i"+n,L="#"+m,g="d"+n,h="#"+g;let r=i("body");const u=d.securityLevel===j4,k=d.securityLevel===f4,T=d.fontFamily;if(a!==void 0){if(a&&(a.innerHTML=""),u){const e=bi(i(a),m);r=i(e.nodes()[0].contentDocument.body),r.node().style.margin=0}else r=i(a);ji(r,n,g,`font-family: ${T}`,m4)}else{if(K1(document,n,g,m),u){const e=bi(i("body"),m);r=i(e.nodes()[0].contentDocument.body),r.node().style.margin=0}else r=i("body");ji(r,n,g)}s=i4(s);let l,j;try{if(l=qu(s),"then"in l)throw new Error("Diagram is a promise. Use renderAsync.")}catch(e){l=new a1("error"),j=e}const A=r.select(h).node(),p=l.type,E=A.firstChild,S=E.firstChild,M=f1.includes(p)?l.renderer.getClasses(s,l):{},F=s4(d,p,M,P),x=document.createElement("style");x.innerHTML=F,E.insertBefore(x,S);try{l.renderer.draw(s,n,yr.version,l)}catch(e){throw Wu.draw(s,n,yr.version),e}const z=r.select(`${h} svg`),D=(w=(C=l.db).getAccTitle)==null?void 0:w.call(C),N=(y=(_=l.db).getAccDescription)==null?void 0:y.call(_);W1(p,z,D,N),r.select(`[id="${n}"]`).selectAll("foreignobject > *").attr("xmlns",u4);let c=r.select(h).node().innerHTML;if(e.debug("config.arrowMarkerAbsolute",d.arrowMarkerAbsolute),c=n4(c,u,K(d.arrowMarkerAbsolute)),u){const e=r.select(h+" svg").node();c=t4(c,e)}else k||(c=is.sanitize(c,{ADD_TAGS:d4,ADD_ATTR:l4}));if(o!==void 0)switch(p){case"flowchart":case"flowchart-v2":o(c,kt.bindFunctions);break;case"gantt":o(c,Lc.bindFunctions);break;case"class":case"classDiagram":o(c,js.bindFunctions);break;default:o(c)}else e.debug("CB = undefined!");m2();const R=u?L:h,v=i(R).node();if(v&&"remove"in v&&v.remove(),j)throw j;return c},rP=async function(n,s,o,a){var y,_,w,O,C;Gs(),Hs();const b=f.detectInit(s);b&&(En(b),ul(b));const l=t();e.debug(l),s.length>((O=l?.maxTextSize)!=null?O:5e4)&&(s=y4),s=s.replace(/\r\n?/g,`
`);const P="#"+n,m="i"+n,L="#"+m,g="d"+n,h="#"+g;let r=i("body");const u=l.securityLevel===j4,k=l.securityLevel===f4,T=l.fontFamily;if(a!==void 0){if(a&&(a.innerHTML=""),u){const e=bi(i(a),m);r=i(e.nodes()[0].contentDocument.body),r.node().style.margin=0}else r=i(a);ji(r,n,g,`font-family: ${T}`,m4)}else{if(K1(document,n,g,m),u){const e=bi(i("body"),m);r=i(e.nodes()[0].contentDocument.body),r.node().style.margin=0}else r=i("body");ji(r,n,g)}s=i4(s);let d,j;try{d=await qu(s)}catch(e){d=new a1("error"),j=e}const A=r.select(h).node(),p=d.type,E=A.firstChild,S=E.firstChild,M=f1.includes(p)?d.renderer.getClasses(s,d):{},F=s4(l,p,M,P),x=document.createElement("style");x.innerHTML=F,E.insertBefore(x,S);try{await d.renderer.draw(s,n,yr.version,d)}catch(e){throw Wu.draw(s,n,yr.version),e}const z=r.select(`${h} svg`),D=(w=(C=d.db).getAccTitle)==null?void 0:w.call(C),N=(y=(_=d.db).getAccDescription)==null?void 0:y.call(_);W1(p,z,D,N),r.select(`[id="${n}"]`).selectAll("foreignobject > *").attr("xmlns",u4);let c=r.select(h).node().innerHTML;if(e.debug("config.arrowMarkerAbsolute",l.arrowMarkerAbsolute),c=n4(c,u,K(l.arrowMarkerAbsolute)),u){const e=r.select(h+" svg").node();c=t4(c,e)}else k||(c=is.sanitize(c,{ADD_TAGS:d4,ADD_ATTR:l4}));if(o!==void 0)switch(p){case"flowchart":case"flowchart-v2":o(c,kt.bindFunctions);break;case"gantt":o(c,Lc.bindFunctions);break;case"class":case"classDiagram":o(c,js.bindFunctions);break;default:o(c)}else e.debug("CB = undefined!");m2();const R=u?L:h,v=i(R).node();if(v&&"remove"in v&&v.remove(),j)throw j;return c};let mn={};const lP=function(t,n,s,o){try{if(n!==void 0)switch(n=n.trim(),s){case"open_directive":mn={};break;case"type_directive":if(!mn)throw new Error("currentDirective is undefined");mn.type=n.toLowerCase();break;case"arg_directive":if(!mn)throw new Error("currentDirective is undefined");mn.args=JSON.parse(n);break;case"close_directive":dP(t,mn,o),mn=void 0;break}}catch(t){e.error(`Error while rendering sequenceDiagram directive: ${n} jison context: ${s}`),e.error(t.message)}},dP=function(t,n,s){switch(e.debug(`Directive type=${n.type} with args:`,n.args),n.type){case"init":case"initialize":{["config"].forEach(e=>{n.args[e]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),n.args[s]=n.args[e],delete n.args[e])}),e.debug("sanitize in handleDirective",n.args),En(n.args),e.debug("sanitize in handleDirective (done)",n.args),ul(n.args);break}case"wrap":case"nowrap":t&&t.setWrap&&t.setWrap(n.type==="wrap");break;case"themeCss":e.warn("themeCss encountered");break;default:e.warn(`Unhandled directive: source: '%%{${n.type}: ${JSON.stringify(n.args?n.args:{})}}%%`,n);break}};function uP(e={}){var t;e?.fontFamily&&!((t=e.themeVariables)==null?void 0:t.fontFamily)&&(e.themeVariables={fontFamily:e.fontFamily}),rx(e),e?.theme&&e.theme in Ot?e.themeVariables=Ot[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=Ot.default.getThemeVariables(e.themeVariables));const n=typeof e=="object"?lx(e):e8();S1(n.logLevel),Gs()}function W1(e,t,n,s){FR(t,e),TR(t,n,s,t.attr("id"))}const O=Object.freeze({render:aP,renderAsync:rP,parse:YR,parseAsync:GR,parseDirective:lP,initialize:uP,getConfig:t,setConfig:t8,getSiteConfig:e8,updateSiteConfig:ix,reset:()=>{Hs()},globalReset:()=>{Hs(hs)},defaultConfig:hs});S1(t().logLevel),Hs(t());let V1=!1;const pP=async function(t,n,s){try{V1?await R1(t,n,s):H1(t,n,s)}catch(t){e.warn("Syntax Error rendering"),dd(t)&&e.warn(t.str),Ee.parseError&&Ee.parseError(t)}},I1=(t,n,s)=>{e.warn(t),dd(t)?(s&&s(t.str,t.hash),n.push({...t,message:t.str,error:t})):(s&&s(t),t instanceof Error&&n.push({str:t.message,message:t.message,hash:t.name,error:t}))},H1=function(t,n,s){const r=O.getConfig();t&&(Ee.sequenceConfig=t),e.debug(`${s?"":"No "}Callback function found`);let o;if(n===void 0)o=document.querySelectorAll(".mermaid");else if(typeof n=="string")o=document.querySelectorAll(n);else if(n instanceof HTMLElement)o=[n];else if(n instanceof NodeList)o=n;else throw new Error("Invalid argument nodes for mermaid.init");e.debug(`Found ${o.length} diagrams`),t?.startOnLoad!==void 0&&(e.debug("Start On Load: "+t?.startOnLoad),O.updateSiteConfig({startOnLoad:t?.startOnLoad}));const c=new f.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let i;const a=[];for(const t of Array.from(o)){if(e.info("Rendering diagram: "+t.id),t.getAttribute("data-processed"))continue;t.setAttribute("data-processed","true");const n=`mermaid-${c.next()}`;i=t.innerHTML,i=f.entityDecode(i).trim().replace(/<br\s*\/?>/gi,"<br/>");const r=f.detectInit(i);r&&e.debug("Detected early reinit: ",r);try{O.render(n,i,(e,o)=>{t.innerHTML=e,s!==void 0&&s(n),o&&o(t)},t)}catch(e){I1(e,a,Ee.parseError)}}if(a.length>0)throw a[0]},bP=e=>{for(const{id:t,detector:n,loader:s}of e)A2(t,n,s)},jP=async t=>{e.debug(`Loading ${t.length} external diagrams`);const s=await Promise.allSettled(t.map(async({id:e,detector:t,loader:n})=>{const{diagram:s}=await n();B(e,s,t)})),n=s.filter(e=>e.status==="rejected");if(n.length>0){e.error(`Failed to load ${n.length} external diagrams`);for(const t of n)e.error(t);throw new Error(`Failed to load ${n.length} external diagrams`)}},R1=async function(t,n,s){const r=O.getConfig();t&&(Ee.sequenceConfig=t),e.debug(`${s?"":"No "}Callback function found`);let o;if(n===void 0)o=document.querySelectorAll(".mermaid");else if(typeof n=="string")o=document.querySelectorAll(n);else if(n instanceof HTMLElement)o=[n];else if(n instanceof NodeList)o=n;else throw new Error("Invalid argument nodes for mermaid.init");e.debug(`Found ${o.length} diagrams`),t?.startOnLoad!==void 0&&(e.debug("Start On Load: "+t?.startOnLoad),O.updateSiteConfig({startOnLoad:t?.startOnLoad}));const c=new f.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let i;const a=[];for(const t of Array.from(o)){if(e.info("Rendering diagram: "+t.id),t.getAttribute("data-processed"))continue;t.setAttribute("data-processed","true");const n=`mermaid-${c.next()}`;i=t.innerHTML,i=f.entityDecode(i).trim().replace(/<br\s*\/?>/gi,"<br/>");const r=f.detectInit(i);r&&e.debug("Detected early reinit: ",r);try{await O.renderAsync(n,i,(e,o)=>{t.innerHTML=e,s!==void 0&&s(n),o&&o(t)},t)}catch(e){I1(e,a,Ee.parseError)}}if(a.length>0)throw a[0]},_P=function(e){O.initialize(e)},wP=async(e,{lazyLoad:t=!0}={})=>{t?bP(e):await jP(e),V1=!0},L1=function(){if(Ee.startOnLoad){const{startOnLoad:e}=O.getConfig();e&&Ee.init()}};typeof document!="undefined"&&window.addEventListener("load",L1,!1);const xP=function(e){Ee.parseError=e},CP=e=>O.parse(e,Ee.parseError),vi=[];let O1=!1;const z1=async()=>{if(O1)return;for(O1=!0;vi.length>0;){const t=vi.shift();if(t)try{await t()}catch(t){e.error("Error executing queue",t)}}O1=!1},SP=t=>new Promise((n,s)=>{const o=()=>new Promise((o,i)=>{O.parseAsync(t,Ee.parseError).then(e=>{o(e),n(e)},t=>{e.error("Error parsing",t),i(t),s(t)})});vi.push(o),z1()}),MP=(t,n,s,o)=>new Promise((i,a)=>{const r=()=>new Promise((r,c)=>{O.renderAsync(t,n,s,o).then(e=>{r(e),i(e)},t=>{e.error("Error parsing",t),c(t),a(t)})});vi.push(r),z1()}),Ee={startOnLoad:!0,diagrams:{},mermaidAPI:O,parse:CP,parseAsync:SP,render:O.render,renderAsync:MP,init:pP,initThrowsErrors:H1,initThrowsErrorsAsync:R1,registerExternalDiagrams:wP,initialize:_P,parseError:void 0,contentLoaded:L1,setParseErrorHandler:xP};return Ee})