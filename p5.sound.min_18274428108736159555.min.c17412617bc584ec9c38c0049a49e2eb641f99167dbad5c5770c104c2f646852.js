!function(e){var n={};function t(s){if(n[s])return n[s].exports;var o=n[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o,s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(o in e)t.d(s,o,function(t){return e[t]}.bind(null,o));return s},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=31)}([function(e,t,n){var s;void 0===(s=function(){"use strict";function e(e,t){this.isUndef(e)||1===e?this.input=this.context.createGain():1<e&&(this.input=new Array(e)),this.isUndef(t)||1===t?this.output=this.context.createGain():1<t&&(this.output=new Array(e))}var t;return e.prototype.set=function(t,n,s){this.isObject(t)?s=n:this.isString(t)&&(l={},l[t]=n,t=l);t:for(i in t){if(n=t[i],a=this,-1!==i.indexOf(".")){for(var o,i,a,l,d,r=i.split("."),c=0;c<r.length-1;c++)if((a=a[r[c]])instanceof e){r.splice(0,c+1),d=r.join("."),a.set(d,n);continue t}i=r[r.length-1]}o=a[i],this.isUndef(o)||(e.Signal&&o instanceof e.Signal||e.Param&&o instanceof e.Param?o.value!==n&&(this.isUndef(s)?o.value=n:o.rampTo(n,s)):o instanceof AudioParam?o.value!==n&&(o.value=n):o instanceof e?o.set(n):o!==n&&(a[i]=n))}return this},e.prototype.get=function(t){this.isUndef(t)?t=this._collectDefaults(this.constructor):this.isString(t)&&(t=[t]);for(l={},r=0;r<t.length;r++){var n,i,a,r,c,l,s=t[r],d=this,o=l;if(-1!==s.indexOf(".")){for(i=s.split("."),c=0;c<i.length-1;c++)a=i[c],o[a]=o[a]||{},o=o[a],d=d[a];s=i[i.length-1]}n=d[s],this.isObject(t[s])?o[s]=n.get():e.Signal&&n instanceof e.Signal?o[s]=n.value:e.Param&&n instanceof e.Param?o[s]=n.value:n instanceof AudioParam?o[s]=n.value:n instanceof e?o[s]=n.get():this.isFunction(n)||this.isUndef(n)||(o[s]=n)}return l},e.prototype._collectDefaults=function(e){if(t=[],this.isUndef(e.defaults)||(t=Object.keys(e.defaults)),!this.isUndef(e._super))for(var t,s=this._collectDefaults(e._super),n=0;n<s.length;n++)-1===t.indexOf(s[n])&&t.push(s[n]);return t},e.prototype.toString=function(){for(t in e){var t,n=t[0].match(/^[A-Z]$/),s=e[t]===this.constructor;if(this.isFunction(e[t])&&n&&s)return t}return"Tone"},Object.defineProperty(e.prototype,"numberOfInputs",{get:function(){return this.input?this.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(e.prototype,"numberOfOutputs",{get:function(){return this.output?this.isArray(this.output)?this.output.length:1:0}}),e.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this},e.prototype.connect=function(e,t,n){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].connect(e,0,n)):this.output.connect(e,t,n),this},e.prototype.disconnect=function(e,t,n){this.isArray(this.output)?this.isNumber(e)?this.output[e].disconnect():(t=this.defaultArg(t,0),this.output[t].disconnect(e,0,n)):this.output.disconnect.apply(this.output,arguments)},e.prototype.connectSeries=function(){if(1<arguments.length)for(var t,n=arguments[0],e=1;e<arguments.length;e++)t=arguments[e],n.connect(t),n=t;return this},e.prototype.chain=function(){if(0<arguments.length)for(var t,n=this,e=0;e<arguments.length;e++)t=arguments[e],n.connect(t),n=t;return this},e.prototype.fan=function(){if(0<arguments.length)for(var e=0;e<arguments.length;e++)this.connect(arguments[e]);return this},AudioNode.prototype.chain=e.prototype.chain,AudioNode.prototype.fan=e.prototype.fan,e.prototype.defaultArg=function(e,t){if(this.isObject(e)&&this.isObject(t)){var s,o,n={};for(s in e)n[s]=this.defaultArg(t[s],e[s]);for(o in t)n[o]=this.defaultArg(e[o],t[o]);return n}return this.isUndef(e)?t:e},e.prototype.optionsObject=function(e,t,n){var s,o={};if(1===e.length&&this.isObject(e[0]))o=e[0];else for(s=0;s<t.length;s++)o[t[s]]=e[s];return this.isUndef(n)?o:this.defaultArg(o,n)},e.prototype.isUndef=function(e){return void 0===e},e.prototype.isFunction=function(e){return"function"==typeof e},e.prototype.isNumber=function(e){return"number"==typeof e},e.prototype.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object},e.prototype.isBoolean=function(e){return"boolean"==typeof e},e.prototype.isArray=function(e){return Array.isArray(e)},e.prototype.isString=function(e){return"string"==typeof e},e.noOp=function(){},e.prototype._readOnly=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this._readOnly(e[t]);else Object.defineProperty(this,e,{writable:!1,enumerable:!0})},e.prototype._writable=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this._writable(e[t]);else Object.defineProperty(this,e,{writable:!0})},e.State={Started:"started",Stopped:"stopped",Paused:"paused"},e.prototype.equalPowerScale=function(e){var t=.5*Math.PI;return Math.sin(e*t)},e.prototype.dbToGain=function(e){return Math.pow(2,e/6)},e.prototype.gainToDb=function(e){return Math.log(e)/Math.LN10*20},e.prototype.intervalToFrequencyRatio=function(e){return Math.pow(2,e/12)},e.prototype.now=function(){return e.context.now()},e.now=function(){return e.context.now()},e.extend=function(t,n){function s(){}e.prototype.isUndef(n)&&(n=e),s.prototype=n.prototype,t.prototype=new s,(t.prototype.constructor=t)._super=n},Object.defineProperty(e,"context",{get:function(){return t},set:function(n){t=e.Context&&n instanceof e.Context?n:new e.Context(n),e.Context&&e.Context.emit("init",t)}}),Object.defineProperty(e.prototype,"context",{get:function(){return e.context}}),e.setContext=function(t){e.context=t},Object.defineProperty(e.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(e.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(e,"supported",{get:function(){var e=window.hasOwnProperty("AudioContext")||window.hasOwnProperty("webkitAudioContext"),t=window.hasOwnProperty("Promise"),n=window.hasOwnProperty("Worker");return e&&t&&n}}),e.version="r10",window.TONE_SILENCE_VERSION_LOGGING,e}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s,o=[n(17)];void 0===(s=function(e){var t=new function(){this.input=e.createGain(),this.output=e.createGain(),this.limiter=e.createDynamicsCompressor(),this.limiter.threshold.value=-3,this.limiter.ratio.value=20,this.limiter.knee.value=1,this.audiocontext=e,this.output.disconnect(),this.input.connect(this.limiter),this.limiter.connect(this.output),this.meter=e.createGain(),this.fftMeter=e.createGain(),this.output.connect(this.meter),this.output.connect(this.fftMeter),this.output.connect(this.audiocontext.destination),this.soundArray=[],this.parts=[],this.extensions=[]};return p5.prototype.getMasterVolume=function(){return t.output.gain.value},p5.prototype.masterVolume=function(e,n,s){if("number"==typeof e){n=n||0,s=s||0;var o=t.audiocontext.currentTime,i=t.output.gain.value;t.output.gain.cancelScheduledValues(o+s),t.output.gain.linearRampToValueAtTime(i,o+s),t.output.gain.linearRampToValueAtTime(e,o+s+n)}else{if(!e)return t.output.gain;e.connect(t.output.gain)}},p5.prototype.soundOut=p5.soundOut=t,p5.soundOut._silentNode=t.audiocontext.createGain(),p5.soundOut._silentNode.gain.value=0,p5.soundOut._silentNode.connect(t.audiocontext.destination),t}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(5),n(8),n(22),n(9)];void 0===(s=function(e){"use strict";return e.Signal=function(){var t=this.optionsObject(arguments,["value","units"],e.Signal.defaults);this.output=this._gain=this.context.createGain(),t.param=this._gain.gain,e.Param.call(this,t),this.input=this._param=this._gain.gain,this.context.getConstant(1).chain(this._gain)},e.extend(e.Signal,e.Param),e.Signal.defaults={value:0,units:e.Type.Default,convert:!0},e.Signal.prototype.connect=e.SignalBase.prototype.connect,e.Signal.prototype.dispose=function(){return e.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},e.Signal}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(2),n(9)];void 0===(s=function(e){"use strict";return e.Multiply=function(t){this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new e.Gain,this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(t,0)},e.extend(e.Multiply,e.Signal),e.Multiply.prototype.dispose=function(){return e.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},e.Multiply}.apply(t,o))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),s=n(51);return p5.Effect=function(){this.ac=t.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this._drywet=new s(1),this.wet=this.ac.createGain(),this.input.connect(this._drywet.a),this.wet.connect(this._drywet.b),this._drywet.connect(this.output),this.connect(),t.soundArray.push(this)},p5.Effect.prototype.amp=function(e,n,s){n=n||0,s=s||0;var o=t.audiocontext.currentTime,i=this.output.gain.value;this.output.gain.cancelScheduledValues(o),this.output.gain.linearRampToValueAtTime(i,o+s+.001),this.output.gain.linearRampToValueAtTime(e,o+s+n+.001)},p5.Effect.prototype.chain=function(){if(0<arguments.length){this.connect(arguments[0]);for(var e=1;e<arguments.length;e+=1)arguments[e-1].connect(arguments[e])}return this},p5.Effect.prototype.drywet=function(e){return void 0!==e&&(this._drywet.fade.value=e),this._drywet.fade.value},p5.Effect.prototype.connect=function(e){var t=e||p5.soundOut.input;this.output.connect(t.input?t.input:t)},p5.Effect.prototype.disconnect=function(){this.output&&this.output.disconnect()},p5.Effect.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.input&&(this.input.disconnect(),delete this.input),this.output&&(this.output.disconnect(),delete this.output),this._drywet&&(this._drywet.disconnect(),delete this._drywet),this.wet&&(this.wet.disconnect(),delete this.wet),this.ac=void 0},p5.Effect}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(19)];void 0===(s=function(e){"use strict";return e.WaveShaper=function(e,t){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(e)?this.curve=e:isFinite(e)||this.isUndef(e)?this._curve=new Float32Array(this.defaultArg(e,1024)):this.isFunction(e)&&(this._curve=new Float32Array(this.defaultArg(t,1024)),this.setMap(e))},e.extend(e.WaveShaper,e.SignalBase),e.WaveShaper.prototype.setMap=function(e){for(var s,t=0,n=this._curve.length;t<n;t++)s=t/(n-1)*2-1,this._curve[t]=e(s,t);return this._shaper.curve=this._curve,this},Object.defineProperty(e.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(e){this._curve=new Float32Array(e),this._shaper.curve=this._curve}}),Object.defineProperty(e.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(e){if(-1===["none","2x","4x"].indexOf(e))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=e}}),e.WaveShaper.prototype.dispose=function(){return e.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},e.WaveShaper}.apply(t,o))||(e.exports=s)},function(e,t,n){"use strict";var s;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}void 0===(s=function(){var i,t=n(1),a=n(10);p5.prototype.sampleRate=function(){return t.audiocontext.sampleRate},p5.prototype.freqToMidi=function(e){var t=Math.log(e/440)/Math.log(2);return Math.round(12*t)+69},i=p5.prototype.midiToFreq=function(e){return 440*Math.pow(2,(e-69)/12)};function s(e,t,n){for(var o=n.length,s=0;s<o;s++)e.setUint8(t+s,n.charCodeAt(s))}return p5.prototype.soundFormats=function(){t.extensions=[];for(var e=0;e<arguments.length;e++){if(arguments[e]=arguments[e].toLowerCase(),!(-1<["mp3","wav","ogg","m4a","aac"].indexOf(arguments[e])))throw arguments[e]+" is not a valid sound format!";t.extensions.push(arguments[e])}},p5.prototype.disposeSound=function(){for(var e=0;e<t.soundArray.length;e++)t.soundArray[e].dispose()},p5.prototype.registerMethod("remove",p5.prototype.disposeSound),p5.prototype._checkFileFormats=function(e){if("string"==typeof e){if(c=(s=e).split(".").pop(),-1<["mp3","wav","ogg","m4a","aac"].indexOf(c)){if(p5.prototype.isFileSupported(c))s=s;else for(var s,i,c,a=s.split("."),r=a[a.length-1],n=0;n<t.extensions.length;n++)if(i=t.extensions[n],p5.prototype.isFileSupported(i)){r="",2===a.length&&(r+=a[0]);for(n=1;n<=a.length-2;n++)r+="."+a[n];s=r+=".",s=s+=i;break}}else for(n=0;n<t.extensions.length;n++)if(i=t.extensions[n],p5.prototype.isFileSupported(i)){s=s+"."+i;break}}else if("object"===o(e))for(n=0;n<e.length;n++)if(i=e[n].split(".").pop(),p5.prototype.isFileSupported(i)){s=e[n];break}return s},p5.prototype._mathChain=function(e,t,n,s,o){for(var i in e.mathOps)e.mathOps[i]instanceof o&&(e.mathOps[i].dispose(),(n=i)<e.mathOps.length-1&&(s=e.mathOps[i+1]));return e.mathOps[n-1].disconnect(),e.mathOps[n-1].connect(t),t.connect(s),e.mathOps[n]=t,e},{convertToWav:function(e){var a,o=function(e,t){for(var i=e.length+t.length,n=new Float32Array(i),s=0,o=0;o<i;)n[o++]=e[s],n[o++]=t[s],s++;return n}(a=e.getChannelData(0),1<e.numberOfChannels?e.getChannelData(1):a),c=new window.ArrayBuffer(44+2*o.length),n=new window.DataView(c);s(n,0,"RIFF"),n.setUint32(4,36+2*o.length,!0),s(n,8,"WAVE"),s(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,2,!0),n.setUint32(24,t.audiocontext.sampleRate,!0),n.setUint32(28,4*t.audiocontext.sampleRate,!0),n.setUint16(32,4,!0),n.setUint16(34,16,!0),s(n,36,"data"),n.setUint32(40,2*o.length,!0);for(var l=o.length,r=44,i=0;i<l;i++)n.setInt16(r,32767*o[i],!0),r+=2;return n},midiToFreq:i,noteToFreq:function(e){if("string"!=typeof e)return e;var t={A:21,B:23,C:24,D:26,E:28,F:29,G:31}[e[0].toUpperCase()];switch(t+=12*(~~e.slice(-1)-1),e[1]){case"#":t+=1;break;case"b":t-=1}return i(t)},safeBufferSize:function(e){var s=e,n=new AudioWorkletNode(t.audiocontext,a.soundFileProcessor);return n instanceof ScriptProcessorNode&&(s=n.bufferSize),n.disconnect(),n=null,s}}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(2),n(9)];void 0===(s=function(e){"use strict";return e.Add=function(t){this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new e.Gain,this._param=this.input[1]=new e.Signal(t),this._param.connect(this._sum)},e.extend(e.Add,e.Signal),e.Add.prototype.dispose=function(){return e.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this._param.dispose(),this._param=null,this},e.Add}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(20),n(45),n(46),n(12)];void 0===(s=function(e){return e.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},e.prototype.toSeconds=function(t){return this.isNumber(t)?t:this.isUndef(t)?this.now():this.isString(t)?new e.Time(t).toSeconds():t instanceof e.TimeBase?t.toSeconds():void 0},e.prototype.toFrequency=function(t){return this.isNumber(t)?t:this.isString(t)||this.isUndef(t)?new e.Frequency(t).valueOf():t instanceof e.TimeBase?t.toFrequency():void 0},e.prototype.toTicks=function(t){return this.isNumber(t)||this.isString(t)?new e.TransportTime(t).toTicks():this.isUndef(t)?e.Transport.ticks:t instanceof e.TimeBase?t.toTicks():void 0},e}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(22),n(8)];void 0===(s=function(e){"use strict";return window.GainNode&&!AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e.Gain=function(){var t=this.optionsObject(arguments,["gain","units"],e.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new e.Param({param:this._gainNode.gain,units:t.units,value:t.gain,convert:t.convert}),this._readOnly("gain")},e.extend(e.Gain),e.Gain.defaults={gain:1,convert:!0},e.Gain.prototype.dispose=function(){e.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},e.prototype.createInsOuts=function(t,n){1===t?this.input=new e.Gain:1<t&&(this.input=new Array(t)),1===n?this.output=new e.Gain:1<n&&(this.output=new Array(t))},e.Gain}.apply(t,o))||(e.exports=s)},function(e){e.exports={recorderProcessor:"recorder-processor",soundFileProcessor:"sound-file-processor",amplitudeProcessor:"amplitude-processor"}},function(e,t,n){"use strict";var s;void 0===(s=function(){return function(e,t,n){var o,i,s=new Error;return s.name=e,s.originalStack=s.stack+t,i=s.stack+t,s.failedPath=n,o=(o=i.split(`
`)).filter(function(e){return!e.match(/(p5.|native code|globalInit)/g)}),s.stack=o.join(`
`),s}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(18)];void 0===(s=function(e){function n(n,s,o){if(n.input)Array.isArray(n.input)?(e.prototype.isUndef(o)&&(o=0),this.connect(n.input[o])):this.connect(n.input,s,o);else try{n instanceof AudioNode?t.call(this,n,s,o):t.call(this,n,s)}catch(e){throw new Error("error connecting to node: "+n+`
`+e)}}var t,s;return!window.hasOwnProperty("AudioContext")&&window.hasOwnProperty("webkitAudioContext")&&(window.AudioContext=window.webkitAudioContext),e.Context=function(t){for(var n in e.Emitter.call(this),t=t||new window.AudioContext,this._context=t,this._context)this._defineProperty(this._context,n);this._latencyHint="interactive",this._lookAhead=.1,this._updateInterval=this._lookAhead/3,this._computedUpdateInterval=0,this._worker=this._createWorker(),this._constants={}},e.extend(e.Context,e.Emitter),e.Emitter.mixin(e.Context),e.Context.prototype._defineProperty=function(e,t){this.isUndef(this[t])&&Object.defineProperty(this,t,{get:function(){return"function"==typeof e[t]?e[t].bind(e):e[t]},set:function(n){e[t]=n}})},e.Context.prototype.now=function(){return this._context.currentTime},e.Context.prototype._createWorker=function(){window.URL=window.URL||window.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){	timeoutTime = parseInt(msg.data);};function tick(){	setTimeout(tick, timeoutTime);	self.postMessage('tick');}tick();"]),n=URL.createObjectURL(t),e=new Worker(n);return e.addEventListener("message",function(){this.emit("tick")}.bind(this)),e.addEventListener("message",function(){var t,e=this.now();this.isNumber(this._lastUpdate)&&(t=e-this._lastUpdate,this._computedUpdateInterval=Math.max(t,.97*this._computedUpdateInterval)),this._lastUpdate=e}.bind(this)),e},e.Context.prototype.getConstant=function(e){if(this._constants[e])return this._constants[e];for(var t,s=this._context.createBuffer(1,128,this._context.sampleRate),o=s.getChannelData(0),n=0;n<o.length;n++)o[n]=e;return t=this._context.createBufferSource(),t.channelCount=1,t.channelCountMode="explicit",t.buffer=s,t.loop=!0,t.start(0),this._constants[e]=t},Object.defineProperty(e.Context.prototype,"lag",{get:function(){var e=this._computedUpdateInterval-this._updateInterval;return Math.max(e,0)}}),Object.defineProperty(e.Context.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(e){this._lookAhead=e}}),Object.defineProperty(e.Context.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,e.prototype.blockTime),this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(e.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(e){var t=e;if(this._latencyHint=e,this.isString(e))switch(e){case"interactive":t=.1,this._context.latencyHint=e;break;case"playback":t=.8,this._context.latencyHint=e;break;case"balanced":t=.25,this._context.latencyHint=e;break;case"fastest":t=.01}this.lookAhead=t,this.updateInterval=t/3}}),e.supported&&(t=AudioNode.prototype.connect,s=AudioNode.prototype.disconnect,AudioNode.prototype.connect!==n&&(AudioNode.prototype.connect=n,AudioNode.prototype.disconnect=function(t,n,o){if(t&&t.input&&Array.isArray(t.input))e.prototype.isUndef(o)&&(o=0),this.disconnect(t.input[o],n,o);else if(t&&t.input)this.disconnect(t.input,n,o);else try{s.apply(this,arguments)}catch(e){throw new Error("error disconnecting node: "+t+`
`+e)}}),e.context=new e.Context),e.Context}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(7),n(3),n(2)];void 0===(s=function(e){"use strict";return e.Scale=function(t,n){this._outputMin=this.defaultArg(t,0),this._outputMax=this.defaultArg(n,1),this._scale=this.input=new e.Multiply(1),this._add=this.output=new e.Add(0),this._scale.connect(this._add),this._setRange()},e.extend(e.Scale,e.SignalBase),Object.defineProperty(e.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(e){this._outputMin=e,this._setRange()}}),Object.defineProperty(e.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(e){this._outputMax=e,this._setRange()}}),e.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},e.Scale.prototype.dispose=function(){return e.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},e.Scale}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(2),n(24)];void 0===(s=function(e){"use strict";return e.TimelineSignal=function(){var t=this.optionsObject(arguments,["value","units"],e.Signal.defaults);this._events=new e.Timeline(10),e.Signal.apply(this,t),t.param=this._param,e.Param.call(this,t),this._initial=this._fromUnits(this._param.value)},e.extend(e.TimelineSignal,e.Param),e.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Curve:"curve",Set:"set"},Object.defineProperty(e.TimelineSignal.prototype,"value",{get:function(){var e=this.now(),t=this.getValueAtTime(e);return this._toUnits(t)},set:function(e){var t=this._fromUnits(e);this._initial=t,this.cancelScheduledValues(),this._param.value=t}}),e.TimelineSignal.prototype.setValueAtTime=function(t,n){return t=this._fromUnits(t),n=this.toSeconds(n),this._events.add({type:e.TimelineSignal.Type.Set,value:t,time:n}),this._param.setValueAtTime(t,n),this},e.TimelineSignal.prototype.linearRampToValueAtTime=function(t,n){return t=this._fromUnits(t),n=this.toSeconds(n),this._events.add({type:e.TimelineSignal.Type.Linear,value:t,time:n}),this._param.linearRampToValueAtTime(t,n),this},e.TimelineSignal.prototype.exponentialRampToValueAtTime=function(t,n){n=this.toSeconds(n);var o,s=this._searchBefore(n);return s&&0===s.value&&this.setValueAtTime(this._minOutput,s.time),t=this._fromUnits(t),o=Math.max(t,this._minOutput),this._events.add({type:e.TimelineSignal.Type.Exponential,value:o,time:n}),t<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,n-this.sampleTime),this.setValueAtTime(0,n)):this._param.exponentialRampToValueAtTime(t,n),this},e.TimelineSignal.prototype.setTargetAtTime=function(t,n,s){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),s=Math.max(this._minOutput,s),n=this.toSeconds(n),this._events.add({type:e.TimelineSignal.Type.Target,value:t,time:n,constant:s}),this._param.setTargetAtTime(t,n,s),this},e.TimelineSignal.prototype.setValueCurveAtTime=function(t,n,s,o){o=this.defaultArg(o,1);for(var a,c,i=new Array(t.length),r=0;r<i.length;r++)i[r]=this._fromUnits(t[r])*o;n=this.toSeconds(n),s=this.toSeconds(s),this._events.add({type:e.TimelineSignal.Type.Curve,value:i,time:n,duration:s}),this._param.setValueAtTime(i[0],n);for(a=1;a<i.length;a++)c=n+a/(i.length-1)*s,this._param.linearRampToValueAtTime(i[a],c);return this},e.TimelineSignal.prototype.cancelScheduledValues=function(e){return e=this.toSeconds(e),this._events.cancel(e),this._param.cancelScheduledValues(e),this},e.TimelineSignal.prototype.setRampPoint=function(t){t=this.toSeconds(t);var o,s=this._toUnits(this.getValueAtTime(t)),n=this._searchBefore(t);return n&&n.time===t?this.cancelScheduledValues(t+this.sampleTime):n&&n.type===e.TimelineSignal.Type.Curve&&n.time+n.duration>t?(this.cancelScheduledValues(t),this.linearRampToValueAtTime(s,t)):(o=this._searchAfter(t),o&&(this.cancelScheduledValues(t),o.type===e.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(s,t):o.type===e.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(s,t)),this.setValueAtTime(s,t)),this},e.TimelineSignal.prototype.linearRampToValueBetween=function(e,t,n){return this.setRampPoint(t),this.linearRampToValueAtTime(e,n),this},e.TimelineSignal.prototype.exponentialRampToValueBetween=function(e,t,n){return this.setRampPoint(t),this.exponentialRampToValueAtTime(e,n),this},e.TimelineSignal.prototype._searchBefore=function(e){return this._events.get(e)},e.TimelineSignal.prototype._searchAfter=function(e){return this._events.getAfter(e)},e.TimelineSignal.prototype.getValueAtTime=function(t){t=this.toSeconds(t);var i,a,s=this._searchAfter(t),n=this._searchBefore(t),o=this._initial;return null===n?o=this._initial:n.type===e.TimelineSignal.Type.Target?(i=this._events.getBefore(n.time),a=null===i?this._initial:i.value,o=this._exponentialApproach(n.time,a,n.value,n.constant,t)):o=n.type===e.TimelineSignal.Type.Curve?this._curveInterpolate(n.time,n.value,n.duration,t):null===s?n.value:s.type===e.TimelineSignal.Type.Linear?this._linearInterpolate(n.time,n.value,s.time,s.value,t):s.type===e.TimelineSignal.Type.Exponential?this._exponentialInterpolate(n.time,n.value,s.time,s.value,t):n.value,o},e.TimelineSignal.prototype.connect=e.SignalBase.prototype.connect,e.TimelineSignal.prototype._exponentialApproach=function(e,t,n,s,o){return n+(t-n)*Math.exp(-(o-e)/s)},e.TimelineSignal.prototype._linearInterpolate=function(e,t,n,s,o){return t+(o-e)/(n-e)*(s-t)},e.TimelineSignal.prototype._exponentialInterpolate=function(e,t,n,s,o){return(t=Math.max(this._minOutput,t))*Math.pow(s/t,(o-e)/(n-e))},e.TimelineSignal.prototype._curveInterpolate=function(e,t,n,s){if(o=t.length,e+n<=s)return t[o-1];if(s<=e)return t[0];var o,i=(s-e)/n,a=Math.floor((o-1)*i),r=Math.ceil((o-1)*i),c=t[a],l=t[r];return r===a?c:this._linearInterpolate(a,c,r,l,i*(o-1))},e.TimelineSignal.prototype.dispose=function(){e.Signal.prototype.dispose.call(this),e.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},e.TimelineSignal}.apply(t,o))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(4);return p5.Filter=function(e){t.call(this),this.biquad=this.ac.createBiquadFilter(),this.input.connect(this.biquad),this.biquad.connect(this.wet),e&&this.setType(e),this._on=!0,this._untoggledType=this.biquad.type},p5.Filter.prototype=Object.create(t.prototype),p5.Filter.prototype.process=function(e,t,n,s){e.connect(this.input),this.set(t,n,s)},p5.Filter.prototype.set=function(e,t,n){e&&this.freq(e,n),t&&this.res(t,n)},p5.Filter.prototype.freq=function(e,t){var n=t||0;return e<=0&&(e=1),"number"==typeof e?(this.biquad.frequency.cancelScheduledValues(this.ac.currentTime+.01+n),this.biquad.frequency.exponentialRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.biquad.frequency),this.biquad.frequency.value},p5.Filter.prototype.res=function(e,t){var n=t||0;return"number"==typeof e?(this.biquad.Q.value=e,this.biquad.Q.cancelScheduledValues(this.ac.currentTime+.01+n),this.biquad.Q.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.biquad.Q),this.biquad.Q.value},p5.Filter.prototype.gain=function(e,t){var n=t||0;return"number"==typeof e?(this.biquad.gain.value=e,this.biquad.gain.cancelScheduledValues(this.ac.currentTime+.01+n),this.biquad.gain.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.biquad.gain),this.biquad.gain.value},p5.Filter.prototype.toggle=function(){return this._on=!this._on,!0===this._on?this.biquad.type=this._untoggledType:!1===this._on&&(this.biquad.type="allpass"),this._on},p5.Filter.prototype.setType=function(e){this.biquad.type=e,this._untoggledType=this.biquad.type},p5.Filter.prototype.dispose=function(){t.prototype.dispose.apply(this),this.biquad&&(this.biquad.disconnect(),delete this.biquad)},p5.LowPass=function(){p5.Filter.call(this,"lowpass")},p5.LowPass.prototype=Object.create(p5.Filter.prototype),p5.HighPass=function(){p5.Filter.call(this,"highpass")},p5.HighPass.prototype=Object.create(p5.Filter.prototype),p5.BandPass=function(){p5.Filter.call(this,"bandpass")},p5.BandPass.prototype=Object.create(p5.Filter.prototype),p5.Filter}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(7),n(25),n(2),n(9)];void 0===(s=function(e){"use strict";return e.Subtract=function(t){this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new e.Gain,this._neg=new e.Negate,this._param=this.input[1]=new e.Signal(t),this._param.chain(this._neg,this._sum)},e.extend(e.Subtract,e.Signal),e.Subtract.prototype.dispose=function(){return e.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},e.Subtract}.apply(t,o))||(e.exports=s)},function(e,t,n){"use strict";(function(s){var o,i;s.TONE_SILENCE_VERSION_LOGGING=!0,o=[n(35),n(12),n(0)],void 0===(i=function(e,t,n){var s=new window.AudioContext;return n.context.dispose(),n.setContext(s),p5.prototype.getAudioContext=function(){return s},p5.prototype.userStartAudio=function(t,n){var o=t;return t instanceof p5.Element?o=t.elt:t instanceof Array&&t[0]instanceof p5.Element&&(o=t.map(function(e){return e.elt})),e(s,o,n)},s}.apply(t,o))||(e.exports=i)}).call(this,n(34))},function(e,t,n){var s,o=[n(0)];void 0===(s=function(e){"use strict";return e.Emitter=function(){this._events={}},e.extend(e.Emitter),e.Emitter.prototype.on=function(e,t){for(var n,o=e.split(/\W+/),s=0;s<o.length;s++)n=o[s],this._events.hasOwnProperty(n)||(this._events[n]=[]),this._events[n].push(t);return this},e.Emitter.prototype.off=function(t,n){for(var s,o,a=t.split(/\W+/),i=0;i<a.length;i++)if(t=a[i],this._events.hasOwnProperty(t))if(e.prototype.isUndef(n))this._events[t]=[];else for(o=this._events[t],s=0;s<o.length;s++)o[s]===n&&o.splice(s,1);return this},e.Emitter.prototype.emit=function(e){if(this._events&&(n=Array.apply(null,arguments).slice(1),this._events.hasOwnProperty(e)))for(var n,s=this._events[e],t=0,o=s.length;t<o;t++)s[t].apply(this,n);return this},e.Emitter.mixin=function(t){s=["on","off","emit"],t._events={};for(n=0;n<s.length;n++){var n,s,o=s[n],i=e.Emitter.prototype[o];t[o]=i}},e.Emitter.prototype.dispose=function(){return e.prototype.dispose.call(this),this._events=null,this},e.Emitter}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0)];void 0===(s=function(e){"use strict";return e.SignalBase=function(){},e.extend(e.SignalBase),e.SignalBase.prototype.connect=function(t,n,s){return e.Signal&&e.Signal===t.constructor||e.Param&&e.Param===t.constructor||e.TimelineSignal&&e.TimelineSignal===t.constructor?(t._param.cancelScheduledValues(0),t._param.value=0,t.overridden=!0):t instanceof AudioParam&&(t.cancelScheduledValues(0),t.value=0),e.prototype.connect.call(this,t,n,s),this},e.SignalBase}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(21)];void 0===(s=function(e){return e.Time=function(t,n){if(!(this instanceof e.Time))return new e.Time(t,n);this._plusNow=!1,e.TimeBase.call(this,t,n)},e.extend(e.Time,e.TimeBase),e.Time.prototype._unaryExpressions=Object.create(e.TimeBase.prototype._unaryExpressions),e.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(t){return e.Transport.nextSubdivision(t())}},e.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(e){return this._plusNow=!0,e()}},e.Time.prototype.quantize=function(e,t){return t=this.defaultArg(t,1),this._expr=function(e,t,n){return e=e(),t=t.toSeconds(),e+(Math.round(e/t)*t-e)*n}.bind(this,this._expr,new this.constructor(e),t),this},e.Time.prototype.addNow=function(){return this._plusNow=!0,this},e.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},e.Time.prototype.copy=function(t){return e.TimeBase.prototype.copy.call(this,t),this._plusNow=t._plusNow,this},e.Time.prototype.toNotation=function(){var e=this.toSeconds(),t=this._toNotationHelper(e,["1m","2n","4n","8n","16n","32n","64n","128n"]),n=this._toNotationHelper(e,["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"]);return n.split("+").length<t.split("+").length?n:t},e.Time.prototype._toNotationHelper=function(e,t){for(var n,i,a=this._notationToUnits(t[t.length-1]),s="",o=0;o<t.length;o++)if(i=this._notationToUnits(t[o]),n=e/i,1-n%1<1e-6&&(n+=1e-6),0<(n=Math.floor(n))){if(s+=1===n?t[o]:n.toString()+"*"+t[o],(e-=n*i)<a)break;s+=" + "}return""===s&&(s="0"),s},e.Time.prototype._notationToUnits=function(e){for(var s,o,t=this._primaryExpressions,i=[t.n,t.t,t.m],n=0;n<i.length;n++)if(s=i[n],o=e.match(s.regexp),o)return s.method.call(this,o[1])},e.Time.prototype.toBarsBeatsSixteenths=function(){var n=this._beatsToUnits(1),e=this.toSeconds()/n,s=Math.floor(e/this._timeSignature()),t=e%1*4;return e=Math.floor(e)%this._timeSignature(),3<(t=t.toString()).length&&(t=parseFloat(t).toFixed(3)),[s,e,t].join(":")},e.Time.prototype.toTicks=function(){var t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.floor(n*e.Transport.PPQ)},e.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},e.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},e.Time.prototype.toSeconds=function(){return this.valueOf()},e.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},e.Time.prototype.valueOf=function(){return this._expr()+(this._plusNow?this.now():0)},e.Time}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0)];void 0===(s=function(e){return e.TimeBase=function(t,n){if(!(this instanceof e.TimeBase))return new e.TimeBase(t,n);if(this._expr=this._noOp,t instanceof e.TimeBase)this.copy(t);else if(!this.isUndef(n)||this.isNumber(t)){n=this.defaultArg(n,this._defaultUnits);var s=this._primaryExpressions[n].method;this._expr=s.bind(this,t)}else this.isString(t)?this.set(t):this.isUndef(t)&&(this._expr=this._defaultExpr())},e.extend(e.TimeBase),e.TimeBase.prototype.set=function(e){return this._expr=this._parseExprString(e),this},e.TimeBase.prototype.clone=function(){var e=new this.constructor;return e.copy(this),e},e.TimeBase.prototype.copy=function(e){var t=e._expr();return this.set(t)},e.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(e){return 1===(e=parseInt(e))?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/e)}},t:{regexp:/^(\d+)t/i,method:function(e){return e=parseInt(e),this._beatsToUnits(8/(3*parseInt(e)))}},m:{regexp:/^(\d+)m/i,method:function(e){return this._beatsToUnits(parseInt(e)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(e){return this._ticksToUnits(parseInt(e))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(e){return this._frequencyToUnits(parseFloat(e))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(e,t,n){var s=0;return e&&"0"!==e&&(s+=this._beatsToUnits(this._timeSignature()*parseFloat(e))),t&&"0"!==t&&(s+=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(e){return this._secondsToUnits(parseFloat(e))}},samples:{regexp:/^(\d+)samples/,method:function(e){return parseInt(e)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)/,method:function(e){return this._primaryExpressions[this._defaultUnits].method.call(this,e)}}},e.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(e,t){return e()+t()}},"-":{regexp:/^-/,precedence:2,method:function(e,t){return e()-t()}},"*":{regexp:/^\*/,precedence:1,method:function(e,t){return e()*t()}},"/":{regexp:/^\//,precedence:1,method:function(e,t){return e()/t()}}},e.TimeBase.prototype._unaryExpressions={neg:{regexp:/^-/,method:function(e){return-e()}}},e.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},e.TimeBase.prototype._tokenize=function(e){for(var n,s=-1,t=[];0<e.length;)n=o(e=e.trim(),this),t.push(n),e=e.substr(n.value.length);function o(e,t){for(o=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],n=0;n<o.length;n++){i=t[o[n]];for(r in i){var n,o,i,r,s=i[r],c=s.regexp,a=e.match(c);if(null!==a)return{method:s.method,precedence:s.precedence,regexp:s.regexp,value:a[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+e)}return{next:function(){return t[++s]},peek:function(){return t[s+1]}}},e.TimeBase.prototype._matchGroup=function(e,t,n){if(!this.isUndef(e))for(o in t){var o,s=t[o];if(s.regexp.test(e.value)){if(this.isUndef(n))return s;if(s.precedence===n)return s}}return!1},e.TimeBase.prototype._parseBinary=function(e,t){this.isUndef(t)&&(t=2),n=t<0?this._parseUnary(e):this._parseBinary(e,t-1);for(var n,s=e.peek();s&&this._matchGroup(s,this._binaryExpressions,t);)n=(s=e.next()).method.bind(this,n,this._parseBinary(e,t-1)),s=e.peek();return n},e.TimeBase.prototype._parseUnary=function(e){var n,t=e.peek(),s=this._matchGroup(t,this._unaryExpressions);return s?(t=e.next(),n=this._parseUnary(e),s.method.bind(this,n)):this._parsePrimary(e)},e.TimeBase.prototype._parsePrimary=function(e){if(t=e.peek(),this.isUndef(t))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(t,this._primaryExpressions)){var t,s,n=(t=e.next()).value.match(t.regexp);return t.method.bind(this,n[1],n[2],n[3])}if(t&&"("===t.value){if(e.next(),s=this._parseBinary(e),!(t=e.next())||")"!==t.value)throw new SyntaxError("Expected )");return s}throw new SyntaxError("Tone.TimeBase: Cannot process token "+t.value)},e.TimeBase.prototype._parseExprString=function(e){this.isString(e)||(e=e.toString());var t=this._tokenize(e);return this._parseBinary(t)},e.TimeBase.prototype._noOp=function(){return 0},e.TimeBase.prototype._defaultExpr=function(){return this._noOp},e.TimeBase.prototype._defaultUnits="s",e.TimeBase.prototype._frequencyToUnits=function(e){return 1/e},e.TimeBase.prototype._beatsToUnits=function(t){return 60/e.Transport.bpm.value*t},e.TimeBase.prototype._secondsToUnits=function(e){return e},e.TimeBase.prototype._ticksToUnits=function(t){return t*(this._beatsToUnits(1)/e.Transport.PPQ)},e.TimeBase.prototype._timeSignature=function(){return e.Transport.timeSignature},e.TimeBase.prototype._pushExpr=function(t,n,s){return t instanceof e.TimeBase||(t=new this.constructor(t,s)),this._expr=this._binaryExpressions[n].method.bind(this,this._expr,t._expr),this},e.TimeBase.prototype.add=function(e,t){return this._pushExpr(e,"+",t)},e.TimeBase.prototype.sub=function(e,t){return this._pushExpr(e,"-",t)},e.TimeBase.prototype.mult=function(e,t){return this._pushExpr(e,"*",t)},e.TimeBase.prototype.div=function(e,t){return this._pushExpr(e,"/",t)},e.TimeBase.prototype.valueOf=function(){return this._expr()},e.TimeBase.prototype.dispose=function(){this._expr=null},e.TimeBase}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(8)];void 0===(s=function(e){"use strict";return e.Param=function(){var t=this.optionsObject(arguments,["param","units","convert"],e.Param.defaults);this._param=this.input=t.param,this.units=t.units,this.convert=t.convert,this.overridden=!1,this._lfo=null,this.isObject(t.lfo)?this.value=t.lfo:this.isUndef(t.value)||(this.value=t.value)},e.extend(e.Param),e.Param.defaults={units:e.Type.Default,convert:!0,param:void 0},Object.defineProperty(e.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(t){if(this.isObject(t)){if(this.isUndef(e.LFO))throw new Error("Include 'Tone.LFO' to use an LFO as a Param value.");this._lfo&&this._lfo.dispose(),this._lfo=new e.LFO(t).start(),this._lfo.connect(this.input)}else{var n=this._fromUnits(t);this._param.cancelScheduledValues(0),this._param.value=n}}}),e.Param.prototype._fromUnits=function(t){if(!this.convert&&!this.isUndef(this.convert))return t;switch(this.units){case e.Type.Time:return this.toSeconds(t);case e.Type.Frequency:return this.toFrequency(t);case e.Type.Decibels:return this.dbToGain(t);case e.Type.NormalRange:return Math.min(Math.max(t,0),1);case e.Type.AudioRange:return Math.min(Math.max(t,-1),1);case e.Type.Positive:return Math.max(t,0);default:return t}},e.Param.prototype._toUnits=function(t){if(!this.convert&&!this.isUndef(this.convert))return t;switch(this.units){case e.Type.Decibels:return this.gainToDb(t);default:return t}},e.Param.prototype._minOutput=1e-5,e.Param.prototype.setValueAtTime=function(e,t){return e=this._fromUnits(e),(t=this.toSeconds(t))<=this.now()+this.blockTime?this._param.value=e:this._param.setValueAtTime(e,t),this},e.Param.prototype.setRampPoint=function(e){e=this.defaultArg(e,this.now());var t=this._param.value;return 0===t&&(t=this._minOutput),this._param.setValueAtTime(t,e),this},e.Param.prototype.linearRampToValueAtTime=function(e,t){return e=this._fromUnits(e),this._param.linearRampToValueAtTime(e,this.toSeconds(t)),this},e.Param.prototype.exponentialRampToValueAtTime=function(e,t){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),this._param.exponentialRampToValueAtTime(e,this.toSeconds(t)),this},e.Param.prototype.exponentialRampToValue=function(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this},e.Param.prototype.linearRampToValue=function(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this},e.Param.prototype.setTargetAtTime=function(e,t,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=Math.max(this._minOutput,n),this._param.setTargetAtTime(e,this.toSeconds(t),n),this},e.Param.prototype.setValueCurveAtTime=function(e,t,n){for(var s=0;s<e.length;s++)e[s]=this._fromUnits(e[s]);return this._param.setValueCurveAtTime(e,this.toSeconds(t),this.toSeconds(n)),this},e.Param.prototype.cancelScheduledValues=function(e){return this._param.cancelScheduledValues(this.toSeconds(e)),this},e.Param.prototype.rampTo=function(t,n,s){return n=this.defaultArg(n,0),this.units===e.Type.Frequency||this.units===e.Type.BPM||this.units===e.Type.Decibels?this.exponentialRampToValue(t,n,s):this.linearRampToValue(t,n,s),this},Object.defineProperty(e.Param.prototype,"lfo",{get:function(){return this._lfo}}),e.Param.prototype.dispose=function(){return e.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},e.Param}.apply(t,o))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),o=n(7),i=n(3),a=n(13);p5.Oscillator=function(e,n){if("string"==typeof e){var s=n;n=e,e=s}"number"==typeof n&&(s=n,n=e,e=s),this.started=!1,this.phaseAmount=void 0,this.oscillator=t.audiocontext.createOscillator(),this.f=e||440,this.oscillator.type=n||"sine",this.oscillator.frequency.setValueAtTime(this.f,t.audiocontext.currentTime),this.output=t.audiocontext.createGain(),this._freqMods=[],this.output.gain.value=.5,this.output.gain.setValueAtTime(.5,t.audiocontext.currentTime),this.oscillator.connect(this.output),this.panPosition=0,this.connection=t.input,this.panner=new p5.Panner(this.output,this.connection,1),this.mathOps=[this.output],t.soundArray.push(this)},p5.Oscillator.prototype.start=function(e,n){if(this.started&&(s=t.audiocontext.currentTime,this.stop(s)),!this.started){var s,o,i=n||this.f,a=this.oscillator.type;for(o in this.oscillator&&(this.oscillator.disconnect(),delete this.oscillator),this.oscillator=t.audiocontext.createOscillator(),this.oscillator.frequency.value=Math.abs(i),this.oscillator.type=a,this.oscillator.connect(this.output),e=e||0,this.oscillator.start(e+t.audiocontext.currentTime),this.freqNode=this.oscillator.frequency,this._freqMods)void 0!==this._freqMods[o].connect&&this._freqMods[o].connect(this.oscillator.frequency);this.started=!0}},p5.Oscillator.prototype.stop=function(e){if(this.started){var n=e||0,s=t.audiocontext.currentTime;this.oscillator.stop(n+s),this.started=!1}},p5.Oscillator.prototype.amp=function(e,n,s){if("number"==typeof e){n=n||0,s=s||0;var o=t.audiocontext.currentTime;this.output.gain.linearRampToValueAtTime(e,o+s+n)}else{if(!e)return this.output.gain;e.connect(this.output.gain)}},p5.Oscillator.prototype.fade=p5.Oscillator.prototype.amp,p5.Oscillator.prototype.getAmp=function(){return this.output.gain.value},p5.Oscillator.prototype.freq=function(e,n,s){if("number"!=typeof e||isNaN(e)){if(!e)return this.oscillator.frequency;e.output&&(e=e.output),e.connect(this.oscillator.frequency),this._freqMods.push(e)}else{this.f=e;var o=t.audiocontext.currentTime;s=s||0,n=n||0,0===n?this.oscillator.frequency.setValueAtTime(e,s+o):0<e?this.oscillator.frequency.exponentialRampToValueAtTime(e,s+n+o):this.oscillator.frequency.linearRampToValueAtTime(e,s+n+o),this.phaseAmount&&this.phase(this.phaseAmount)}},p5.Oscillator.prototype.getFreq=function(){return this.oscillator.frequency.value},p5.Oscillator.prototype.setType=function(e){this.oscillator.type=e},p5.Oscillator.prototype.getType=function(){return this.oscillator.type},p5.Oscillator.prototype.connect=function(e){e?e.hasOwnProperty("input")?(this.panner.connect(e.input),this.connection=e.input):(this.panner.connect(e),this.connection=e):this.panner.connect(t.input)},p5.Oscillator.prototype.disconnect=function(){this.output&&this.output.disconnect(),this.panner&&(this.panner.disconnect(),this.output&&this.output.connect(this.panner)),this.oscMods=[]},p5.Oscillator.prototype.pan=function(e,t){this.panPosition=e,this.panner.pan(e,t)},p5.Oscillator.prototype.getPan=function(){return this.panPosition},p5.Oscillator.prototype.dispose=function(){var e,n=t.soundArray.indexOf(this);(t.soundArray.splice(n,1),this.oscillator)&&(e=t.audiocontext.currentTime,this.stop(e),this.disconnect(),this.panner=null,this.oscillator=null),this.osc2&&this.osc2.dispose()},p5.Oscillator.prototype.phase=function(e){var n=p5.prototype.map(e,0,1,0,1/this.f),s=t.audiocontext.currentTime;this.phaseAmount=e,this.dNode||(this.dNode=t.audiocontext.createDelay(),this.oscillator.disconnect(),this.oscillator.connect(this.dNode),this.dNode.connect(this.output)),this.dNode.delayTime.setValueAtTime(n,s)};function s(e,t,n,s,o){var i,a=e.oscillator;for(i in e.mathOps)e.mathOps[i]instanceof o&&(a.disconnect(),e.mathOps[i].dispose(),(n=i)<e.mathOps.length-2&&(s=e.mathOps[i+1]));return n===e.mathOps.length-1&&e.mathOps.push(s),0<i&&(a=e.mathOps[i-1]),a.disconnect(),a.connect(t),t.connect(s),e.mathOps[n]=t,e}p5.Oscillator.prototype.add=function(e){var t=new o(e),n=this.mathOps.length-1,i=this.output;return s(this,t,n,i,o)},p5.Oscillator.prototype.mult=function(e){var t=new i(e),n=this.mathOps.length-1,o=this.output;return s(this,t,n,o,i)},p5.Oscillator.prototype.scale=function(e,t,n,o){var i,r=4===arguments.length?(i=p5.prototype.map(n,e,t,0,1)-.5,p5.prototype.map(o,e,t,0,1)-.5):(i=e,t),c=new a(i,r),l=this.mathOps.length-1,d=this.output;return s(this,c,l,d,a)},p5.SinOsc=function(e){p5.Oscillator.call(this,e,"sine")},p5.SinOsc.prototype=Object.create(p5.Oscillator.prototype),p5.TriOsc=function(e){p5.Oscillator.call(this,e,"triangle")},p5.TriOsc.prototype=Object.create(p5.Oscillator.prototype),p5.SawOsc=function(e){p5.Oscillator.call(this,e,"sawtooth")},p5.SawOsc.prototype=Object.create(p5.Oscillator.prototype),p5.SqrOsc=function(e){p5.Oscillator.call(this,e,"square")},p5.SqrOsc.prototype=Object.create(p5.Oscillator.prototype)}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(8)];void 0===(s=function(e){"use strict";return e.Timeline=function(){var t=this.optionsObject(arguments,["memory"],e.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=t.memory},e.extend(e.Timeline),e.Timeline.defaults={memory:1/0},Object.defineProperty(e.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),e.Timeline.prototype.add=function(e){if(this.isUndef(e.time))throw new Error("Tone.Timeline: events must have a time attribute");if(this._timeline.length){var t,n=this._search(e.time);this._timeline.splice(n+1,0,e)}else this._timeline.push(e);return this.length>this.memory&&(t=this.length-this.memory,this._timeline.splice(0,t)),this},e.Timeline.prototype.remove=function(e){if(this._iterating)this._toRemove.push(e);else{var t=this._timeline.indexOf(e);-1!==t&&this._timeline.splice(t,1)}return this},e.Timeline.prototype.get=function(e){var t=this._search(e);return-1!==t?this._timeline[t]:null},e.Timeline.prototype.peek=function(){return this._timeline[0]},e.Timeline.prototype.shift=function(){return this._timeline.shift()},e.Timeline.prototype.getAfter=function(e){var t=this._search(e);return t+1<this._timeline.length?this._timeline[t+1]:null},e.Timeline.prototype.getBefore=function(e){var n,t=this._timeline.length;return 0<t&&this._timeline[t-1].time<e?this._timeline[t-1]:(n=this._search(e),0<=n-1?this._timeline[n-1]:null)},e.Timeline.prototype.cancel=function(e){if(1<this._timeline.length){var n,t=this._search(e);if(0<=t)if(this._timeline[t].time===e){for(n=t;0<=n&&this._timeline[n].time===e;n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=e&&(this._timeline=[]);return this},e.Timeline.prototype.cancelBefore=function(e){if(this._timeline.length){var t=this._search(e);0<=t&&(this._timeline=this._timeline.slice(t+1))}return this},e.Timeline.prototype._search=function(e){var n,s=0,o=this._timeline.length,a=o;if(0<o&&this._timeline[o-1].time<=e)return o-1;for(;s<a;){var t=Math.floor(s+(a-s)/2),i=this._timeline[t],r=this._timeline[t+1];if(i.time===e){for(n=t;n<this._timeline.length;n++)this._timeline[n].time===e&&(t=n);return t}if(i.time<e&&r.time>e)return t;i.time>e?a=t:i.time<e&&(s=t+1)}return-1},e.Timeline.prototype._iterate=function(e,t,n){this._iterating=!0,t=this.defaultArg(t,0),n=this.defaultArg(n,this._timeline.length-1);for(var s,i,o=t;o<=n;o++)e(this._timeline[o]);if(this._iterating=!1,0<this._toRemove.length){for(s=0;s<this._toRemove.length;s++)i=this._timeline.indexOf(this._toRemove[s]),-1!==i&&this._timeline.splice(i,1);this._toRemove=[]}},e.Timeline.prototype.forEach=function(e){return this._iterate(e),this},e.Timeline.prototype.forEachBefore=function(e,t){var n=this._search(e);return-1!==n&&this._iterate(t,0,n),this},e.Timeline.prototype.forEachAfter=function(e,t){var n=this._search(e);return this._iterate(t,n+1),this},e.Timeline.prototype.forEachFrom=function(e,t){for(var n=this._search(e);0<=n&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this},e.Timeline.prototype.forEachAtTime=function(e,t){var n=this._search(e);return-1!==n&&this._iterate(function(n){n.time===e&&t(n)},0,n),this},e.Timeline.prototype.dispose=function(){e.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},e.Timeline}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(3),n(2)];void 0===(s=function(e){"use strict";return e.Negate=function(){this._multiply=this.input=this.output=new e.Multiply(-1)},e.extend(e.Negate,e.SignalBase),e.Negate.prototype.dispose=function(){return e.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},e.Negate}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(2),n(3),n(5)];void 0===(s=function(e){"use strict";return e.GreaterThanZero=function(){this._thresh=this.output=new e.WaveShaper(function(e){return e<=0?0:1},127),this._scale=this.input=new e.Multiply(1e4),this._scale.connect(this._thresh)},e.extend(e.GreaterThanZero,e.SignalBase),e.GreaterThanZero.prototype.dispose=function(){return e.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},e.GreaterThanZero}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(14),n(66),n(18),n(12)];void 0===(s=function(e){"use strict";return e.Clock=function(){e.Emitter.call(this);var t=this.optionsObject(arguments,["callback","frequency"],e.Clock.defaults);this.callback=t.callback,this._nextTick=0,this._lastState=e.State.Stopped,this.frequency=new e.TimelineSignal(t.frequency,e.Type.Frequency),this._readOnly("frequency"),this.ticks=0,this._state=new e.TimelineState(e.State.Stopped),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},e.extend(e.Clock,e.Emitter),e.Clock.defaults={callback:e.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(e.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),e.Clock.prototype.start=function(t,n){return t=this.toSeconds(t),this._state.getValueAtTime(t)!==e.State.Started&&this._state.add({state:e.State.Started,time:t,offset:n}),this},e.Clock.prototype.stop=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._state.setStateAtTime(e.State.Stopped,t),this},e.Clock.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===e.State.Started&&this._state.setStateAtTime(e.State.Paused,t),this},e.Clock.prototype._loop=function(){for(var t,n,s,o=this.now()+this.context.lookAhead+this.context.updateInterval+2*this.context.lag;o>this._nextTick&&this._state;)t=this._state.getValueAtTime(this._nextTick),t!==this._lastState&&(this._lastState=t,n=this._state.get(this._nextTick),t===e.State.Started?(this._nextTick=n.time,this.isUndef(n.offset)||(this.ticks=n.offset),this.emit("start",n.time,this.ticks)):t===e.State.Stopped?(this.ticks=0,this.emit("stop",n.time)):t===e.State.Paused&&this.emit("pause",n.time)),s=this._nextTick,this.frequency&&(this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),t===e.State.Started&&(this.callback(s),this.ticks++))},e.Clock.prototype.getStateAtTime=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)},e.Clock.prototype.dispose=function(){e.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},e.Clock}.apply(t,o))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),s=n(29),o=n(6).noteToFreq;p5.MonoSynth=function(){s.call(this),this.oscillator=new p5.Oscillator,this.env=new p5.Envelope,this.env.setRange(1,0),this.env.setExp(!0),this.setADSR(.02,.25,.05,.35),this.oscillator.disconnect(),this.oscillator.connect(this.output),this.env.disconnect(),this.env.setInput(this.output.gain),this.oscillator.output.gain.value=1,this.oscillator.start(),this.connect(),t.soundArray.push(this)},p5.MonoSynth.prototype=Object.create(p5.AudioVoice.prototype),p5.MonoSynth.prototype.play=function(e,t,n,s){this.triggerAttack(e,t,~~n),this.triggerRelease(~~n+(s||.15))},p5.MonoSynth.prototype.triggerAttack=function(e,t,n){n=~~n;var s=o(e),i=t||.1;this.oscillator.freq(s,0,n),this.env.ramp(this.output.gain,n,i)},p5.MonoSynth.prototype.triggerRelease=function(e){e=e||0,this.env.ramp(this.output.gain,e,0)},p5.MonoSynth.prototype.setADSR=function(e,t,n,s){this.env.setADSR(e,t,n,s)},Object.defineProperties(p5.MonoSynth.prototype,{attack:{get:function(){return this.env.aTime},set:function(e){this.env.setADSR(e,this.env.dTime,this.env.sPercent,this.env.rTime)}},decay:{get:function(){return this.env.dTime},set:function(e){this.env.setADSR(this.env.aTime,e,this.env.sPercent,this.env.rTime)}},sustain:{get:function(){return this.env.sPercent},set:function(e){this.env.setADSR(this.env.aTime,this.env.dTime,e,this.env.rTime)}},release:{get:function(){return this.env.rTime},set:function(e){this.env.setADSR(this.env.aTime,this.env.dTime,this.env.sPercent,e)}}}),p5.MonoSynth.prototype.amp=function(e,t){var n=t||0;return void 0!==e&&this.oscillator.amp(e,n),this.oscillator.amp().value},p5.MonoSynth.prototype.connect=function(e){var n=e||t.input;this.output.connect(n.input?n.input:n)},p5.MonoSynth.prototype.disconnect=function(){this.output&&this.output.disconnect()},p5.MonoSynth.prototype.dispose=function(){s.prototype.dispose.apply(this),this.env&&this.env.dispose(),this.oscillator&&this.oscillator.dispose()}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var e=n(1);return p5.AudioVoice=function(){this.ac=e.audiocontext,this.output=this.ac.createGain(),this.connect(),e.soundArray.push(this)},p5.AudioVoice.prototype.play=function(){},p5.AudioVoice.prototype.triggerAttack=function(){},p5.AudioVoice.prototype.triggerRelease=function(){},p5.AudioVoice.prototype.amp=function(){},p5.AudioVoice.prototype.connect=function(t){var n=t||e.input;this.output.connect(n.input?n.input:n)},p5.AudioVoice.prototype.disconnect=function(){this.output.disconnect()},p5.AudioVoice.prototype.dispose=function(){this.output&&(this.output.disconnect(),delete this.output)},p5.AudioVoice}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),s=n(14),o=n(6).noteToFreq;p5.PolySynth=function(e,n){this.audiovoices=[],this.notes={},this._newest=0,this._oldest=0,this.maxVoices=n||8,this.AudioVoice=void 0===e?p5.MonoSynth:e,this._voicesInUse=new s(0),this.output=t.audiocontext.createGain(),this.connect(),this._allocateVoices(),t.soundArray.push(this)},p5.PolySynth.prototype._allocateVoices=function(){for(var e=0;e<this.maxVoices;e++)this.audiovoices.push(new this.AudioVoice),this.audiovoices[e].disconnect(),this.audiovoices[e].connect(this.output)},p5.PolySynth.prototype.play=function(e,t,n,s){s=s||1,this.noteAttack(e,t,n),this.noteRelease(e,n+s)},p5.PolySynth.prototype.noteADSR=function(e,n,s,o,i,a){var r=t.audiocontext.currentTime+(a=a||0);this.audiovoices[this.notes[e].getValueAtTime(r)].setADSR(n,s,o,i)},p5.PolySynth.prototype.setADSR=function(e,t,n,s){this.audiovoices.forEach(function(o){o.setADSR(e,t,n,s)})},p5.PolySynth.prototype.noteAttack=function(e,n,i){i=~~i;var c,d,u,h,a=t.audiocontext.currentTime+i,r=o(e),l=n||.1;this.notes[r]&&null!==this.notes[r].getValueAtTime(a)&&this.noteRelease(r,0),this._voicesInUse.getValueAtTime(a)<this.maxVoices?c=Math.max(~~this._voicesInUse.getValueAtTime(a),0):(c=this._oldest,u=p5.prototype.freqToMidi(this.audiovoices[this._oldest].oscillator.freq().value),this.noteRelease(u),this._oldest=(this._oldest+1)%(this.maxVoices-1)),this.notes[r]=new s,this.notes[r].setValueAtTime(c,a),h=null===this._voicesInUse._searchBefore(a)?0:this._voicesInUse._searchBefore(a).value,(this._voicesInUse.setValueAtTime(h+1,a),this._updateAfter(a,1),this._newest=c,"number"==typeof l)&&(d=1/this._voicesInUse.getValueAtTime(a)*2,l=d<l?d:l),this.audiovoices[c].triggerAttack(r,l,i)},p5.PolySynth.prototype._updateAfter=function(e,t){if(null!==this._voicesInUse._searchAfter(e)){this._voicesInUse._searchAfter(e).value+=t;var n=this._voicesInUse._searchAfter(e).time;this._updateAfter(n,t)}},p5.PolySynth.prototype.noteRelease=function(e,n){var i,r,c,l=t.audiocontext.currentTime,a=n||0,s=l+a;if(e)i=o(e),this.notes[i]&&null!==this.notes[i].getValueAtTime(s)&&(r=Math.max(~~this._voicesInUse.getValueAtTime(s).value,1),this._voicesInUse.setValueAtTime(r-1,s),0<r&&this._updateAfter(s,-1),this.audiovoices[this.notes[i].getValueAtTime(s)].triggerRelease(a),this.notes[i].dispose(),delete this.notes[i],this._newest=0===this._newest?0:(this._newest-1)%(this.maxVoices-1));else for(c in this.audiovoices.forEach(function(e){e.triggerRelease(a)}),this._voicesInUse.setValueAtTime(0,s),this.notes)this.notes[c].dispose(),delete this.notes[c]},p5.PolySynth.prototype.connect=function(e){var n=e||t.input;this.output.connect(n.input?n.input:n)},p5.PolySynth.prototype.disconnect=function(){this.output&&this.output.disconnect()},p5.PolySynth.prototype.dispose=function(){this.audiovoices.forEach(function(e){e.dispose()}),this.output&&(this.output.disconnect(),delete this.output)}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){n(32),n(33),n(17);var t=n(1);return n(6),n(11),n(36),n(40),n(41),n(42),n(43),n(44),n(23),n(47),n(48),n(49),n(50),n(15),n(59),n(61),n(62),n(63),n(64),n(65),n(67),n(68),n(69),n(70),n(71),n(72),n(28),n(30),n(73),n(29),n(28),n(30),t}.call(t,n,t,e))||(e.exports=s)},function(){function r(e){var o,i,r=this,t={},n=-1;this.parameters.forEach(function(e,s){var o=a[++n]||(a[n]=new Float32Array(r.bufferSize));o.fill(e.value),t[s]=o}),this.processor.realm.exec("self.sampleRate=sampleRate="+this.context.sampleRate+";self.currentTime=currentTime="+this.context.currentTime),o=s(e.inputBuffer),i=s(e.outputBuffer),this.instance.process([o],[i],t)}function s(e){for(var n=[],t=0;t<e.numberOfChannels;t++)n[t]=e.getChannelData(t);return n}function o(e){return e.$$processors||(e.$$processors={})}function i(e){this.$$context=e}var n,a=[];"function"!=typeof AudioWorkletNode&&(self.AudioWorkletNode=function(e,t,s){var c,l,d,u,h,a=o(e)[t],i=e.createScriptProcessor(void 0,2,s&&s.outputChannelCount?s.outputChannelCount[0]:2);if(i.parameters=new Map,a.properties)for(c=0;c<a.properties.length;c++)l=a.properties[c],d=e.createGain().gain,d.value=l.defaultValue,i.parameters.set(l.name,d);return u=new MessageChannel,n=u.port2,h=new a.Processor(s||{}),n=null,i.port=u.port1,i.processor=a,i.instance=h,i.onaudioprocess=r,i},Object.defineProperty((self.AudioContext||self.webkitAudioContext).prototype,"audioWorklet",{get:function(){return this.$$audioWorklet||(this.$$audioWorklet=new self.AudioWorklet(this))}}),self.AudioWorklet=(i.prototype.addModule=function(e,t){var s=this;return fetch(e).then(function(e){if(!e.ok)throw Error(e.status);return e.text()}).then(function(e){var i={sampleRate:0,currentTime:0,AudioWorkletProcessor:function(){this.port=n},registerProcessor:function(e,t){o(s.$$context)[e]={realm:a,context:i,Processor:t,properties:t.parameterDescriptors||[]}}},a=new function(e,t){s=document.createElement("iframe"),s.style.cssText="position:absolute;left:0;top:-999px;width:1px;height:1px;",t.appendChild(s);var s,a,r,c,o=s.contentWindow,i=o.document,n="var window,$hook";for(a in o)a in e||"eval"===a||(n+=",",n+=a);for(c in e)n+=",",n+=c,n+="=self.",n+=c;r=i.createElement("script"),r.appendChild(i.createTextNode('function $hook(self,console) {"use strict";\n        '+n+";return function() {return eval(arguments[0])}}")),i.body.appendChild(r),this.exec=o.$hook(e,console)}(i.self=i,document.documentElement);return a.exec((t&&t.transpile||String)(e)),null})},i))},function(e,t,n){"use strict";var s;void 0===(s=function(){function e(e){e&&(e.setTargetAtTime||(e.setTargetAtTime=e.setTargetValueAtTime))}window,window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=window.webkitAudioContext,"function"!=typeof AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),"function"!=typeof AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),"function"!=typeof AudioContext.prototype.createScriptProcessor&&(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),"function"!=typeof AudioContext.prototype.createPeriodicWave&&(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return e(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var n=t?this.internal_createDelay(t):this.internal_createDelay();return e(n.delayTime),n},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start?(t.internal_start=t.start,t.start=function(e,n,s){void 0!==s?t.internal_start(e||0,n,s):t.internal_start(e||0,n||0)}):t.start=function(e,t,n){t||n?this.noteGrainOn(e||0,t,n):this.noteOn(e||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(e){this.noteOff(e||0)},e(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return e(t.threshold),e(t.knee),e(t.ratio),e(t.reduction),e(t.attack),e(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return e(t.frequency),e(t.detune),e(t.Q),e(t.gain),t},"function"!=typeof AudioContext.prototype.createOscillator&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start?(t.internal_start=t.start,t.start=function(e){t.internal_start(e||0)}):t.start=function(e){this.noteOn(e||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(e){this.noteOff(e||0)},t.setPeriodicWave||(t.setPeriodicWave=t.setWaveTable),e(t.frequency),e(t.detune),t})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var t=document.createElement("audio");p5.prototype.isSupported=function(){return!!t.canPlayType},p5.prototype.isFileSupported=function(e){switch(e.toLowerCase()){case"mp3":return!!t.canPlayType&&t.canPlayType("audio/mpeg;");case"wav":return!!t.canPlayType&&t.canPlayType('audio/wav; codecs="1"');case"ogg":return!!t.canPlayType&&t.canPlayType('audio/ogg; codecs="vorbis"');case"aac":case"m4a":case"mp4":return!!t.canPlayType&&(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;"));case"aif":case"aiff":return!!t.canPlayType&&t.canPlayType("audio/x-aiff;");default:return!1}}}.call(t,n,t,e))||(e.exports=s)},function(e){var n=function(){return this}();try{n=n||new Function("return this")()}catch{"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var s,o,i=[];void 0===(o="function"==typeof(s=function(){var e=function(e,t){this._dragged=!1,this._element=e,this._bindedMove=this._moved.bind(this),this._bindedEnd=this._ended.bind(this,t),e.addEventListener("touchstart",this._bindedEnd),e.addEventListener("touchmove",this._bindedMove),e.addEventListener("touchend",this._bindedEnd),e.addEventListener("mouseup",this._bindedEnd)};function t(e){return"running"===e.state}return e.prototype._moved=function(){this._dragged=!0},e.prototype._ended=function(e){this._dragged||function(e){var n=e.createBuffer(1,1,e.sampleRate),t=e.createBufferSource();t.buffer=n,t.connect(e.destination),t.start(0),e.resume&&e.resume()}(e),this._dragged=!1},e.prototype.dispose=function(){this._element.removeEventListener("touchstart",this._bindedEnd),this._element.removeEventListener("touchmove",this._bindedMove),this._element.removeEventListener("touchend",this._bindedEnd),this._element.removeEventListener("mouseup",this._bindedEnd),this._bindedMove=null,this._bindedEnd=null,this._element=null},function(n,s,o){var a=new Promise(function(e){!function(e,n){t(e)?n():function s(){t(e)?n():(requestAnimationFrame(s),e.resume&&e.resume())}()}(n,e)}),i=[];return function t(n,s,o){if(Array.isArray(n)||NodeList&&n instanceof NodeList)for(var a,i=0;i<n.length;i++)t(n[i],s,o);else"string"==typeof n?t(document.querySelectorAll(n),s,o):n.jquery&&"function"==typeof n.toArray?t(n.toArray(),s,o):Element&&n instanceof Element&&(a=new e(n,o),s.push(a))}(s=s||document.body,i,n),a.then(function(){for(var e=0;e<i.length;e++)i[e].dispose();i=null,o&&o()}),a}})?s.apply(t,i):s)||(e.exports=o)},function(e,t,n){var o=n(1),i=[n(37).default,n(38).default,n(39).default],a=o.audiocontext,s=!1;p5.prototype.registerMethod("init",function(){if(!s){this.preload||window.preload||(this.preload=function(){}),this._incrementPreload();var e=function(){s=!0,this._decrementPreload()}.bind(this);Promise.all(i.map(function(e){var t=new Blob([e],{type:"application/javascript"}),n=URL.createObjectURL(t);return a.audioWorklet.addModule(n)})).then(e)}})},function(e,t,n){"use strict";n.r(t),t.default=`function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }

function isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

// import dependencies via preval.require so that they're available as values at compile time
var processorNames = {
  "recorderProcessor": "recorder-processor",
  "soundFileProcessor": "sound-file-processor",
  "amplitudeProcessor": "amplitude-processor"
};
var RingBuffer = {
  "default":
  /*#__PURE__*/
  function () {
    /**
     * @constructor
     * @param  {number} length Buffer length in frames.
     * @param  {number} channelCount Buffer channel count.
     */
    function RingBuffer(length, channelCount) {
      _classCallCheck(this, RingBuffer);

      this._readIndex = 0;
      this._writeIndex = 0;
      this._framesAvailable = 0;
      this._channelCount = channelCount;
      this._length = length;
      this._channelData = [];

      for (var i = 0; i < this._channelCount; ++i) {
        this._channelData[i] = new Float32Array(length);
      }
    }
    /**
     * Getter for Available frames in buffer.
     *
     * @return {number} Available frames in buffer.
     */


    _createClass(RingBuffer, [{
      key: "push",

      /**
       * Push a sequence of Float32Arrays to buffer.
       *
       * @param  {array} arraySequence A sequence of Float32Arrays.
       */
      value: function push(arraySequence) {
        // The channel count of arraySequence and the length of each channel must
        // match with this buffer obejct.
        // Transfer data from the |arraySequence| storage to the internal buffer.
        var sourceLength = arraySequence[0].length;

        for (var i = 0; i < sourceLength; ++i) {
          var writeIndex = (this._writeIndex + i) % this._length;

          for (var channel = 0; channel < this._channelCount; ++channel) {
            this._channelData[channel][writeIndex] = arraySequence[channel][i];
          }
        }

        this._writeIndex += sourceLength;

        if (this._writeIndex >= this._length) {
          this._writeIndex = 0;
        } // For excessive frames, the buffer will be overwritten.


        this._framesAvailable += sourceLength;

        if (this._framesAvailable > this._length) {
          this._framesAvailable = this._length;
        }
      }
      /**
       * Pull data out of buffer and fill a given sequence of Float32Arrays.
       *
       * @param  {array} arraySequence An array of Float32Arrays.
       */

    }, {
      key: "pull",
      value: function pull(arraySequence) {
        // The channel count of arraySequence and the length of each channel must
        // match with this buffer obejct.
        // If the FIFO is completely empty, do nothing.
        if (this._framesAvailable === 0) {
          return;
        }

        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.

        for (var i = 0; i < destinationLength; ++i) {
          var readIndex = (this._readIndex + i) % this._length;

          for (var channel = 0; channel < this._channelCount; ++channel) {
            arraySequence[channel][i] = this._channelData[channel][readIndex];
          }
        }

        this._readIndex += destinationLength;

        if (this._readIndex >= this._length) {
          this._readIndex = 0;
        }

        this._framesAvailable -= destinationLength;

        if (this._framesAvailable < 0) {
          this._framesAvailable = 0;
        }
      }
    }, {
      key: "framesAvailable",
      get: function get() {
        return this._framesAvailable;
      }
    }]);

    return RingBuffer;
  }()
}["default"];

var RecorderProcessor =
/*#__PURE__*/
function (_AudioWorkletProcesso) {
  _inherits(RecorderProcessor, _AudioWorkletProcesso);

  function RecorderProcessor(options) {
    var _this;

    _classCallCheck(this, RecorderProcessor);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(RecorderProcessor).call(this));
    var processorOptions = options.processorOptions || {};
    _this.numOutputChannels = options.outputChannelCount || 2;
    _this.numInputChannels = processorOptions.numInputChannels || 2;
    _this.bufferSize = processorOptions.bufferSize || 1024;
    _this.recording = false;

    _this.clear();

    _this.port.onmessage = function (event) {
      var data = event.data;

      if (data.name === 'start') {
        _this.record(data.duration);
      } else if (data.name === 'stop') {
        _this.stop();
      }
    };

    return _this;
  }

  _createClass(RecorderProcessor, [{
    key: "process",
    value: function process(inputs) {
      if (!this.recording) {
        return true;
      } else if (this.sampleLimit && this.recordedSamples >= this.sampleLimit) {
        this.stop();
        return true;
      }

      var input = inputs[0];
      this.inputRingBuffer.push(input);

      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {
        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);

        for (var channel = 0; channel < this.numOutputChannels; ++channel) {
          var inputChannelCopy = this.inputRingBufferArraySequence[channel].slice();

          if (channel === 0) {
            this.leftBuffers.push(inputChannelCopy);

            if (this.numInputChannels === 1) {
              this.rightBuffers.push(inputChannelCopy);
            }
          } else if (channel === 1 && this.numInputChannels > 1) {
            this.rightBuffers.push(inputChannelCopy);
          }
        }

        this.recordedSamples += this.bufferSize;
      }

      return true;
    }
  }, {
    key: "record",
    value: function record(duration) {
      if (duration) {
        this.sampleLimit = Math.round(duration * sampleRate);
      }

      this.recording = true;
    }
  }, {
    key: "stop",
    value: function stop() {
      this.recording = false;
      var buffers = this.getBuffers();
      var leftBuffer = buffers[0].buffer;
      var rightBuffer = buffers[1].buffer;
      this.port.postMessage({
        name: 'buffers',
        leftBuffer: leftBuffer,
        rightBuffer: rightBuffer
      }, [leftBuffer, rightBuffer]);
      this.clear();
    }
  }, {
    key: "getBuffers",
    value: function getBuffers() {
      var buffers = [];
      buffers.push(this.mergeBuffers(this.leftBuffers));
      buffers.push(this.mergeBuffers(this.rightBuffers));
      return buffers;
    }
  }, {
    key: "mergeBuffers",
    value: function mergeBuffers(channelBuffer) {
      var result = new Float32Array(this.recordedSamples);
      var offset = 0;
      var lng = channelBuffer.length;

      for (var i = 0; i < lng; i++) {
        var buffer = channelBuffer[i];
        result.set(buffer, offset);
        offset += buffer.length;
      }

      return result;
    }
  }, {
    key: "clear",
    value: function clear() {
      var _this2 = this;

      this.leftBuffers = [];
      this.rightBuffers = [];
      this.inputRingBuffer = new RingBuffer(this.bufferSize, this.numInputChannels);
      this.inputRingBufferArraySequence = new Array(this.numInputChannels).fill(null).map(function () {
        return new Float32Array(_this2.bufferSize);
      });
      this.recordedSamples = 0;
      this.sampleLimit = null;
    }
  }]);

  return RecorderProcessor;
}(_wrapNativeSuper(AudioWorkletProcessor));

registerProcessor(processorNames.recorderProcessor, RecorderProcessor);`},function(e,t,n){"use strict";n.r(t),t.default=`function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }

function isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

// import dependencies via preval.require so that they're available as values at compile time
var processorNames = {
  "recorderProcessor": "recorder-processor",
  "soundFileProcessor": "sound-file-processor",
  "amplitudeProcessor": "amplitude-processor"
};
var RingBuffer = {
  "default":
  /*#__PURE__*/
  function () {
    /**
     * @constructor
     * @param  {number} length Buffer length in frames.
     * @param  {number} channelCount Buffer channel count.
     */
    function RingBuffer(length, channelCount) {
      _classCallCheck(this, RingBuffer);

      this._readIndex = 0;
      this._writeIndex = 0;
      this._framesAvailable = 0;
      this._channelCount = channelCount;
      this._length = length;
      this._channelData = [];

      for (var i = 0; i < this._channelCount; ++i) {
        this._channelData[i] = new Float32Array(length);
      }
    }
    /**
     * Getter for Available frames in buffer.
     *
     * @return {number} Available frames in buffer.
     */


    _createClass(RingBuffer, [{
      key: "push",

      /**
       * Push a sequence of Float32Arrays to buffer.
       *
       * @param  {array} arraySequence A sequence of Float32Arrays.
       */
      value: function push(arraySequence) {
        // The channel count of arraySequence and the length of each channel must
        // match with this buffer obejct.
        // Transfer data from the |arraySequence| storage to the internal buffer.
        var sourceLength = arraySequence[0].length;

        for (var i = 0; i < sourceLength; ++i) {
          var writeIndex = (this._writeIndex + i) % this._length;

          for (var channel = 0; channel < this._channelCount; ++channel) {
            this._channelData[channel][writeIndex] = arraySequence[channel][i];
          }
        }

        this._writeIndex += sourceLength;

        if (this._writeIndex >= this._length) {
          this._writeIndex = 0;
        } // For excessive frames, the buffer will be overwritten.


        this._framesAvailable += sourceLength;

        if (this._framesAvailable > this._length) {
          this._framesAvailable = this._length;
        }
      }
      /**
       * Pull data out of buffer and fill a given sequence of Float32Arrays.
       *
       * @param  {array} arraySequence An array of Float32Arrays.
       */

    }, {
      key: "pull",
      value: function pull(arraySequence) {
        // The channel count of arraySequence and the length of each channel must
        // match with this buffer obejct.
        // If the FIFO is completely empty, do nothing.
        if (this._framesAvailable === 0) {
          return;
        }

        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.

        for (var i = 0; i < destinationLength; ++i) {
          var readIndex = (this._readIndex + i) % this._length;

          for (var channel = 0; channel < this._channelCount; ++channel) {
            arraySequence[channel][i] = this._channelData[channel][readIndex];
          }
        }

        this._readIndex += destinationLength;

        if (this._readIndex >= this._length) {
          this._readIndex = 0;
        }

        this._framesAvailable -= destinationLength;

        if (this._framesAvailable < 0) {
          this._framesAvailable = 0;
        }
      }
    }, {
      key: "framesAvailable",
      get: function get() {
        return this._framesAvailable;
      }
    }]);

    return RingBuffer;
  }()
}["default"];

var SoundFileProcessor =
/*#__PURE__*/
function (_AudioWorkletProcesso) {
  _inherits(SoundFileProcessor, _AudioWorkletProcesso);

  function SoundFileProcessor(options) {
    var _this;

    _classCallCheck(this, SoundFileProcessor);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(SoundFileProcessor).call(this));
    var processorOptions = options.processorOptions || {};
    _this.bufferSize = processorOptions.bufferSize || 256;
    _this.inputRingBuffer = new RingBuffer(_this.bufferSize, 1);
    _this.inputRingBufferArraySequence = [new Float32Array(_this.bufferSize)];
    return _this;
  }

  _createClass(SoundFileProcessor, [{
    key: "process",
    value: function process(inputs) {
      var input = inputs[0]; // we only care about the first input channel, because that contains the position data

      this.inputRingBuffer.push([input[0]]);

      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {
        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);
        var inputChannel = this.inputRingBufferArraySequence[0];
        var position = inputChannel[inputChannel.length - 1] || 0;
        this.port.postMessage({
          name: 'position',
          position: position
        });
      }

      return true;
    }
  }]);

  return SoundFileProcessor;
}(_wrapNativeSuper(AudioWorkletProcessor));

registerProcessor(processorNames.soundFileProcessor, SoundFileProcessor);`},function(e,t,n){"use strict";n.r(t),t.default=`function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }

function isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

// import dependencies via preval.require so that they're available as values at compile time
var processorNames = {
  "recorderProcessor": "recorder-processor",
  "soundFileProcessor": "sound-file-processor",
  "amplitudeProcessor": "amplitude-processor"
};
var RingBuffer = {
  "default":
  /*#__PURE__*/
  function () {
    /**
     * @constructor
     * @param  {number} length Buffer length in frames.
     * @param  {number} channelCount Buffer channel count.
     */
    function RingBuffer(length, channelCount) {
      _classCallCheck(this, RingBuffer);

      this._readIndex = 0;
      this._writeIndex = 0;
      this._framesAvailable = 0;
      this._channelCount = channelCount;
      this._length = length;
      this._channelData = [];

      for (var i = 0; i < this._channelCount; ++i) {
        this._channelData[i] = new Float32Array(length);
      }
    }
    /**
     * Getter for Available frames in buffer.
     *
     * @return {number} Available frames in buffer.
     */


    _createClass(RingBuffer, [{
      key: "push",

      /**
       * Push a sequence of Float32Arrays to buffer.
       *
       * @param  {array} arraySequence A sequence of Float32Arrays.
       */
      value: function push(arraySequence) {
        // The channel count of arraySequence and the length of each channel must
        // match with this buffer obejct.
        // Transfer data from the |arraySequence| storage to the internal buffer.
        var sourceLength = arraySequence[0].length;

        for (var i = 0; i < sourceLength; ++i) {
          var writeIndex = (this._writeIndex + i) % this._length;

          for (var channel = 0; channel < this._channelCount; ++channel) {
            this._channelData[channel][writeIndex] = arraySequence[channel][i];
          }
        }

        this._writeIndex += sourceLength;

        if (this._writeIndex >= this._length) {
          this._writeIndex = 0;
        } // For excessive frames, the buffer will be overwritten.


        this._framesAvailable += sourceLength;

        if (this._framesAvailable > this._length) {
          this._framesAvailable = this._length;
        }
      }
      /**
       * Pull data out of buffer and fill a given sequence of Float32Arrays.
       *
       * @param  {array} arraySequence An array of Float32Arrays.
       */

    }, {
      key: "pull",
      value: function pull(arraySequence) {
        // The channel count of arraySequence and the length of each channel must
        // match with this buffer obejct.
        // If the FIFO is completely empty, do nothing.
        if (this._framesAvailable === 0) {
          return;
        }

        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.

        for (var i = 0; i < destinationLength; ++i) {
          var readIndex = (this._readIndex + i) % this._length;

          for (var channel = 0; channel < this._channelCount; ++channel) {
            arraySequence[channel][i] = this._channelData[channel][readIndex];
          }
        }

        this._readIndex += destinationLength;

        if (this._readIndex >= this._length) {
          this._readIndex = 0;
        }

        this._framesAvailable -= destinationLength;

        if (this._framesAvailable < 0) {
          this._framesAvailable = 0;
        }
      }
    }, {
      key: "framesAvailable",
      get: function get() {
        return this._framesAvailable;
      }
    }]);

    return RingBuffer;
  }()
}["default"];

var AmplitudeProcessor =
/*#__PURE__*/
function (_AudioWorkletProcesso) {
  _inherits(AmplitudeProcessor, _AudioWorkletProcesso);

  function AmplitudeProcessor(options) {
    var _this;

    _classCallCheck(this, AmplitudeProcessor);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(AmplitudeProcessor).call(this));
    var processorOptions = options.processorOptions || {};
    _this.numOutputChannels = options.outputChannelCount || 1;
    _this.numInputChannels = processorOptions.numInputChannels || 2;
    _this.normalize = processorOptions.normalize || false;
    _this.smoothing = processorOptions.smoothing || 0;
    _this.bufferSize = processorOptions.bufferSize || 2048;
    _this.inputRingBuffer = new RingBuffer(_this.bufferSize, _this.numInputChannels);
    _this.outputRingBuffer = new RingBuffer(_this.bufferSize, _this.numOutputChannels);
    _this.inputRingBufferArraySequence = new Array(_this.numInputChannels).fill(null).map(function () {
      return new Float32Array(_this.bufferSize);
    });
    _this.stereoVol = [0, 0];
    _this.stereoVolNorm = [0, 0];
    _this.volMax = 0.001;

    _this.port.onmessage = function (event) {
      var data = event.data;

      if (data.name === 'toggleNormalize') {
        _this.normalize = data.normalize;
      } else if (data.name === 'smoothing') {
        _this.smoothing = Math.max(0, Math.min(1, data.smoothing));
      }
    };

    return _this;
  } // TO DO make this stereo / dependent on # of audio channels


  _createClass(AmplitudeProcessor, [{
    key: "process",
    value: function process(inputs, outputs) {
      var input = inputs[0];
      var output = outputs[0];
      var smoothing = this.smoothing;
      this.inputRingBuffer.push(input);

      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {
        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);

        for (var channel = 0; channel < this.numInputChannels; ++channel) {
          var inputBuffer = this.inputRingBufferArraySequence[channel];
          var bufLength = inputBuffer.length;
          var sum = 0;

          for (var i = 0; i < bufLength; i++) {
            var x = inputBuffer[i];

            if (this.normalize) {
              sum += Math.max(Math.min(x / this.volMax, 1), -1) * Math.max(Math.min(x / this.volMax, 1), -1);
            } else {
              sum += x * x;
            }
          } // ... then take the square root of the sum.


          var rms = Math.sqrt(sum / bufLength);
          this.stereoVol[channel] = Math.max(rms, this.stereoVol[channel] * smoothing);
          this.volMax = Math.max(this.stereoVol[channel], this.volMax);
        } // calculate stero normalized volume and add volume from all channels together


        var volSum = 0;

        for (var index = 0; index < this.stereoVol.length; index++) {
          this.stereoVolNorm[index] = Math.max(Math.min(this.stereoVol[index] / this.volMax, 1), 0);
          volSum += this.stereoVol[index];
        } // volume is average of channels


        var volume = volSum / this.stereoVol.length; // normalized value

        var volNorm = Math.max(Math.min(volume / this.volMax, 1), 0);
        this.port.postMessage({
          name: 'amplitude',
          volume: volume,
          volNorm: volNorm,
          stereoVol: this.stereoVol,
          stereoVolNorm: this.stereoVolNorm
        }); // pass input through to output

        this.outputRingBuffer.push(this.inputRingBufferArraySequence);
      } // pull 128 frames out of the ring buffer
      // if the ring buffer does not have enough frames, the output will be silent


      this.outputRingBuffer.pull(output);
      return true;
    }
  }]);

  return AmplitudeProcessor;
}(_wrapNativeSuper(AudioWorkletProcessor));

registerProcessor(processorNames.amplitudeProcessor, AmplitudeProcessor);`},function(e,t,n){"use strict";var s;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}void 0===(s=function(){var t=n(1).audiocontext;void 0!==t.createStereoPanner?(p5.Panner=function(e,n){this.stereoPanner=this.input=t.createStereoPanner(),e.connect(this.stereoPanner),this.stereoPanner.connect(n)},p5.Panner.prototype.pan=function(e,n){var s=n||0,o=t.currentTime+s;this.stereoPanner.pan.linearRampToValueAtTime(e,o)},p5.Panner.prototype.inputChannels=function(){},p5.Panner.prototype.connect=function(e){this.stereoPanner.connect(e)},p5.Panner.prototype.disconnect=function(){this.stereoPanner&&this.stereoPanner.disconnect()}):(p5.Panner=function(e,n,s){this.input=t.createGain(),e.connect(this.input),this.left=t.createGain(),this.right=t.createGain(),this.left.channelInterpretation="discrete",this.right.channelInterpretation="discrete",1<s?(this.splitter=t.createChannelSplitter(2),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0)):(this.input.connect(this.left),this.input.connect(this.right)),this.output=t.createChannelMerger(2),this.left.connect(this.output,0,1),this.right.connect(this.output,0,0),this.output.connect(n)},p5.Panner.prototype.pan=function(e,n){var i=n||0,s=t.currentTime+i,o=(e+1)/2,a=Math.cos(o*Math.PI/2),r=Math.sin(o*Math.PI/2);this.left.gain.linearRampToValueAtTime(r,s),this.right.gain.linearRampToValueAtTime(a,s)},p5.Panner.prototype.inputChannels=function(e){1===e?(this.input.disconnect(),this.input.connect(this.left),this.input.connect(this.right)):2===e&&(o("undefined"===this.splitter)&&(this.splitter=t.createChannelSplitter(2)),this.input.disconnect(),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0))},p5.Panner.prototype.connect=function(e){this.output.connect(e)},p5.Panner.prototype.disconnect=function(){this.output&&this.output.disconnect()})}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}void 0===(s=function(){var c,i=n(11),t=n(1),s=t.audiocontext,a=n(6),r=a.midiToFreq,d=a.convertToWav,u=a.safeBufferSize,h=n(10);p5.SoundFile=function(e,n,s,i){if(void 0!==e){if("string"==typeof e||"string"==typeof e[0]){var a=p5.prototype._checkFileFormats(e);this.url=a}else if("object"===o(e)&&!(window.File&&window.FileReader&&window.FileList&&window.Blob))throw"Unable to load file because the File API is not supported";e.file&&(e=e.file),this.file=e}this._onended=function(){},this._looping=!1,this._playing=!1,this._paused=!1,this._pauseTime=0,this._cues=[],this._cueIDCounter=0,this._lastPos=0,this._counterNode=null,this._workletNode=null,this.bufferSourceNodes=[],this.bufferSourceNode=null,this.buffer=null,this.playbackRate=1,this.input=t.audiocontext.createGain(),this.output=t.audiocontext.createGain(),this.reversed=!1,this.startTime=0,this.endTime=null,this.pauseTime=0,this.mode="sustain",this.startMillis=null,this.panPosition=0,this.panner=new p5.Panner(this.output,t.input,2),(this.url||this.file)&&this.load(n,s),t.soundArray.push(this),this._whileLoading="function"==typeof i?i:function(){},this._clearOnEnd=function(e){var n=e.target,t=this;n._playing=!1,n.removeEventListener("ended",t._clearOnEnd),t._onended(t),t.bufferSourceNodes.map(function(e,t){return t}).reverse().forEach(function(e){!1===t.bufferSourceNodes[e]._playing&&t.bufferSourceNodes.splice(e,1)}),0===t.bufferSourceNodes.length&&(t._playing=!1)}.bind(this)},p5.prototype.registerPreloadMethod("loadSound",p5.prototype),p5.prototype.loadSound=function(e,t,n,s){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&window.alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var o=this;return new p5.SoundFile(e,function(){"function"==typeof t&&t.apply(o,arguments),"function"==typeof o._decrementPreload&&o._decrementPreload()},n,s)},p5.SoundFile.prototype.load=function(e,t){var o,a,n=this,r=(new Error).stack;void 0!==this.url&&""!==this.url?(o=new XMLHttpRequest,o.addEventListener("progress",function(e){n._updateProgress(e)},!1),o.open("GET",this.url,!0),o.responseType="arraybuffer",o.onload=function(){if(200===o.status){if(!n.panner)return;s.decodeAudioData(o.response,function(t){n.panner&&(n.buffer=t,n.panner.inputChannels(t.numberOfChannels),e&&e(n))},function(){if(n.panner){var e=new i("decodeAudioData",r,n.url),s="AudioContext error at decodeAudioData for "+n.url;t&&(e.msg=s,t(e))}})}else{if(!n.panner)return;var a=new i("loadSound",r,n.url),c="Unable to load "+n.url+". The request status was: "+o.status+" ("+o.statusText+")";t&&(a.message=c,t(a))}},o.onerror=function(){var e=new i("loadSound",r,n.url),s="There was no response from the server at "+n.url+". Check the url and internet connectivity.";t&&(e.message=s,t(e))},o.send()):void 0!==this.file&&(a=new FileReader,a.onload=function(){n.panner&&s.decodeAudioData(a.result,function(t){n.panner&&(n.buffer=t,n.panner.inputChannels(t.numberOfChannels),e&&e(n))})},a.onerror=function(e){n.panner&&onerror&&onerror(e)},a.readAsArrayBuffer(this.file))},p5.SoundFile.prototype._updateProgress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*.99;this._whileLoading(t,e)}else this._whileLoading("size unknown")},p5.SoundFile.prototype.isLoaded=function(){return!!this.buffer},p5.SoundFile.prototype.play=function(e,n,s,o,i){if(this.output){var r,c,a=e||0;if(a<0&&(a=0),a+=t.audiocontext.currentTime,void 0!==n&&this.rate(n),void 0!==s&&this.setVolume(s),!this.buffer)throw"not ready to play file, buffer has yet to load. Try preload()";if(this._pauseTime=0,"restart"===this.mode&&this.buffer&&this.bufferSourceNode&&(this.bufferSourceNode.stop(a),this._counterNode.stop(a)),"untildone"!==this.mode||!this.isPlaying()){if(this.bufferSourceNode=this._initSourceNode(),delete this._counterNode,this._counterNode=this._initCounterNode(),o){if(!(0<=o&&o<this.buffer.duration))throw"start time out of range";r=o}else r=0;i=i&&(i<=this.buffer.duration-r?i:this.buffer.duration),this._paused?(this.bufferSourceNode.start(a,this.pauseTime,i),this._counterNode.start(a,this.pauseTime,i)):(this.bufferSourceNode.start(a,r,i),this._counterNode.start(a,r,i)),this._playing=!0,this._paused=!1,this.bufferSourceNodes.push(this.bufferSourceNode),this.bufferSourceNode._arrayIndex=this.bufferSourceNodes.length-1,this.bufferSourceNode.addEventListener("ended",this._clearOnEnd),this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping,!0===this._looping&&(c=i||r-1e-15,this.bufferSourceNode.loopStart=r,this.bufferSourceNode.loopEnd=c,this._counterNode.loopStart=r,this._counterNode.loopEnd=c)}}},p5.SoundFile.prototype.playMode=function(e){var s,o,n=e.toLowerCase();if("restart"===n&&this.buffer&&this.bufferSourceNode)for(s=0;s<this.bufferSourceNodes.length-1;s++)o=t.audiocontext.currentTime,this.bufferSourceNodes[s].stop(o);if("restart"!==n&&"sustain"!==n&&"untildone"!==n)throw'Invalid play mode. Must be either "restart" or "sustain"';this.mode=n},p5.SoundFile.prototype.pause=function(e){var n=(e||0)+t.audiocontext.currentTime;this.isPlaying()&&this.buffer&&this.bufferSourceNode?(this._paused=!0,this._playing=!1,this.pauseTime=this.currentTime(),this.bufferSourceNode.stop(n),this._counterNode.stop(n),this._pauseTime=this.currentTime()):this._pauseTime=0},p5.SoundFile.prototype.loop=function(e,t,n,s,o){this._looping=!0,this.play(e,t,n,s,o)},p5.SoundFile.prototype.setLoop=function(e){if(!0===e)this._looping=!0;else{if(!1!==e)throw"Error: setLoop accepts either true or false";this._looping=!1}this.bufferSourceNode&&(this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping)},p5.SoundFile.prototype.isLooping=function(){return!!this.bufferSourceNode&&!0===this._looping&&!0===this.isPlaying()},p5.SoundFile.prototype.isPlaying=function(){return this._playing},p5.SoundFile.prototype.isPaused=function(){return this._paused},p5.SoundFile.prototype.stop=function(e){if(n=e||0,"sustain"===this.mode||"untildone"===this.mode)this.stopAll(n),this._playing=!1,this.pauseTime=0,this._paused=!1;else if(this.buffer&&this.bufferSourceNode){var n,s=t.audiocontext.currentTime,o=n||0;this.pauseTime=0,this.bufferSourceNode.stop(s+o),this._counterNode.stop(s+o),this._playing=!1,this._paused=!1}},p5.SoundFile.prototype.stopAll=function(e){var n,i,s=t.audiocontext.currentTime,o=e||0;if(this.buffer&&this.bufferSourceNode){for(i in this.bufferSourceNodes)if(n=this.bufferSourceNodes[i],n)try{n.stop(s+o)}catch{}this._counterNode.stop(s+o),this._onended(this)}},p5.SoundFile.prototype.setVolume=function(e,n,s){if("number"==typeof e){var a=n||0,o=s||0,i=t.audiocontext.currentTime,r=this.output.gain.value;this.output.gain.cancelScheduledValues(i+o),this.output.gain.linearRampToValueAtTime(r,i+o),this.output.gain.linearRampToValueAtTime(e,i+o+a)}else{if(!e)return this.output.gain;e.connect(this.output.gain)}},p5.SoundFile.prototype.amp=p5.SoundFile.prototype.setVolume,p5.SoundFile.prototype.fade=p5.SoundFile.prototype.setVolume,p5.SoundFile.prototype.getVolume=function(){return this.output.gain.value},p5.SoundFile.prototype.pan=function(e,t){this.panPosition=e,this.panner.pan(e,t)},p5.SoundFile.prototype.getPan=function(){return this.panPosition},p5.SoundFile.prototype.rate=function(e){var n,s=!1;return void 0===e?this.playbackRate:((0===(this.playbackRate=e)?e=1e-13:e<0&&!this.reversed?(e=Math.abs(e),s=!0):0<e&&this.reversed&&(s=!0),this.bufferSourceNode)&&(n=t.audiocontext.currentTime,this.bufferSourceNode.playbackRate.cancelScheduledValues(n),this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(e),n),this._counterNode.playbackRate.cancelScheduledValues(n),this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(e),n)),s&&this.reverseBuffer(),this.playbackRate)},p5.SoundFile.prototype.setPitch=function(e){var t=r(e)/r(60);this.rate(t)},p5.SoundFile.prototype.getPlaybackRate=function(){return this.playbackRate},p5.SoundFile.prototype.duration=function(){return this.buffer?this.buffer.duration:0},p5.SoundFile.prototype.currentTime=function(){return this.reversed?Math.abs(this._lastPos-this.buffer.length)/s.sampleRate:this._lastPos/s.sampleRate},p5.SoundFile.prototype.jump=function(e,t){if(e<0||e>this.buffer.duration)throw"jump time out of range";if(t>this.buffer.duration-e)throw"end time out of range";var n=e||0,s=t||void 0;this.isPlaying()&&(this.stop(0),this.play(0,this.playbackRate,this.output.gain.value,n,s))},p5.SoundFile.prototype.channels=function(){return this.buffer.numberOfChannels},p5.SoundFile.prototype.sampleRate=function(){return this.buffer.sampleRate},p5.SoundFile.prototype.frames=function(){return this.buffer.length},p5.SoundFile.prototype.getPeaks=function(e){if(!this.buffer)throw"Cannot load peaks yet, buffer is not loaded";if(e=e||5*window.width,this.buffer){for(var n,s,l,a=this.buffer,i=a.length/e,m=~~(i/10)||1,u=a.numberOfChannels,r=new Float32Array(Math.round(e)),o=0;o<u;o++)for(l=a.getChannelData(o),n=0;n<e;n++){for(var d=~~(n*i),h=~~(d+i),t=0,c=d;c<h;c+=m)s=l[c],t<s?t=s:t<-s&&(t=s);(0===o||Math.abs(t)>r[n])&&(r[n]=t)}return r}},p5.SoundFile.prototype.reverseBuffer=function(){if(!this.buffer)throw"SoundFile is not done loading";var e,n,t=this._lastPos/s.sampleRate,o=this.getVolume();this.setVolume(0,.001);for(n=this.buffer.numberOfChannels,e=0;e<n;e++)this.buffer.getChannelData(e).reverse();this.reversed=!this.reversed,this.isPlaying()&&t&&this.jump(this.duration()-t),this.setVolume(o,.001)},p5.SoundFile.prototype.onended=function(e){return this._onended=e,this},p5.SoundFile.prototype.add=function(){},p5.SoundFile.prototype.dispose=function(){var e,n=t.audiocontext.currentTime,s=t.soundArray.indexOf(this);if(t.soundArray.splice(s,1),this.stop(n),this.buffer&&this.bufferSourceNode){for(e=0;e<this.bufferSourceNodes.length-1;e++)if(null!==this.bufferSourceNodes[e]){this.bufferSourceNodes[e].disconnect();try{this.bufferSourceNodes[e].stop(n)}catch{}this.bufferSourceNodes[e]=null}if(this.isPlaying()){try{this._counterNode.stop(n)}catch{}this._counterNode=null}}this.output&&(this.output.disconnect(),this.output=null),this.panner&&(this.panner.disconnect(),this.panner=null)},p5.SoundFile.prototype.connect=function(e){e?e.hasOwnProperty("input")?this.panner.connect(e.input):this.panner.connect(e):this.panner.connect(t.input)},p5.SoundFile.prototype.disconnect=function(){this.panner&&this.panner.disconnect()},p5.SoundFile.prototype.getLevel=function(){},p5.SoundFile.prototype.setPath=function(e,t){var n=p5.prototype._checkFileFormats(e);this.url=n,this.load(t)},p5.SoundFile.prototype.setBuffer=function(e){var t,n=e.length,i=e[0].length,o=s.createBuffer(n,i,s.sampleRate);e[0]instanceof Float32Array||(e[0]=new Float32Array(e[0]));for(t=0;t<n;t++)o.getChannelData(t).set(e[t]);this.buffer=o,this.panner.inputChannels(n)},p5.SoundFile.prototype._initCounterNode=function(){var n=this,e=this,o=s.currentTime,t=s.createBufferSource(),i=u(256);return e._workletNode&&(e._workletNode.disconnect(),delete e._workletNode),e._workletNode=new AudioWorkletNode(s,h.soundFileProcessor,{processorOptions:{bufferSize:i}}),e._workletNode.port.onmessage=function(t){if("position"===t.data.name){if(0===t.data.position)return;n._lastPos=t.data.position,n._onTimeUpdate(e._lastPos)}},t.buffer=function(e){for(var o=e.length,n=s.createBuffer(1,e.length,s.sampleRate),i=n.getChannelData(0),t=0;t<o;t++)i[t]=t;return n}(e.buffer),t.playbackRate.setValueAtTime(e.playbackRate,o),t.connect(e._workletNode),e._workletNode.connect(p5.soundOut._silentNode),t},p5.SoundFile.prototype._initSourceNode=function(){var e=s.createBufferSource();return e.buffer=this.buffer,e.playbackRate.value=this.playbackRate,e.connect(this.output),e},p5.SoundFile.prototype.processPeaks=function(e,t,n,s){var a,d=this.buffer.length,u=this.buffer.sampleRate,h=this.buffer,i=[],r=t||.9,f=n||.22,p=s||200,o=new window.OfflineAudioContext(1,d,u),c=o.createBufferSource();c.buffer=h,a=o.createBiquadFilter(),a.type="lowpass",c.connect(a),a.connect(o.destination),c.start(0),o.startRendering(),o.oncomplete=function(t){if(self.panner){for(var s,o,n=t.renderedBuffer,a=n.getChannelData(0);i=m(a,r),r-=.005,Object.keys(i).length<p&&f<=r;);s=function(e,t){var n=[];return e.forEach(function(e){try{var s=Math.abs(60/(e.interval/t));if(s=l(s),!n.some(function(t){if(t.tempo===s)return t.count+=e.count})){if(isNaN(s))return;n.push({tempo:Math.round(s),count:e.count})}}catch(e){throw e}}),n}(function(e){for(var t,s,o,r,c,i=[],a=Object.keys(e).sort(),n=0;n<a.length;n++)for(s=0;s<10;s++)o=e[a[n]],r=e[a[n+s]],o&&r&&(c=o.sampleIndex,t=r.sampleIndex-c,0<t&&o.intervals.push(t),i.some(function(e){if(e.interval===t)return e.count++,e})||i.push({interval:t,count:1}));return i}(i),n.sampleRate).sort(function(e,t){return t.count-e.count}).splice(0,5),this.tempo=s[0].tempo,o=function(e,t,n,s){for(var o,i=[],d=Object.keys(e).sort(),a=0;a<d.length;a++)for(var u=d[a],r=e[u],c=0;c<r.intervals.length;c++)o=Math.round(Math.abs(60/(r.intervals[c]/n))),o=l(o),Math.abs(o-t)<s&&i.push(r.sampleIndex/n);return i=i.filter(function(e,t,n){if(.01<n[t+1]-e)return!0})}(i,s[0].tempo,n.sampleRate,5),e(o)}}},c=function(e,t){this.sampleIndex=t,this.amplitude=e,this.tempos=[],this.intervals=[]};function m(e,t){for(var o,i,s={},a=e.length,n=0;n<a;n++)e[n]>t&&(o=e[n],i=new c(o,n),s[n]=i,n+=6e3),n++;return s}function l(e){if(isFinite(e)&&0!==e){for(;e<90;)e*=2;for(;180<e&&90<e;)e/=2;return e}}function f(e,t,n,s){this.callback=e,this.time=t,this.id=n,this.val=s}p5.SoundFile.prototype.addCue=function(e,t,n){var s=this._cueIDCounter++,o=new f(t,e,s,n);return this._cues.push(o),s},p5.SoundFile.prototype.removeCue=function(e){for(var n=this._cues.length,t=0;t<n;t++)if(this._cues[t].id===e){this._cues.splice(t,1);break}this._cues.length},p5.SoundFile.prototype.clearCues=function(){this._cues=[]},p5.SoundFile.prototype._onTimeUpdate=function(e){for(var s=e/this.buffer.sampleRate,i=this._cues.length,t=0;t<i;t++){var n=this._cues[t],o=n.time,a=n.val;~~this._prevUpdateTime<=o&&o<=s&&n.callback(a)}this._prevUpdateTime=s},p5.SoundFile.prototype.save=function(e){p5.prototype.saveSound(this,e,"wav")},p5.SoundFile.prototype.getBlob=function(){var e=d(this.buffer);return new Blob([e],{type:"audio/wav"})}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),s=n(6).safeBufferSize,o=n(10);p5.Amplitude=function(e){this.bufferSize=s(2048),this.audiocontext=t.audiocontext,this._workletNode=new AudioWorkletNode(this.audiocontext,o.amplitudeProcessor,{outputChannelCount:[1],parameterData:{smoothing:e||0},processorOptions:{normalize:!1,smoothing:e||0,numInputChannels:2,bufferSize:this.bufferSize}}),this._workletNode.port.onmessage=function(e){"amplitude"===e.data.name&&(this.volume=e.data.volume,this.volNorm=e.data.volNorm,this.stereoVol=e.data.stereoVol,this.stereoVolNorm=e.data.stereoVolNorm)}.bind(this),this.input=this._workletNode,this.output=this.audiocontext.createGain(),this.volume=0,this.volNorm=0,this.stereoVol=[0,0],this.stereoVolNorm=[0,0],this.normalize=!1,this._workletNode.connect(this.output),this.output.gain.value=0,this.output.connect(this.audiocontext.destination),t.meter.connect(this._workletNode),t.soundArray.push(this)},p5.Amplitude.prototype.setInput=function(e,n){t.meter.disconnect(),n&&(this._workletNode.parameters.get("smoothing").value=n),e==null?t.meter.connect(this._workletNode):e instanceof p5.Signal?e.output.connect(this._workletNode):e?(e.connect(this._workletNode),this._workletNode.disconnect(),this._workletNode.connect(this.output)):t.meter.connect(this._workletNode)},p5.Amplitude.prototype.connect=function(e){e?e.hasOwnProperty("input")?this.output.connect(e.input):this.output.connect(e):this.output.connect(this.panner.connect(t.input))},p5.Amplitude.prototype.disconnect=function(){this.output&&this.output.disconnect()},p5.Amplitude.prototype.getLevel=function(e){return void 0!==e?this.normalize?this.stereoVolNorm[e]:this.stereoVol[e]:this.normalize?this.volNorm:this.volume},p5.Amplitude.prototype.toggleNormalize=function(e){this.normalize="boolean"==typeof e?e:!this.normalize,this._workletNode.port.postMessage({name:"toggleNormalize",normalize:this.normalize})},p5.Amplitude.prototype.smooth=function(e){0<=e&&e<1&&this._workletNode.port.postMessage({name:"smoothing",smoothing:e})},p5.Amplitude.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.input&&(this.input.disconnect(),delete this.input),this.output&&(this.output.disconnect(),delete this.output),this._workletNode.disconnect(),delete this._workletNode}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){t=n(1),p5.FFT=function(e,n){this.input=this.analyser=t.audiocontext.createAnalyser(),Object.defineProperties(this,{bins:{get:function(){return this.analyser.fftSize/2},set:function(e){this.analyser.fftSize=2*e},configurable:!0,enumerable:!0},smoothing:{get:function(){return this.analyser.smoothingTimeConstant},set:function(e){this.analyser.smoothingTimeConstant=e},configurable:!0,enumerable:!0}}),this.smooth(e),this.bins=n||1024,t.fftMeter.connect(this.analyser),this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount),this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount),this.bass=[20,140],this.lowMid=[140,400],this.mid=[400,2600],this.highMid=[2600,5200],this.treble=[5200,14e3],t.soundArray.push(this)},p5.FFT.prototype.setInput=function(e){e?(e.output?e.output.connect(this.analyser):e.connect&&e.connect(this.analyser),t.fftMeter.disconnect()):t.fftMeter.connect(this.analyser)},p5.FFT.prototype.waveform=function(){for(e=0;e<arguments.length;e++)"number"==typeof arguments[e]&&(n=arguments[e],this.analyser.fftSize=2*n),"string"==typeof arguments[e]&&(s=arguments[e]);if(s&&!p5.prototype._isSafari())return i(this,this.timeDomain),this.analyser.getFloatTimeDomainData(this.timeDomain),this.timeDomain;a(this,this.timeDomain),this.analyser.getByteTimeDomainData(this.timeDomain);for(var e,n,s,r,o=new Array,t=0;t<this.timeDomain.length;t++)r=p5.prototype.map(this.timeDomain[t],0,255,-1,1),o.push(r);return o},p5.FFT.prototype.analyze=function(){for(var t,e=0;e<arguments.length;e++)"number"==typeof arguments[e]&&(this.bins=arguments[e],this.analyser.fftSize=2*this.bins),"string"==typeof arguments[e]&&(t=arguments[e]);return t&&"db"===t.toLowerCase()?(s(this),this.analyser.getFloatFrequencyData(this.freqDomain),this.freqDomain):(o(this,this.freqDomain),this.analyser.getByteFrequencyData(this.freqDomain),Array.apply([],this.freqDomain))},p5.FFT.prototype.getEnergy=function(e,n){if(s=t.audiocontext.sampleRate/2,"bass"===e?(e=this.bass[0],n=this.bass[1]):"lowMid"===e?(e=this.lowMid[0],n=this.lowMid[1]):"mid"===e?(e=this.mid[0],n=this.mid[1]):"highMid"===e?(e=this.highMid[0],n=this.highMid[1]):"treble"===e&&(e=this.treble[0],n=this.treble[1]),"number"!=typeof e)throw"invalid input for getEnergy()";if(n){if(e&&n){n<e&&(i=n,n=e,e=i);for(var s,i,c,l=Math.round(e/s*this.freqDomain.length),d=Math.round(n/s*this.freqDomain.length),a=0,r=0,o=l;o<=d;o++)a+=this.freqDomain[o],r+=1;return a/r}throw"invalid input for getEnergy()"}return c=Math.round(e/s*this.freqDomain.length),this.freqDomain[c]},p5.FFT.prototype.getFreq=function(e,t){return this.getEnergy(e,t)},p5.FFT.prototype.getCentroid=function(){for(var s,i=t.audiocontext.sampleRate/2,o=0,n=0,e=0;e<this.freqDomain.length;e++)o+=e*this.freqDomain[e],n+=this.freqDomain[e];return s=0,0!==n&&(s=o/n),s*(i/this.freqDomain.length)},p5.FFT.prototype.smooth=function(e){return void 0!==e&&(this.smoothing=e),this.smoothing},p5.FFT.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.analyser&&(this.analyser.disconnect(),delete this.analyser)},p5.FFT.prototype.linAverages=function(e){e=e||16;for(var o=this.freqDomain,i=o.length,a=Math.floor(i/e),n=new Array(e),s=0,t=0;t<i;t++)n[s]=void 0!==n[s]?(n[s]+o[t])/2:o[t],t%a==a-1&&s++;return n},p5.FFT.prototype.logAverages=function(e){for(var a=t.audiocontext.sampleRate/2,i=this.freqDomain,r=i.length,o=new Array(e.length),n=0,s=0;s<r;s++)Math.round(s*a/this.freqDomain.length)>e[n].hi&&n++,o[n]=void 0!==o[n]?(o[n]+i[s])/2:i[s];return o},p5.FFT.prototype.getOctaveBands=function(e,n){e=e||3;var s,a,i=[],o={lo:(n=n||15.625)/Math.pow(2,1/(2*e)),ctr:n,hi:n*Math.pow(2,1/(2*e))};i.push(o);for(a=t.audiocontext.sampleRate/2;o.hi<a;)s={},s.lo=o.hi,s.ctr=o.ctr*Math.pow(2,1/e),s.hi=s.ctr*Math.pow(2,1/(2*e)),i.push(s),o=s;return i};var t,s=function(e){e.freqDomain instanceof Float32Array==!1&&(e.freqDomain=new Float32Array(e.analyser.frequencyBinCount))},o=function(e){e.freqDomain instanceof Uint8Array==!1&&(e.freqDomain=new Uint8Array(e.analyser.frequencyBinCount))},i=function(e){e.timeDomain instanceof Float32Array==!1&&(e.timeDomain=new Float32Array(e.analyser.frequencyBinCount))},a=function(e){e.timeDomain instanceof Uint8Array==!1&&(e.timeDomain=new Uint8Array(e.analyser.frequencyBinCount))}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(2),s=n(7),o=n(3),i=n(13);p5.Signal=function(e){return new t(e)},t.prototype.fade=t.prototype.linearRampToValueAtTime,o.prototype.fade=t.prototype.fade,s.prototype.fade=t.prototype.fade,i.prototype.fade=t.prototype.fade,t.prototype.setInput=function(e){e.connect(this)},o.prototype.setInput=t.prototype.setInput,s.prototype.setInput=t.prototype.setInput,i.prototype.setInput=t.prototype.setInput,t.prototype.add=function(e){var t=new s(e);return this.connect(t),t},o.prototype.add=t.prototype.add,s.prototype.add=t.prototype.add,i.prototype.add=t.prototype.add,t.prototype.mult=function(e){var t=new o(e);return this.connect(t),t},o.prototype.mult=t.prototype.mult,s.prototype.mult=t.prototype.mult,i.prototype.mult=t.prototype.mult,t.prototype.scale=function(e,t,n,s){var o,r=4===arguments.length?(o=p5.prototype.map(n,e,t,0,1)-.5,p5.prototype.map(s,e,t,0,1)-.5):(o=e,t),a=new i(o,r);return this.connect(a),a},o.prototype.scale=t.prototype.scale,s.prototype.scale=t.prototype.scale,i.prototype.scale=t.prototype.scale}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(21)];void 0===(s=function(e){e.Frequency=function(t,n){if(!(this instanceof e.Frequency))return new e.Frequency(t,n);e.TimeBase.call(this,t,n)},e.extend(e.Frequency,e.TimeBase),e.Frequency.prototype._primaryExpressions=Object.create(e.TimeBase.prototype._primaryExpressions),e.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(e){return this.midiToFrequency(e)}},e.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(e,n){var s=t[e.toLowerCase()]+12*(parseInt(n)+1);return this.midiToFrequency(s)}},e.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(e,t,n){var s=1;return e&&"0"!==e&&(s*=this._beatsToUnits(this._timeSignature()*parseFloat(e))),t&&"0"!==t&&(s*=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}},e.Frequency.prototype.transpose=function(e){return this._expr=function(e,t){return e()*this.intervalToFrequencyRatio(t)}.bind(this,this._expr,e),this},e.Frequency.prototype.harmonize=function(e){return this._expr=function(e,t){for(var o=e(),s=[],n=0;n<t.length;n++)s[n]=o*this.intervalToFrequencyRatio(t[n]);return s}.bind(this,this._expr,e),this},e.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.valueOf())},e.Frequency.prototype.toNote=function(){var o=this.valueOf(),i=Math.log(o/e.Frequency.A4)/Math.LN2,t=Math.round(12*i)+57,s=Math.floor(t/12);return s<0&&(t+=-12*s),n[t%12]+s.toString()},e.Frequency.prototype.toSeconds=function(){return 1/this.valueOf()},e.Frequency.prototype.toFrequency=function(){return this.valueOf()},e.Frequency.prototype.toTicks=function(){var t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.floor(n*e.Transport.PPQ)},e.Frequency.prototype._frequencyToUnits=function(e){return e},e.Frequency.prototype._ticksToUnits=function(t){return 1/(60*t/(e.Transport.bpm.value*e.Transport.PPQ))},e.Frequency.prototype._beatsToUnits=function(t){return 1/e.TimeBase.prototype._beatsToUnits.call(this,t)},e.Frequency.prototype._secondsToUnits=function(e){return 1/e},e.Frequency.prototype._defaultUnits="hz";var t={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.Frequency.A4=440,e.Frequency.prototype.midiToFrequency=function(t){return e.Frequency.A4*Math.pow(2,(t-69)/12)},e.Frequency.prototype.frequencyToMidi=function(t){return 69+12*Math.log(t/e.Frequency.A4)/Math.LN2},e.Frequency}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(20)];void 0===(s=function(e){return e.TransportTime=function(t,n){if(!(this instanceof e.TransportTime))return new e.TransportTime(t,n);e.Time.call(this,t,n)},e.extend(e.TransportTime,e.Time),e.TransportTime.prototype._unaryExpressions=Object.create(e.Time.prototype._unaryExpressions),e.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(t){var n=this._secondsToTicks(t()),s=Math.ceil(e.Transport.ticks/n);return this._ticksToUnits(s*n)}},e.TransportTime.prototype._secondsToTicks=function(t){var n=t/this._beatsToUnits(1);return Math.round(n*e.Transport.PPQ)},e.TransportTime.prototype.valueOf=function(){return this._secondsToTicks(this._expr())+(this._plusNow?e.Transport.ticks:0)},e.TransportTime.prototype.toTicks=function(){return this.valueOf()},e.TransportTime.prototype.toSeconds=function(){return this._expr()+(this._plusNow?e.Transport.seconds:0)},e.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},e.TransportTime}.apply(t,o))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),s=n(7),o=n(3),i=n(13),a=n(14);p5.Envelope=function(e,n,s,o,i,r){this.aTime=e||.1,this.aLevel=n||1,this.dTime=s||.5,this.dLevel=o||0,this.rTime=i||0,this.rLevel=r||0,this._rampHighPercentage=.98,this._rampLowPercentage=.02,this.output=t.audiocontext.createGain(),this.control=new a,this._init(),this.control.connect(this.output),this.connection=null,this.mathOps=[this.control],this.isExponential=!1,this.sourceToClear=null,this.wasTriggered=!1,t.soundArray.push(this)},p5.Envelope.prototype._init=function(){var e=t.audiocontext.currentTime;this.control.setTargetAtTime(1e-5,e,.001),this._setRampAD(this.aTime,this.dTime)},p5.Envelope.prototype.set=function(e,t,n,s,o,i){this.aTime=e,this.aLevel=t,this.dTime=n||0,this.dLevel=s||0,this.rTime=o||0,this.rLevel=i||0,this._setRampAD(e,n)},p5.Envelope.prototype.setADSR=function(e,t,n,s){this.aTime=e,this.dTime=t||0,this.sPercent=n||0,this.dLevel=void 0!==n?n*(this.aLevel-this.rLevel)+this.rLevel:0,this.rTime=s||0,this._setRampAD(e,t)},p5.Envelope.prototype.setRange=function(e,t){this.aLevel=e||1,this.rLevel=t||0},p5.Envelope.prototype._setRampAD=function(e,t){this._rampAttackTime=this.checkExpInput(e),this._rampDecayTime=this.checkExpInput(t);var n=1,n=Math.log(1/this.checkExpInput(1-this._rampHighPercentage));this._rampAttackTC=e/this.checkExpInput(n),n=Math.log(1/this._rampLowPercentage),this._rampDecayTC=t/this.checkExpInput(n)},p5.Envelope.prototype.setRampPercentages=function(e,t){this._rampHighPercentage=this.checkExpInput(e),this._rampLowPercentage=this.checkExpInput(t);var n=1,n=Math.log(1/this.checkExpInput(1-this._rampHighPercentage));this._rampAttackTC=this._rampAttackTime/this.checkExpInput(n),n=Math.log(1/this._rampLowPercentage),this._rampDecayTC=this._rampDecayTime/this.checkExpInput(n)},p5.Envelope.prototype.setInput=function(){for(var e=0;e<arguments.length;e++)this.connect(arguments[e])},p5.Envelope.prototype.setExp=function(e){this.isExponential=e},p5.Envelope.prototype.checkExpInput=function(e){return e<=0&&(e=1e-8),e},p5.Envelope.prototype.play=function(e,t,n){var s=t||0;n=n||0,e&&this.connection!==e&&this.connect(e),this.triggerAttack(e,s),this.triggerRelease(e,s+this.aTime+this.dTime+n)},p5.Envelope.prototype.triggerAttack=function(e,n){var o,s=t.audiocontext.currentTime+(n||0);this.lastAttack=s,this.wasTriggered=!0,e&&this.connection!==e&&this.connect(e),o=this.control.getValueAtTime(s),!0===this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(o),s):this.control.linearRampToValueAtTime(o,s),s+=this.aTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.aLevel),s),o=this.checkExpInput(this.control.getValueAtTime(s)),this.control.cancelScheduledValues(s),this.control.exponentialRampToValueAtTime(o,s)):(this.control.linearRampToValueAtTime(this.aLevel,s),o=this.control.getValueAtTime(s),this.control.cancelScheduledValues(s),this.control.linearRampToValueAtTime(o,s)),s+=this.dTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.dLevel),s),o=this.checkExpInput(this.control.getValueAtTime(s)),this.control.cancelScheduledValues(s),this.control.exponentialRampToValueAtTime(o,s)):(this.control.linearRampToValueAtTime(this.dLevel,s),o=this.control.getValueAtTime(s),this.control.cancelScheduledValues(s),this.control.linearRampToValueAtTime(o,s))},p5.Envelope.prototype.triggerRelease=function(e,n){if(this.wasTriggered){var o,s=t.audiocontext.currentTime+(n||0);e&&this.connection!==e&&this.connect(e),o=this.control.getValueAtTime(s),!0===this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(o),s):this.control.linearRampToValueAtTime(o,s),s+=this.rTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.rLevel),s),o=this.checkExpInput(this.control.getValueAtTime(s)),this.control.cancelScheduledValues(s),this.control.exponentialRampToValueAtTime(o,s)):(this.control.linearRampToValueAtTime(this.rLevel,s),o=this.control.getValueAtTime(s),this.control.cancelScheduledValues(s),this.control.linearRampToValueAtTime(o,s)),this.wasTriggered=!1}},p5.Envelope.prototype.ramp=function(e,n,s,o){var c,i=t.audiocontext.currentTime+(n||0),a=this.checkExpInput(s),r=void 0!==o?this.checkExpInput(o):void 0;e&&this.connection!==e&&this.connect(e),c=this.checkExpInput(this.control.getValueAtTime(i)),c<a?(this.control.setTargetAtTime(a,i,this._rampAttackTC),i+=this._rampAttackTime):a<c&&(this.control.setTargetAtTime(a,i,this._rampDecayTC),i+=this._rampDecayTime),void 0!==r&&(a<r?this.control.setTargetAtTime(r,i,this._rampAttackTC):r<a&&this.control.setTargetAtTime(r,i,this._rampDecayTC))},p5.Envelope.prototype.connect=function(e){((this.connection=e)instanceof p5.Oscillator||e instanceof p5.SoundFile||e instanceof p5.AudioIn||e instanceof p5.Reverb||e instanceof p5.Noise||e instanceof p5.Filter||e instanceof p5.Delay)&&(e=e.output.gain),e instanceof AudioParam&&e.setValueAtTime(0,t.audiocontext.currentTime),e instanceof p5.Signal&&e.setValue(0),this.output.connect(e)},p5.Envelope.prototype.disconnect=function(){this.output&&this.output.disconnect()},p5.Envelope.prototype.add=function(e){var t=new s(e),n=this.mathOps.length,o=this.output;return p5.prototype._mathChain(this,t,n,o,s)},p5.Envelope.prototype.mult=function(e){var t=new o(e),n=this.mathOps.length,s=this.output;return p5.prototype._mathChain(this,t,n,s,o)},p5.Envelope.prototype.scale=function(e,t,n,s){var o=new i(e,t,n,s),a=this.mathOps.length,r=this.output;return p5.prototype._mathChain(this,o,a,r,i)},p5.Envelope.prototype.dispose=function(){var e,n=t.soundArray.indexOf(this);t.soundArray.splice(n,1),this.disconnect(),this.control&&(this.control.dispose(),this.control=null);for(e=1;e<this.mathOps.length;e++)this.mathOps[e].dispose()},p5.Env=function(e,t,n,s,o,i){p5.Envelope.call(this,e,t,n,s,o,i)},p5.Env.prototype=Object.create(p5.Envelope.prototype)}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1);function s(){for(var e,n=t.audiocontext,o=n.createBuffer(1,2048,n.sampleRate),i=o.getChannelData(0),s=0;s<2048;s++)i[s]=1;return e=n.createBufferSource(),e.buffer=o,e.loop=!0,e}n(23),p5.Pulse=function(e,n){p5.Oscillator.call(this,e,"sawtooth"),this.w=n||0,this.osc2=new p5.SawOsc(e),this.dNode=t.audiocontext.createDelay(),this.dcOffset=s(),this.dcGain=t.audiocontext.createGain(),this.dcOffset.connect(this.dcGain),this.dcGain.connect(this.output),this.f=e||440;var o=this.w/this.oscillator.frequency.value;this.dNode.delayTime.value=o,this.dcGain.gain.value=1.7*(.5-this.w),this.osc2.disconnect(),this.osc2.panner.disconnect(),this.osc2.amp(-1),this.osc2.output.connect(this.dNode),this.dNode.connect(this.output),this.output.gain.value=1,this.output.connect(this.panner)},p5.Pulse.prototype=Object.create(p5.Oscillator.prototype),p5.Pulse.prototype.width=function(e){if("number"==typeof e){if(e<=1&&0<=e){this.w=e;var t,n=this.w/this.oscillator.frequency.value;this.dNode.delayTime.value=n}this.dcGain.gain.value=1.7*(.5-this.w)}else e.connect(this.dNode.delayTime),t=new p5.SignalAdd(-.5),t.setInput(e),(t=(t=t.mult(-1)).mult(1.7)).connect(this.dcGain.gain)},p5.Pulse.prototype.start=function(e,n){var a,r,o=t.audiocontext.currentTime,i=n||0;this.started||(a=e||this.f,r=this.oscillator.type,this.oscillator=t.audiocontext.createOscillator(),this.oscillator.frequency.setValueAtTime(a,o),this.oscillator.type=r,this.oscillator.connect(this.output),this.oscillator.start(i+o),this.osc2.oscillator=t.audiocontext.createOscillator(),this.osc2.oscillator.frequency.setValueAtTime(a,i+o),this.osc2.oscillator.type=r,this.osc2.oscillator.connect(this.osc2.output),this.osc2.start(i+o),this.freqNode=[this.oscillator.frequency,this.osc2.oscillator.frequency],this.dcOffset=s(),this.dcOffset.connect(this.dcGain),this.dcOffset.start(i+o),void 0!==this.mods&&void 0!==this.mods.frequency&&(this.mods.frequency.connect(this.freqNode[0]),this.mods.frequency.connect(this.freqNode[1])),this.started=!0,this.osc2.started=!0)},p5.Pulse.prototype.stop=function(e){if(this.started){var n=e||0,s=t.audiocontext.currentTime;this.oscillator.stop(n+s),this.osc2.oscillator&&this.osc2.oscillator.stop(n+s),this.dcOffset.stop(n+s),this.started=!1,this.osc2.started=!1}},p5.Pulse.prototype.freq=function(e,n,s){if("number"==typeof e){this.f=e;var o=t.audiocontext.currentTime,i=(n=n||0,s=s||0,this.oscillator.frequency.value);this.oscillator.frequency.cancelScheduledValues(o),this.oscillator.frequency.setValueAtTime(i,o+s),this.oscillator.frequency.exponentialRampToValueAtTime(e,s+n+o),this.osc2.oscillator.frequency.cancelScheduledValues(o),this.osc2.oscillator.frequency.setValueAtTime(i,o+s),this.osc2.oscillator.frequency.exponentialRampToValueAtTime(e,s+n+o),this.freqMod&&(this.freqMod.output.disconnect(),this.freqMod=null)}else e.output&&(e.output.disconnect(),e.output.connect(this.oscillator.frequency),e.output.connect(this.osc2.oscillator.frequency),this.freqMod=e)}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){t=n(1),p5.Noise=function(e){var t;p5.Oscillator.call(this),delete this.f,delete this.freq,delete this.oscillator,t="brown"===e?i:"pink"===e?o:s,this.buffer=t},p5.Noise.prototype=Object.create(p5.Oscillator.prototype);var t,s=function(){for(var s=2*t.audiocontext.sampleRate,e=t.audiocontext.createBuffer(1,s,t.audiocontext.sampleRate),o=e.getChannelData(0),n=0;n<s;n++)o[n]=2*Math.random()-1;return e.type="white",e}(),o=function(){for(var e,n,s,o,i,a,l,u=2*t.audiocontext.sampleRate,d=t.audiocontext.createBuffer(1,u,t.audiocontext.sampleRate),h=d.getChannelData(0),c=n=s=o=i=a=l=0,r=0;r<u;r++)e=2*Math.random()-1,c=.99886*c+.0555179*e,n=.99332*n+.0750759*e,s=.969*s+.153852*e,o=.8665*o+.3104856*e,i=.55*i+.5329522*e,a=-.7616*a-.016898*e,h[r]=c+n+s+o+i+a+l+.5362*e,h[r]*=.11,l=.115926*e;return d.type="pink",d}(),i=function(){for(var a,o=2*t.audiocontext.sampleRate,n=t.audiocontext.createBuffer(1,o,t.audiocontext.sampleRate),s=n.getChannelData(0),i=0,e=0;e<o;e++)a=2*Math.random()-1,s[e]=(i+.02*a)/1.02,i=s[e],s[e]*=3.5;return n.type="brown",n}();p5.Noise.prototype.setType=function(e){switch(e){case"white":this.buffer=s;break;case"pink":this.buffer=o;break;case"brown":this.buffer=i;break;default:this.buffer=s}if(this.started){var n=t.audiocontext.currentTime;this.stop(n),this.start(n+.01)}},p5.Noise.prototype.getType=function(){return this.buffer.type},p5.Noise.prototype.start=function(){this.started&&this.stop(),this.noise=t.audiocontext.createBufferSource(),this.noise.buffer=this.buffer,this.noise.loop=!0,this.noise.connect(this.output);var e=t.audiocontext.currentTime;this.noise.start(e),this.started=!0},p5.Noise.prototype.stop=function(){var e=t.audiocontext.currentTime;this.noise&&(this.noise.stop(e),this.started=!1)},p5.Noise.prototype.dispose=function(){var e=t.audiocontext.currentTime,n=t.soundArray.indexOf(this);t.soundArray.splice(n,1),this.noise&&(this.noise.disconnect(),this.stop(e)),this.output&&this.output.disconnect(),this.panner&&this.panner.disconnect(),this.output=null,this.panner=null,this.buffer=null,this.noise=null}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1);t.inputSources=[],p5.AudioIn=function(e){this.input=t.audiocontext.createGain(),this.output=t.audiocontext.createGain(),this.stream=null,this.mediaStream=null,this.currentSource=null,this.enabled=!1,this.amplitude=new p5.Amplitude,this.output.connect(this.amplitude.input),window.MediaStreamTrack&&window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia||(e?e():window.alert("This browser does not support MediaStreamTrack and mediaDevices")),t.soundArray.push(this)},p5.AudioIn.prototype.start=function(e,n){s=this,this.stream&&this.stop();var s,i=t.inputSources[s.currentSource],o={audio:{sampleRate:t.audiocontext.sampleRate,echoCancellation:!1}};t.inputSources[this.currentSource]&&(o.audio.deviceId=i.deviceId),window.navigator.mediaDevices.getUserMedia(o).then(function(n){s.stream=n,s.enabled=!0,s.mediaStream=t.audiocontext.createMediaStreamSource(n),s.mediaStream.connect(s.output),s.amplitude.setInput(s.output),e&&e()}).catch(function(e){n&&n(e)})},p5.AudioIn.prototype.stop=function(){this.stream&&(this.stream.getTracks().forEach(function(e){e.stop()}),this.mediaStream.disconnect(),delete this.mediaStream,delete this.stream)},p5.AudioIn.prototype.connect=function(e){e?e.hasOwnProperty("input")?this.output.connect(e.input):e.hasOwnProperty("analyser")?this.output.connect(e.analyser):this.output.connect(e):this.output.connect(t.input)},p5.AudioIn.prototype.disconnect=function(){this.output&&(this.output.disconnect(),this.output.connect(this.amplitude.input))},p5.AudioIn.prototype.getLevel=function(e){return e&&(this.amplitude.smoothing=e),this.amplitude.getLevel()},p5.AudioIn.prototype.amp=function(e,n){if(n){var s=n||0,o=this.output.gain.value;this.output.gain.cancelScheduledValues(t.audiocontext.currentTime),this.output.gain.setValueAtTime(o,t.audiocontext.currentTime),this.output.gain.linearRampToValueAtTime(e,s+t.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(t.audiocontext.currentTime),this.output.gain.setValueAtTime(e,t.audiocontext.currentTime)},p5.AudioIn.prototype.getSources=function(e,n){return new Promise(function(s,o){window.navigator.mediaDevices.enumerateDevices().then(function(n){t.inputSources=n.filter(function(e){return"audioinput"===e.kind}),s(t.inputSources),e&&e(t.inputSources)}).catch(function(e){o(e),n&&n(e)})})},p5.AudioIn.prototype.setSource=function(e){0<t.inputSources.length&&e<t.inputSources.length&&(this.currentSource=e),this.stream&&this.stream.active&&this.start()},p5.AudioIn.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.stop(),this.output&&this.output.disconnect(),this.amplitude&&this.amplitude.disconnect(),delete this.amplitude,delete this.output}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(2),n(52),n(58),n(9)];void 0===(s=function(e){"use strict";return e.CrossFade=function(t){this.createInsOuts(2,1),this.a=this.input[0]=new e.Gain,this.b=this.input[1]=new e.Gain,this.fade=new e.Signal(this.defaultArg(t,.5),e.Type.NormalRange),this._equalPowerA=new e.EqualPowerGain,this._equalPowerB=new e.EqualPowerGain,this._invert=new e.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},e.extend(e.CrossFade),e.CrossFade.prototype.dispose=function(){return e.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},e.CrossFade}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(7),n(16),n(3),n(53),n(26),n(54),n(25),n(55),n(56),n(57)];void 0===(s=function(e){"use strict";function n(e,t,n){var s=new e;return n._eval(t[0]).connect(s,0,0),n._eval(t[1]).connect(s,0,1),s}function t(e,t,n){var s=new e;return n._eval(t[0]).connect(s,0,0),s}function s(e){return e?parseFloat(e):void 0}function o(e){return e&&e.args?parseFloat(e.args):void 0}return e.Expr=function(){var e,s,o,t=this._replacements(Array.prototype.slice.call(arguments)),n=this._parseInputs(t);this._nodes=[],this.input=new Array(n);for(e=0;e<n;e++)this.input[e]=this.context.createGain();o=this._parseTree(t);try{s=this._eval(o)}catch{throw this._disposeNodes(),new Error("Tone.Expr: Could evaluate expression: "+t)}this.output=s},e.extend(e.Expr,e.SignalBase),e.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(t){return new e.Signal(s(t))}},input:{regexp:/^\$\d/,method:function(e,t){return t.input[s(e.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:t.bind(this,e.Abs)},mod:{regexp:/^mod/,method:function(t,n){var i=o(t[1]),s=new e.Modulo(i);return n._eval(t[0]).connect(s),s}},pow:{regexp:/^pow/,method:function(t,n){var i=o(t[1]),s=new e.Pow(i);return n._eval(t[0]).connect(s),s}},a2g:{regexp:/^a2g/,method:function(t,n){var s=new e.AudioToGain;return n._eval(t[0]).connect(s),s}}},binary:{"+":{regexp:/^\+/,precedence:1,method:n.bind(this,e.Add)},"-":{regexp:/^-/,precedence:1,method:function(s,o){return 1===s.length?t(e.Negate,s,o):n(e.Subtract,s,o)}},"*":{regexp:/^\*/,precedence:0,method:n.bind(this,e.Multiply)}},unary:{"-":{regexp:/^-/,method:t.bind(this,e.Negate)},"!":{regexp:/^!/,method:t.bind(this,e.NOT)}}},e.Expr.prototype._parseInputs=function(e){var t,o,n=e.match(/\$\d/g),s=0;if(null!==n)for(t=0;t<n.length;t++)o=parseInt(n[t].substr(1))+1,s=Math.max(s,o);return s},e.Expr.prototype._replacements=function(e){for(var t=e.shift(),n=0;n<e.length;n++)t=t.replace(/%/i,e[n]);return t},e.Expr.prototype._tokenize=function(t){for(var s,o=-1,n=[];0<t.length;)s=i(t=t.trim()),n.push(s),t=t.substr(s.value.length);function i(t){for(s in e.Expr._Expressions){n=e.Expr._Expressions[s];for(a in n){var n,s,a,o=n[a],r=o.regexp,i=t.match(r);if(null!==i)return{type:s,value:i[0],method:o.method}}}throw new SyntaxError("Tone.Expr: Unexpected token "+t)}return{next:function(){return n[++o]},peek:function(){return n[o+1]}}},e.Expr.prototype._parseTree=function(t){var n=this._tokenize(t),s=this.isUndef.bind(this);function o(e,t){return!s(e)&&"glue"===e.type&&e.value===t}function a(t,n,o){var i,r,a=e.Expr._Expressions[n];if(!s(t))for(r in a)if(i=a[r],i.regexp.test(t.value)){if(s(o))return!0;if(i.precedence===o)return!0}return!1}function i(e){s(e)&&(e=5),t=e<0?function e(){var t,r;return a(t=n.peek(),"unary")?(t=n.next(),r=e(),{operator:t.value,method:t.method,args:[r]}):function(){var e,t;if(e=n.peek(),s(e))throw new SyntaxError("Tone.Expr: Unexpected termination of expression");if("func"===e.type)return function(e){var t=[];if(!o(n.next(),"("))throw new SyntaxError('Tone.Expr: Expected ( in a function call "'+e.value+'"');if(o(n.peek(),")")||(t=function(){for(var e,t=[];e=i(),!s(e)&&(t.push(e),o(n.peek(),","));)n.next();return t}()),o(n.next(),")"))return{method:e.method,args:t,name};throw new SyntaxError('Tone.Expr: Expected ) in a function call "'+e.value+'"')}(e=n.next());if("value"===e.type)return{method:(e=n.next()).method,args:e.value};if(o(e,"(")){if(n.next(),t=i(),!o(e=n.next(),")"))throw new SyntaxError("Expected )");return t}throw new SyntaxError("Tone.Expr: Parse error, cannot process token "+e.value)}()}():i(e-1);for(var t,r=n.peek();a(r,"binary",e);)t={operator:(r=n.next()).value,method:r.method,args:[t,i(e-1)]},r=n.peek();return t}return i()},e.Expr.prototype._eval=function(e){if(!this.isUndef(e)){var t=e.method(e.args,this);return this._nodes.push(t),t}},e.Expr.prototype._disposeNodes=function(){for(var e,t=0;t<this._nodes.length;t++)e=this._nodes[t],this.isFunction(e.dispose)?e.dispose():this.isFunction(e.disconnect)&&e.disconnect(),e=null,this._nodes[t]=null;this._nodes=null},e.Expr.prototype.dispose=function(){e.prototype.dispose.call(this),this._disposeNodes()},e.Expr}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(26),n(16),n(2)];void 0===(s=function(e){"use strict";return e.GreaterThan=function(t){this.createInsOuts(2,0),this._param=this.input[0]=new e.Subtract(t),this.input[1]=this._param.input[1],this._gtz=this.output=new e.GreaterThanZero,this._param.connect(this._gtz)},e.extend(e.GreaterThan,e.Signal),e.GreaterThan.prototype.dispose=function(){return e.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},e.GreaterThan}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(5),n(19)];void 0===(s=function(e){"use strict";return e.Abs=function(){this._abs=this.input=this.output=new e.WaveShaper(function(e){return 0===e?0:Math.abs(e)},127)},e.extend(e.Abs,e.SignalBase),e.Abs.prototype.dispose=function(){return e.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},e.Abs}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(5),n(3),n(16)];void 0===(s=function(e){"use strict";return e.Modulo=function(t){this.createInsOuts(1,0),this._shaper=new e.WaveShaper(Math.pow(2,16)),this._multiply=new e.Multiply,this._subtract=this.output=new e.Subtract,this._modSignal=new e.Signal(t),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(t)},e.extend(e.Modulo,e.SignalBase),e.Modulo.prototype._setWaveShaper=function(e){this._shaper.setMap(function(t){return Math.floor((t+1e-4)/e)})},Object.defineProperty(e.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(e){this._modSignal.value=e,this._setWaveShaper(e)}}),e.Modulo.prototype.dispose=function(){return e.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},e.Modulo}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(5)];void 0===(s=function(e){"use strict";return e.Pow=function(t){this._exp=this.defaultArg(t,1),this._expScaler=this.input=this.output=new e.WaveShaper(this._expFunc(this._exp),8192)},e.extend(e.Pow,e.SignalBase),Object.defineProperty(e.Pow.prototype,"value",{get:function(){return this._exp},set:function(e){this._exp=e,this._expScaler.setMap(this._expFunc(this._exp))}}),e.Pow.prototype._expFunc=function(e){return function(t){return Math.pow(Math.abs(t),e)}},e.Pow.prototype.dispose=function(){return e.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},e.Pow}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(5),n(2)];void 0===(s=function(e){"use strict";return e.AudioToGain=function(){this._norm=this.input=this.output=new e.WaveShaper(function(e){return(e+1)/2})},e.extend(e.AudioToGain,e.SignalBase),e.AudioToGain.prototype.dispose=function(){return e.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},e.AudioToGain}.apply(t,o))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(5)];void 0===(s=function(e){"use strict";return e.EqualPowerGain=function(){this._eqPower=this.input=this.output=new e.WaveShaper(function(e){return Math.abs(e)<.001?0:this.equalPowerScale(e)}.bind(this),4096)},e.extend(e.EqualPowerGain,e.SignalBase),e.EqualPowerGain.prototype.dispose=function(){return e.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},e.EqualPowerGain}.apply(t,o))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(4),s=n(60);return p5.EQ=function(e){t.call(this),o=3===(e=3===e||8===e?e:3)?Math.pow(2,3):2,this.bands=[];for(var s,o,i,n=0;n<e;n++)i=n===e-1?(s=21e3,.01):0===n?(s=100,.1):(s=1===n?3===e?360*o:360:this.bands[n-1].freq()*o,1),this.bands[n]=this._newBand(s,i),0<n?this.bands[n-1].connect(this.bands[n].biquad):this.input.connect(this.bands[n].biquad);this.bands[e-1].connect(this.output)},p5.EQ.prototype=Object.create(t.prototype),p5.EQ.prototype.process=function(e){e.connect(this.input)},p5.EQ.prototype.set=function(){if(arguments.length===2*this.bands.length)for(var e=0;e<arguments.length;e+=2)this.bands[e/2].freq(arguments[e]),this.bands[e/2].gain(arguments[e+1])},p5.EQ.prototype._newBand=function(e,t){return new s(e,t)},p5.EQ.prototype.dispose=function(){if(t.prototype.dispose.apply(this),this.bands){for(;0<this.bands.length;)this.bands.pop().dispose();delete this.bands}},p5.EQ}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){function t(e,t){s.call(this,"peaking"),this.disconnect(),this.set(e,t),this.biquad.gain.value=0,delete this.input,delete this.output,delete this._drywet,delete this.wet}var s=n(15),o=n(1);return(t.prototype=Object.create(s.prototype)).amp=function(){},t.prototype.drywet=function(){},t.prototype.connect=function(e){var t=e||p5.soundOut.input;this.biquad?this.biquad.connect(t.input?t.input:t):this.output.connect(t.input?t.input:t)},t.prototype.disconnect=function(){this.biquad&&this.biquad.disconnect()},t.prototype.dispose=function(){var e=o.soundArray.indexOf(this);o.soundArray.splice(e,1),this.disconnect(),delete this.biquad},t}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){n(1);var t=n(4);return p5.Panner3D=function(){t.call(this),this.panner=this.ac.createPanner(),this.panner.panningModel="HRTF",this.panner.distanceModel="linear",this.panner.connect(this.output),this.input.connect(this.panner)},p5.Panner3D.prototype=Object.create(t.prototype),p5.Panner3D.prototype.process=function(e){e.connect(this.input)},p5.Panner3D.prototype.set=function(e,t,n,s){return this.positionX(e,s),this.positionY(t,s),this.positionZ(n,s),[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]},p5.Panner3D.prototype.positionX=function(e,t){var n=t||0;return"number"==typeof e?(this.panner.positionX.value=e,this.panner.positionX.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.positionX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.positionX),this.panner.positionX.value},p5.Panner3D.prototype.positionY=function(e,t){var n=t||0;return"number"==typeof e?(this.panner.positionY.value=e,this.panner.positionY.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.positionY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.positionY),this.panner.positionY.value},p5.Panner3D.prototype.positionZ=function(e,t){var n=t||0;return"number"==typeof e?(this.panner.positionZ.value=e,this.panner.positionZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.positionZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.positionZ),this.panner.positionZ.value},p5.Panner3D.prototype.orient=function(e,t,n,s){return this.orientX(e,s),this.orientY(t,s),this.orientZ(n,s),[this.panner.orientationX.value,this.panner.orientationY.value,this.panner.orientationZ.value]},p5.Panner3D.prototype.orientX=function(e,t){var n=t||0;return"number"==typeof e?(this.panner.orientationX.value=e,this.panner.orientationX.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.orientationX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.orientationX),this.panner.orientationX.value},p5.Panner3D.prototype.orientY=function(e,t){var n=t||0;return"number"==typeof e?(this.panner.orientationY.value=e,this.panner.orientationY.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.orientationY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.orientationY),this.panner.orientationY.value},p5.Panner3D.prototype.orientZ=function(e,t){var n=t||0;return"number"==typeof e?(this.panner.orientationZ.value=e,this.panner.orientationZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.orientationZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.orientationZ),this.panner.orientationZ.value},p5.Panner3D.prototype.setFalloff=function(e,t){this.maxDist(e),this.rolloff(t)},p5.Panner3D.prototype.maxDist=function(e){return"number"==typeof e&&(this.panner.maxDistance=e),this.panner.maxDistance},p5.Panner3D.prototype.rolloff=function(e){return"number"==typeof e&&(this.panner.rolloffFactor=e),this.panner.rolloffFactor},p5.Panner3D.dispose=function(){t.prototype.dispose.apply(this),this.panner&&(this.panner.disconnect(),delete this.panner)},p5.Panner3D}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1);return n(4),p5.Listener3D=function(){this.ac=t.audiocontext,this.listener=this.ac.listener},p5.Listener3D.prototype.process=function(e){e.connect(this.input)},p5.Listener3D.prototype.position=function(e,t,n,s){return this.positionX(e,s),this.positionY(t,s),this.positionZ(n,s),[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]},p5.Listener3D.prototype.positionX=function(e,t){var n=t||0;return"number"==typeof e?(this.listener.positionX.value=e,this.listener.positionX.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.positionX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.positionX),this.listener.positionX.value},p5.Listener3D.prototype.positionY=function(e,t){var n=t||0;return"number"==typeof e?(this.listener.positionY.value=e,this.listener.positionY.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.positionY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.positionY),this.listener.positionY.value},p5.Listener3D.prototype.positionZ=function(e,t){var n=t||0;return"number"==typeof e?(this.listener.positionZ.value=e,this.listener.positionZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.positionZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.positionZ),this.listener.positionZ.value},p5.Listener3D.prototype.orient=function(e,t,n,s,o,i,a){return 3===arguments.length||4===arguments.length?(a=s,this.orientForward(e,t,n,a)):6!==arguments.length&&7!==arguments||(this.orientForward(e,t,n),this.orientUp(s,o,i,a)),[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value,this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]},p5.Listener3D.prototype.orientForward=function(e,t,n,s){return this.forwardX(e,s),this.forwardY(t,s),this.forwardZ(n,s),[this.listener.forwardX,this.listener.forwardY,this.listener.forwardZ]},p5.Listener3D.prototype.orientUp=function(e,t,n,s){return this.upX(e,s),this.upY(t,s),this.upZ(n,s),[this.listener.upX,this.listener.upY,this.listener.upZ]},p5.Listener3D.prototype.forwardX=function(e,t){var n=t||0;return"number"==typeof e?(this.listener.forwardX.value=e,this.listener.forwardX.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.forwardX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.forwardX),this.listener.forwardX.value},p5.Listener3D.prototype.forwardY=function(e,t){var n=t||0;return"number"==typeof e?(this.listener.forwardY.value=e,this.listener.forwardY.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.forwardY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.forwardY),this.listener.forwardY.value},p5.Listener3D.prototype.forwardZ=function(e,t){var n=t||0;return"number"==typeof e?(this.listener.forwardZ.value=e,this.listener.forwardZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.forwardZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.forwardZ),this.listener.forwardZ.value},p5.Listener3D.prototype.upX=function(e,t){var n=t||0;return"number"==typeof e?(this.listener.upX.value=e,this.listener.upX.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.upX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.upX),this.listener.upX.value},p5.Listener3D.prototype.upY=function(e,t){var n=t||0;return"number"==typeof e?(this.listener.upY.value=e,this.listener.upY.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.upY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.upY),this.listener.upY.value},p5.Listener3D.prototype.upZ=function(e,t){var n=t||0;return"number"==typeof e?(this.listener.upZ.value=e,this.listener.upZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.upZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.upZ),this.listener.upZ.value},p5.Listener3D}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var s=n(15),t=n(4);p5.Delay=function(){t.call(this),this._split=this.ac.createChannelSplitter(2),this._merge=this.ac.createChannelMerger(2),this._leftGain=this.ac.createGain(),this._rightGain=this.ac.createGain(),this.leftDelay=this.ac.createDelay(),this.rightDelay=this.ac.createDelay(),this._leftFilter=new s,this._rightFilter=new s,this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._leftFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime),this._rightFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime),this._leftFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime),this._rightFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime),this.input.connect(this._split),this.leftDelay.connect(this._leftGain),this.rightDelay.connect(this._rightGain),this._leftGain.connect(this._leftFilter.input),this._rightGain.connect(this._rightFilter.input),this._merge.connect(this.wet),this._leftFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime),this._rightFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime),this.setType(0),this._maxDelay=this.leftDelay.delayTime.maxValue,this.feedback(.5)},p5.Delay.prototype=Object.create(t.prototype),p5.Delay.prototype.process=function(e,t,n,s){var o=n||0,i=t||0;if(1<=o)throw new Error("Feedback value will force a positive feedback loop.");if(i>=this._maxDelay)throw new Error("Delay Time exceeds maximum delay time of "+this._maxDelay+" second.");e.connect(this.input),this.leftDelay.delayTime.setValueAtTime(i,this.ac.currentTime),this.rightDelay.delayTime.setValueAtTime(i,this.ac.currentTime),this._leftGain.gain.value=o,this._rightGain.gain.value=o,s&&(this._leftFilter.freq(s),this._rightFilter.freq(s))},p5.Delay.prototype.delayTime=function(e){"number"!=typeof e?(e.connect(this.leftDelay.delayTime),e.connect(this.rightDelay.delayTime)):(this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.leftDelay.delayTime.linearRampToValueAtTime(e,this.ac.currentTime),this.rightDelay.delayTime.linearRampToValueAtTime(e,this.ac.currentTime))},p5.Delay.prototype.feedback=function(e){if(e&&"number"!=typeof e)e.connect(this._leftGain.gain),e.connect(this._rightGain.gain);else{if(1<=e)throw new Error("Feedback value will force a positive feedback loop.");"number"==typeof e&&(this._leftGain.gain.value=e,this._rightGain.gain.value=e)}return this._leftGain.gain.value},p5.Delay.prototype.filter=function(e,t){this._leftFilter.set(e,t),this._rightFilter.set(e,t)},p5.Delay.prototype.setType=function(e){switch(1===e&&(e="pingPong"),this._split.disconnect(),this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._split.connect(this.leftDelay,0),this._split.connect(this.rightDelay,1),e){case"pingPong":this._rightFilter.setType(this._leftFilter.biquad.type),this._leftFilter.output.connect(this._merge,0,0),this._rightFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.rightDelay),this._rightFilter.output.connect(this.leftDelay);break;default:this._leftFilter.output.connect(this._merge,0,0),this._rightFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.leftDelay),this._rightFilter.output.connect(this.rightDelay)}},p5.Delay.prototype.dispose=function(){t.prototype.dispose.apply(this),this._split.disconnect(),this._leftFilter.dispose(),this._rightFilter.dispose(),this._merge.disconnect(),this._leftGain.disconnect(),this._rightGain.disconnect(),this.leftDelay.disconnect(),this.rightDelay.disconnect(),this._split=void 0,this._leftFilter=void 0,this._rightFilter=void 0,this._merge=void 0,this._leftGain=void 0,this._rightGain=void 0,this.leftDelay=void 0,this.rightDelay=void 0}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(11),s=n(4);p5.Reverb=function(){s.call(this),this._initConvolverNode(),this.input.gain.value=.5,this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse()},p5.Reverb.prototype=Object.create(s.prototype),p5.Reverb.prototype._initConvolverNode=function(){this.convolverNode=this.ac.createConvolver(),this.input.connect(this.convolverNode),this.convolverNode.connect(this.wet)},p5.Reverb.prototype._teardownConvolverNode=function(){this.convolverNode&&(this.convolverNode.disconnect(),delete this.convolverNode)},p5.Reverb.prototype._setBuffer=function(e){this._teardownConvolverNode(),this._initConvolverNode(),this.convolverNode.buffer=e},p5.Reverb.prototype.process=function(e,t,n,s){e.connect(this.input);var o=!1;t&&(this._seconds=t,o=!0),n&&(this._decay=n),s&&(this._reverse=s),o&&this._buildImpulse()},p5.Reverb.prototype.set=function(e,t,n){var s=!1;e&&(this._seconds=e,s=!0),t&&(this._decay=t),n&&(this._reverse=n),s&&this._buildImpulse()},p5.Reverb.prototype._buildImpulse=function(){var e,n,o=this.ac.sampleRate,t=o*this._seconds,i=this._decay,s=this.ac.createBuffer(2,t,o),a=s.getChannelData(0),r=s.getChannelData(1);for(e=0;e<t;e++)n=this._reverse?t-e:e,a[e]=(2*Math.random()-1)*Math.pow(1-n/t,i),r[e]=(2*Math.random()-1)*Math.pow(1-n/t,i);this._setBuffer(s)},p5.Reverb.prototype.dispose=function(){s.prototype.dispose.apply(this),this._teardownConvolverNode()},p5.Convolver=function(e,t,n){p5.Reverb.call(this),this._initConvolverNode(),this.input.gain.value=.5,e?(this.impulses=[],this._loadBuffer(e,t,n)):(this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse())},p5.Convolver.prototype=Object.create(p5.Reverb.prototype),p5.prototype.registerPreloadMethod("createConvolver",p5.prototype),p5.prototype.createConvolver=function(e,t,n){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var s=this,o=new p5.Convolver(e,function(e){"function"==typeof t&&t(e),"function"==typeof s._decrementPreload&&s._decrementPreload()},n);return o.impulses=[],o},p5.Convolver.prototype._loadBuffer=function(e,n,s){e=p5.prototype._checkFileFormats(e);var i=this,a=(new Error).stack,r=p5.prototype.getAudioContext(),o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){if(200===o.status)r.decodeAudioData(o.response,function(t){var s={},o=e.split("/");s.name=o[o.length-1],s.audioBuffer=t,i.impulses.push(s),i._setBuffer(s.audioBuffer),n&&n(s)},function(){var e=new t("decodeAudioData",a,i.url),n="AudioContext error at decodeAudioData for "+i.url;s&&(e.msg=n,s(e))});else{var c=new t("loadConvolver",a,i.url),l="Unable to load "+i.url+". The request status was: "+o.status+" ("+o.statusText+")";s&&(c.message=l,s(c))}},o.onerror=function(){var e=new t("loadConvolver",a,i.url),n="There was no response from the server at "+i.url+". Check the url and internet connectivity.";s&&(e.message=n,s(e))},o.send()},p5.Convolver.prototype.set=null,p5.Convolver.prototype.process=function(e){e.connect(this.input)},p5.Convolver.prototype.impulses=[],p5.Convolver.prototype.addImpulse=function(e,t,n){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS"),this._loadBuffer(e,t,n)},p5.Convolver.prototype.resetImpulse=function(e,t,n){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS"),this.impulses=[],this._loadBuffer(e,t,n)},p5.Convolver.prototype.toggleImpulse=function(e){if("number"==typeof e&&e<this.impulses.length&&this._setBuffer(this.impulses[e].audioBuffer),"string"==typeof e)for(var t=0;t<this.impulses.length;t++)if(this.impulses[t].name===e){this._setBuffer(this.impulses[t].audioBuffer);break}},p5.Convolver.prototype.dispose=function(){for(var e in p5.Reverb.prototype.dispose.apply(this),this.impulses)this.impulses[e]&&(this.impulses[e]=null)}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),s=n(27);p5.Metro=function(){this.clock=new s({callback:this.ontick.bind(this)}),this.syncedParts=[],this.bpm=120,this._init(),this.prevTick=0,this.tatumTime=0,this.tickCallback=function(){}},p5.Metro.prototype.ontick=function(e){var s,o=e-this.prevTick,n=e-t.audiocontext.currentTime;o-this.tatumTime<=-.02||(this.prevTick=e,s=this,this.syncedParts.forEach(function(e){e.isPlaying&&(e.incrementStep(n),e.phrases.forEach(function(e){var t=e.sequence,o=s.metroTicks%t.length;0!==t[o]&&(s.metroTicks<t.length||!e.looping)&&e.callback(n,t[o])}))}),this.metroTicks+=1,this.tickCallback(n))},p5.Metro.prototype.setBPM=function(e,n){var o=60/(e*this.tatums),s=t.audiocontext.currentTime;this.tatumTime=o,n=n||0,this.clock.frequency.setValueAtTime(this.clock.frequency.value,s),this.clock.frequency.linearRampToValueAtTime(e,s+n),this.bpm=e},p5.Metro.prototype.getBPM=function(){return this.clock.getRate()/this.tatums*60},p5.Metro.prototype._init=function(){this.metroTicks=0},p5.Metro.prototype.resetSync=function(e){this.syncedParts=[e]},p5.Metro.prototype.pushSync=function(e){this.syncedParts.push(e)},p5.Metro.prototype.start=function(e){var n=e||0,s=t.audiocontext.currentTime;this.clock.start(s+n),this.setBPM(this.bpm)},p5.Metro.prototype.stop=function(e){var n=e||0,s=t.audiocontext.currentTime;this.clock.stop(s+n)},p5.Metro.prototype.beatLength=function(e){this.tatums=1/e/4}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){var s,o=[n(0),n(24),n(8)];void 0===(s=function(e){"use strict";return e.TimelineState=function(t){e.Timeline.call(this),this._initial=t},e.extend(e.TimelineState,e.Timeline),e.TimelineState.prototype.getValueAtTime=function(e){var t=this.get(e);return null!==t?t.state:this._initial},e.TimelineState.prototype.setStateAtTime=function(e,t){this.add({state:e,time:t})},e.TimelineState}.apply(t,o))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),s=120;function o(e){e.currentPart++,e.currentPart>=e.parts.length?(e.scoreStep=0,e.onended()):(e.scoreStep=0,e.parts[e.currentPart-1].stop(),e.parts[e.currentPart].start())}p5.prototype.setBPM=function(e,n){for(var o in s=e,t.parts)t.parts[o]&&t.parts[o].setBPM(e,n)},p5.Phrase=function(e,t,n){this.phraseStep=0,this.name=e,this.callback=t,this.sequence=n},p5.Part=function(e,n){this.length=e||0,this.partStep=0,this.phrases=[],this.isPlaying=!1,this.noLoop(),this.tatums=n||.0625,this.metro=new p5.Metro,this.metro._init(),this.metro.beatLength(this.tatums),this.metro.setBPM(s),t.parts.push(this),this.callback=function(){}},p5.Part.prototype.setBPM=function(e,t){this.metro.setBPM(e,t)},p5.Part.prototype.getBPM=function(){return this.metro.getBPM()},p5.Part.prototype.start=function(e){if(!this.isPlaying){this.isPlaying=!0,this.metro.resetSync(this);var t=e||0;this.metro.start(t)}},p5.Part.prototype.loop=function(e){this.looping=!0,this.onended=function(){this.partStep=0};var t=e||0;this.start(t)},p5.Part.prototype.noLoop=function(){this.looping=!1,this.onended=function(){this.stop()}},p5.Part.prototype.stop=function(e){this.partStep=0,this.pause(e)},p5.Part.prototype.pause=function(e){this.isPlaying=!1;var t=e||0;this.metro.stop(t)},p5.Part.prototype.addPhrase=function(e,t,n){var s;if(3===arguments.length)s=new p5.Phrase(e,t,n);else{if(!(e instanceof p5.Phrase))throw"invalid input. addPhrase accepts name, callback, array or a p5.Phrase";s=e}this.phrases.push(s),s.sequence.length>this.length&&(this.length=s.sequence.length)},p5.Part.prototype.removePhrase=function(e){for(var t in this.phrases)this.phrases[t].name===e&&this.phrases.splice(t,1)},p5.Part.prototype.getPhrase=function(e){for(var t in this.phrases)if(this.phrases[t].name===e)return this.phrases[t]},p5.Part.prototype.replaceSequence=function(e,t){for(var n in this.phrases)this.phrases[n].name===e&&(this.phrases[n].sequence=t)},p5.Part.prototype.incrementStep=function(e){this.partStep<this.length-1?(this.callback(e),this.partStep+=1):this.looping||this.partStep!==this.length-1||this.onended()},p5.Part.prototype.onStep=function(e){this.callback=e},p5.Score=function(){this.parts=[],this.currentPart=0;var e,t=this;for(e in arguments)arguments[e]&&this.parts[e]&&(this.parts[e]=arguments[e],this.parts[e].nextPart=this.parts[e+1],this.parts[e].onended=function(){t.resetPart(e),o(t)});this.looping=!1},p5.Score.prototype.onended=function(){this.looping?this.parts[0].start():this.parts[this.parts.length-1].onended=function(){this.stop(),this.resetParts()},this.currentPart=0},p5.Score.prototype.start=function(){this.parts[this.currentPart].start(),this.scoreStep=0},p5.Score.prototype.stop=function(){this.parts[this.currentPart].stop(),this.currentPart=0,this.scoreStep=0},p5.Score.prototype.pause=function(){this.parts[this.currentPart].stop()},p5.Score.prototype.loop=function(){this.looping=!0,this.start()},p5.Score.prototype.noLoop=function(){this.looping=!1},p5.Score.prototype.resetParts=function(){var e=this;this.parts.forEach(function(t){e.resetParts[t]})},p5.Score.prototype.resetPart=function(e){for(var t in this.parts[e].stop(),this.parts[e].partStep=0,this.parts[e].phrases)this.parts[e]&&(this.parts[e].phrases[t].phraseStep=0)},p5.Score.prototype.setBPM=function(e,t){for(var n in this.parts)this.parts[n]&&this.parts[n].setBPM(e,t)}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),s=n(27);return p5.SoundLoop=function(e,n){this.callback=e,this.musicalTimeMode="number"!=typeof this._interval,this._interval=n||1,this._timeSignature=4,this._bpm=60,this.isPlaying=!1,this.maxIterations=1/0;var o=this;this.clock=new s({callback:function(e){var n=e-t.audiocontext.currentTime;0<n&&o.iterations<=o.maxIterations&&o.callback(n)},frequency:this._calcFreq()})},p5.SoundLoop.prototype.start=function(e){var n=e||0,s=t.audiocontext.currentTime;this.isPlaying||(this.clock.start(s+n),this.isPlaying=!0)},p5.SoundLoop.prototype.stop=function(e){var n=e||0,s=t.audiocontext.currentTime;this.isPlaying&&(this.clock.stop(s+n),this.isPlaying=!1)},p5.SoundLoop.prototype.pause=function(e){var n=e||0,s=t.audiocontext.currentTime;this.isPlaying&&(this.clock.pause(s+n),this.isPlaying=!1)},p5.SoundLoop.prototype.syncedStart=function(e,n){var i,o=n||0,s=t.audiocontext.currentTime;e.isPlaying?e.isPlaying&&(i=e.clock._nextTick-t.audiocontext.currentTime,this.clock.start(s+i),this.isPlaying=!0):(e.clock.start(s+o),e.isPlaying=!0,this.clock.start(s+o),this.isPlaying=!0)},p5.SoundLoop.prototype._update=function(){this.clock.frequency.value=this._calcFreq()},p5.SoundLoop.prototype._calcFreq=function(){return"number"==typeof this._interval?(this.musicalTimeMode=!1,1/this._interval):"string"==typeof this._interval?(this.musicalTimeMode=!0,this._bpm/60/this._convertNotation(this._interval)*(this._timeSignature/4)):void 0},p5.SoundLoop.prototype._convertNotation=function(e){var t=e.slice(-1);switch(e=Number(e.slice(0,-1)),t){case"m":return this._measure(e);case"n":return this._note(e)}},p5.SoundLoop.prototype._measure=function(e){return e*this._timeSignature},p5.SoundLoop.prototype._note=function(e){return this._timeSignature/e},Object.defineProperty(p5.SoundLoop.prototype,"bpm",{get:function(){return this._bpm},set:function(e){this.musicalTimeMode,this._bpm=e,this._update()}}),Object.defineProperty(p5.SoundLoop.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(e){this.musicalTimeMode,this._timeSignature=e,this._update()}}),Object.defineProperty(p5.SoundLoop.prototype,"interval",{get:function(){return this._interval},set:function(e){this.musicalTimeMode="Number"!=typeof e,this._interval=e,this._update()}}),Object.defineProperty(p5.SoundLoop.prototype,"iterations",{get:function(){return this.clock.ticks}}),p5.SoundLoop}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){var s;void 0===(s=function(){"use strict";n(1);var t=n(4);return n(11),p5.Compressor=function(){t.call(this),this.compressor=this.ac.createDynamicsCompressor(),this.input.connect(this.compressor),this.compressor.connect(this.wet)},p5.Compressor.prototype=Object.create(t.prototype),p5.Compressor.prototype.process=function(e,t,n,s,o,i){e.connect(this.input),this.set(t,n,s,o,i)},p5.Compressor.prototype.set=function(e,t,n,s,o){void 0!==e&&this.attack(e),void 0!==t&&this.knee(t),void 0!==n&&this.ratio(n),void 0!==s&&this.threshold(s),void 0!==o&&this.release(o)},p5.Compressor.prototype.attack=function(e,t){var n=t||0;return"number"==typeof e?(this.compressor.attack.value=e,this.compressor.attack.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.attack.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):void 0!==e&&e.connect(this.compressor.attack),this.compressor.attack.value},p5.Compressor.prototype.knee=function(e,t){var n=t||0;return"number"==typeof e?(this.compressor.knee.value=e,this.compressor.knee.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.knee.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):void 0!==e&&e.connect(this.compressor.knee),this.compressor.knee.value},p5.Compressor.prototype.ratio=function(e,t){var n=t||0;return"number"==typeof e?(this.compressor.ratio.value=e,this.compressor.ratio.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.ratio.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):void 0!==e&&e.connect(this.compressor.ratio),this.compressor.ratio.value},p5.Compressor.prototype.threshold=function(e,t){var n=t||0;return"number"==typeof e?(this.compressor.threshold.value=e,this.compressor.threshold.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.threshold.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):void 0!==e&&e.connect(this.compressor.threshold),this.compressor.threshold.value},p5.Compressor.prototype.release=function(e,t){var n=t||0;return"number"==typeof e?(this.compressor.release.value=e,this.compressor.release.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.release.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):"undefined"!=typeof number&&e.connect(this.compressor.release),this.compressor.release.value},p5.Compressor.prototype.reduction=function(){return this.compressor.reduction.value},p5.Compressor.prototype.dispose=function(){t.prototype.dispose.apply(this),this.compressor&&(this.compressor.disconnect(),delete this.compressor)},p5.Compressor}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1),o=n(6),i=o.convertToWav,a=o.safeBufferSize,r=n(10),s=t.audiocontext;p5.SoundRecorder=function(){this.input=s.createGain(),this.output=s.createGain(),this._inputChannels=2,this._outputChannels=2;var e=a(1024);this._workletNode=new AudioWorkletNode(s,r.recorderProcessor,{outputChannelCount:[this._outputChannels],processorOptions:{numInputChannels:this._inputChannels,bufferSize:e}}),this._workletNode.port.onmessage=function(e){if("buffers"===e.data.name){var t=[new Float32Array(e.data.leftBuffer),new Float32Array(e.data.rightBuffer)];this._callback(t)}}.bind(this),this._callback=function(){},this._workletNode.connect(p5.soundOut._silentNode),this.setInput(),t.soundArray.push(this)},p5.SoundRecorder.prototype.setInput=function(e){this.input.disconnect(),this.input=null,this.input=s.createGain(),this.input.connect(this._workletNode),this.input.connect(this.output),e?e.connect(this.input):p5.soundOut.output.connect(this.input)},p5.SoundRecorder.prototype.record=function(e,t,n){this._workletNode.port.postMessage({name:"start",duration:t}),e&&n?this._callback=function(t){e.setBuffer(t),n()}:e&&(this._callback=function(t){e.setBuffer(t)})},p5.SoundRecorder.prototype.stop=function(){this._workletNode.port.postMessage({name:"stop"})},p5.SoundRecorder.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this._callback=function(){},this.input&&this.input.disconnect(),this.input=null,this._workletNode=null},p5.prototype.saveSound=function(e,t){var n=i(e.buffer);p5.prototype.writeFile([n],t,"wav")}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){p5.PeakDetect=function(e,t,n,s){this.framesPerPeak=s||20,this.framesSinceLastPeak=0,this.decayRate=.95,this.threshold=n||.35,this.cutoff=0,this.cutoffMult=1.5,this.energy=0,this.penergy=0,this.currentValue=0,this.isDetected=!1,this.f1=e||40,this.f2=t||2e4,this._onPeak=function(){}},p5.PeakDetect.prototype.update=function(e){var t=this.energy=e.getEnergy(this.f1,this.f2)/255;t>this.cutoff&&t>this.threshold&&0<t-this.penergy?(this._onPeak(),this.isDetected=!0,this.cutoff=t*this.cutoffMult,this.framesSinceLastPeak=0):(this.isDetected=!1,this.framesSinceLastPeak<=this.framesPerPeak?this.framesSinceLastPeak++:(this.cutoff*=this.decayRate,this.cutoff=Math.max(this.cutoff,this.threshold))),this.currentValue=t,this.penergy=t},p5.PeakDetect.prototype.onPeak=function(e,t){var n=this;n._onPeak=function(){e(n.energy,t)}}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(1);p5.Gain=function(){this.ac=t.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this.input.gain.value=.5,this.input.connect(this.output),t.soundArray.push(this)},p5.Gain.prototype.setInput=function(e){e.connect(this.input)},p5.Gain.prototype.connect=function(e){var t=e||p5.soundOut.input;this.output.connect(t.input?t.input:t)},p5.Gain.prototype.disconnect=function(){this.output&&this.output.disconnect()},p5.Gain.prototype.amp=function(e,n,s){n=n||0,s=s||0;var o=t.audiocontext.currentTime,i=this.output.gain.value;this.output.gain.cancelScheduledValues(o),this.output.gain.linearRampToValueAtTime(i,o+s),this.output.gain.linearRampToValueAtTime(e,o+s+n)},p5.Gain.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.output&&(this.output.disconnect(),delete this.output),this.input&&(this.input.disconnect(),delete this.input)}}.call(t,n,t,e))||(e.exports=s)},function(e,t,n){"use strict";var s;void 0===(s=function(){var t=n(4);function s(e){for(var n,s="number"==typeof e?e:50,o=new Float32Array(44100),i=Math.PI/180,t=0;t<44100;++t)n=2*t/44100-1,o[t]=(3+s)*n*20*i/(Math.PI+s*Math.abs(n));return o}p5.Distortion=function(e,n){if(t.call(this),void 0===e&&(e=.25),"number"!=typeof e)throw new Error("amount must be a number");if(void 0===n&&(n="2x"),"string"!=typeof n)throw new Error("oversample must be a String");var o=p5.prototype.map(e,0,1,0,2e3);this.waveShaperNode=this.ac.createWaveShaper(),this.amount=o,this.waveShaperNode.curve=s(o),this.waveShaperNode.oversample=n,this.input.connect(this.waveShaperNode),this.waveShaperNode.connect(this.wet)},p5.Distortion.prototype=Object.create(t.prototype),p5.Distortion.prototype.process=function(e,t,n){e.connect(this.input),this.set(t,n)},p5.Distortion.prototype.set=function(e,t){if(e){var n=p5.prototype.map(e,0,1,0,2e3);this.amount=n,this.waveShaperNode.curve=s(n)}t&&(this.waveShaperNode.oversample=t)},p5.Distortion.prototype.getAmount=function(){return this.amount},p5.Distortion.prototype.getOversample=function(){return this.waveShaperNode.oversample},p5.Distortion.prototype.dispose=function(){t.prototype.dispose.apply(this),this.waveShaperNode&&(this.waveShaperNode.disconnect(),this.waveShaperNode=null)}}.call(t,n,t,e))||(e.exports=s)}])