<!doctype html><html><head><title>Deploy Racket libraries to Planet 2 – jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_5823201688106629450.min.8c7d803d89ebdecf2416d468f4ecb981a3acf645154a7a336f2e5d0190ea8163.js integrity="sha256-jH2APYnr3s8kFtRo9Oy5gaOs9kUVSnozby5dAZDqgWM=" defer></script>
<script src=/jquery.fancybox_6181813213021922412.min.921ca906a32e718ab61ac0b4da24e0eaa6bdd41912654a33b44bd3fc2f0c2a4d.js integrity="sha256-khypBqMucYq2GsC02iTg6qa91BkSZUoztEvT/C8MKk0=" defer></script>
<script src=/katex_12008035502722260518.min.1c3dce03daaf56a7d2fe0d0ec49bf35256837226f835adaf52c09502ef9bc5d1.js integrity="sha256-HD3OA9qvVqfS/g0OxJvzUlaDcib4Na2vUsCVAu+bxdE=" defer></script>
<script src=/auto-render_2152414756166376840.min.45ae2f6b03d0c7b867df0a6cb7d43215ec78369998685a5748c5b12f502321f2.js integrity="sha256-Ra4vawPQx7hn3wpst9QyFex4NpmYaFpXSMWxL1AjIfI=" defer></script>
<script src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js integrity="sha256-XoC9heuuuVYHg01nd7/nAT0dFh8PAqMbhF5L12WJgxY=" defer></script>
<script src=/mermaid_12365941879912544862.min.973b5415b3fa1835d620c0e58236f859d5f80891f447e240cbbb9eb825251ff0.js integrity="sha256-lztUFbP6GDXWIMDlgjb4WdX4CJH0R+JAy7ueuCUlH/A=" defer></script>
<script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css integrity="sha256-4otdfZ2J76y19wisMMvXaxuaD4Ft/Z2pZjHR0Jy73XY="><link rel=stylesheet href=/css_4780214198035419921.min.246b6f8e7620eeb717bca5e7b121037906e5dfaa05805f427fcc5a09b6c99f5c.css integrity="sha256-JGtvjnYg7rcXvKXnsSEDeQbl36oFgF9Cf8xaCbbJn1w="><link rel=stylesheet href=/main.min.7a29c6e86e28b6da48d6e8a526f4fa597dfba1464ca3f975ea9e0fb8c00052b7.css integrity="sha256-einG6G4ottpI1uilJvT6WX37oUZMo/l16p4PuMAAUrc="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>Deploy Racket libraries to Planet 2</h1><div class=entry-meta><span class=entry-date>2013-09-20</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2013/09/19/smallest-consecutive-four-factor-composites/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/racket>Racket</a><a href=https://blog.jverkamp.com/2013/09/23/extending-racket-structs-to-bitfields/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2013/09/19/smallest-consecutive-four-factor-composites/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/scheme>Scheme</a><a href=https://blog.jverkamp.com/2013/09/23/extending-racket-structs-to-bitfields/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2013/09/19/smallest-consecutive-four-factor-composites/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2013/09/23/extending-racket-structs-to-bitfields/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2013/09/19/smallest-consecutive-four-factor-composites/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2013/09/23/extending-racket-structs-to-bitfields/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>Over the last few years, I&rsquo;ve managed to write a fair bit of Racket code. It&rsquo;s a lovely language and an even better ecosystem for writing quick/clean code (<code><a href="http://docs.racket-lang.org/search/index.html?q=batteries%20included!">batteries included!</a></code>
). Several times throughout that, I&rsquo;ve written code that I thought could be useful to others, including several libraries that I used to write my <a href=https://blog.jverkamp.com/2013/03/28/writing-a-roguelike-in-racket-day-0/>Racket Roguelike</a> and code that I&rsquo;ve used working with the C211 class at Indiana University. I&rsquo;ve always said that I should turn these into packages that others can use and&mldr; I&rsquo;ve finally figured it out.</p><p>Part of the reason that I finally figured it out is the introduction of the new and improved Planet 2 framework (currently in beta). Theoretically, it makes creating a library as simple as publishing the GitHub URL it&rsquo;s hosted at. In practice, it&rsquo;s a bit more complicated than that, but not much.</p><p>When I finally set about working on this, my first stop was <a href=http://lists.racket-lang.org/dev/archive/2012-November/010768.html>this message</a> from Jay McCarthy on the Racket mailing list. Essentially, it announced the beta release and has temporary documentation <a href=http://faculty.cs.byu.edu/~jay/tmp/20121108-pkgs/planet2/index.html>here</a> which got me started. Specifically, it said that I should be able to just put a package in GitHub and then install it on any machine with this command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>raco pkg install github://github.com/<span style=color:#f92672>{</span>username<span style=color:#f92672>}</span>/<span style=color:#f92672>{</span>package-name<span style=color:#f92672>}</span>/<span style=color:#f92672>{</span>branch<span style=color:#f92672>}</span>/
</span></span></code></pre></div><p>After that, there was a lot of chatter about fixing the idea that a package had to actually be a collection containing one or more packages. Since most of my code is one package per collection, I would love to see this work, but I haven&rsquo;t figured it out yet. That means that to work, each repository has to have a folder with the same name at the top level. So the general layout (for me at least) looks something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>github://jpverkamp/<span style=color:#f92672>{</span>package<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>+ info.rkt
</span></span><span style=display:flex><span>+ manual.scrbl 
</span></span><span style=display:flex><span>+ <span style=color:#f92672>{</span>package<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  + main.rkt
</span></span><span style=display:flex><span>  + other-file.rkt
</span></span><span style=display:flex><span>  + ...
</span></span></code></pre></div><p>Strictly speaking, the info and manual files aren&rsquo;t necessary, but they seem useful. Here&rsquo;s some documentation for creating an info.rkt file (<code><a href="http://docs.racket-lang.org/search/index.html?q=linky">linky</a></code>
) and here&rsquo;s some on creating documentation with Scribble (<code><a href="http://docs.racket-lang.org/search/index.html?q=linky">linky</a></code>
). I&rsquo;m really liking how Scribble works; I&rsquo;m actually thinking about reworking this blog to be statically generated using it (similar to Greg Hendershott&rsquo;s <a href=https://github.com/greghendershott/frog>frog project</a>). We&rsquo;ll see.</p><p>In any case, once all of those files are in place, it really is that easy. Push all of those files to GitHub and the command earlier works just fine. About the only problem I&rsquo;ve seen so far is that occasionally the timestamps get strange. That leads to Dr. Racket (but not the command line version) complaining about the timestamps on the .zo files and refusing to run. Wait until the match though and everything is golden.</p><p>That being said, I&rsquo;ve gone through and started to push out some libraries (along with updating my code to use them). It&rsquo;s certainly cleaner than using Git submodules (which Racket Roguelike originally did), especially if several projects use the same library. We&rsquo;ll see if it continues to be so easy.</p><p>So far, I&rsquo;ve converted / written these five libraries:</p><table><thead><tr><th>Library</th><th>Source</th><th>Docs</th><th>Description</th></tr></thead><tbody><tr><td>ascii‑canvas</td><td>src</td><td>docs</td><td>ascii-canvas simulates a code page 437 ASCII terminal display. It supports all 256 characters of codepage 437, arbitrary foreground colors, arbitrary background colors, and arbitrary terminal sizes.</td></tr><tr><td>bit‑struct</td><td>src</td><td>docs</td><td>Extend standard Racket structs for bitfields. It creates the normal accessors for structure along with defining three new methods: <code>build‑*</code>, <code>*‑>bytes</code>, <code>bytes‑>*</code></td></tr><tr><td>c211</td><td>src</td><td>docs</td><td>c211 provides a Racket version of the C211 libraries used in Wombat. So far, the following libraries are (mostly) complete: <code>c211/color</code>, <code>c211/image</code>, <code>c211/matrix</code></td></tr><tr><td>noise</td><td>src</td><td>docs</td><td>This package provides Racket versions of the [[wiki:Perlin noise</td></tr><tr><td>thing</td><td>src</td><td>docs</td><td>This package provides a simple prototype object-based system for Racket.</td></tr></tbody></table><p>To install any of these libraries (unless otherwise mentioned), it really is as easy as running this command:
<code>raco pkg install github://github.com/jpverkamp/**{library name}**/master</code></p><p>Alternatively, you can do it directly from DrRacket:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>&gt; (<span style=color:#a6e22e>require</span> pkg)
</span></span><span style=display:flex><span>&gt; (<span style=color:#a6e22e>install</span> <span style=color:#960050;background-color:#1e0010>&#34;</span>github://github<span style=color:#f92672>.</span>com/jpverkamp/<span style=color:#960050;background-color:#1e0010>{</span>library name<span style=color:#960050;background-color:#1e0010>}</span>/master
</span></span></code></pre></div><p>Either way, after the code runs, you can require the library directly:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>&gt; (<span style=color:#a6e22e>require</span> pkg)
</span></span><span style=display:flex><span>&gt; (<span style=color:#a6e22e>install</span> <span style=color:#e6db74>&#34;github://github.com/jpverkamp/noise/master&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>&gt; (<span style=color:#a6e22e>require</span> noise)
</span></span><span style=display:flex><span>&gt; (<span style=color:#a6e22e>perlin</span> <span style=color:#ae81ff>8.6</span> <span style=color:#ae81ff>7.5</span> <span style=color:#ae81ff>3.09</span>)
</span></span><span style=display:flex><span><span style=color:#ae81ff>0.49156684001488843</span>
</span></span></code></pre></div><p>Using the latter, I&rsquo;ve gotten a few errors, but it seems to work regardless. I prefer the raco version anyways, so I didn&rsquo;t pay particularly much attention to them.</p><p>At the moment, that same list above lives at <a href="http://blog.jverkamp.com/lists/racket-libraries/ ‎">Lists > Racket Libraries</a>, although I can&rsquo;t guarantee that I won&rsquo;t move it if/when I ever finish my blog redesign / shift to static pages that I&rsquo;ve been working on for a few months. We&rsquo;ll see. For now though it seems like a reasonable enough place though.</p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>