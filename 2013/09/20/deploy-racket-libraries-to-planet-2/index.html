<!DOCTYPE html>
<html onclick >
<head>
    <title>Deploy Racket libraries to Planet 2 – jverkamp.com</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8"><link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="//blog.jverkamp.com/feed/">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css" integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" />

<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel="stylesheet">

<link rel="stylesheet" href="/custom.css" defer />

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <div id="wrapper"><header id="page-header" role="banner">
    <h1><a href="/">JP's Blog</a></h1>

    <ul id="page-header-links">
        <li>
            <a href="https://github.com/jpverkamp">GitHub</a> *
            <a href="https://www.flickr.com/photos/jpverkamp">Flickr</a> *
            <a href="/resume">Resume</a>
        </li>
        <li>
            <form action="//www.google.com/search" method="get" onsubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search" _lpchecked="1">
                <div class="form-group">
                    <input name="q" type="hidden">
                    <input name="qfront" type="text" class="form-control" placeholder="Search">
                    <button type="submit" class="btn btn-default" value="Search">Search</button>
                </div>
            </form>
        </li>
    </ul>

    <nav id="header-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation"><li><a href="https://blog.jverkamp.com/reviews/">Reviews</a></li><li><a href="https://blog.jverkamp.com/photography/">Photography</a></li><li><a href="https://blog.jverkamp.com/programming/">Programming</a></li><li><a href="https://blog.jverkamp.com/maker/">Maker</a></li><li><a href="https://blog.jverkamp.com/writing/">Writing</a></li><li><a href="https://blog.jverkamp.com/research/">Research</a></li><li class="subscription" data-subscription="rss"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </nav>
</header>
<div id="page-content-wrapper">
            <div id="page-content"><article>
	<header>
		<h1 class="entry-title">Deploy Racket libraries to Planet 2</h1>

        <div class="entry-meta"><span class="entry-date">2013-09-20</span>
            </div>

        <div class="entry-taxonomies"><div class="entry-tags"><ul class="taxonomy-keys"><li>
            <a class="taxonomy-key" href="/programming/languages/">Languages</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2013/09/19/smallest-consecutive-four-factor-composites/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/racket">Racket</a><a href="https://blog.jverkamp.com/2013/09/23/extending-racket-structs-to-bitfields/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2013/09/19/smallest-consecutive-four-factor-composites/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/scheme">Scheme</a><a href="https://blog.jverkamp.com/2013/09/23/extending-racket-structs-to-bitfields/" class="next-link"></a></li></ul>
        </li><li><a class="taxonomy-key" href="/programming">programming</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2013/09/19/smallest-consecutive-four-factor-composites/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2013/09/23/extending-racket-structs-to-bitfields/" class="next-link">Next</a></ul>
        </li><li><a class="taxonomy-key" href="/">All Posts</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2013/09/19/smallest-consecutive-four-factor-composites/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2013/09/23/extending-racket-structs-to-bitfields/" class="next-link">Next</a></ul>
        </li></ul>
</div>
</div>
    </header>

	<div class="entry-content"><p>Over the last few years, I&rsquo;ve managed to write a fair bit of Racket code. It&rsquo;s a lovely language and an even better ecosystem for writing quick/clean code (<code><a href="http://docs.racket-lang.org/search/index.html?q=batteries%20included!">batteries included!</a></code>
). Several times throughout that, I&rsquo;ve written code that I thought could be useful to others, including several libraries that I used to write my <a href="https://blog.jverkamp.com/2013/03/28/writing-a-roguelike-in-racket-day-0/">Racket Roguelike</a> and code that I&rsquo;ve used working with the C211 class at Indiana University. I&rsquo;ve always said that I should turn these into packages that others can use and&hellip; I&rsquo;ve finally figured it out.</p>
<p>Part of the reason that I finally figured it out is the introduction of the new and improved Planet 2 framework (currently in beta). Theoretically, it makes creating a library as simple as publishing the GitHub URL it&rsquo;s hosted at. In practice, it&rsquo;s a bit more complicated than that, but not much.</p>
<p>When I finally set about working on this, my first stop was <a href="http://lists.racket-lang.org/dev/archive/2012-November/010768.html">this message</a> from Jay McCarthy on the Racket mailing list. Essentially, it announced the beta release and has temporary documentation <a href="http://faculty.cs.byu.edu/~jay/tmp/20121108-pkgs/planet2/index.html">here</a> which got me started. Specifically, it said that I should be able to just put a package in GitHub and then install it on any machine with this command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">raco pkg install github://github.com/<span style="color:#f92672">{</span>username<span style="color:#f92672">}</span>/<span style="color:#f92672">{</span>package-name<span style="color:#f92672">}</span>/<span style="color:#f92672">{</span>branch<span style="color:#f92672">}</span>/
</code></pre></div><p>After that, there was a lot of chatter about fixing the idea that a package had to actually be a collection containing one or more packages. Since most of my code is one package per collection, I would love to see this work, but I haven&rsquo;t figured it out yet. That means that to work, each repository has to have a folder with the same name at the top level. So the general layout (for me at least) looks something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">github://jpverkamp/<span style="color:#f92672">{</span>package<span style="color:#f92672">}</span>
+ info.rkt
+ manual.scrbl 
+ <span style="color:#f92672">{</span>package<span style="color:#f92672">}</span>
  + main.rkt
  + other-file.rkt
  + ...
</code></pre></div><p>Strictly speaking, the info and manual files aren&rsquo;t necessary, but they seem useful. Here&rsquo;s some documentation for creating an info.rkt file (<code><a href="http://docs.racket-lang.org/search/index.html?q=linky">linky</a></code>
) and here&rsquo;s some on creating documentation with Scribble (<code><a href="http://docs.racket-lang.org/search/index.html?q=linky">linky</a></code>
). I&rsquo;m really liking how Scribble works; I&rsquo;m actually thinking about reworking this blog to be statically generated using it (similar to Greg Hendershott&rsquo;s <a href="https://github.com/greghendershott/frog">frog project</a>). We&rsquo;ll see.</p>
<p>In any case, once all of those files are in place, it really is that easy. Push all of those files to GitHub and the command earlier works just fine. About the only problem I&rsquo;ve seen so far is that occasionally the timestamps get strange. That leads to Dr. Racket (but not the command line version) complaining about the timestamps on the .zo files and refusing to run. Wait until the match though and everything is golden.</p>
<p>That being said, I&rsquo;ve gone through and started to push out some libraries (along with updating my code to use them). It&rsquo;s certainly cleaner than using Git submodules (which Racket Roguelike originally did), especially if several projects use the same library. We&rsquo;ll see if it continues to be so easy.</p>
<p>So far, I&rsquo;ve converted / written these five libraries:</p>
<table>
<thead>
<tr>
<th>Library</th>
<th>Source</th>
<th>Docs</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ascii‑canvas</td>
<td>src</td>
<td>docs</td>
<td>ascii-canvas simulates a code page 437 ASCII terminal display. It supports all 256 characters of codepage 437, arbitrary foreground colors, arbitrary background colors, and arbitrary terminal sizes.</td>
</tr>
<tr>
<td>bit‑struct</td>
<td>src</td>
<td>docs</td>
<td>Extend standard Racket structs for bitfields. It creates the normal accessors for structure along with defining three new methods: <code>build‑*</code>, <code>*‑&gt;bytes</code>, <code>bytes‑&gt;*</code></td>
</tr>
<tr>
<td>c211</td>
<td>src</td>
<td>docs</td>
<td>c211 provides a Racket version of the C211 libraries used in Wombat. So far, the following libraries are (mostly) complete: <code>c211/color</code>, <code>c211/image</code>, <code>c211/matrix</code></td>
</tr>
<tr>
<td>noise</td>
<td>src</td>
<td>docs</td>
<td>This package provides Racket versions of the <a href="https://en.wikipedia.org/wiki/Perlin%20noise">Perlin</a> and <a href="https://en.wikipedia.org/wiki/Simplex%20noise">Simplex</a> noise generators.</td>
</tr>
<tr>
<td>thing</td>
<td>src</td>
<td>docs</td>
<td>This package provides a simple prototype object-based system for Racket.</td>
</tr>
</tbody>
</table>
<p>To install any of these libraries (unless otherwise mentioned), it really is as easy as running this command:
<code>raco pkg install github://github.com/jpverkamp/**{library name}**/master</code></p>
<p>Alternatively, you can do it directly from DrRacket:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">&gt; (<span style="color:#a6e22e">require</span> pkg)
&gt; (<span style="color:#a6e22e">install</span> <span style="color:#960050;background-color:#1e0010">&#34;</span>github://github<span style="color:#f92672">.</span>com/jpverkamp/<span style="color:#960050;background-color:#1e0010">{</span>library name<span style="color:#960050;background-color:#1e0010">}</span>/master
</code></pre></div><p>Either way, after the code runs, you can require the library directly:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">&gt; (<span style="color:#a6e22e">require</span> pkg)
&gt; (<span style="color:#a6e22e">install</span> <span style="color:#e6db74">&#34;github://github.com/jpverkamp/noise/master&#34;</span>)
<span style="color:#f92672">...</span>
&gt; (<span style="color:#a6e22e">require</span> noise)
&gt; (<span style="color:#a6e22e">perlin</span> <span style="color:#ae81ff">8.6</span> <span style="color:#ae81ff">7.5</span> <span style="color:#ae81ff">3.09</span>)
<span style="color:#ae81ff">0.49156684001488843</span>
</code></pre></div><p>Using the latter, I&rsquo;ve gotten a few errors, but it seems to work regardless. I prefer the raco version anyways, so I didn&rsquo;t pay particularly much attention to them.</p>
<p>At the moment, that same list above lives at <a href="http://blog.jverkamp.com/lists/racket-libraries/ ‎">Lists &gt; Racket Libraries</a>, although I can&rsquo;t guarantee that I won&rsquo;t move it if/when I ever finish my blog redesign / shift to static pages that I&rsquo;ve been working on for a few months. We&rsquo;ll see. For now though it seems like a reasonable enough place though.</p></div>
</article></div>
        </div><footer id="page-footer" role="contentinfo">
    <nav id="footer-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
            <li><a href="/archive-by-date/">All posts: By Date</a></li>
            <li><a href="/archive-by-tag/">All posts: By Tag</a></li>

            <li>
                <a href="/atom.xml">
                    RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li><li>
                <a href="/programming/atom.xml">
                    RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li></ul>
    </nav>

    <div id="page-footer-content">
        <div class="legal">
            <p>
                All posts unless otherwise mentioned are licensed under
                <a rel="license" href="//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
                    <img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png">
                </a>
            </p>

            <p>
                Any source code unless otherwise mentioned is licensed under the <a href="//directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
            </p>
        </div>
    </div>
</footer>
</div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js" integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js" integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin="anonymous"></script>

<script src="/custom.js"></script>
</body>
</html>
