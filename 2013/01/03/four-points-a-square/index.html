<!doctype html><html><head><title>Four points, a square? â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_5823201688106629450.min.30448892aa1f91e9c4cb5494e5c5e5abc13b7778de7786e5256cdc7d2424813a.js integrity="sha256-MESIkqofkenEy1SU5cXlq8E7d3jed4blJWzcfSQkgTo=" defer></script>
<script src=/jquery.fancybox_6181813213021922412.min.6ba037466db9f8843b66c38c32fe5a353344e7fd68ecda97efb63a84c881f828.js integrity="sha256-a6A3Rm25+IQ7ZsOMMv5aNTNE5/1o7NqX77Y6hMiB+Cg=" defer></script>
<script src=/katex_12008035502722260518.min.3cc3a080c0368785179e37b0cd0a71c6cf60c4fc5a8dce503f5a542ec0a25043.js integrity="sha256-PMOggMA2h4UXnjewzQpxxs9gxPxajc5QP1pULsCiUEM=" defer></script>
<script src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js integrity="sha256-XoC9heuuuVYHg01nd7/nAT0dFh8PAqMbhF5L12WJgxY=" defer></script>
<script src=/mermaid_12365941879912544862.min.e8f19283a632077085b9ad74aecad54abe84429c69789fd29ffa3a254d86abdd.js integrity="sha256-6PGSg6YyB3CFua10rsrVSr6EQpxpeJ/Sn/o6JU2Gq90=" defer></script>
<script src=/main.min.982c2d7bb434b4cf8b19c2cf38ef7e7f7162ddbed610e5bdddbb937001e26574.js integrity="sha256-mCwte7Q0tM+LGcLPOO9+f3Fi3b7WEOW93buTcAHiZXQ=" defer></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css integrity="sha256-4otdfZ2J76y19wisMMvXaxuaD4Ft/Z2pZjHR0Jy73XY="><link rel=stylesheet href=/css_4780214198035419921.min.246b6f8e7620eeb717bca5e7b121037906e5dfaa05805f427fcc5a09b6c99f5c.css integrity="sha256-JGtvjnYg7rcXvKXnsSEDeQbl36oFgF9Cf8xaCbbJn1w="><link rel=stylesheet href=/main.min.1a5fbab1ecff843d4ee6e936243fb06066197cd8c9357883d791333ce6001f3b.css integrity="sha256-Gl+6sez/hD1O5uk2JD+wYGYZfNjJNXiD15EzPOYAHzs="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=//www.google.com/search method=get onsubmit='(function(e){e.q.value="site:blog.jverkamp.com "+e.qfront.value})(this)' class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=hidden>
<input name=qfront type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article><header><h1 class=entry-title>Four points, a square?</h1><div class=entry-meta><span class=entry-date>2013-01-03</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2013/01/02/happy-new-year/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/racket>Racket</a><a href=https://blog.jverkamp.com/2013/01/16/translate-csv-to-html/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2013/01/02/happy-new-year/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/scheme>Scheme</a><a href=https://blog.jverkamp.com/2013/01/06/wombat-ide-its-alive-bug-fixes/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2013/01/02/happy-new-year/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/programming-praxis>Programming Praxis</a><a href=https://blog.jverkamp.com/2013/01/16/translate-csv-to-html/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a class=taxonomy-value href=/programming/topics/geometry>Geometry</a><a href=https://blog.jverkamp.com/2013/01/20/triangle-trilemma/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2013/01/02/happy-new-year/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/mathematics>Mathematics</a><a href=https://blog.jverkamp.com/2013/01/20/triangle-trilemma/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2013/01/02/happy-new-year/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2013/01/06/wombat-ide-its-alive-bug-fixes/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2013/01/03/confession-day-62/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2013/01/04/confession-day-63/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p><a title="Four Points Determine a Square" href=http://programmingpraxis.com/2013/01/02/four-points-determine-a-square/>Another post</a> from Programming Praxis. This one was originally intended for Friday but they posted it early, so I figured I would go ahead and do the same. The problem is actually deceptively straight forward:</p><p>Given four points, do they form a square?</p><p>My first thought was to directly calculate the angles between each trio of points. You should be able to determine which trios are ordered by finding the 90 degree angles and you could then check the distances. Before I got too far into my old geometry textbooks to figure out how to calculate those angles though, I realized that you&rsquo;d don&rsquo;t actually need the angles at all.</p><p>Instead, all you need is three distances. If you calculate the distances from one point to the other three, a square will always have two equal and short distances on the sides and another multiple of the square root of two across the diagonal. Better yet, only squares have those three distances. So just start at any one point and run these calculations:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; test if four points for a square</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>square?</span> pts)
</span></span><span style=display:flex><span>  <span style=color:#75715e>; calculate and sort the pairwise distances</span>
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>define </span>dists
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>sort</span>
</span></span><span style=display:flex><span>     (list (<span style=color:#a6e22e>dist</span> (car pts) (cadr pts))
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>dist</span> (car pts) (caddr pts))
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>dist</span> (car pts) (cadddr pts)))
</span></span><span style=display:flex><span>     &lt;))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>; two must be equal, those are edges</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>; the last is the diagonal and should be sqrt 2 * edge</span>
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>and </span>(= (car dists)
</span></span><span style=display:flex><span>          (cadr dists))
</span></span><span style=display:flex><span>       (= (caddr dists)
</span></span><span style=display:flex><span>          (* (sqrt <span style=color:#ae81ff>2</span>) (car dists)))))
</span></span></code></pre></div><p>This is assuming that you have <code>sqr</code> and <code>dist</code> defined as such:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; square a number</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>sqr</span> x) (* x x))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; standard distance function</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>dist</span> p1 p2)
</span></span><span style=display:flex><span>  (sqrt (+ (<span style=color:#a6e22e>sqr</span> (- (cadr p2) (cadr p1)))
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>sqr</span> (- (car p2) (car p1))))))
</span></span></code></pre></div><p>To test it out, we&rsquo;ll run all of the tests provided in the original post from Programming Praxis:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>&gt;(<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span>))) <span style=color:#75715e>; unit square</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>#t</span>
</span></span><span style=display:flex><span>&gt;(<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>3</span> <span style=color:#ae81ff>-1</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>-2</span>))) <span style=color:#75715e>; at an angle</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>#t</span>
</span></span><span style=display:flex><span>&gt;(<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span>))) <span style=color:#75715e>; re-ordered points</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>#t</span>
</span></span><span style=display:flex><span>&gt;(<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>2</span>) (<span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span>) (<span style=color:#ae81ff>3</span> <span style=color:#ae81ff>0</span>))) <span style=color:#75715e>; rectangle</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>#f</span>
</span></span><span style=display:flex><span>&gt;(<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span>) (<span style=color:#ae81ff>8</span> <span style=color:#ae81ff>4</span>) (<span style=color:#ae81ff>5</span> <span style=color:#ae81ff>0</span>))) <span style=color:#75715e>; rhombus</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>#f</span>
</span></span><span style=display:flex><span>&gt;(<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>))) <span style=color:#75715e>; not a polygon</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>#f</span>
</span></span><span style=display:flex><span>&gt;(<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span>))) <span style=color:#75715e>; not a polygon</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>#f</span>
</span></span></code></pre></div><p>Looks good to go. It&rsquo;s interesting how something like that can actually be pretty simple. Just three distance calculations and you&rsquo;re golden.</p><p>Except, it turns out that it&rsquo;s not quite so simple. This actually ended up being the same idea as the <a href=http://programmingpraxis.com/2013/01/02/four-points-determine-a-square/2/ title="Solution for Four Points Determine a Square">original solution</a> provided at Programming Praxis, but as another commenter pointed out (<a href=http://bonsaicode.wordpress.com/2013/01/02/programming-praxis-four-points-determine-a-square/ title="Programming Praxis - Four Points Determine a Square">their solution in Haskell</a>), there&rsquo;s one test case that this method fails on:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>&gt; (<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>-1</span> <span style=color:#ae81ff>-1</span>))) <span style=color:#75715e>; designed to fail</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>#f</span>
</span></span></code></pre></div><p>In this case, the distances are all correct (you have two sides and a square root of 2 multiple for the diagonal) but unfortunately the diagonal goes the wrong direction. So how do you fix that case?</p><p>Well, you should just be able to test the sides from the far point. That requires figuring out which distance that belonged to though (which isn&rsquo;t horrible), but I wanted something a bit more amusing. So what I&rsquo;ve done here is extend the function out to calculate all 16 pairwise distances between the points (including self comparisons):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; calculate all pairwise distances</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>dists
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>sort</span>
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>for*/list</span> ([a (<span style=color:#a6e22e>in-list</span> pts)]
</span></span><span style=display:flex><span>               [b (<span style=color:#a6e22e>in-list</span> pts)])
</span></span><span style=display:flex><span>     (<span style=color:#a6e22e>dist</span> a b))
</span></span><span style=display:flex><span>   &lt;))
</span></span></code></pre></div><p>What we should get is four zeros (for the self comparisons), eight copies of the sides (because order isn&rsquo;t preserved we have both the side <em>ab</em> and <em>ba</em> for each side), and four copies of the diagonal at a square root of two multiple. Using <code>take</code> and <code>drop</code> on a sorted list to pull out those sections and making sure they are equal (it&rsquo;s times like these that I remember and am glad that <code>=</code> takes two <em>or more</em> arguments), and everything should work out nicely:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; we should have:</span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>and</span>
</span></span><span style=display:flex><span> <span style=color:#75715e>; 4x zero for self matches</span>
</span></span><span style=display:flex><span> (apply = (cons <span style=color:#ae81ff>0</span> (<span style=color:#a6e22e>take</span> dists <span style=color:#ae81ff>4</span>)))
</span></span><span style=display:flex><span> <span style=color:#75715e>; 8x identical distances for the sides</span>
</span></span><span style=display:flex><span> (apply = (<span style=color:#a6e22e>take</span> (<span style=color:#a6e22e>drop</span> dists <span style=color:#ae81ff>4</span>) <span style=color:#ae81ff>8</span>))
</span></span><span style=display:flex><span> <span style=color:#75715e>; 4x sqrt(2) * side for the diagonals</span>
</span></span><span style=display:flex><span> (apply = (cons (* (sqrt <span style=color:#ae81ff>2</span>) (car (<span style=color:#a6e22e>drop</span> dists <span style=color:#ae81ff>4</span>)))
</span></span><span style=display:flex><span>                (<span style=color:#a6e22e>drop</span> dists <span style=color:#ae81ff>12</span>))))
</span></span></code></pre></div><p>It&rsquo;s a bit strange and definitely not the most efficient (<code>take</code> and <code>drop</code> are duplicating work and I believe that <code>apply</code> isn&rsquo;t necessarily the most efficient thing, although I could be wrong), but for the number of tests we&rsquo;re doing, it&rsquo;s still essentially instantanous.</p><p>This time, I also added a series of <code><a href="http://docs.racket-lang.org/search/index.html?q=RackUnit">RackUnit</a></code>
tests to make sure everything works:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span>(<span style=color:#a6e22e>check-true</span> (<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span>))) <span style=color:#e6db74>&#34;unit square&#34;</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>check-true</span> (<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>3</span> <span style=color:#ae81ff>-1</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>-2</span>))) <span style=color:#e6db74>&#34;at an angle&#34;</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>check-true</span> (<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span>))) <span style=color:#e6db74>&#34;re-ordered points&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>check-false</span> (<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>2</span>) (<span style=color:#ae81ff>3</span> <span style=color:#ae81ff>2</span>) (<span style=color:#ae81ff>3</span> <span style=color:#ae81ff>0</span>))) <span style=color:#e6db74>&#34;rectangle&#34;</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>check-false</span> (<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span>) (<span style=color:#ae81ff>8</span> <span style=color:#ae81ff>4</span>) (<span style=color:#ae81ff>5</span> <span style=color:#ae81ff>0</span>))) <span style=color:#e6db74>&#34;rhombus&#34;</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>check-false</span> (<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>))) <span style=color:#e6db74>&#34;not a polygon&#34;</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>check-false</span> (<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span>))) <span style=color:#e6db74>&#34;not a polygon&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>check-false</span> (<span style=color:#a6e22e>square?</span> <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span>) (<span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span>) (<span style=color:#ae81ff>-1</span> <span style=color:#ae81ff>-1</span>))) <span style=color:#e6db74>&#34;failed original test&#34;</span>)
</span></span></code></pre></div><p>Running it, there are no errors, so everything appears to be good. Hopefully there isn&rsquo;t another sneaky sort of error going on, but for the moment I doubt it.</p><p>As mentioned, this is the sort of thing that you may see on those puzzle sort of interview questions. While I don&rsquo;t personally think there&rsquo;s much worth in that sort of question (more often than not, you&rsquo;re testing if someone has heard the question before), they&rsquo;re still often fun to work out the first time. I&rsquo;d be particularly interested to see how an interviewer would deal with the first (incorrect) solution and how the interviewee could deal with being told that there&rsquo;s a corner case that they missed but not which one.</p><p>If you&rsquo;d like to see the entire source code for this post, you can do so here:</p><ul><li><a title="Four points a square source on GitHub" href=https://github.com/jpverkamp/small-projects/blob/master/blog/four-points-a-square.rkt>four-points-a-square.rkt</a></li></ul></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>