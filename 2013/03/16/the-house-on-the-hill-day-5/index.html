<!DOCTYPE html>
<html onclick >
<head>
    <title>The House on the Hill - Day 5 â€“ jverkamp.com</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8"><link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="//blog.jverkamp.com/feed/">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css" integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" />

<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel="stylesheet">

<link rel="stylesheet" href="/custom.css" defer />

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <div id="wrapper"><header id="page-header" role="banner">
    <h1><a href="/">JP's Blog</a></h1>

    <ul id="page-header-links">
        <li>
            <a href="https://github.com/jpverkamp">GitHub</a> *
            <a href="https://www.flickr.com/photos/jpverkamp">Flickr</a> *
            <a href="/resume">Resume</a>
        </li>
        <li>
            <form action="//www.google.com/search" method="get" onsubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search" _lpchecked="1">
                <div class="form-group">
                    <input name="q" type="hidden">
                    <input name="qfront" type="text" class="form-control" placeholder="Search">
                    <button type="submit" class="btn btn-default" value="Search">Search</button>
                </div>
            </form>
        </li>
    </ul>

    <nav id="header-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation"><li><a href="https://blog.jverkamp.com/programming/">Programming</a></li><li><a href="https://blog.jverkamp.com/photography/">Photography</a></li><li><a href="https://blog.jverkamp.com/reviews/">Reviews</a></li><li><a href="https://blog.jverkamp.com/writing/">Writing</a></li><li><a href="https://blog.jverkamp.com/research/">Research</a></li><li class="subscription" data-subscription="rss"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </nav>
</header>
<div id="page-content-wrapper">
            <div id="page-content"><article>
	<header>
		<h1 class="entry-title">The House on the Hill - Day 5</h1>

        <div class="entry-meta"><span class="entry-date">2013-03-16</span>
            </div>

        <div class="entry-taxonomies"><div class="entry-tags"><ul class="taxonomy-keys"><li>
            <a class="taxonomy-key" href="/programming/languages/">Languages</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2013/03/15/the-house-on-the-hill-day-4/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/racket">Racket</a><a href="https://blog.jverkamp.com/2013/03/17/the-house-on-the-hill-postmortem/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2013/03/15/the-house-on-the-hill-day-4/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/scheme">Scheme</a><a href="https://blog.jverkamp.com/2013/03/17/the-house-on-the-hill-postmortem/" class="next-link"></a></li></ul>
        </li><li>
            <a class="taxonomy-key" href="/programming/sources/">Sources</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2013/03/15/the-house-on-the-hill-day-4/" class="previous-link"></a><a class="taxonomy-value" href="/programming/sources/one-game-a-month">One Game a Month</a><a href="https://blog.jverkamp.com/2013/03/17/the-house-on-the-hill-postmortem/" class="next-link"></a></li></ul>
        </li><li>
            <a class="taxonomy-key" href="/programming/topics/">Topics</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2013/03/15/the-house-on-the-hill-day-4/" class="previous-link"></a><a class="taxonomy-value" href="/programming/topics/games">Games</a><a href="https://blog.jverkamp.com/2013/03/17/the-house-on-the-hill-postmortem/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2013/03/15/the-house-on-the-hill-day-4/" class="previous-link"></a><a class="taxonomy-value" href="/programming/topics/roguelikes">Roguelikes</a><a href="https://blog.jverkamp.com/2013/03/17/the-house-on-the-hill-postmortem/" class="next-link"></a></li></ul>
        </li><li><a class="taxonomy-key" href="/programming">programming</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2013/03/15/the-house-on-the-hill-day-4/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2013/03/17/the-house-on-the-hill-postmortem/" class="next-link">Next</a></ul>
        </li><li><a class="taxonomy-key" href="/">All Posts</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2013/03/15/the-house-on-the-hill-day-4/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2013/03/16/march-madness-nanowrimo-halfway-there/" class="next-link">Next</a></ul>
        </li></ul>
</div>
</div>
    </header>

	<div class="entry-content"><p>Not much in the way of screenshots today, but I did manage to add quite a lot of framework for content (which I&rsquo;m going to spend tomorrow fleshing out). Now, the player has four stats (Might, Vigor, Intellect, and Sanity; I don&rsquo;t think those were the original stats but I don&rsquo;t have a copy at the moment to check). Each of them starts at a random value from 2 to 5. If any reaches 0, game over.</p>

<p>Also, to actually make use of said stats, there are two new kinds of definitions that you can stick in the data folder to automatically be used by the game: events and items.</p>

<p>Events are automatically triggered when you enter a room for the first time. Eventually, this will include all manner of spooky happenings, but at the moment there are only two: Bite and Helpful Item. Here&rsquo;s the definition for Bite:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(define-event
  [name <span style="color:#e6db74">&#34;Bite&#34;</span>]
  [text <span style="color:#e6db74">&#34;A growl, the scent of darkness.
</span><span style="color:#e6db74">Pain. Darkness. Gone.&#34;</span>]
  [effect
   (<span style="color:#66d9ef">lambda </span>(player)
     (<span style="color:#66d9ef">define </span>player-roll (roll (send player get-stat <span style="color:#e6db74">&#39;might</span>)))
     (<span style="color:#66d9ef">define </span>bite-roll (roll <span style="color:#ae81ff">4</span>))
     (cond
       [(<span style="color:#66d9ef">and </span>(&lt; player-roll bite-roll) (zero? (random <span style="color:#ae81ff">2</span>)))
        (send player say <span style="color:#e6db74">&#34;The bite tears at your flesh. You feel weaker.&#34;</span>)
        (send player stat-= <span style="color:#e6db74">&#39;might</span> <span style="color:#ae81ff">1</span>)]
       [(&lt; player-roll bite-roll)
        (send player say <span style="color:#e6db74">&#34;The bite stings. Is that normal?\nSuddenly you feel tired.&#34;</span>)
        (send player stat-= <span style="color:#e6db74">&#39;vigor</span> <span style="color:#ae81ff">1</span>)]
       [else
        (send player say <span style="color:#e6db74">&#34;The bite hardly seems worth mentioning.\nYou shrug it off.&#34;</span>)]))])</code></pre></div>
<p>The name and text will be displayed to the player (at the moment in a message dialog; tomorrow I&rsquo;m going to figure out how to display these as an overlay in the ASCII instead). Then the effect will take place. In this instance, the player will roll against some monster in the darkness. If the player wins, nothing happens. If they lose, they&rsquo;ll take a hit to either Might or Vigor.</p>

<p>Helpful Item, as one might suspect, generates a random item and gives it to the player. Right now, there&rsquo;s only one item: the Book.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(define-item
  [name <span style="color:#e6db74">&#34;Book&#34;</span>]
  [text <span style="color:#e6db74">&#34;A diary or lab notes? 
</span><span style="color:#e6db74">Ancient script or modern ravings?&#34;</span>]
  [on-gain
   (<span style="color:#66d9ef">lambda </span>(player)
     (send player stat+= <span style="color:#e6db74">&#39;intellect</span> <span style="color:#ae81ff">2</span>))]
  [on-loss
   (<span style="color:#66d9ef">lambda </span>(player)
     (send player stat-= <span style="color:#e6db74">&#39;intellect</span> <span style="color:#ae81ff">2</span>))])</code></pre></div>
<p>Each item has an event for when you gain it and when you lose it right now, but I&rsquo;ll probably add ones for <code>on-attack</code> and <code>on-defend</code> to make things like weapons and armor make more sense. I&rsquo;m just not sure how that&rsquo;s going to work out yet.</p>

<p>That&rsquo;s all I have. We&rsquo;re running right up against the deadline, but it&rsquo;s definitely a game at this point&ndash;albeit not really a very fun one&ndash;so I think I&rsquo;ll call that a win. Doesn&rsquo;t mean I won&rsquo;t put a few more hours into it this weekend.</p></div>
<div class="entry-comments">
    <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = "jverkamp";
            var disqus_title = "The House on the Hill - Day 5";
            var disqus_url = "https:\/\/blog.jverkamp.com\/2013\/03\/16\/the-house-on-the-hill-day-5\/";

             
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div></article></div>
        </div><footer id="page-footer" role="contentinfo">
    <nav id="footer-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
            <li><a href="/archive-by-date/">All posts: By Date</a></li>
            <li><a href="/archive-by-tag/">All posts: By Tag</a></li>

            <li>
                <a href="/atom.xml">
                    RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li><li>
                <a href="/programming/atom.xml">
                    RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li></ul>
    </nav>

    <div id="page-footer-content">
        <div class="legal">
            <p>
                All posts unless otherwise mentioned are licensed under
                <a rel="license" href="//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
                    <img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png">
                </a>
            </p>

            <p>
                Any source code unless otherwise mentioned is licensed under the <a href="//directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
            </p>
        </div>
    </div>
</footer>
</div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js" integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js" integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin="anonymous"></script>

<script type="text/javascript" src="/custom.js" defer></script>
</body>
</html>
