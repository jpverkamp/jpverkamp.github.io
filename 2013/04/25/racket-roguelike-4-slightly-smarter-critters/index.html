<!doctype html><html><head><title>Racket Roguelike 4: Slightly smarter critters! â€“ jverkamp.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=alternate type=application/atom+xml title="jverkamp.com (Atom 2.0)" href=//blog.jverkamp.com/feed/><script src=/jquery_5823201688106629450.min.8c7d803d89ebdecf2416d468f4ecb981a3acf645154a7a336f2e5d0190ea8163.js integrity="sha256-jH2APYnr3s8kFtRo9Oy5gaOs9kUVSnozby5dAZDqgWM=" defer></script>
<script src=/jquery.fancybox_6181813213021922412.min.921ca906a32e718ab61ac0b4da24e0eaa6bdd41912654a33b44bd3fc2f0c2a4d.js integrity="sha256-khypBqMucYq2GsC02iTg6qa91BkSZUoztEvT/C8MKk0=" defer></script>
<script src=/katex_12008035502722260518.min.1c3dce03daaf56a7d2fe0d0ec49bf35256837226f835adaf52c09502ef9bc5d1.js integrity="sha256-HD3OA9qvVqfS/g0OxJvzUlaDcib4Na2vUsCVAu+bxdE=" defer></script>
<script src=/auto-render_2152414756166376840.min.45ae2f6b03d0c7b867df0a6cb7d43215ec78369998685a5748c5b12f502321f2.js integrity="sha256-Ra4vawPQx7hn3wpst9QyFex4NpmYaFpXSMWxL1AjIfI=" defer></script>
<script src=/bigfoot_8444447145154709333.min.5e80bd85ebaeb95607834d6777bfe7013d1d161f0f02a31b845e4bd765898316.js integrity="sha256-XoC9heuuuVYHg01nd7/nAT0dFh8PAqMbhF5L12WJgxY=" defer></script>
<script src=/mermaid_12365941879912544862.min.973b5415b3fa1835d620c0e58236f859d5f80891f447e240cbbb9eb825251ff0.js integrity="sha256-lztUFbP6GDXWIMDlgjb4WdX4CJH0R+JAy7ueuCUlH/A=" defer></script>
<script src=/main.min.d60298c89fc4f1e938aceb45c60926efee8b03efc8b50683082e669a100da643.js integrity="sha256-1gKYyJ/E8ek4rOtFxgkm7+6LA+/ItQaDCC5mmhANpkM=" defer></script>
<link rel=stylesheet href=/katex_14163593549783030822.min.16bacd59fb224ae6c97a749ab0ac1e708cb5e0c9ce5c9a08d7fd73dc8e69429f.css integrity="sha256-FrrNWfsiSubJenSasKwecIy14MnOXJoI1/1z3I5pQp8="><link rel=stylesheet href=/bigfoot-default_16482899066638414220.min.f15d4faa4519addb976f9d69b42bd9eb491b3596b6b2eda83aa3e9e1f48b8f14.css integrity="sha256-8V1PqkUZrduXb51ptCvZ60kbNZa2su2oOqPp4fSLjxQ="><link rel=stylesheet href=/jquery.fancybox_16222217791602823071.min.e28b5d7d9d89efacb5f708ac30cbd76b1b9a0f816dfd9da96631d1d09cbbdd76.css integrity="sha256-4otdfZ2J76y19wisMMvXaxuaD4Ft/Z2pZjHR0Jy73XY="><link rel=stylesheet href=/css_4780214198035419921.min.246b6f8e7620eeb717bca5e7b121037906e5dfaa05805f427fcc5a09b6c99f5c.css integrity="sha256-JGtvjnYg7rcXvKXnsSEDeQbl36oFgF9Cf8xaCbbJn1w="><link rel=stylesheet href=/main.min.d99288811f82c16d031e4f6c01e50e18aeccbb9968db7c625a21660aef059ef5.css integrity="sha256-2ZKIgR+CwW0DHk9sAeUOGK7Mu5lo23xiWiFmCu8FnvU="></head><body><div id=wrapper><header id=page-header role=banner><h1><a href=/>JP's Blog</a></h1><ul id=page-header-links><li><a href=https://github.com/jpverkamp>GitHub</a> *
<a href=https://www.flickr.com/photos/jpverkamp>Flickr</a> *
<a href=/resume>Resume</a></li><li><form action=/search/ method=get class="navbar-form navbar-right" role=search _lpchecked=1><div class=form-group><input name=q type=text class=form-control placeholder=Search>
<button type=submit class="btn btn-default" value=Search>Search</button></div></form></li></ul><nav id=header-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=https://blog.jverkamp.com/programming/>Programming</a></li><li><a href=https://blog.jverkamp.com/reviews/>Reviews</a></li><li><a href=https://blog.jverkamp.com/photography/>Photography</a></li><li><a href=https://blog.jverkamp.com/maker/>Maker</a></li><li><a href=https://blog.jverkamp.com/writing/>Writing</a></li><li><a href=https://blog.jverkamp.com/research/>Research</a></li><li><a href=https://blog.jverkamp.com/search/>Search</a></li><li class=subscription data-subscription=rss><a href=/atom.xml rel=subscribe-rss title="subscribe via RSS">RSS</a></li></ul></nav></header><div id=page-content-wrapper><div id=page-content><article data-pagefind-body><header><h1 class=entry-title data-pagefind-meta=title>Racket Roguelike 4: Slightly smarter critters!</h1><div class=entry-meta><span class=entry-date>2013-04-25</span></div><div class=entry-taxonomies><div class=entry-tags><ul class=taxonomy-keys><li><a class=taxonomy-key href=/programming/languages/>Languages</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2013/04/23/user-space-continuation-based-thread-pool/ class=previous-link></a><a class=taxonomy-value href=/programming/languages/racket>Racket</a><a href=https://blog.jverkamp.com/2013/05/02/racket-roguelike-5-armors-and-weapons-and-potions-oh-my/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/sources/>Sources</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2013/04/18/racket-roguelike-3-rats-rats-everywhere/ class=previous-link></a><a class=taxonomy-value href=/programming/sources/7drl>7DRL</a><a href=https://blog.jverkamp.com/2013/05/02/racket-roguelike-5-armors-and-weapons-and-potions-oh-my/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming/topics/>Topics</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2013/04/18/racket-roguelike-3-rats-rats-everywhere/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/games>Games</a><a href=https://blog.jverkamp.com/2013/04/29/vtanks-for-ludum-dare-26/ class=next-link></a></li><li><a href=https://blog.jverkamp.com/2013/04/18/racket-roguelike-3-rats-rats-everywhere/ class=previous-link></a><a class=taxonomy-value href=/programming/topics/roguelikes>Roguelikes</a><a href=https://blog.jverkamp.com/2013/05/02/racket-roguelike-5-armors-and-weapons-and-potions-oh-my/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/series/>Series</a><ul class=taxonomy-values><li><a href=https://blog.jverkamp.com/2013/04/18/racket-roguelike-3-rats-rats-everywhere/ class=previous-link></a><a class=taxonomy-value href=/series/racket-roguelike>Racket Roguelike</a><a href=https://blog.jverkamp.com/2013/05/02/racket-roguelike-5-armors-and-weapons-and-potions-oh-my/ class=next-link></a></li></ul></li><li><a class=taxonomy-key href=/programming>programming</a><ul><li><a href=https://blog.jverkamp.com/2013/04/23/user-space-continuation-based-thread-pool/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2013/04/29/vtanks-for-ludum-dare-26/ class=next-link>Next</a></ul></li><li><a class=taxonomy-key href=/>All Posts</a><ul><li><a href=https://blog.jverkamp.com/2013/04/25/oblivion/ class=previous-link>Prev</a>
<a href=https://blog.jverkamp.com/2013/04/29/vtanks-for-ludum-dare-26/ class=next-link>Next</a></ul></li></ul></div></div></header><div class=entry-content><p>A very minimal update today, since the many, many early May conference deadlines are fast approaching. But despite there only being a few lines of changes, already we are starting to get a bit more character to the game. Essentially, today we want to make the enemies smarter and add a bit more <em>explosive</em> sort of attacks.</p><p>If you&rsquo;d like to start at the beginning, click here: <a href=https://blog.jverkamp.com/2013/04/04/racket-roguelike-1-a-gui-screens-i/o-and-you/>Racket Roguelike 1: A GUI, screens, I/O, and you!</a></p><p>First, we want a smarter type of enemy. Since we already have a unit hierarchy, all we have to do is extend wandering enemy. What we want is something that can figure out which direction the player is in and move towards them.</p><p>To do that, our points need to be a little smarter:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; point.rkt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; Calculate the distance between two points</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>distance</span> p1 p2)
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>sqr</span> n) (* n n))
</span></span><span style=display:flex><span>  (sqrt (+ (<span style=color:#a6e22e>sqr</span> (- (<span style=color:#a6e22e>pt-x</span> p2) (<span style=color:#a6e22e>pt-x</span> p1)))
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>sqr</span> (- (<span style=color:#a6e22e>pt-y</span> p2) (<span style=color:#a6e22e>pt-y</span> p1))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; Convert a point to a unit point (distance is one for origin)</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>(<span style=color:#a6e22e>unit</span> p)
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>define </span>d (<span style=color:#a6e22e>distance</span> <span style=color:#ae81ff>0</span> p))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>pt</span> (/ (<span style=color:#a6e22e>pt-x</span> p) d)
</span></span><span style=display:flex><span>      (/ (<span style=color:#a6e22e>pt-y</span> p) d)))
</span></span></code></pre></div><p>Essentially, we can use <code>unit</code> to take a vector (such as the one between an enemy and a player) and normalize it to a single unit. We can then round that to get a direction for movement from any of the eight directions. Something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; entities.rkt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; A seeking enemy runs towards the player (heedless of walls) 50% of the time</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; The other 50% of the time they are identical to a wandering enemy</span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-thing</span> seeking-enemy wandering-enemy
</span></span><span style=display:flex><span>  [(<span style=color:#a6e22e>act</span> me world)
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>cond</span>
</span></span><span style=display:flex><span>     <span style=color:#75715e>; 50/50 of a seeking move</span>
</span></span><span style=display:flex><span>     [(= <span style=color:#ae81ff>0</span> (<span style=color:#a6e22e>random</span> <span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>define </span>player-pt (<span style=color:#a6e22e>thing-get</span> (<span style=color:#a6e22e>send</span> world get-player) <span style=color:#e6db74>&#39;location</span>))
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>define </span>me-pt (<span style=color:#a6e22e>thing-get</span> me <span style=color:#e6db74>&#39;location</span>))
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>define </span>dir (<span style=color:#a6e22e>unit</span> (- player-pt me-pt)))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>send</span> world try-move
</span></span><span style=display:flex><span>            me
</span></span><span style=display:flex><span>            (+ me-pt
</span></span><span style=display:flex><span>               (inexact-&gt;exact (round (<span style=color:#a6e22e>pt-x</span> dir)))
</span></span><span style=display:flex><span>               (inexact-&gt;exact (round (<span style=color:#a6e22e>pt-y</span> dir)))))]
</span></span><span style=display:flex><span>     <span style=color:#75715e>; Otherwise, wander</span>
</span></span><span style=display:flex><span>     [else
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>thing-call</span> wandering-enemy <span style=color:#e6db74>&#39;act</span> me world)])])
</span></span></code></pre></div><p>I could make it so that the enemy always seeks the player, but these seekers are pretty dumb. Given a single tile of walk on the shortest path between them, it will be stuck forever. But one thing that I&rsquo;ve found with any sort of movement code is that a touch of pure randomness does a world of good. It tends to make things look a good deal smarter than they actually are. ðŸ˜„</p><p>On the flip side, we can use almost the exact same code to implement a <code>fleeing-enemy</code> just in the last part of the first <code>cond</code> block, subtract the direction from <code>me-pt</code> instead of adding it.</p><p>So how do these work in practice? Well, lets make the rats scared and a new class of enemies (goblins) that will run towards the player:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; entities.rkt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; A list of random enemies that we can generate</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>define </span>random-enemies
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>vector</span>
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>make-thing</span> fleeing-enemy
</span></span><span style=display:flex><span>     [name <span style=color:#e6db74>&#34;rat&#34;</span>]
</span></span><span style=display:flex><span>     [character <span style=color:#e6db74>#\r</span>])
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>make-thing</span> seeking-enemy
</span></span><span style=display:flex><span>     [name <span style=color:#e6db74>&#34;goblin&#34;</span>]
</span></span><span style=display:flex><span>     [character <span style=color:#e6db74>#\g</span>]
</span></span><span style=display:flex><span>     [color <span style=color:#e6db74>&#34;orange&#34;</span>]
</span></span><span style=display:flex><span>     [attack <span style=color:#ae81ff>15</span>]
</span></span><span style=display:flex><span>     [defense <span style=color:#ae81ff>5</span>])))
</span></span></code></pre></div><p>Sounds about time for a few screenshots.</p><p>First, here we have the original state of the game, with a few randomly generated rats and goblins all around.</p><figure><img src=/embeds/2013/1-initial-state.png></figure><p>Give it a few ticks and the goblins are already coming for us. How long do you think it will take them to cause some trouble?</p><figure><img src=/embeds/2013/2-closer.png></figure><p>Not so long&mldr; This is exactly the behavior that I was talking about. There&rsquo;s nothing in the code base right now to get the goblins to flank the player, but nevertheless they went right to it.</p><figure><img src=/embeds/2013/3-ganging-up.png></figure><p>And now, no more goblins. ðŸ˜„ They&rsquo;re not so tough.</p><figure><img src=/embeds/2013/4-no-more-goblins.png></figure><p>Although I guess I am down to 60% of my original health&mldr;</p><p>So what about other enemies? Well, I did mention more interesting attacks. What would it take to make an enemy that explodes?</p><p>To really make it work, we need one more method in the <code>world%</code> class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; world.rkt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; Get a list of all entities by location</span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define/public</span> (<span style=color:#a6e22e>get-entities</span> p)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>for/list</span> ([entity (cons player npcs)]
</span></span><span style=display:flex><span>             <span style=color:#f92672>#</span>:when (= p (<span style=color:#a6e22e>thing-get</span> entity <span style=color:#e6db74>&#39;location</span>)))
</span></span><span style=display:flex><span>    entity))
</span></span></code></pre></div><p>With that, we can write an <code>act</code> method which will calculate the distance to the player. If it&rsquo;s less than 1.5 (so technically we want <span class=latex-inline>sqrt(2)</span>
, but 1.5 is close enough), explode. Anything within 1 tile will be attacked. Something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; entities.rkt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>; An exploding enemy blows up whenever the player gets close to them</span>
</span></span><span style=display:flex><span><span style=color:#75715e>; Otherwise, they cannot move or attack (by default)</span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-thing</span> exploding-enemy enemy
</span></span><span style=display:flex><span>  [(<span style=color:#a6e22e>act</span> me world)
</span></span><span style=display:flex><span>   (<span style=color:#66d9ef>define </span>distance-to-player
</span></span><span style=display:flex><span>     (<span style=color:#a6e22e>distance</span> (<span style=color:#a6e22e>thing-get</span> (<span style=color:#a6e22e>send</span> world get-player) <span style=color:#e6db74>&#39;location</span>)
</span></span><span style=display:flex><span>               (<span style=color:#a6e22e>thing-get</span> me <span style=color:#e6db74>&#39;location</span>)))
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>when</span> (&lt;= distance-to-player <span style=color:#ae81ff>1.5</span>)
</span></span><span style=display:flex><span>     <span style=color:#75715e>; Log message</span>
</span></span><span style=display:flex><span>     (<span style=color:#a6e22e>send</span> world log (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;~a explodes violently&#34;</span> (<span style=color:#a6e22e>thing-get</span> me <span style=color:#e6db74>&#39;name</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#75715e>; Damage neighbors</span>
</span></span><span style=display:flex><span>     (<span style=color:#a6e22e>for*</span> ([xd (<span style=color:#a6e22e>in-range</span> <span style=color:#ae81ff>-1</span> <span style=color:#ae81ff>2</span>)]
</span></span><span style=display:flex><span>            [yd (<span style=color:#a6e22e>in-range</span> <span style=color:#ae81ff>-1</span> <span style=color:#ae81ff>2</span>)])
</span></span><span style=display:flex><span>       (<span style=color:#a6e22e>for</span> ([other (<span style=color:#a6e22e>send</span> world get-entities
</span></span><span style=display:flex><span>                           (+ (<span style=color:#a6e22e>thing-get</span> me <span style=color:#e6db74>&#39;location</span>)
</span></span><span style=display:flex><span>                              (<span style=color:#a6e22e>pt</span> xd yd)))])
</span></span><span style=display:flex><span>         (<span style=color:#a6e22e>unless</span> (eqv? me other)
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>send</span> world attack me other))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#75715e>; Destroy self</span>
</span></span><span style=display:flex><span>     (<span style=color:#a6e22e>thing-set!</span> me <span style=color:#e6db74>&#39;health</span> <span style=color:#ae81ff>-1</span>))])
</span></span></code></pre></div><p>Use this to implement a bomb:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; entities.rkt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>make-thing</span> exploding-enemy
</span></span><span style=display:flex><span>  [name <span style=color:#e6db74>&#34;bomb&#34;</span>]
</span></span><span style=display:flex><span>  [color <span style=color:#e6db74>&#34;white&#34;</span>]
</span></span><span style=display:flex><span>  [character <span style=color:#e6db74>#\O</span>]
</span></span><span style=display:flex><span>  [attack <span style=color:#ae81ff>50</span>])
</span></span></code></pre></div><p>How does it look in practice?</p><p>Start by finding and approaching a bomb:</p><figure><img src=/embeds/2013/5-on-approach.png></figure><p><strong>BOOM!</strong></p><figure><img src=/embeds/2013/6-boom.png></figure><p>Ouch. Those things back a heck of a punch. (An attack of 50 will do that to do you.) Luckily, they don&rsquo;t chase after you. But what if they did?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme><span style=display:flex><span><span style=color:#75715e>; entities.rkt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>make-thing</span> seeking-enemy
</span></span><span style=display:flex><span>  [name <span style=color:#e6db74>&#34;bomber&#34;</span>]
</span></span><span style=display:flex><span>  [character <span style=color:#e6db74>#\b</span>]
</span></span><span style=display:flex><span>  [color <span style=color:#e6db74>&#34;orange&#34;</span>]
</span></span><span style=display:flex><span>  [attack <span style=color:#ae81ff>25</span>]
</span></span><span style=display:flex><span>  [defense <span style=color:#ae81ff>5</span>]
</span></span><span style=display:flex><span>  [(<span style=color:#a6e22e>act</span> me world)
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>thing-call</span> seeking-enemy <span style=color:#e6db74>&#39;act</span> me world)
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>thing-call</span> exploding-enemy <span style=color:#e6db74>&#39;act</span> me world)])
</span></span></code></pre></div><p>The trick here is half-goblin, half-bomb. It will run right up to you and then explode. Looks like a lot of fun, doesn&rsquo;t it? It doesn&rsquo;t pack quite the same bunch, but it&rsquo;s still kind of terrifying. Particularly when you get something like this:</p><figure><img src=/embeds/2013/7-incoming.png></figure><p>A few rounds later:</p><figure><img src=/embeds/2013/8-ouch.png></figure><p>Boom! We&rsquo;ll still need to do a fair bit of balancing, these just don&rsquo;t do quite enough damage to really be scary. But it&rsquo;s certainly a start.</p><p>Well, that&rsquo;s all that I have for today. A bit of a short update, but we should have more next week as we get into the summer.</p><p>As always, if you&rsquo;d like to see all of the code for this project, you can do so on GitHub:</p><ul><li><a href=https://github.com/jpverkamp/racket-roguelike/tree/day-4 title="Racket Roguelike on GitHub">Racket Roguelike - Day 4</a></li><li><a href=https://github.com/jpverkamp/racket-roguelike title="Racket Roguelike on GitHub">Racket Roguelike - Up to date</a></li></ul><p>If you&rsquo;d like to try it yourself, you&rsquo;ll need to have both <a href=http://git-scm.com/>Git</a> and <a href=http://racket-lang.org/>Racket</a> and run the following series of commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone git://github.com/jpverkamp/racket-roguelike.git
</span></span><span style=display:flex><span>cd racket-roguelike
</span></span><span style=display:flex><span>git checkout day-4
</span></span><span style=display:flex><span>git submodule init
</span></span><span style=display:flex><span>git submodule update
</span></span><span style=display:flex><span>racket main.rkt
</span></span></code></pre></div><p><strong>Edit:</strong></p><p>It seems that the submodules wondered off at some point. Instead, you can install the three libraries this uses directly using <code><a href="http://docs.racket-lang.org/search/index.html?q=pkg">pkg</a></code>
, and then run the code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>raco pkg install github://github.com:jpverkamp/ascii-canvas/master
</span></span><span style=display:flex><span>raco pkg install github://github.com:jpverkamp/noise/master
</span></span><span style=display:flex><span>raco pkg install github://github.com:jpverkamp/thing/master
</span></span><span style=display:flex><span>git clone git://github.com/jpverkamp/racket-roguelike.git
</span></span><span style=display:flex><span>cd racket-roguelike
</span></span><span style=display:flex><span>git checkout day-4
</span></span><span style=display:flex><span>racket main.rkt
</span></span></code></pre></div><p>For part 5, click here: <a href=https://blog.jverkamp.com/2013/05/02/racket-roguelike-5-armors-and-weapons-and-potions-oh-my/>Racket Roguelike 5: Armors and weapons and potions, oh my!</a></p></div></article></div></div><footer id=page-footer role=contentinfo><nav id=footer-navigation role=navigation class=ribbon><ul class=main-navigation><li><a href=/archive-by-date/>All posts: By Date</a></li><li><a href=/archive-by-tag/>All posts: By Tag</a></li><li><a href=/atom.xml>RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li><li><a href=/programming/atom.xml>RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24"><path fill="#fff" d="M6.503 20.752C6.503 22.546 5.047 24 3.252 24c-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817C15.777 15.29 8.721 8.242.0 8.18zm0-3.368C10.58 4.858 19.152 13.406 19.183 24H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></sup></a></li></ul></nav><div id=page-footer-content data-pagefind-ignore=all><div class=legal><p>All posts unless otherwise mentioned are licensed under
<a rel=license href=//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US><img alt="Creative Commons License" style=border-width:0 src=//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png></a></p><p>Any source code unless otherwise mentioned is licensed under the <a href=//directory.fsf.org/wiki/License:BSD_3Clause>3 clause BSD license</a></p></div></div></footer></div></body></html>