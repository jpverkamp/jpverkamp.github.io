<!DOCTYPE html>
<html>
<head>
        
        

        <title>Adventures in optimization, re: Typed Racket | jverkamp.com | John-Paul Verkamp</title>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

        <script src="//code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css" />
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.css" />
        <script src="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.js"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.9/jquery.transit.min.js"></script>

        <!-- Highlight.js for syntax highlighting -->
        <link rel="stylesheet" href="/highlight/styles/obsidian.css" />
        <script src="/highlight/highlight.pack.js"></script>

        <!-- MathJax for LaTeX support -->
        <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- nanoGallery for Flickr Galleries -->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/css/themes/light/nanogallery_light.css" />
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/jquery.nanogallery.min.js"></script>

        <!-- Any custom CSS or JS that I've written; this should be kept minimal -->
        <link rel="stylesheet" href="/custom.css" />
        <script src="/custom.js"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="http://blog.jverkamp.com/feed/" />
</head>
<body>
        <header class="container">
        <nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://blog.jverkamp.com"><span style="color: green;">jv</span>erkamp.com</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav"><li class="dropdown"><a href="http://blog.jverkamp.com/category/archives" class="dropdown-toggle">Archives<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/archives/2004">2004</a></li><li><a href="http://blog.jverkamp.com/category/archives/2005">2005</a></li><li><a href="http://blog.jverkamp.com/category/archives/2006">2006</a></li><li><a href="http://blog.jverkamp.com/category/archives/2007">2007</a></li><li><a href="http://blog.jverkamp.com/category/archives/2008">2008</a></li><li><a href="http://blog.jverkamp.com/category/archives/2009">2009</a></li><li><a href="http://blog.jverkamp.com/category/archives/2010">2010</a></li><li><a href="http://blog.jverkamp.com/category/archives/2011">2011</a></li><li><a href="http://blog.jverkamp.com/category/archives/2012">2012</a></li><li><a href="http://blog.jverkamp.com/category/archives/2013">2013</a></li><li><a href="http://blog.jverkamp.com/category/archives/2014">2014</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/other" class="dropdown-toggle">Other<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/other/board-game-reviews">Board Game Reviews</a></li><li><a href="http://blog.jverkamp.com/category/other/cooking">Cooking</a></li><li><a href="http://blog.jverkamp.com/category/other/movie-reviews">Movie Reviews</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/photography" class="dropdown-toggle">Photography<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/photography/dp-challenge">DP Challenge</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosets">Photosets</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosynth">Photosynth</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/programming" class="dropdown-toggle">Programming<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/programming/by-language">By Language</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-project">By Project</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-source">By Source</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/programming/libraries">Libraries</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/research" class="dropdown-toggle">Research<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/research/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/research/publications">Publications</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/writing" class="dropdown-toggle">Writing<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/writing/by-genre">By Genre</a></li><li><a href="http://blog.jverkamp.com/category/writing/nanowrimo">NaNoWriMo</a></li><li><a href="http://blog.jverkamp.com/category/writing/novels">Novels</a></li><li><a href="http://blog.jverkamp.com/category/writing/other">Other</a></li><li><a href="http://blog.jverkamp.com/category/writing/short-stories">Short Stories</a></li></ul></li></ul>

      <form action="http://www.google.com/search" method="get" onSubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input name="q" type="hidden" />
          <input name="qfront" type="text" class="form-control" placeholder="Search" />
          <button type="submit" class="btn btn-default" value="Search">Search</button>
        </p>
      </form>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
        </header>

        <article class="container">
                <header>
                        <h1 class="entry-title">Adventures in optimization, re: Typed Racket</h1>

                        <div class="entry-meta">
                                <span class="posted-on"><time class="entry-date" datetime="2013-04-16"><span class="year">2013</span> <span class="month">Apr</span> <span class="day">16</span></time></span>
                                <span class="tags"><ul class="tag-list list-inline"><li><a href="http://blog.jverkamp.com/category/programming/by-topic/noise">Noise</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/mathematics">Mathematics</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/optimization">Optimization</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li><li><a href="http://blog.jverkamp.com/category/programming/libraries">Libraries</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/programming-languages">Programming Languages</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/programming-languages/type-systems">Type Systems</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-language/scheme">Scheme</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-language/racket">Racket</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/graphics">Graphics</a></li></ul></span>
                        </div>

                        <hr />
                </header>
                <div class="entry-content">
                        <p>Last Thursday I wrote a <a href="http://blog.jverkamp.com/2013/04/11/perlin-and-simplex-noise-in-racket">post about generating Perlin/simplex noise</a> in Racket. Later that day, I <a title="[racket] Perlin and simplex noise - optimizing Racket code" href="http://lists.racket-lang.org/users/archive/2013-April/057245.html">posted to the Racket mailing list</a> asking how I could make it faster. What resulted was a whole sequence of responses (primarily about Typed Racket) and a bit of a rabbit hole that I'm still trying to wrap my head around.<!--more--></p>
<p>The first version that I tried to run was the original untyped code which used the <code><a href="http://docs.racket-lang.org/search/index.html?q=picturing-programs">picturing-programs</a></code> teachpack to generate an image. Running Racket 5.3.3 on an x86_64 Linux machine, here are the timing results (if you'd like to try it yourself, use <a href="https://github.com/jpverkamp/noise/tree/b2d12e4">git b2d12e4</a>):</p>
<pre> perlin: cpu time: 355 real time: 356 gc time: 40
simplex: cpu time: 243 real time: 242 gc time: 4</pre>
<p>That's actually much better than I originally got on my 64-bit Windows 7 machine, despite a slightly faster CPU from the same year. I'm still not sure sure why that's the case.</p>
<p>But that's not what I'm interested in at the moment. :) What's more interesting right now is when I started trying to optimize things.</p>
<p>Based on the first few emails, the way to go seemed to convert my code to Typed Racket. So the first thing that I did was to swap out the <code>#lang</code> line from <code>#lang racket</code> to <code>#lang typed/racket</code>. Of course when I did that, all hell broke loose with page upon page of errors of the sort:</p>
<pre style="color: red;">Type Checker: Expected Real, but got Any in: x
Type Checker: Expected Vector, but got Any in: g
Type Checker: Expected Number, but got Any in: x
Type Checker: Expected Vector, but got Any in: g
...</pre>
<p>Yeah... Basically Racket is telling me that it knows I'm trying, but I'm going to have to give it a few more (read: any) types before it can help me.</p>
<p>So I go through and I start typing<span class="footnote"><sup><a href="#footnote-1">[1]</a></sup></span> things. One caveat is that there are at least two ways to assign a type to things in Typed Racket. Either you can declare the types inline, using forms like <code>define:</code> and <code>let:</code> or you can keep the code as it was and add the type signatures with just <code>:</code>.</p>
<p>As an example, the definition of <code>grad3</code> could be:</p>
<pre class="scheme"><code>; using inline types
(define: (grad3 : (Vectorof (Vectorof Integer)))
  '#(#( 1  1  0) #(-1  1  0) #( 1 -1  0) #(-1 -1  0)
     #( 1  0  1) #(-1  0  1) #( 1  0 -1) #(-1  0 -1)
     #( 0  1  1) #( 0 -1  1) #( 0  1 -1) #( 0 -1 -1)))

; using type annotations
(: grad3 (Vectorof (Vectorof Integer)))
(define grad3
  '#(#( 1  1  0) #(-1  1  0) #( 1 -1  0) #(-1 -1  0)
     #( 1  0  1) #(-1  0  1) #( 1  0 -1) #(-1  0 -1)
     #( 0  1  1) #( 0 -1  1) #( 0  1 -1) #( 0 -1 -1)))</code></pre>
<p>Since the only other experience I had with something like this was in Haskell, the latter seemed more natural to me. I later <a href="http://lists.racket-lang.org/users/archive/2013-April/057256.html">asked</a> on the mailing list and <a href="http://lists.racket-lang.org/users/archive/2013-April/057263.html">the answer</a> was basically that either is perfectly valid.</p>
<p>Going through the rest of the code and adding types was rather straight forward. I knew from previous (minimal) optimization experience in Racket that using <code>Flonum</code> was probably what I wanted to do, so everything essentially became either <code>Integer</code> or <code>Flonum</code>. The most interesting / relevant type is probably that of the <code>perlin</code> function itself (<code>simplex</code> has the same type):</p>
<pre class="scheme"><code>(: perlin
   (case-&gt; (Flonum -&gt; Flonum)
           (Flonum Flonum -&gt; Flonum)
           (Flonum Flonum Flonum -&gt; Flonum)))</code></pre>
<p>This is a bit ugly, but essentially what it's saying is that <code>perlin</code> can have multiple types for each of the optional arguments, but it always takes in <code>Flonum</code>s and returns a <code>Flonum</code>. It doesn't seem like there's a way to directly specify optional parameters in Typed Racket (yet), but for the time being, <code>case-></code> gets the job done well enough.</p>
<p>In addition, we had to add in a bunch of types within the <code>perlin</code>/<code>simplex</code> functions. I probably added more than I needed to, typing every variable that I had, but I figured that if I had to type any of them I might as well go all of the way. So throughout the function, I have lines like these:</p>
<pre class="scheme"><code>(: gi000 Integer) (: gi001 Integer) (: gi010 Integer) (: gi011 Integer)
(: gi100 Integer) (: gi101 Integer) (: gi110 Integer) (: gi111 Integer)

...

(: n000 Flonum) (: n001 Flonum) (: n010 Flonum) (: n011 Flonum)
(: n100 Flonum) (: n101 Flonum) (: n110 Flonum) (: n111 Flonum)</code></pre>
<p>Not particularly pretty, but not too painful either.</p>
<p>What did get annoying however was after I had everything typed and I still got this particularly pleasant error:</p>
<pre style="color: red;">Type Checker: No function domains matched in function application:
Domains: Flonum Flonum Flonum
         Flonum Flonum
         Flonum
Arguments: Zero</pre>
<p>It turns out that Racket knows that zero times anything is zero. The problem is that zero times anything is exactly 0, the real, exact, integer version of the number (Actually it has it's own type: <code>Zero</code>). But that's not what we're looking for, we're looking for a <code>Flonum</code>. I could work around it using either the function <code>exact->inexact</code> or the function <code>real->double-flonum</code>, but both of those had to be applied in the code using <code>perlin</code>, leaking the implementation details in a rather unsatisfactory way (since I can imagine that many if not all uses of noise would eventually use the point 0, 0).</p>
<p>Still, it was enough for a first try. I don't have timing results for this on the same machine as the rest, but if you'd like to try it out, you can get the code using <a href="https://github.com/jpverkamp/noise/tree/f33f6d7">git f33f6d7</a>.</p>
<p>About this time, I got <a href="http://lists.racket-lang.org/users/archive/2013-April/057255.html">another email</a> back that detailed essentially what I'd been trying to do, only they had a few tricks that I hadn't been able to find by myself. Specifically:</p>
<ul>
        <li><span style="line-height: 15px;"><a href="http://pre.racket-lang.org/docs/html/images/flomap_title.html" data-pltdoc="x">images/flomap</a> has a faster (typed) image generator (<code><a href="http://docs.racket-lang.org/search/index.html?q=build-flomap*">build-flomap*</a></code>) than <code><a href="http://docs.racket-lang.org/search/index.html?q=picturing-programs">picturing-programs</a></code>
</span></li>
        <li><code>case-></code> slows down typechecking (but has no effect on runtime)</li>
        <li><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((lib._racket/math..rkt)._exact-floor))" data-pltdoc="x">exact-<wbr />floor</a> is far faster than using <code><a href="http://docs.racket-lang.org/search/index.html?q=inexact->exact">inexact->exact</a></code> and <code><a href="http://docs.racket-lang.org/search/index.html?q=floor">floor</a></code></li>
        <li>shadowing (rather than <code>set!</code>) should allow for better optimization, especially with floating point numbers</li>
        <li><code>Real</code> can be used as the type for <code>Real</code> numbers, including the <code>Zero</code> that was causing so much trouble</li>
</ul>
<p>Using all of that, I set about a second round of optimizations. Primarily, since Real allowed for <code>Zero</code>, I converted every <code>Flonum</code> to <code>Real</code>, along with the rest of the previously specified changes. Here are the timing results using the typed code using Real for the numerics and generating an image using the <a href="http://pre.racket-lang.org/docs/html/images/flomap_title.html" data-pltdoc="x">images/flomap</a> library. Between the two of them, we got a substantial boost for both Perlin and simplex noise (<a href="https://github.com/jpverkamp/noise/tree/006faf9">git 006faf9</a>):</p>
<pre> perlin: cpu time: 235 real time: 236 gc time: 15
simplex: cpu time: 147 real time: 147 gc time: 4</pre>
<p>Overall, it's about 2x faster than the original code, and all for just adding the type annotations.</p>
<p>The next step suggested to me was to use Racket's <code><a href="http://docs.racket-lang.org/search/index.html?q=Optimization Coach">Optimization Coach</a></code>. Essentially, it's a tool built into DrRacket for use with Typed Racket that will color code your code based on how successful the compiler will be on optimizing your functions. Specifically, it will be green if it can manage to inline your code and avoid boxing/unboxing values and also apply floating point specific functions (where necessary).</p>
<p>The problem was, running through the code I had, there was a heck of a lot of red... Running through my code, there was a heck of a lot of red:</p>
<p><a data-toggle="lightbox" href="http://blog.jverkamp.com/2013/04/16/adventures-in-optimization-re-typed-racket/optimization-errors.png"><img src="http://blog.jverkamp.com/2013/04/16/adventures-in-optimization-re-typed-racket/optimization-errors.png" /></a></p>
<p>Drilling down into the errors (it took a while to realize that right clicking would give more detail), it eventually turned out that converting from <code>Flonum</code> to <code>Real</code> was actually <em>causing</em> more errors than it was solving. Since <code>Real</code> is more generic and includes <code>Integer</code>s as well as <code>Flonum</code>s, it wasn't possible for the compiler to use pure floating point functions although we both knew it wanted to. So back to <code>Flonum</code> we went!<span class="footnote"><sup><a href="#footnote-2">[2]</a></sup></span></p>
<p>Actually, no. I'm not really sure why, but at this point, I decided that I liked <code>Float</code> better than <code>Flonum</code>. It turns out that the two are essentially aliases for one another (which doesn't help when it's not consistent which will appear in error messages), so I could have used either. In the end, I switched to <code>Float</code> though. I think it was mostly because of experience with other languages. <code>Float</code> is a common term, <code>Flonum</code> is less so.</p>
<p>In any case, my next pass was to turn <code>Real</code> <em>back into</em> <code>Float</code>. So it goes. This time though, I made one tweak that would allow the best of both worlds:</p>
<pre class="scheme"><code>(: perlin (case-&gt; (Real -&gt; Float)
                  (Real Real -&gt; Float)
                  (Real Real Real -&gt; Float)))
(define (perlin x [y 0.0] [z 0.0])
  (perlin^ (real-&gt;double-flonum x)
           (real-&gt;double-flonum y)
           (real-&gt;double-flonum z)))

(: perlin^ (Float Float Float -&gt; Float))
(define (perlin^ x y z)
  ...)</code></pre>
<p>Since I was would only <code>provide</code> <code>perlin</code>, not <code>perlin^</code><span class="footnote"><sup><a href="#footnote-3">[3]</a></sup></span>, I could have a function that accepted any real number but internally use <code>Floats</code> for all of my types.</p>
<p>I ran the Optimization Coach again and the results were beautiful:</p>
<p><a data-toggle="lightbox" href="http://blog.jverkamp.com/2013/04/16/adventures-in-optimization-re-typed-racket/optimization-better.png"><img src="http://blog.jverkamp.com/2013/04/16/adventures-in-optimization-re-typed-racket/optimization-better.png" /></a></p>
<p>Green, beautiful green. I knew there was a reason it was my favorite color. Better yet, all that green is telling me that the compiler should (theoretically) be able to eek out even more speed, yes? Well, here are the timing results for using <code>Float</code> instead of <code>Real</code> and writing the aforementioned wrapper to convert between the two.</p>
<pre> perlin: cpu time: 112 real time: 118 gc time: 23
simplex: cpu time: 106 real time: 110 gc time: 3</pre>
<p>Yes! More speed! We're down to about 1/10th of a second for 65,536 calls to either function. That's none too shabby.</p>
<p>But finally, I wanted to test how much of that was overhead in generating the image and how much was actually the noise algorithms. So I just wrote a simple nested <code>for</code> loop to generate the 256x256 calls to Perlin/simplex. At first it was slower. It turns out that even that had to be typed otherwise the untyped Racket code would eat up any meager benefits I'd gained. So I added types to my simple test bench as well. Here are the results (<a href="https://github.com/jpverkamp/noise/tree/7445311">git 7445311</a>):</p>
<pre> perlin: cpu time: 41 real time: 40 gc time: 0
simplex: cpu time: 52 real time: 52 gc time: 2</pre>
<p>That's none too shabby at all. Actually, if you compare it to the <a title="PDF describing Perlin and simplex noise" href="http://webstaff.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf">original algorithm</a> my code is based on (written in Java, not C as I originally stated) it's well within the same order of magnitude. In the Java code, without generating an image, generating a 256x256 simplex grid takes an average of 30 ms.</p>
<p>All things considered, I'm pretty happy with my results. It is mildly puzzling that up until the very final test case the results for Perlin are always slower than simplex (which is to be expected given the relative runtimes of the algorithms<span class="footnote"><sup><a href="#footnote-4">[4]</a></sup></span>) , but in the last case they're exactly the same. If anyone has a good reason for why that might be, I'd love to hear it.</p>
<p>Well, that's all I have. Working with Typed Racket was actually a surprisingly pleasant experience. It reminded me of all of the better parts of <a title="Haskell" href="http://www.haskell.org/haskellwiki/Haskell">Haskell</a>, where you can add type annotations to make the compiler work with you rather than against you.</p>
                </div>
                <div class="entry-footnotes">
                        <div id="footnotes"><ol><li><a name="footnote-1"></a>Whee typing vs typing</li><li><a name="footnote-2"></a>This is all actually mentioned in the Racket <code><a href="http://docs.racket-lang.org/search/index.html?q=documentation on optimization">documentation on optimization</a></code>.</li><li><a name="footnote-3"></a>Sorry Suzanne, but the hats must live on</li><li><a name="footnote-4"></a><em>O(n!)</em> for Perlin and <em>O(n<sup>2</sup>)</em> for simplex, where <em>n</em> is the number of dimensions if I understand correctly</li></ol></div>
                </div>

                <div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = "jverkamp";
var disqus_title = "Adventures in optimization, re: Typed Racket";
var disqus_url = "http://blog.jverkamp.com/2013/04/16/adventures-in-optimization-re-typed-racket/";
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </article>

        <footer class="container" role="contentinfo">
                <nav class="navbar navbar-default" role="navigation"><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2013/04/11/racket-roguelike-2-infinite-caves">← Racket Roguelike 2: Infinite caves!</a></li><li><a href="http://blog.jverkamp.com/category/archives">Archives</a></li><li><a href="http://blog.jverkamp.com/2013/04/18/a-prototype-object-system-for-racket">A prototype object system for Racket →</a></li></ul><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2013/04/11/racket-roguelike-2-infinite-caves">← Racket Roguelike 2: Infinite caves!</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li><li><a href="http://blog.jverkamp.com/2013/04/18/a-prototype-object-system-for-racket">A prototype object system for Racket →</a></li></ul></nav>

                <div class="legal">
                        <a href="http://blog.jverkamp.com/feed/atom.xml">feed <img style="border: 0;" src="http://blog.jverkamp.com/rss.png" /></a><br />
                        All posts unless otherwise mentioned are licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" /></a><br />
                        Any source code unless otherwise mentioned is licensed under the <a href="http://directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
                </div>
        </footer>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-53688146-1', 'auto');
ga('send', 'pageview');
</script>
</body>
</html>