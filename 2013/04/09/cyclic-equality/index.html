<!DOCTYPE html>
<html onclick >
<head>
    <title>Cyclic equality – jverkamp.com</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8"><link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="//blog.jverkamp.com/feed/">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot-default.min.css" integrity="sha256-s0KLB0LnI5oqhHF8gkgfmxU4usUFEHlWJTxT8q72Tq4=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" />

<link href="https://fonts.googleapis.com/css?family=Spectral+SC|Lato|Share+Tech+Mono" rel="stylesheet">

<link rel="stylesheet" href="/custom.css" defer />

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <div id="wrapper"><header id="page-header" role="banner">
    <h1><a href="/">JP's Blog</a></h1>

    <ul id="page-header-links">
        <li>
            <a href="https://github.com/jpverkamp">GitHub</a> *
            <a href="https://www.flickr.com/photos/jpverkamp">Flickr</a> *
            <a href="/resume">Resume</a>
        </li>
        <li>
            <form action="//www.google.com/search" method="get" onsubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search" _lpchecked="1">
                <div class="form-group">
                    <input name="q" type="hidden">
                    <input name="qfront" type="text" class="form-control" placeholder="Search">
                    <button type="submit" class="btn btn-default" value="Search">Search</button>
                </div>
            </form>
        </li>
    </ul>

    <nav id="header-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation"><li><a href="https://blog.jverkamp.com/reviews/">Reviews</a></li><li><a href="https://blog.jverkamp.com/photography/">Photography</a></li><li><a href="https://blog.jverkamp.com/programming/">Programming</a></li><li><a href="https://blog.jverkamp.com/writing/">Writing</a></li><li><a href="https://blog.jverkamp.com/research/">Research</a></li><li class="subscription" data-subscription="rss"><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </nav>
</header>
<div id="page-content-wrapper">
            <div id="page-content"><article>
	<header>
		<h1 class="entry-title">Cyclic equality</h1>

        <div class="entry-meta"><span class="entry-date">2013-04-09</span>
            </div>

        <div class="entry-taxonomies"><div class="entry-tags"><ul class="taxonomy-keys"><li>
            <a class="taxonomy-key" href="/programming/languages/">Languages</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2013/04/04/racket-roguelike-1-a-gui-screens-i/o-and-you/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/racket">Racket</a><a href="https://blog.jverkamp.com/2013/04/11/perlin-and-simplex-noise-in-racket/" class="next-link"></a></li><li><a href="https://blog.jverkamp.com/2013/03/28/path-to-philosophy/" class="previous-link"></a><a class="taxonomy-value" href="/programming/languages/scheme">Scheme</a><a href="https://blog.jverkamp.com/2013/04/11/perlin-and-simplex-noise-in-racket/" class="next-link"></a></li></ul>
        </li><li>
            <a class="taxonomy-key" href="/programming/sources/">Sources</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2013/03/18/approximating-pi-with-buffons-needle/" class="previous-link"></a><a class="taxonomy-value" href="/programming/sources/programming-praxis">Programming Praxis</a><a href="https://blog.jverkamp.com/2013/06/26/swap-list-nodes/" class="next-link"></a></li></ul>
        </li><li>
            <a class="taxonomy-key" href="/programming/topics/">Topics</a>
            <ul class="taxonomy-values"><li><a href="https://blog.jverkamp.com/2013/01/24/splay-heaps-redux-imperative-model/" class="previous-link"></a><a class="taxonomy-value" href="/programming/topics/data-structures">Data Structures</a><a href="https://blog.jverkamp.com/2013/09/23/extending-racket-structs-to-bitfields/" class="next-link"></a></li></ul>
        </li><li><a class="taxonomy-key" href="/programming">programming</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2013/04/04/racket-roguelike-1-a-gui-screens-i/o-and-you/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2013/04/11/perlin-and-simplex-noise-in-racket/" class="next-link">Next</a></ul>
        </li><li><a class="taxonomy-key" href="/">All Posts</a>
            <ul>
                <li><a href="https://blog.jverkamp.com/2013/04/09/the-croods/" class="previous-link">Prev</a>
                <a href="https://blog.jverkamp.com/2013/04/11/perlin-and-simplex-noise-in-racket/" class="next-link">Next</a></ul>
        </li></ul>
</div>
</div>
    </header>

	<div class="entry-content"><p>In <a title="Cyclic equality on Programming Praxis" href="http://programmingpraxis.com/2013/04/09/cyclic-equality/">today&rsquo;s post</a> from Programming Praxis, the goal is to check if two cyclic lists are equal. So if you have the cycles <code>↻(1 2 3 4 5)</code> and <code>↻(3 4 5 1 2)</code>, they&rsquo;re equal. Likewise, <code>↻(1 2 2 1)</code> and <code>↻(2 1 1 2)</code> are equal. But <code>↻(1 2 3 4)</code> and <code>↻(1 2 3 5)</code> are not since they have different elements while <code>↻(1 1 1)</code> and <code>↻(1 1 1 1)</code> aren&rsquo;t since they have different elements.</p>

<p>Basically, there are two ways that you can solve this problem. First, you actually use the cyclic structure and recursively check each start in one list for a matching cycle in the other. Alternatively, so long as the lengths are equal you can just double one list and search for the other as a subset. We&rsquo;ll go ahead and code up both.</p>

<p>First, we want to write a semi-straight forward comparison. The function will take two lists. It will recur across each in both for a start and loop in the second until either a match is confirmed or not. One thing that I want to do is make a cycle structure. We could use mutation to set the last <code>cdr</code>/<code>tail</code> of the list to the head, but instead I&rsquo;ll make the following structure:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#75715e">; Store a cycle as the current head and original (reset) head</span>
(define-struct cycle (current original))

<span style="color:#75715e">; Convert a list to a cycle</span>
(<span style="color:#66d9ef">define </span>(list-&gt;cycle ls)
  (make-cycle ls ls))

<span style="color:#75715e">; Convert a cycle to a list</span>
(<span style="color:#66d9ef">define </span>(cycle-&gt;list c)
  (cycle-take (cycle-length c) c))

<span style="color:#75715e">; Return the first item of a cycle</span>
(<span style="color:#66d9ef">define </span>(cycle-head c)
  (<span style="color:#66d9ef">if </span>(null? (cycle-current c))
      (car (cycle-original c))
      (car (cycle-current c))))

<span style="color:#75715e">; Return all but the first item of a cycle</span>
(<span style="color:#66d9ef">define </span>(cycle-tail c)
  (<span style="color:#66d9ef">if </span>(null? (cycle-current c))
      (make-cycle (cdr (cycle-original c)) (cycle-original c))
      (make-cycle (cdr (cycle-current c)) (cycle-original c))))

<span style="color:#75715e">; Get the length of a cycle</span>
(<span style="color:#66d9ef">define </span>(cycle-length c)
  (length (cycle-original c)))

<span style="color:#75715e">; Take the first n items from a cycle</span>
(<span style="color:#66d9ef">define </span>(cycle-take n c)
  (<span style="color:#66d9ef">let </span>loop ([i <span style="color:#ae81ff">0</span>] [c c])
    (<span style="color:#66d9ef">if </span>(= i n)
        <span style="color:#f92672">&#39;</span>()
        (cons (cycle-head c) (loop (+ i <span style="color:#ae81ff">1</span>) (cycle-tail c))))))

<span style="color:#75715e">; Test if a cycle is about to reset</span>
(<span style="color:#66d9ef">define </span>(cycle-reset? c)
  (null? (cycle-current c)))</code></pre></div>
<p>Essentially, we&rsquo;ll keep a pointer to the original list and reset when the current pointer runs out. All of this is of course transparent to anyone using the API, so we could switch it out for another (using a vector and a current pointer for example) if we wanted. The most useful function yet potentially non-standard function is <code>cycle-reset?</code>. Essentially, it fills what would have been <code>cycle-null?</code>, except a cycle will never be null. This tests when we&rsquo;re about to reset to the beginning of the cycle.</p>

<p>There are a bunch of unit tests in the <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/cycle-equality.rkt" title="cycle equality source on GitHub">source on GitHub</a>, but reset assured it works.</p>

<p>Now that we have that, the function it relatively straight forward:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#75715e">; Test if two cycles are equal</span>
(<span style="color:#66d9ef">define </span>(cycle-equal? c1 c2)
  <span style="color:#75715e">; Check the lengths first</span>
  (<span style="color:#66d9ef">define </span>len (cycle-length c1))
  (<span style="color:#66d9ef">and </span>(= len (cycle-length c2))
       (<span style="color:#66d9ef">let </span>loop ([ci1 c1] [ci2 c2])
         (cond
           <span style="color:#75715e">; No matches found</span>
           [(cycle-reset? ci1)
            <span style="color:#66d9ef">#f</span>]
           <span style="color:#75715e">; No match found for this start in c1</span>
           <span style="color:#75715e">; Advance c1, reset c2</span>
           [(cycle-reset? ci2)
            (loop (cycle-tail ci1) c2)]
           <span style="color:#75715e">; Match found at the current element!</span>
           [(equal? (cycle-take len ci1)
                    (cycle-take len ci2))
            <span style="color:#66d9ef">#t</span>]
           <span style="color:#75715e">; Otherwise, no match, advance c2</span>
           [else
            (loop ci1 (cycle-tail ci2))]))))</code></pre></div>
<p>Theoretically, the comments should be pretty straight forward. For each starting pair, test if we have matching cycles using <code>cycle-take</code>. That could bail out early to make the code more efficient, but at the cost of being rather less clean. Really, if you wanted to make this code efficient you&rsquo;d most likely use a vector and a head pointer anyways.</p>

<p>And here we have a few tests:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">&gt; (cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>)))
<span style="color:#66d9ef">#t</span>
&gt; (cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span>)))
<span style="color:#66d9ef">#t</span>
&gt; (cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">1</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">2</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span>)))
<span style="color:#66d9ef">#t</span>
&gt; (cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span>)))
<span style="color:#66d9ef">#f</span>
&gt; (cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">5</span>)))
<span style="color:#66d9ef">#f</span></code></pre></div>
<p>The next solution is a bit more straight forward if not quite as efficient. Essentially, double one of the lists and then check if the other is in it. For equal cycles, this will be equal but not others. You do have to check the length first though.</p>

<p>First, we need to write code to check if one given list is a subset anywhere in another. Here&rsquo;s one way to do that:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#75715e">; Check if p is a prefix of ls</span>
(<span style="color:#66d9ef">define </span>(prefix? ls p)
  (<span style="color:#66d9ef">or </span>(null? p)
      (<span style="color:#66d9ef">and </span>(equal? (car ls) (car p))
           (prefix? (cdr ls) (cdr p)))))

<span style="color:#75715e">; Check if a list needle is in the list haystack</span>
(<span style="color:#66d9ef">define </span>(contains? haystack needle)
  (<span style="color:#66d9ef">and </span>(not (null? haystack))
       (<span style="color:#66d9ef">or </span>(prefix? haystack needle)
           (contains? (cdr haystack) needle))))</code></pre></div>
<p>And with that, checking for equal is a rather minimal function (we&rsquo;re taking the cycles as lists this time):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#75715e">; Check if two cycles (as lists) are equal by doubling one</span>
(<span style="color:#66d9ef">define </span>(list-cycle-equal? lsc1 lsc2)
  (<span style="color:#66d9ef">and </span>(= (length lsc1) (length lsc2))
       (contains? (append lsc1 lsc1) lsc2)))</code></pre></div>
<p>And to check that we can use the same tests. We just don&rsquo;t convert to cycles first:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">&gt; (list-cycle-equal? <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>) <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>))
<span style="color:#66d9ef">#t</span>
&gt; (list-cycle-equal? <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>) <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span>))
<span style="color:#66d9ef">#t</span>
&gt; (list-cycle-equal? <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">2</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span>))
<span style="color:#66d9ef">#t</span>
&gt; (list-cycle-equal? <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span>))
<span style="color:#66d9ef">#f</span>
&gt; (list-cycle-equal? <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span>) <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">5</span>))
<span style="color:#66d9ef">#f</span></code></pre></div>
<p>And that&rsquo;s it. If you&rsquo;d like, you can see the entire code on GitHub (<a href="https://github.com/jpverkamp/small-projects/blob/master/blog/cycle-equality.rkt" title="cycle equality source on GitHub">cycle equality source</a>). All of the functions are already in this post, but there are a bunch of unit tests that might be of interest.</p>

<p><strong>Edit 9 April 2013</strong>: A comment from Maurits on the Programming Praxis post got me wondering if it could be done in <em>O(m + n)</em><sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup>. Basically, their idea was to lexically order both cycles and then check if they are equal as lists.</p>

<p>To lexically order them, we want to advance the cycle so that the smallest element in the cycle is first. If there is a tie, break it with the element right after each smallest and so on. Something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#75715e">; Advance a cycle to the lexically minimum position</span>
(<span style="color:#66d9ef">define </span>(cycle-lexical-min c [&lt; &lt;] [= =])
  <span style="color:#75715e">; Check if one cycle is less than another</span>
  (<span style="color:#66d9ef">define </span>(cycle-&lt; c1 c2)
    (<span style="color:#66d9ef">let </span>loop ([c1 c1] [c1-cnt (cycle-length c1)]
               [c2 c2] [c2-cnt (cycle-length c2)])
      (<span style="color:#66d9ef">and </span>(&gt; c1-cnt <span style="color:#ae81ff">0</span>)
           (&gt; c2-cnt <span style="color:#ae81ff">0</span>)
           (<span style="color:#66d9ef">or </span>(&lt; (cycle-head c1) (cycle-head c2))
               (<span style="color:#66d9ef">and </span>(= (cycle-head c1) (cycle-head c2))
                    (loop (cycle-tail c1) (- c1-cnt <span style="color:#ae81ff">1</span>)
                          (cycle-tail c2) (- c2-cnt <span style="color:#ae81ff">1</span>)))))))

  <span style="color:#75715e">; Lexically sort by storing minimum</span>
  (<span style="color:#66d9ef">let </span>loop ([min c] [c (cycle-tail c)])
    (cond
      [(cycle-reset? c) min]
      [(cycle-&lt; c min) (loop c (cycle-tail c))]
      [<span style="color:#66d9ef">else </span>(loop min (cycle-tail c))])))</code></pre></div>
<p>Note: This code uses an updated version of <code>cycle-length</code> that is <a href="https://en.wikipedia.org/wiki/amortized">amortized</a> <em>O(1)</em> (it caches the length). You can see the code for that on <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/cycle-equality.rkt" title="cycle equality source on GitHub">GitHub</a>.</p>

<p>One you have the sort, the actual comparison is easy:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme"><span style="color:#75715e">; Compare cycles by lexical comparison</span>
(<span style="color:#66d9ef">define </span>(lexical-cycle-equal? c1 c2 [&lt; &lt;] [= =])
  (equal? (cycle-take (cycle-length c1) (cycle-lexical-min c1 &lt; =))
          (cycle-take (cycle-length c2) (cycle-lexical-min c2 &lt; =))))</code></pre></div>
<p>I’m not completely sure about the runtime of finding the lexical minimum. In the general case (with few duplicates), it’ll be <em>O(n)</em> though. Then there’s another <em>O(n + n)</em> for the cycle-length and cycle-take, plus a final additional <em>O(max(m, n))</em> for the equal?. So overall it would be <em>O(3m + 3n + max(m, n))</em> which is <em>O(m + n)</em>. The constant could be improved with a better abstraction, but not the big-O time.</p>

<p>And of course all of the previous tests still work:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">&gt; (lexical-cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>)) &lt; =)
<span style="color:#66d9ef">#t</span>
&gt; (lexical-cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span>)) &lt; =)
<span style="color:#66d9ef">#t</span>
&gt; (lexical-cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">1</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">2</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span>)) &lt; =)
<span style="color:#66d9ef">#t</span>
&gt; (lexical-cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span>)) &lt; =)
<span style="color:#66d9ef">#f</span>
&gt; (lexical-cycle-equal? (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span>)) (list-&gt;cycle <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">5</span>)) &lt; =)
<span style="color:#66d9ef">#f</span></code></pre></div><div class="footnotes">

<hr />

<ol>
<li id="fn:1">The previous two solutions are <em>O(mn)</em> because they have to compare each starting point pairwise
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
</ol>
</div></div>
<div class="entry-comments">
    <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = "jverkamp";
            var disqus_title = "Cyclic equality";
            var disqus_url = "https:\/\/blog.jverkamp.com\/2013\/04\/09\/cyclic-equality\/";

             
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div></article></div>
        </div><footer id="page-footer" role="contentinfo">
    <nav id="footer-navigation" role="navigation" class="ribbon">
        <ul class="main-navigation">
            <li><a href="/archive-by-date/">All posts: By Date</a></li>
            <li><a href="/archive-by-tag/">All posts: By Tag</a></li>

            <li>
                <a href="/atom.xml">
                    RSS: All <sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li><li>
                <a href="/programming/atom.xml">
                    RSS: programming<sup><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24">
    <path fill="white" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
</svg>
</sup>
                </a>
            </li></ul>
    </nav>

    <div id="page-footer-content">
        <div class="legal">
            <p>
                All posts unless otherwise mentioned are licensed under
                <a rel="license" href="//creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
                    <img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/3.0/80x15.png">
                </a>
            </p>

            <p>
                Any source code unless otherwise mentioned is licensed under the <a href="//directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
            </p>
        </div>
    </div>
</footer>
</div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js" integrity="sha256-yDarFEUo87Z0i7SaC6b70xGAKCghhWYAZ/3p+89o4lE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bigfoot/2.1.4/bigfoot.min.js" integrity="sha256-2ylggML6rCJMc817KbE8Cx+cuxYIM+6bjG2Gpq2g7iU=" crossorigin="anonymous"></script>

<script type="text/javascript" src="/custom.js" defer></script>
</body>
</html>
