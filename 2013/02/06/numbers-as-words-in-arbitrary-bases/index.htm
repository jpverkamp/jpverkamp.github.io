<!DOCTYPE html>
<html>
<head>
        
        

        <title>Numbers as words in arbitrary bases | jverkamp.com | John-Paul Verkamp</title>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

        <script src="//code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css" />
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.css" />
        <script src="//cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/3.0.3a/ekko-lightbox.min.js"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.9/jquery.transit.min.js"></script>

        <!-- Highlight.js for syntax highlighting -->
        <link rel="stylesheet" href="/highlight/styles/obsidian.css" />
        <script src="/highlight/highlight.pack.js"></script>

        <!-- MathJax for LaTeX support -->
        <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- nanoGallery for Flickr Galleries -->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/css/themes/light/nanogallery_light.css" />
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/nanogallery/4.4.2/jquery.nanogallery.min.js"></script>

        <!-- Any custom CSS or JS that I've written; this should be kept minimal -->
        <link rel="stylesheet" href="/custom.css" />
        <script src="/custom.js"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="alternate" type="application/atom+xml" title="jverkamp.com (Atom 2.0)" href="http://blog.jverkamp.com/feed/" />
</head>
<body>
        <header class="container">
        <nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://blog.jverkamp.com"><span style="color: green;">jv</span>erkamp.com</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav"><li class="dropdown"><a href="http://blog.jverkamp.com/category/archives" class="dropdown-toggle">Archives<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/archives/2004">2004</a></li><li><a href="http://blog.jverkamp.com/category/archives/2005">2005</a></li><li><a href="http://blog.jverkamp.com/category/archives/2006">2006</a></li><li><a href="http://blog.jverkamp.com/category/archives/2007">2007</a></li><li><a href="http://blog.jverkamp.com/category/archives/2008">2008</a></li><li><a href="http://blog.jverkamp.com/category/archives/2009">2009</a></li><li><a href="http://blog.jverkamp.com/category/archives/2010">2010</a></li><li><a href="http://blog.jverkamp.com/category/archives/2011">2011</a></li><li><a href="http://blog.jverkamp.com/category/archives/2012">2012</a></li><li><a href="http://blog.jverkamp.com/category/archives/2013">2013</a></li><li><a href="http://blog.jverkamp.com/category/archives/2014">2014</a></li><li><a href="http://blog.jverkamp.com/category/archives/2015">2015</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/other" class="dropdown-toggle">Other<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/other/board-game-reviews">Board Game Reviews</a></li><li><a href="http://blog.jverkamp.com/category/other/cooking">Cooking</a></li><li><a href="http://blog.jverkamp.com/category/other/movie-reviews">Movie Reviews</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/photography" class="dropdown-toggle">Photography<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/photography/dp-challenge">DP Challenge</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosets">Photosets</a></li><li><a href="http://blog.jverkamp.com/category/photography/photosynth">Photosynth</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/programming" class="dropdown-toggle">Programming<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/programming/by-language">By Language</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-project">By Project</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-source">By Source</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/programming/libraries">Libraries</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/research" class="dropdown-toggle">Research<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/research/by-topic">By Topic</a></li><li><a href="http://blog.jverkamp.com/category/research/publications">Publications</a></li></ul></li><li class="dropdown"><a href="http://blog.jverkamp.com/category/writing" class="dropdown-toggle">Writing<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="http://blog.jverkamp.com/category/writing/by-genre">By Genre</a></li><li><a href="http://blog.jverkamp.com/category/writing/ideas">Ideas</a></li><li><a href="http://blog.jverkamp.com/category/writing/nanowrimo">NaNoWriMo</a></li><li><a href="http://blog.jverkamp.com/category/writing/novels">Novels</a></li><li><a href="http://blog.jverkamp.com/category/writing/other">Other</a></li><li><a href="http://blog.jverkamp.com/category/writing/short-stories">Short Stories</a></li><li><a href="http://blog.jverkamp.com/category/writing/writing-excuses">Writing Excuses</a></li></ul></li></ul>

      <form action="http://www.google.com/search" method="get" onSubmit="(function(obj){obj.q.value='site:blog.jverkamp.com '+obj.qfront.value;})(this)" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input name="q" type="hidden" />
          <input name="qfront" type="text" class="form-control" placeholder="Search" />
          <button type="submit" class="btn btn-default" value="Search">Search</button>
        </p>
      </form>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
        </header>

        <article class="container">
                <header>
                        <h1 class="entry-title">Numbers as words in arbitrary bases</h1>

                        <div class="entry-meta">
                                <span class="posted-on"><time class="entry-date" datetime="2013-02-06"><span class="year">2013</span> <span class="month">Feb</span> <span class="day">6</span></time></span>
                                <span class="tags"><ul class="tag-list list-inline"><li><a href="http://blog.jverkamp.com/category/programming/by-source/daily-programmer">Daily Programmer</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/data-structures/dictionary">Dictionary</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-language/racket">Racket</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-language/scheme">Scheme</a></li><li><a href="http://blog.jverkamp.com/category/programming/by-topic/word-games">Word Games</a></li></ul></span>
                        </div>

                        <hr />
                </header>
                <div class="entry-content">
                        <p><a href="http://www.reddit.com/r/dailyprogrammer/comments/17zn6g/020613_challenge_120_intermediate_base_conversion/" title="Challenge #120 [Intermediate] Base Conversion Words">Today's intermediate challenge</a> on Reddit's /r/dailyprogrammer intrigued me somewhat, so I decided to take a crack at it. The basic idea is if you are given a number, try converting it to all bases from 2 to 64 (with a special encoding). Print out any of those that are words.</p>
<p>For example, if you interpret the number 44,269 as a <a href="https://en.wikipedia.org/wiki/base_16 (Hexadecimal)">Hexadecimal</a> number, you get the word "aced". So just how many of these words are there out there?</p>
<!--more-->
<p>The first thing we want is the ability to associate a character with a given value. Since we want 64 possible values, we need case sensitive strings (so "a" is distinct from "A"). But that only gives us 62 (10 digits, 26 lower case letters, and 26 upper case letters), so we'll also add + and /. It's the same character set as <a href="https://en.wikipedia.org/wiki/Base64_encoding">Base64</a>, but a different ordering.</p>
<pre class="scheme"><code>; order of characters for the encoding
(define encoding
  (string-append
   "0123456789"
   "abcdefghijklmnopqrstuvwxyz"
   "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
   "+/"))

; convert a number into a character
(define n-&gt;c
  (for/hash ([i (in-naturals)]
             [c (in-string encoding)])
    (values i c)))

; convert a character into a number
(define c-&gt;n
  (for/hash ([i (in-naturals)]
             [c (in-string encoding)])
    (values c i)))</code></pre>
<p>Here we create a <code><a href="http://docs.racket-lang.org/search/index.html?q=Racket hash table">Racket hash table</a></code> associating each number with its character (<code>n->c</code>) and then each character to its numerical value (<code>c->n</code>).</p>
<p>Once that's been done, we want to be able to convert between lists of digits and strings of characters. For example if we have the string <code>"101"</code> that would be <code>'(1 0 1)</code>. Likewise <code>"abc"</code> would be <code>'(10 11 12)</code>.</p>
<pre class="scheme"><code>; convert a list of digits in decimal form into a string
(define (dlist-&gt;string dls)
  (list-&gt;string
   (for/list ([n (in-list dls)])
     (hash-ref n-&gt;c n))))

; convert a string into a list of digits in decimal form
(define (string-&gt;dlist str)
  (for/list ([c (in-string str)])
    (hash-ref c-&gt;n c)))</code></pre>
<p>This just directly uses those hashes we created earlier. Technically <code>dlist->string</code> could instead directly <code>string-ref</code> into <code>encoding</code> but I like the parallelism of doing it this way.</p>
<p>Next, we want to be able to convert some arbitrary decimal list to/from a number. This should (theoretically) be covered in most introductory CS courses (at least for a few limited bases) so if this code isn't familiar, take a deeper look. This is the recursive way to do it, but it's close enough to the iterative algorithm that you should be able to convert them.</p>
<pre class="scheme"><code>; convert a digit list in base b to number
(define (-&gt;decimal dls b)
  (let loop ([dls dls] [n 0])
    (cond
      [(null? dls) n]
      [else
       (loop (cdr dls) (+ (* n b) (car dls)))])))

; convert a decimal number to a digital list in base b
(define (decimal-&gt; n b)
  (let loop ([n n] [dls '()])
    (cond
      [(= n 0) dls]
      [else
       (loop (quotient n b) (cons (remainder n b) dls))])))</code></pre>
<p>We're just about there. The next thing we want to be able to do is get strings of all of the bases from a given number. Something like this:</p>
<pre class="scheme"><code>; get all basis conversions for a number
(define (-&gt;all-bases n)
  (for/list ([b (in-range 2 65)])
    (dlist-&gt;string (decimal-&gt; n b))))</code></pre>
<p>So if you take <a href="https://en.wikipedia.org/wiki/Jenny's_number">867-5309/Jenny</a>:</p>
<pre class="scheme"><code>&gt; (-&gt;all-bases 8675309)
'("100001000101111111101101" "121022202021202" "201011333231" "4210102214"
  "505535245" "133511306" "41057755" "17282252" "8675309" "4995985"
  "2aa4525" "1a49926" "121b7ad" "b656de" "845fed" "61ed65" "4ab9bb"
  "39af64" "2e4859" "22cfik" "1f0g45" "1800a8" "123d75" "m55c9" "ipf7j"
  "g8k7k" "e35cd" "c7kdh" "al96t" "9c6bl" "88nvd" "7ada5" "6gok5" "5rbuy"
  "55xwt" "4n9zu" "463vn" "3t9qw" "3fm2t" "32zwB" "2x3EF" "2n4Cg" "2dB25"
  "2594t" "1H5Dv" "1Aqc2" "1ulft" "1oAa6" "1jk69" "1ekj5" "19AgJ" "15el4"
  "1153L" "Q7LN" "Nmkd" "KM8n" "IqOh" "Geb8" "E9Mt" "Cdrb" "AoQl" "yHMk"
  "x5/J")</code></pre>
<p>Then you can filter those using my <a href="http://blog.jverkamp.com/2012/10/11/dictionary-tries-in-racket">dictionary library</a>:</p>
<pre class="scheme"><code>; get a list of all bases that are also words
(define (-&gt;all-base-words dict n)
  (filter
   (lambda (word) (contains? dict word))
   (-&gt;all-bases n)))</code></pre>
<p>There aren't any in Jenny's number, but there are actually two in the example I gave earlier:</p>
<pre class="scheme"><code>&gt; (-&gt;all-base-words dict 8675309)
'()

&gt; (-&gt;all-base-words dict 44269)
'("aced" "fEe")</code></pre>
<p>(The dictionary is case-insensitive while the words are case-sensitive, so you get some funny looking words like <code>"fEe"</code>.)</p>
<p>Finally, as a bonus solution, here's a nice infinite stream of all possible words as a CSV file:</p>
<pre class="scheme"><code>; scan for numbers that turn into words
(define (scan dict)
  (for ([i (in-naturals)])
    (for ([b (in-range 2 65)]
          [word (in-list (-&gt;all-bases i))])
      (when (contains? dict word)
        (printf "~s,~s,~s\n" i b word)))))</code></pre>
<p>And here's an arbitrary slice:</p>
<pre class="scheme"><code>...
56672,47,"puB"
56673,60,"fIx"
56674,47,"puD"
56674,51,"lEd"
56674,64,"dRy"
56675,51,"lEe"
56677,39,"Baa"
56677,45,"rIm"
56677,47,"puG"
56677,51,"lEg"
56677,60,"fIB"
56679,51,"lEi"
56680,39,"Bad"
56680,45,"rIp"
56680,60,"fIE"
56681,51,"lEk"
56682,60,"fIG"
56682,61,"fed"
56682,62,"eKe"
56683,39,"Bag"
56683,61,"fee"
56684,39,"Bah"
56684,43,"usa"
56685,51,"lEo"
...</code></pre>
<p>If you'd like to try it out, you can download the entire source from my GitHub: - <a href="https://github.com/jpverkamp/small-projects/blob/master/blog/base-conversion-words.rkt" title="Base Conversion Words source on GitHub">Base Conversion Words source</a> - <a herf="https://github.com/jpverkamp/small-projects/blob/master/racket-libraries/dictionary.rkt" title="Racket Dictionary library source on GitHub">Racket Dictionary library source</a></p>
                </div>
                <div class="entry-footnotes">
                        <div id="footnotes"><ol></ol></div>
                </div>

                <div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = "jverkamp";
var disqus_title = "Numbers as words in arbitrary bases";
var disqus_url = "http://blog.jverkamp.com/2013/02/06/numbers-as-words-in-arbitrary-bases/";
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </article>

        <footer class="container" role="contentinfo">
                <nav class="navbar navbar-default" role="navigation"><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2013/02/06/the-147-puzzle">← The 147 Puzzle</a></li><li><a href="http://blog.jverkamp.com/category/archives">Archives</a></li><li><a href="http://blog.jverkamp.com/2013/02/07/aims-5-workshop-on-active-internet-measurements">AIMS-5 - Workshop on Active Internet Measurements →</a></li></ul><ul class="nav navbar-nav nav-justified"><li><a href="http://blog.jverkamp.com/2013/02/06/the-147-puzzle">← The 147 Puzzle</a></li><li><a href="http://blog.jverkamp.com/category/programming">Programming</a></li><li><a href="http://blog.jverkamp.com/2013/02/07/aims-5-workshop-on-active-internet-measurements">AIMS-5 - Workshop on Active Internet Measurements →</a></li></ul></nav>

                <div class="legal">
                        <a href="http://blog.jverkamp.com/feed/atom.xml">feed <img style="border: 0;" src="http://blog.jverkamp.com/rss.png" /></a><br />
                        All posts unless otherwise mentioned are licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" /></a><br />
                        Any source code unless otherwise mentioned is licensed under the <a href="http://directory.fsf.org/wiki/License:BSD_3Clause">3 clause BSD license</a>
                </div>
        </footer>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-53688146-1', 'auto');
ga('send', 'pageview');
</script>
</body>
</html>